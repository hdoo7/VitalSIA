"use strict";(self.webpackChunkEVA_libre=self.webpackChunkEVA_libre||[]).push([[833],{6833:(e,t,i)=>{i.r(t),i.d(t,{start:()=>c,stop:()=>g});const n=class{constructor(e,t){this.triggerPhrases=this.prepareTriggerPhrasesRegex(e),this.onTriggerDetected=t,this.recognition=null,this.isRecognizing=!1,this.initializeRecognition()}initializeRecognition(){const e=window.SpeechRecognition||window.webkitSpeechRecognition;e?(this.recognition=new e,this.recognition.lang="en-US",this.recognition.interimResults=!0,this.recognition.continuous=!0,this.recognition.onresult=e=>this.handleResult(e),this.recognition.onend=()=>this.handleEnd(),this.recognition.onerror=e=>this.handleError(e)):console.error("Speech recognition is not supported in this browser.")}prepareTriggerPhrasesRegex(e){const t=Array.isArray(e)?e.join("|"):e;return new RegExp(t.split(" ").join("\\s+"),"i")}start(){if(!this.isRecognizing&&this.recognition)try{this.recognition.start(),this.isRecognizing=!0,console.log("Speech recognition started.")}catch(e){console.log("Error starting speech recognition:",e)}}handleResult(e){const t=e.results[e.resultIndex],i=t[0].transcript;console.log("Heard: ".concat(i)),t.isFinal&&this.triggerPhrases.test(i)&&(console.log("Trigger phrase matched: ".concat(i)),this.onTriggerDetected(i))}handleEnd(){this.isRecognizing=!1,console.log("Speech recognition ended, attempting to restart..."),this.restartRecognition()}handleError(e){this.isRecognizing=!1,console.log("Speech recognition error, restarting."),"no-speech"!==e.error&&"audio-capture"!==e.error||this.restartRecognition()}restartRecognition(){setTimeout((()=>{this.isRecognizing||this.start()}),1e3)}};var o=i(32751);let r,s;function c(e,t){const{apiKey:i,triggerPhrases:c}=t;s=new o.A(e),r=new n(c,(async e=>{console.log("Detected text: ".concat(e));const t=await async function(e,t){return"Response to: ".concat(t)}(0,e);s.enqueueText(t)})),console.log("Starting speech recognition..."),r.start()}function g(){r&&r.stop(),s&&s.stopSpeech()}}}]);
//# sourceMappingURL=833.51053d18.chunk.js.map