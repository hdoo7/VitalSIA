/*! For license information please see main.2f401d5d.js.LICENSE.txt */
(()=>{var e={7174:(e,t,n)=>{"use strict";const i=n(5819);class r extends Error{constructor(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let o;super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,r),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);Object.defineProperty(this,"responseBody",{get:()=>(o||(o=this.arrayBuffer()),o)}),this.headers={};for(const[r,s]of e.headers.entries())this.headers[r.toLowerCase()]=s}}e.exports=i(((e,t,n,i,o)=>async function(s,a){let c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s=o+(s||"");let l=new URL(s);if(i||(i={}),l.username&&(i.Authorization="Basic "+btoa(l.username+":"+l.password),l=new URL(l.protocol+"//"+l.host+l.pathname+l.search)),"https:"!==l.protocol&&"http:"!==l.protocol)throw new Error("Unknown protocol, ".concat(l.protocol));if(a)if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||"string"===typeof a);else{if("object"!==typeof a)throw new Error("Unknown body type.");a=JSON.stringify(a),i["Content-Type"]="application/json"}c=new Headers({...i||{},...c});const u=await fetch(l,{method:t,headers:c,body:a});if(u.statusCode=u.status,!e.has(u.status))throw new r(u);return"json"===n?u.json():"buffer"===n?u.arrayBuffer():"string"===n?u.text():u}))},5819:e=>{"use strict";const t=new Set(["json","buffer","string"]);e.exports=e=>function(){const n=new Set;let i,r,o,s="";for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];return c.forEach((e=>{if("string"===typeof e)if(e.toUpperCase()===e){if(i){const t="Can't set method to ".concat(e,", already set to ").concat(i,".");throw new Error(t)}i=e}else if(e.startsWith("http:")||e.startsWith("https:"))s=e;else{if(!t.has(e))throw new Error("Unknown encoding, ".concat(e));r=e}else if("number"===typeof e)n.add(e);else{if("object"!==typeof e)throw new Error("Unknown type: ".concat(typeof e));if(Array.isArray(e)||e instanceof Set)e.forEach((e=>n.add(e)));else{if(o)throw new Error("Cannot set headers twice.");o=e}}})),i||(i="GET"),0===n.size&&n.add(200),e(n,i,r,o,s)}},122:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!==r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!==r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!==r--;){var s=o[r];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}},219:(e,t,n)=>{"use strict";var i=n(2086),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return i.isMemo(e)?s:a[e.$$typeof]||r}a[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[i.Memo]=s;var l=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,i){if("string"!==typeof n){if(f){var r=p(n);r&&r!==f&&e(t,r,i)}var s=u(n);d&&(s=s.concat(d(n)));for(var a=c(t),v=c(n),m=0;m<s.length;++m){var g=s[m];if(!o[g]&&(!i||!i[g])&&(!v||!v[g])&&(!a||!a[g])){var y=h(n,g);try{l(t,g,y)}catch(S){}}}}return t}},3452:e=>{function t(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function n(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,i,r){var o=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");"function"===typeof i&&(r=i,i={}),i=i||{},r=r||function(){},s.type=i.type||"text/javascript",s.charset=i.charset||"utf8",s.async=!("async"in i)||!!i.async,s.src=e,i.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(s,i.attrs),i.text&&(s.text=""+i.text),("onload"in s?t:n)(s,r),s.onload||t(s,r),o.appendChild(s)}},9611:(e,t,n)=>{e=n.nmd(e);var i="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",s="[object AsyncFunction]",a="[object Function]",c="[object GeneratorFunction]",l="[object Null]",u="[object Object]",d="[object Proxy]",h="[object Undefined]",p=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,v={};v["[object Float32Array]"]=v["[object Float64Array]"]=v["[object Int8Array]"]=v["[object Int16Array]"]=v["[object Int32Array]"]=v["[object Uint8Array]"]=v["[object Uint8ClampedArray]"]=v["[object Uint16Array]"]=v["[object Uint32Array]"]=!0,v[o]=v["[object Array]"]=v["[object ArrayBuffer]"]=v["[object Boolean]"]=v["[object DataView]"]=v["[object Date]"]=v["[object Error]"]=v[a]=v["[object Map]"]=v["[object Number]"]=v[u]=v["[object RegExp]"]=v["[object Set]"]=v["[object String]"]=v["[object WeakMap]"]=!1;var m="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,g="object"==typeof self&&self&&self.Object===Object&&self,y=m||g||Function("return this")(),S=t&&!t.nodeType&&t,b=S&&e&&!e.nodeType&&e,_=b&&b.exports===S,w=_&&m.process,x=function(){try{var e=b&&b.require&&b.require("util").types;return e||w&&w.binding&&w.binding("util")}catch(t){}}(),C=x&&x.isTypedArray;var E,P,T=Array.prototype,R=Function.prototype,M=Object.prototype,A=y["__core-js_shared__"],I=R.toString,k=M.hasOwnProperty,O=function(){var e=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),D=M.toString,L=I.call(Object),N=RegExp("^"+I.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),z=_?y.Buffer:void 0,F=y.Symbol,U=y.Uint8Array,B=z?z.allocUnsafe:void 0,j=(E=Object.getPrototypeOf,P=Object,function(e){return E(P(e))}),V=Object.create,H=M.propertyIsEnumerable,W=T.splice,G=F?F.toStringTag:void 0,q=function(){try{var e=ye(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),X=z?z.isBuffer:void 0,K=Math.max,J=Date.now,Y=ye(y,"Map"),$=ye(Object,"create"),Q=function(){function e(){}return function(t){if(!Ae(t))return{};if(V)return V(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Z(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ee(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ne(e){var t=this.__data__=new ee(e);this.size=t.size}function ie(e,t){var n=Ee(e),i=!n&&Ce(e),r=!n&&!i&&Te(e),o=!n&&!i&&!r&&ke(e),s=n||i||r||o,a=s?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],c=a.length;for(var l in e)!t&&!k.call(e,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Se(l,c))||a.push(l);return a}function re(e,t,n){(void 0!==n&&!xe(e[t],n)||void 0===n&&!(t in e))&&ae(e,t,n)}function oe(e,t,n){var i=e[t];k.call(e,t)&&xe(i,n)&&(void 0!==n||t in e)||ae(e,t,n)}function se(e,t){for(var n=e.length;n--;)if(xe(e[n][0],t))return n;return-1}function ae(e,t,n){"__proto__"==t&&q?q(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}Z.prototype.clear=function(){this.__data__=$?$(null):{},this.size=0},Z.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Z.prototype.get=function(e){var t=this.__data__;if($){var n=t[e];return n===i?void 0:n}return k.call(t,e)?t[e]:void 0},Z.prototype.has=function(e){var t=this.__data__;return $?void 0!==t[e]:k.call(t,e)},Z.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=$&&void 0===t?i:t,this},ee.prototype.clear=function(){this.__data__=[],this.size=0},ee.prototype.delete=function(e){var t=this.__data__,n=se(t,e);return!(n<0)&&(n==t.length-1?t.pop():W.call(t,n,1),--this.size,!0)},ee.prototype.get=function(e){var t=this.__data__,n=se(t,e);return n<0?void 0:t[n][1]},ee.prototype.has=function(e){return se(this.__data__,e)>-1},ee.prototype.set=function(e,t){var n=this.__data__,i=se(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},te.prototype.clear=function(){this.size=0,this.__data__={hash:new Z,map:new(Y||ee),string:new Z}},te.prototype.delete=function(e){var t=ge(this,e).delete(e);return this.size-=t?1:0,t},te.prototype.get=function(e){return ge(this,e).get(e)},te.prototype.has=function(e){return ge(this,e).has(e)},te.prototype.set=function(e,t){var n=ge(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},ne.prototype.clear=function(){this.__data__=new ee,this.size=0},ne.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ne.prototype.get=function(e){return this.__data__.get(e)},ne.prototype.has=function(e){return this.__data__.has(e)},ne.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ee){var i=n.__data__;if(!Y||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new te(i)}return n.set(e,t),this.size=n.size,this};var ce,le=function(e,t,n){for(var i=-1,r=Object(e),o=n(e),s=o.length;s--;){var a=o[ce?s:++i];if(!1===t(r[a],a,r))break}return e};function ue(e){return null==e?void 0===e?h:l:G&&G in Object(e)?function(e){var t=k.call(e,G),n=e[G];try{e[G]=void 0;var i=!0}catch(o){}var r=D.call(e);i&&(t?e[G]=n:delete e[G]);return r}(e):function(e){return D.call(e)}(e)}function de(e){return Ie(e)&&ue(e)==o}function he(e){return!(!Ae(e)||function(e){return!!O&&O in e}(e))&&(Re(e)?N:p).test(function(e){if(null!=e){try{return I.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function pe(e){if(!Ae(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=be(e),n=[];for(var i in e)("constructor"!=i||!t&&k.call(e,i))&&n.push(i);return n}function fe(e,t,n,i,r){e!==t&&le(t,(function(o,s){if(r||(r=new ne),Ae(o))!function(e,t,n,i,r,o,s){var a=_e(e,n),c=_e(t,n),l=s.get(c);if(l)return void re(e,n,l);var d=o?o(a,c,n+"",e,t,s):void 0,h=void 0===d;if(h){var p=Ee(c),f=!p&&Te(c),v=!p&&!f&&ke(c);d=c,p||f||v?Ee(a)?d=a:Ie(m=a)&&Pe(m)?d=function(e,t){var n=-1,i=e.length;t||(t=Array(i));for(;++n<i;)t[n]=e[n];return t}(a):f?(h=!1,d=function(e,t){if(t)return e.slice();var n=e.length,i=B?B(n):new e.constructor(n);return e.copy(i),i}(c,!0)):v?(h=!1,d=function(e,t){var n=t?function(e){var t=new e.constructor(e.byteLength);return new U(t).set(new U(e)),t}(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(c,!0)):d=[]:function(e){if(!Ie(e)||ue(e)!=u)return!1;var t=j(e);if(null===t)return!0;var n=k.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&I.call(n)==L}(c)||Ce(c)?(d=a,Ce(a)?d=function(e){return function(e,t,n,i){var r=!n;n||(n={});var o=-1,s=t.length;for(;++o<s;){var a=t[o],c=i?i(n[a],e[a],a,n,e):void 0;void 0===c&&(c=e[a]),r?ae(n,a,c):oe(n,a,c)}return n}(e,Oe(e))}(a):Ae(a)&&!Re(a)||(d=function(e){return"function"!=typeof e.constructor||be(e)?{}:Q(j(e))}(c))):h=!1}var m;h&&(s.set(c,d),r(d,c,i,o,s),s.delete(c));re(e,n,d)}(e,t,s,n,fe,i,r);else{var a=i?i(_e(e,s),o,s+"",e,t,r):void 0;void 0===a&&(a=o),re(e,s,a)}}),Oe)}function ve(e,t){return we(function(e,t,n){return t=K(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,o=K(i.length-t,0),s=Array(o);++r<o;)s[r]=i[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=i[r];return a[t]=n(s),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,a)}}(e,t,Ne),e+"")}var me=q?function(e,t){return q(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Ne;function ge(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function ye(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return he(n)?n:void 0}function Se(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&f.test(e))&&e>-1&&e%1==0&&e<t}function be(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||M)}function _e(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var we=function(e){var t=0,n=0;return function(){var i=J(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(me);function xe(e,t){return e===t||e!==e&&t!==t}var Ce=de(function(){return arguments}())?de:function(e){return Ie(e)&&k.call(e,"callee")&&!H.call(e,"callee")},Ee=Array.isArray;function Pe(e){return null!=e&&Me(e.length)&&!Re(e)}var Te=X||function(){return!1};function Re(e){if(!Ae(e))return!1;var t=ue(e);return t==a||t==c||t==s||t==d}function Me(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function Ae(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ie(e){return null!=e&&"object"==typeof e}var ke=C?function(e){return function(t){return e(t)}}(C):function(e){return Ie(e)&&Me(e.length)&&!!v[ue(e)]};function Oe(e){return Pe(e)?ie(e,!0):pe(e)}var De,Le=(De=function(e,t,n,i){fe(e,t,n,i)},ve((function(e,t){var n=-1,i=t.length,r=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(r=De.length>3&&"function"==typeof r?(i--,r):void 0,o&&function(e,t,n){if(!Ae(n))return!1;var i=typeof t;return!!("number"==i?Pe(n)&&Se(t,n.length):"string"==i&&t in n)&&xe(n[t],e)}(t[0],t[1],o)&&(r=i<3?void 0:r,i=1),e=Object(e);++n<i;){var s=t[n];s&&De(e,s,n,r)}return e})));function Ne(e){return e}e.exports=Le},8685:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});new(n(9859).AgentConfig),r(n(8040),t)},1922:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLoggingListener=void 0;const s=o(n(2250)),a=n(9099),c=n(260);t.ConsoleLoggingListener=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.LogLevel.None;this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}set logPath(e){c.Contracts.throwIfNullOrUndefined(s.openSync,"\nFile System access not available"),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){const t=this.toString(e);if(this.privLogPath&&s.writeFileSync(this.privLogPath,t+"\n",{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case a.LogLevel.Debug:console.debug(t);break;case a.LogLevel.Info:console.info(t);break;case a.LogLevel.Warning:console.warn(t);break;case a.LogLevel.Error:console.error(t);break;default:console.log(t)}}}toString(e){const t=["".concat(e.eventTime),"".concat(e.name)],n=e;for(const i in n)if(i&&e.hasOwnProperty(i)&&"eventTime"!==i&&"eventType"!==i&&"eventId"!==i&&"name"!==i&&"constructor"!==i){const e=n[i];let r="<NULL>";void 0!==e&&null!==e&&(r="number"===typeof e||"string"===typeof e?e.toString():JSON.stringify(e)),t.push("".concat(i,": ").concat(r))}return t.join(" | ")}}},2277:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(1922),t),r(n(2371),t),r(n(4218),t),r(n(9868),t),r(n(3912),t),r(n(2965),t),r(n(4955),t),r(n(4057),t),r(n(7882),t),r(n(2588),t),r(n(3593),t)},9868:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileAudioSource=void 0;const i=n(9859),r=n(2307),o=n(4175);t.FileAudioSource=class{constructor(e,t,n){this.privStreams={},this.privHeaderEnd=44,this.privId=n||r.createNoDashGuid(),this.privEvents=new r.EventSource,this.privSource=e,"undefined"!==typeof window&&"undefined"!==typeof Blob&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=t||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new r.AudioSourceErrorEvent(e,"")),Promise.reject(e)}this.onEvent(new r.AudioSourceInitializingEvent(this.privId)),this.onEvent(new r.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(e){this.onEvent(new r.AudioStreamNodeAttachingEvent(this.privId,e));const t=await this.upload(e);return this.onEvent(new r.AudioStreamNodeAttachedEvent(this.privId,e)),Promise.resolve({detach:async()=>{t.readEnded(),delete this.privStreams[e],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,e)),await this.turnOff()},id:()=>e,read:()=>t.read()})}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&!t.isClosed&&t.close()}return this.onEvent(new r.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then((e=>Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:i.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:i.type.File})))}readHeader(){const e=this.privSource.slice(0,4296),t=new r.Deferred,n=e=>{const n=new DataView(e),i=e=>String.fromCharCode(n.getUint8(e),n.getUint8(e+1),n.getUint8(e+2),n.getUint8(e+3));if("RIFF"!==i(0))return void t.reject("Invalid WAV header in file, RIFF was not found");if("WAVE"!==i(8)||"fmt "!==i(12))return void t.reject("Invalid WAV header in file, WAVEfmt was not found");const r=n.getInt32(16,!0),s=n.getUint16(22,!0),a=n.getUint32(24,!0),c=n.getUint16(34,!0);let l=36+Math.max(r-16,0);for(;"data"!==i(l);l+=2)if(l>4288)return void t.reject("Invalid WAV header in file, data block was not found");this.privHeaderEnd=l+8,t.resolve(o.AudioStreamFormat.getWaveFormatPCM(a,c,s))};if("undefined"!==typeof window&&"undefined"!==typeof Blob&&e instanceof Blob){const t=new FileReader;t.onload=e=>{const t=e.target.result;n(t)},t.readAsArrayBuffer(e)}else{const t=e;n(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength))}return t.promise}async upload(e){const t=t=>{const n="Error occurred while processing '".concat(this.privFilename,"'. ").concat(t);throw this.onEvent(new r.AudioStreamNodeErrorEvent(this.privId,e,n)),new Error(n)};try{await this.turnOn();const n=await this.privAudioFormatPromise,i=new r.ChunkedArrayBufferStream(n.avgBytesPerSec/10,e);this.privStreams[e]=i;const o=this.privSource.slice(this.privHeaderEnd),s=e=>{i.isClosed||(i.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),i.close())};if("undefined"!==typeof window&&"undefined"!==typeof Blob&&o instanceof Blob){const e=new FileReader;e.onerror=e=>t(e.toString()),e.onload=e=>{const t=e.target.result;s(t)},e.readAsArrayBuffer(o)}else{const e=o;s(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}return i}catch(n){t(n)}}onEvent(e){this.privEvents.onEvent(e),r.Events.instance.onEvent(e)}}},2371:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4218:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MicAudioSource=t.AudioWorkletSourceURLPropertyName=void 0;const i=n(9859),r=n(2307),o=n(4175);t.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class s{constructor(e,t,n,i){this.privRecorder=e,this.deviceId=t,this.privStreams={},this.privOutputChunkSize=s.AUDIOFORMAT.avgBytesPerSec/10,this.privId=n||r.createNoDashGuid(),this.privEvents=new r.EventSource,this.privMediaStream=i||null,this.privIsClosing=!1}get format(){return Promise.resolve(s.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new r.Deferred;try{this.createAudioContext()}catch(n){if(n instanceof Error){const e=n;this.privInitializeDeferral.reject(e.name+": "+e.message)}else this.privInitializeDeferral.reject(n);return this.privInitializeDeferral.promise}const e=window.navigator;let t=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(t=(t,n,i)=>{e.mediaDevices.getUserMedia(t).then(n).catch(i)}),t){const e=()=>{this.onEvent(new r.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):t({audio:!this.deviceId||{deviceId:this.deviceId},video:!1},(e=>{this.privMediaStream=e,this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()}),(e=>{const t="Error occurred during microphone initialization: ".concat(e);this.privInitializeDeferral.reject(t),this.onEvent(new r.AudioSourceErrorEvent(this.privId,t))}))};"suspended"===this.privContext.state?this.privContext.resume().then(e).catch((e=>{this.privInitializeDeferral.reject("Failed to initialize audio context: ".concat(e))})):e()}else{const e="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(e),this.onEvent(new r.AudioSourceErrorEvent(e,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(e){return this.onEvent(new r.AudioStreamNodeAttachingEvent(this.privId,e)),this.listen(e).then((t=>(this.onEvent(new r.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:async()=>(t.readEnded(),delete this.privStreams[e],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()),id:()=>e,read:()=>t.read()})))}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,e)))}async turnOff(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&t.close()}this.onEvent(new r.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then((e=>({bitspersample:s.AUDIOFORMAT.bitsPerSample,channelcount:s.AUDIOFORMAT.channels,connectivity:i.connectivity.Unknown,manufacturer:"Speech SDK",model:e,samplerate:s.AUDIOFORMAT.samplesPerSec,type:i.type.Microphones})))}setProperty(e,n){if(e!==t.AudioWorkletSourceURLPropertyName)throw new Error("Property '"+e+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(n)}getMicrophoneLabel(){const e="microphone";if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(e);this.privMicrophoneLabel=e;const t=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===t)return Promise.resolve(this.privMicrophoneLabel);const n=new r.Deferred;return navigator.mediaDevices.enumerateDevices().then((e=>{for(const n of e)if(n.deviceId===t){this.privMicrophoneLabel=n.label;break}n.resolve(this.privMicrophoneLabel)}),(()=>n.resolve(this.privMicrophoneLabel))),n.promise}async listen(e){await this.turnOn();const t=new r.ChunkedArrayBufferStream(this.privOutputChunkSize,e);this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(n){throw this.onEvent(new r.AudioStreamNodeErrorEvent(this.privId,e,n)),n}return t}onEvent(e){this.privEvents.onEvent(e),r.Events.instance.onEvent(e)}createAudioContext(){this.privContext||(this.privContext=o.AudioStreamFormatImpl.getAudioContext(s.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):null!==this.privContext&&"running"===this.privContext.state&&await this.privContext.suspend()}}t.MicAudioSource=s,s.AUDIOFORMAT=o.AudioStreamFormat.getDefaultInputFormat()},3912:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PcmRecorder=void 0;const i=n(2307);t.PcmRecorder=class{constructor(e){this.privStopInputOnRelease=e}record(e,t,n){const r=new i.RiffPcmEncoder(e.sampleRate,16e3),o=e.createMediaStreamSource(t),s=()=>{const i=(()=>{let t=0;try{return e.createScriptProcessor(t,1,1)}catch(n){t=2048;let i=e.sampleRate;for(;t<16384&&i>=32e3;)t<<=1,i>>=1;return e.createScriptProcessor(t,1,1)}})();i.onaudioprocess=e=>{const t=e.inputBuffer.getChannelData(0);if(n&&!n.isClosed){const e=r.encode(t);e&&n.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},o.connect(i),i.connect(e.destination),this.privMediaResources={scriptProcessorNode:i,source:o,stream:t}},a=!!this.privSpeechProcessorScript&&"ignore"===this.privSpeechProcessorScript.toLowerCase();if(e.audioWorklet&&!a){if(!this.privSpeechProcessorScript){const e=new Blob(["class SP extends AudioWorkletProcessor {\n                    constructor(options) {\n                      super(options);\n                    }\n                    process(inputs, outputs) {\n                      const input = inputs[0];\n                      const output = [];\n                      for (let channel = 0; channel < input.length; channel += 1) {\n                        output[channel] = input[channel];\n                      }\n                      this.port.postMessage(output[0]);\n                      return true;\n                    }\n                  }\n                  registerProcessor('speech-processor', SP);"],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(e)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then((()=>{const i=new AudioWorkletNode(e,"speech-processor");i.port.onmessage=e=>{const t=e.data;if(n&&!n.isClosed){const e=r.encode(t);e&&n.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},o.connect(i),i.connect(e.destination),this.privMediaResources={scriptProcessorNode:i,source:o,stream:t}})).catch((()=>{s()}))}else try{s()}catch(c){throw new Error("Unable to start audio worklet node for PCMRecorder: ".concat(c))}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach((e=>e.stop())),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}}},7882:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyInfo=void 0;const i=n(8040);class r{constructor(e,t,n,i){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=n,this.privProxyPassword=i}static fromParameters(e){return new r(e.getProperty(i.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(e.getProperty(i.PropertyId.SpeechServiceConnection_ProxyPort),10),e.getProperty(i.PropertyId.SpeechServiceConnection_ProxyUserName),e.getProperty(i.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}}t.ProxyInfo=r},4057:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayableAudioNode=void 0;t.ReplayableAudioNode=class{constructor(e,t){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=t}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&0!==this.privBuffers.length){const e=this.privReplayOffset-this.privBufferStartOffset;let t=Math.round(e*this.privBytesPerSecond*1e-7);0!==t%2&&t++;let n=0;for(;n<this.privBuffers.length&&t>=this.privBuffers[n].chunk.buffer.byteLength;)t-=this.privBuffers[n++].chunk.buffer.byteLength;if(n<this.privBuffers.length){const e=this.privBuffers[n].chunk.buffer.slice(t);return this.privReplayOffset+=e.byteLength/this.privBytesPerSecond*1e7,n===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:e,isEnd:!1,timeReceived:this.privBuffers[n].chunk.timeReceived})}}return this.privAudioNode.read().then((e=>(e&&e.buffer&&(this.privBuffers.push(new n(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e)))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(void 0===this.privBuffers||0===this.privBuffers.length)return;this.privLastShrinkOffset=e;const t=e-this.privBufferStartOffset;let n=Math.round(t*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&n>=this.privBuffers[i].chunk.buffer.byteLength;)n-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-n/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(const t of this.privBuffers){const n=t.byteOffset/this.privBytesPerSecond*1e7,i=n+t.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=n&&e<=i)return t.chunk.timeReceived}return 0}};class n{constructor(e,t,n){this.chunk=e,this.serial=t,this.byteOffset=n}}},3593:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestConfigBase=void 0;class n{static get requestOptions(){return n.privDefaultRequestOptions}static get configParams(){return n.privDefaultParams}static get restErrors(){return n.privRestErrors}}t.RestConfigBase=n,n.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},n.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},n.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"}},2588:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RestMessageAdapter=t.RestRequestType=void 0;const r=i(n(7174)),o=n(2307);var s;!function(e){e.Get="GET",e.Post="POST",e.Delete="DELETE",e.File="file"}(s=t.RestRequestType||(t.RestRequestType={}));t.RestMessageAdapter=class{constructor(e){if(!e)throw new o.ArgumentNullError("configParams");this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}static extractHeaderValue(e,t){let n="";try{const i=t.trim().split(/[\r\n]+/),r={};i.forEach((e=>{const t=e.split(": "),n=t.shift().toLowerCase(),i=t.join(": ");r[n]=i})),n=r[e.toLowerCase()]}catch(i){}return n}set options(e){this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}setHeaders(e,t){this.privHeaders[e]=t}request(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const a=new o.Deferred,c=e===s.File?"POST":e,l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e;return{data:JSON.stringify(t),headers:JSON.stringify(e.headers),json:t,ok:e.statusCode>=200&&e.statusCode<300,status:e.statusCode,statusText:t.error?t.error.message:n.statusText?n.statusText:n.statusMessage}};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),e===s.Post&&i&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),(i=>{r.default(t,c,this.privHeaders,200,201,202,204,400,401,402,403,404)(""===this.queryParams(n)?"":"?".concat(this.queryParams(n)),i).then((async t=>{if(e===s.Delete||204===t.statusCode)a.resolve(l(t));else try{const e=await t.json();a.resolve(l(t,e))}catch{a.resolve(l(t))}})).catch((e=>{a.reject(e)}))})(i),a.promise}queryParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t]))).join("&")}}},2965:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketConnection=void 0;const i=n(2307),r=n(4955);t.WebsocketConnection=class{constructor(e,t,n,o,s){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6?arguments[6]:void 0;if(this.privIsDisposed=!1,!e)throw new i.ArgumentNullError("uri");if(!o)throw new i.ArgumentNullError("messageFormatter");this.privMessageFormatter=o;let l="",u=0;if(t)for(const i in t)if(i){l+=0===u&&-1===e.indexOf("?")?"?":"&";l+=encodeURIComponent(i);let n=t[i];n&&(n=encodeURIComponent(n),l+="=".concat(n)),u++}if(n)for(const i in n)if(i){l+=0===u&&-1===e.indexOf("?")?"?":"&";const t=encodeURIComponent(n[i]);l+="".concat(i,"=").concat(t),u++}this.privUri=e+l,this.privId=c||i.createNoDashGuid(),this.privConnectionMessageAdapter=new r.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,s,n,a)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}},4955:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketMessageAdapter=void 0;const a=o(n(8632)),c=o(n(3678)),l=s(n(6308)),u=s(n(9645)),d=s(n(4573)),h=n(8643),p=n(2307);class f{constructor(e,t,n,i,r,o){if(!e)throw new p.ArgumentNullError("uri");if(!n)throw new p.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new p.EventSource,this.privConnectionId=t,this.privMessageFormatter=n,this.privConnectionState=p.ConnectionState.None,this.privUri=e,this.privHeaders=r,this.privEnableCompression=o,this.privHeaders[h.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===p.ConnectionState.Disconnected)return Promise.reject("Cannot open a connection that is in ".concat(this.privConnectionState," state"));if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new p.Deferred,this.privCertificateValidatedDeferral=new p.Deferred,this.privConnectionState=p.ConnectionState.Connecting;try{if("undefined"===typeof WebSocket||f.forceNpmWebSocket){var e,t;const n={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),n.agent=this.getAgent();let i=new URL(this.privUri).protocol;"wss:"===(null===(e=i)||void 0===e?void 0:e.toLocaleLowerCase())?i="https:":"ws:"===(null===(t=i)||void 0===t?void 0:t.toLocaleLowerCase())&&(i="http:"),n.agent.protocol=i,this.privWebsocketClient=new d.default(this.privUri,n)}else this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new p.Queue,this.privDisconnectDeferral=new p.Deferred,this.privSendMessageQueue=new p.Queue,this.processSendQueue().catch((e=>{p.Events.instance.onEvent(new p.BackgroundEvent(e))}))}catch(n){return this.privConnectionEstablishDeferral.resolve(new p.ConnectionOpenResponse(500,n)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new p.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then((()=>{this.privConnectionState=p.ConnectionState.Connected,this.onEvent(new p.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new p.ConnectionOpenResponse(200,""))}),(e=>{this.privConnectionEstablishDeferral.reject(e)}))},this.privWebsocketClient.onerror=e=>{this.onEvent(new p.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===p.ConnectionState.Connecting?(this.privConnectionState=p.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new p.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=p.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new p.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch((e=>{p.Events.instance.onEvent(new p.BackgroundEvent(e))}))},this.privWebsocketClient.onmessage=e=>{const t=(new Date).toISOString();if(this.privConnectionState===p.ConnectionState.Connected){const n=new p.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(n.promise),e.data instanceof ArrayBuffer){const i=new p.RawWebsocketMessage(p.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(i).then((e=>{this.onEvent(new p.ConnectionMessageReceivedEvent(this.privConnectionId,t,e)),n.resolve(e)}),(e=>{n.reject("Invalid binary message format. Error: ".concat(e))}))}else{const i=new p.RawWebsocketMessage(p.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(i).then((e=>{this.onEvent(new p.ConnectionMessageReceivedEvent(this.privConnectionId,t,e)),n.resolve(e)}),(e=>{n.reject("Invalid text message format. Error: ".concat(e))}))}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==p.ConnectionState.Connected)return Promise.reject("Cannot send on connection that is in ".concat(p.ConnectionState[this.privConnectionState]," state"));const t=new p.Deferred,n=new p.Deferred;return this.privSendMessageQueue.enqueueFromPromise(n.promise),this.privMessageFormatter.fromConnectionMessage(e).then((i=>{n.resolve({Message:e,RawWebsocketMessage:i,sendStatusDeferral:t})}),(e=>{n.reject("Error formatting the message. ".concat(e))})),t.promise}read(){return this.privConnectionState!==p.ConnectionState.Connected?Promise.reject("Cannot read on connection that is in ".concat(this.privConnectionState," state")):this.privReceivingMessageQueue.dequeue()}close(e){return this.privWebsocketClient?(this.privConnectionState!==p.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve()}get events(){return this.privConnectionEvents}sendRawMessage(e){try{return e?(this.onEvent(new p.ConnectionMessageSentEvent(this.privConnectionId,(new Date).toISOString(),e.Message)),this.isWebsocketOpen?(this.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(t){return Promise.reject("websocket send error: ".concat(t))}}async onClose(e,t){const n="Connection closed. ".concat(e,": ").concat(t);this.privConnectionState=p.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose((()=>{}),n),await this.privSendMessageQueue.drainAndDispose((e=>{e.sendStatusDeferral.reject(n)}),n)}async processSendQueue(){for(;;){const t=this.privSendMessageQueue.dequeue(),n=await t;if(!n)return;try{await this.sendRawMessage(n),n.sendStatusDeferral.resolve()}catch(e){n.sendStatusDeferral.reject(e)}}}onEvent(e){this.privConnectionEvents.onEvent(e),p.Events.instance.onEvent(e)}getAgent(){const e=new l.default.Agent(this.createConnection);return void 0!==this.proxyInfo&&void 0!==this.proxyInfo.HostName&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){const t={host:e.HostName,port:e.Port};e.UserName?t.headers={"Proxy-Authentication":"Basic "+new Buffer("".concat(e.UserName,":").concat(void 0===e.Password?"":e.Password)).toString("base64")}:t.headers={},t.headers.requestOCSP="true";return new u.default(t)}createConnection(e,t){let n;if(t={...t,requestOCSP:!0,servername:t.host},this.proxyInfo){const i=f.GetProxyAgent(this.proxyInfo);n=new Promise(((n,r)=>{i.callback(e,t,((e,t)=>{e?r(e):n(t)}))}))}else n=t.secureEndpoint?Promise.resolve(c.connect(t)):Promise.resolve(a.connect(t));return n}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}t.WebsocketMessageAdapter=f,f.forceNpmWebSocket=!1},3355:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddedLmIntent=void 0;t.AddedLmIntent=class{constructor(e,t){this.modelImpl=e,this.intentName=t}}},5619:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AgentConfig=void 0;t.AgentConfig=class{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}},9290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarSynthesisAdapter=void 0;const i=n(8040),r=n(9859);class o extends r.SynthesisAdapterBase{constructor(e,t,n,i,r){super(e,t,n,void 0),this.privAvatarSynthesizer=i,this.privSynthesizer=i,this.privAvatarConfig=r}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var e,t,n,r,o,s,a,c;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:null===(e=this.privAvatarConfig.videoFormat)||void 0===e?void 0:e.bitrate,codec:null===(t=this.privAvatarConfig.videoFormat)||void 0===t?void 0:t.codec,crop:{bottomRight:{x:null===(n=this.privAvatarConfig.videoFormat)||void 0===n||null===(n=n.cropRange)||void 0===n||null===(n=n.bottomRight)||void 0===n?void 0:n.x,y:null===(r=this.privAvatarConfig.videoFormat)||void 0===r||null===(r=r.cropRange)||void 0===r||null===(r=r.bottomRight)||void 0===r?void 0:r.y},topLeft:{x:null===(o=this.privAvatarConfig.videoFormat)||void 0===o||null===(o=o.cropRange)||void 0===o||null===(o=o.topLeft)||void 0===o?void 0:o.x,y:null===(s=this.privAvatarConfig.videoFormat)||void 0===s||null===(s=s.cropRange)||void 0===s||null===(s=s.topLeft)||void 0===s?void 0:s.y}},resolution:{height:null===(a=this.privAvatarConfig.videoFormat)||void 0===a?void 0:a.height,width:null===(c=this.privAvatarConfig.videoFormat)||void 0===c?void 0:c.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(e){if(this.privAvatarSynthesizer.avatarEventReceived){const n=new i.AvatarEventArgs(e.Data.Offset,e.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,n)}catch(t){}}}}t.AvatarSynthesisAdapter=o},2070:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CognitiveSubscriptionKeyAuthentication=void 0;const i=n(2307),r=n(8643),o=n(7339);t.CognitiveSubscriptionKeyAuthentication=class{constructor(e){if(!e)throw new i.ArgumentNullError("subscriptionKey");this.privAuthInfo=new o.AuthInfo(r.HeaderNames.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}}},7487:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CognitiveTokenAuthentication=void 0;const i=n(2307),r=n(7339),o=n(8643);class s{constructor(e,t){if(!e)throw new i.ArgumentNullError("fetchCallback");if(!t)throw new i.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}fetch(e){return this.privFetchCallback(e).then((e=>new r.AuthInfo(o.HeaderNames.Authorization,void 0===e?void 0:s.privTokenPrefix+e)))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then((e=>new r.AuthInfo(o.HeaderNames.Authorization,void 0===e?void 0:s.privTokenPrefix+e)))}}t.CognitiveTokenAuthentication=s,s.privTokenPrefix="Bearer "},2679:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionFactoryBase=void 0;const i=n(9859),r=n(8040),o=n(7237);t.ConnectionFactoryBase=class{static getHostSuffix(e){if(e){if(e.toLowerCase().startsWith("china"))return".azure.cn";if(e.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(e,t,n){new Map([[r.PropertyId.Speech_SegmentationSilenceTimeoutMs,o.QueryParameterNames.SegmentationSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_EnableAudioLogging,o.QueryParameterNames.EnableAudioLogging],[r.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,o.QueryParameterNames.EndSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,o.QueryParameterNames.InitialSilenceTimeoutMs],[r.PropertyId.SpeechServiceResponse_PostProcessingOption,o.QueryParameterNames.Postprocessing],[r.PropertyId.SpeechServiceResponse_ProfanityOption,o.QueryParameterNames.Profanity],[r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,o.QueryParameterNames.EnableWordLevelTimestamps],[r.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,o.QueryParameterNames.StableIntermediateThreshold]]).forEach(((i,r)=>{this.setUrlParameter(r,i,e,t,n)}));const s=JSON.parse(e.parameters.getProperty(i.ServicePropertiesPropertyName,"{}"));Object.keys(s).forEach((e=>{t[e]=s[e]}))}setUrlParameter(e,t,n,i,r){const o=n.parameters.getProperty(e,void 0);!o||r&&-1!==r.search(t)||(i[t]=o.toLocaleLowerCase())}}},8588:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationServiceRecognizer=void 0;const i=n(8040),r=n(9859);class o extends r.ServiceRecognizerBase{constructor(e,t,n,i,r){super(e,t,n,i,r),this.handleSpeechPhraseMessage=async e=>this.handleSpeechPhrase(e),this.handleSpeechHypothesisMessage=e=>this.handleSpeechHypothesis(e)}processTypeSpecificMessages(e){}handleRecognizedCallback(e,t,n){}handleRecognizingCallback(e,t,n){}async processSpeechMessages(e){let t=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(e.textBody),t=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(e.textBody),t=!0}return t}cancelRecognition(e,t,n,i,r){}async handleSpeechPhrase(e){const t=r.SimpleSpeechPhrase.fromJSON(e),n=r.EnumTranslation.implTranslateRecognitionResult(t.RecognitionStatus);let o;const s=new i.PropertyCollection;s.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,e);const a=t.Offset+this.privRequestSession.currentTurnAudioOffset;let c=a;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+t.Offset+t.Duration),i.ResultReason.Canceled===n){const e=r.EnumTranslation.implTranslateCancelResult(t.RecognitionStatus),n=r.EnumTranslation.implTranslateCancelErrorCode(t.RecognitionStatus);await this.cancelRecognitionLocal(e,n,r.EnumTranslation.implTranslateErrorDetails(n))}else if(!this.privRequestSession.isSpeechEnded||n!==i.ResultReason.NoMatch||t.RecognitionStatus===r.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(r.OutputFormatPropertyName)===i.OutputFormat[i.OutputFormat.Simple])o=new i.SpeechRecognitionResult(this.privRequestSession.requestId,n,t.DisplayText,t.Duration,a,t.Language,t.LanguageDetectionConfidence,t.SpeakerId,void 0,e,s);else{const t=r.DetailedSpeechPhrase.fromJSON(e),a=t.Offset+this.privRequestSession.currentTurnAudioOffset,l=t.getJsonWithCorrectedOffsets(a);o=new i.SpeechRecognitionResult(this.privRequestSession.requestId,n,t.Text,t.Duration,a,t.Language,t.LanguageDetectionConfidence,t.SpeakerId,void 0,l,s),c=o.offset}this.handleRecognizedCallback(o,c,this.privRequestSession.sessionId)}}handleSpeechHypothesis(e){const t=r.SpeechHypothesis.fromJSON(e),n=t.Offset+this.privRequestSession.currentTurnAudioOffset,o=new i.PropertyCollection;o.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,e);const s=new i.SpeechRecognitionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,t.Text,t.Duration,n,t.Language,t.LanguageDetectionConfidence,t.SpeakerId,void 0,e,o);this.privRequestSession.onHypothesis(n),this.handleRecognizingCallback(s,t.Duration,this.privRequestSession.sessionId)}}t.ConversationServiceRecognizer=o},4554:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriberConnectionFactory=void 0;const i=n(2277),r=n(8040),o=n(9859),s=n(2679),a=n(9859),c=n(8643),l=n(7237);class u extends s.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(e,t,n){let o=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const u=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,void 0),d=s.ConnectionFactoryBase.getHostSuffix(u),h=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+u+".stt.speech"+d),p={},f=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),v=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);f?o&&-1!==o.search(l.QueryParameterNames.CustomSpeechDeploymentId)||(p[l.QueryParameterNames.CustomSpeechDeploymentId]=f):v&&(o&&-1!==o.search(l.QueryParameterNames.Language)||(p[l.QueryParameterNames.Language]=v)),void 0!==e.autoDetectSourceLanguages&&(p[l.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(e,p,o),o||(o="".concat(h).concat(this.universalUri));const m={};void 0!==t.token&&""!==t.token&&(m[t.headerName]=t.token),m[c.HeaderNames.ConnectionId]=n;const g="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),y=new i.WebsocketConnection(o,p,m,new a.WebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),g,n),S=y.uri;return e.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,S),y}setV2UrlParams(e,t,n){new Map([[r.PropertyId.Speech_SegmentationSilenceTimeoutMs,l.QueryParameterNames.SegmentationSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_EnableAudioLogging,l.QueryParameterNames.EnableAudioLogging],[r.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,l.QueryParameterNames.EndSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,l.QueryParameterNames.InitialSilenceTimeoutMs],[r.PropertyId.SpeechServiceResponse_PostProcessingOption,l.QueryParameterNames.Postprocessing],[r.PropertyId.SpeechServiceResponse_ProfanityOption,l.QueryParameterNames.Profanity],[r.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,l.QueryParameterNames.StableIntermediateThreshold]]).forEach(((i,r)=>{this.setUrlParameter(r,i,e,t,n)}));const i=JSON.parse(e.parameters.getProperty(o.ServicePropertiesPropertyName,"{}"));Object.keys(i).forEach((e=>{t[e]=i[e]}))}}t.ConversationTranscriberConnectionFactory=u},1632:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionServiceRecognizer=void 0;const i=n(8040),r=n(9859);class o extends r.ServiceRecognizerBase{constructor(e,t,n,i,r){super(e,t,n,i,r),this.privConversationTranscriber=r,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const e=this.privSpeechContext.getSection("phraseDetection");e.mode="Conversation";const t={mode:"Anonymous"};t.audioSessionId=this.privDiarizationSessionId,t.audioOffsetMs=0,e.speakerDiarization=t,this.privSpeechContext.setSection("phraseDetection",e)}}async processTypeSpecificMessages(e){let t;const n=new i.PropertyCollection;n.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let o=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const a=r.SpeechHypothesis.fromJSON(e.textBody),c=a.Offset+this.privRequestSession.currentTurnAudioOffset;t=new i.ConversationTranscriptionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,a.Text,a.Duration,c,a.Language,a.LanguageDetectionConfidence,void 0,void 0,e.textBody,n),this.privRequestSession.onHypothesis(c);const l=new i.ConversationTranscriptionEventArgs(t,a.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,l)}catch(s){}o=!0;break;case"speech.phrase":const u=r.SimpleSpeechPhrase.fromJSON(e.textBody),d=r.EnumTranslation.implTranslateRecognitionResult(u.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+u.Offset+u.Duration),i.ResultReason.Canceled===d){const e=r.EnumTranslation.implTranslateCancelResult(u.RecognitionStatus),t=r.EnumTranslation.implTranslateCancelErrorCode(u.RecognitionStatus);await this.cancelRecognitionLocal(e,t,r.EnumTranslation.implTranslateErrorDetails(t))}else if(!this.privRequestSession.isSpeechEnded||d!==i.ResultReason.NoMatch||u.RecognitionStatus===r.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(r.OutputFormatPropertyName)===i.OutputFormat[i.OutputFormat.Simple])t=new i.ConversationTranscriptionResult(this.privRequestSession.requestId,d,u.DisplayText,u.Duration,u.Offset+this.privRequestSession.currentTurnAudioOffset,u.Language,u.LanguageDetectionConfidence,u.SpeakerId,void 0,e.textBody,n);else{const o=r.DetailedSpeechPhrase.fromJSON(e.textBody),s=o.Offset+this.privRequestSession.currentTurnAudioOffset,a=o.getJsonWithCorrectedOffsets(s);t=new i.ConversationTranscriptionResult(this.privRequestSession.requestId,d,o.RecognitionStatus===r.RecognitionStatus.Success?o.NBest[0].Display:void 0,o.Duration,s,o.Language,o.LanguageDetectionConfidence,u.SpeakerId,void 0,a,n)}const o=new i.ConversationTranscriptionEventArgs(t,t.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,o)}catch(s){}}o=!0}return o}cancelRecognition(e,t,n,o,s){if((new i.PropertyCollection).setProperty(r.CancellationErrorCodePropertyName,i.CancellationErrorCode[o]),this.privConversationTranscriber.canceled){const t=new i.ConversationTranscriptionCanceledEventArgs(n,s,o,void 0,e);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,t)}catch{}}}}t.ConversationTranscriptionServiceRecognizer=o},8401:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogConnectionFactory=void 0;const i=n(2277),r=n(9859),o=n(8040),s=n(2679),a=n(9859),c=n(8643),l=n(7237);class u extends s.ConnectionFactoryBase{create(e,t,n){const d=e.parameters.getProperty(o.PropertyId.Conversation_ApplicationId,""),h=e.parameters.getProperty(o.PropertyId.Conversation_DialogType),p=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Region),f=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),v=e.parameters.getProperty(o.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),m={};m[c.HeaderNames.ConnectionId]=n,m[l.QueryParameterNames.Format]=e.parameters.getProperty(r.OutputFormatPropertyName,o.OutputFormat[o.OutputFormat.Simple]).toLowerCase(),m[l.QueryParameterNames.Language]=f,m[l.QueryParameterNames.RequestBotStatusMessages]=v,d&&(m[l.QueryParameterNames.BotId]=d,h===o.DialogServiceConfig.DialogTypes.CustomCommands&&(m[c.HeaderNames.CustomCommandsAppId]=d));const g=h===o.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",y=h===o.DialogServiceConfig.DialogTypes.CustomCommands?"v1":h===o.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",S={};null!=t.token&&""!==t.token&&(S[t.headerName]=t.token);let b=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint,"");if(!b){const t=s.ConnectionFactoryBase.getHostSuffix(p),n=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,"wss://".concat(p,".").concat(u.BaseUrl).concat(t)),i=n.endsWith("/")?n:n+"/";b="".concat(i).concat(g).concat(u.ApiKey,"/").concat(y)}this.setCommonUrlParams(e,m,b);const _="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new i.WebsocketConnection(b,m,S,new a.WebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),_,n)}}t.DialogConnectionFactory=u,u.ApiKey="api",u.BaseUrl="convai.speech"},5200:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceAdapter=void 0;const i=n(2277),r=n(323),o=n(2307),s=n(7810),a=n(8040),c=n(7368),l=n(9859),u=n(5132),d=n(222);class h extends l.ServiceRecognizerBase{constructor(e,t,n,i,r){super(e,t,n,i,r),this.privEvents=new o.EventSource,this.privDialogServiceConnector=r,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new c.DialogServiceTurnStateManager,this.recognizeOverride=(e,t,n)=>this.listenOnce(e,t,n),this.postConnectImplOverride=e=>this.dialogConnectImpl(e),this.configConnectionOverride=e=>this.configConnection(e),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=n,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach((e=>{"ConnectionClosedEvent"===e.name&&(this.terminateMessageLoop=!0)}))}async sendMessage(e){const t=o.createGuid(),n=o.createNoDashGuid(),i={context:{interactionId:t},messagePayload:JSON.parse(e),version:.5},r=JSON.stringify(i),s=await this.fetchConnection();await s.send(new d.SpeechConnectionMessage(o.MessageType.Text,"agent",n,"application/json",r))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(e){const t=new a.PropertyCollection;let n,i;switch(e.messageType===o.MessageType.Text&&t.setProperty(a.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.phrase":const r=l.SimpleSpeechPhrase.fromJSON(e.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+r.Offset+r.Duration),r.RecognitionStatus!==l.RecognitionStatus.TooManyRequests&&r.RecognitionStatus!==l.RecognitionStatus.Error){const e=this.fireEventForResult(r,t);if(this.privLastResult=e.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,e)}catch(s){}}i=!0;break;case"speech.hypothesis":const o=l.SpeechHypothesis.fromJSON(e.textBody),c=o.Offset+this.privRequestSession.currentTurnAudioOffset;n=new a.SpeechRecognitionResult(this.privRequestSession.requestId,a.ResultReason.RecognizingSpeech,o.Text,o.Duration,c,o.Language,o.LanguageDetectionConfidence,void 0,void 0,e.textBody,t),this.privRequestSession.onHypothesis(c);const u=new a.SpeechRecognitionEventArgs(n,o.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,u)}catch(s){}i=!0;break;case"speech.keyword":const d=l.SpeechKeyword.fromJSON(e.textBody);n=new a.SpeechRecognitionResult(this.privRequestSession.requestId,"Accepted"===d.Status?a.ResultReason.RecognizedKeyword:a.ResultReason.NoMatch,d.Text,d.Duration,d.Offset,void 0,void 0,void 0,void 0,e.textBody,t),"Accepted"!==d.Status&&(this.privLastResult=n);const h=new a.SpeechRecognitionEventArgs(n,n.duration,n.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,h)}catch(s){}i=!0;break;case"audio":{const t=e.requestId.toUpperCase(),n=this.privTurnStateManager.GetTurn(t);try{e.binaryBody?n.audioStream.write(e.binaryBody):n.endAudioStream()}catch(s){}}i=!0;break;case"response":this.handleResponseMessage(e),i=!0}const r=new o.Deferred;return r.resolve(i),r.promise}async cancelRecognition(e,t,n,i,r){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const t=new a.PropertyCollection;t.setProperty(l.CancellationErrorCodePropertyName,a.CancellationErrorCode[i]);const o=new a.SpeechRecognitionCanceledEventArgs(n,r,i,void 0,e);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,o)}catch{}if(this.privSuccessCallback){const e=new a.SpeechRecognitionResult(void 0,a.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,r,void 0,t);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(e,t,n){this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=n,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(a.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const r=this.connectImpl(),o=this.sendPreAudioMessages(),s=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),c=await this.privDialogAudioSource.format,l=await this.privDialogAudioSource.deviceInfo,u=new i.ReplayableAudioNode(s,c.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(u,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:l};try{await r,await o}catch(h){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.ConnectionFailure,h),Promise.resolve()}const d=new a.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d);this.sendAudio(u).then((()=>{}),(async e=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.RuntimeError,e)}))}dialogConnectImpl(e){return this.privConnectionLoop=this.startMessageLoop(),e}receiveDialogMessageOverride(){const e=new o.Deferred,t=async()=>{try{const i=this.isDisposed(),r=!this.isDisposed()&&this.terminateMessageLoop;if(i||r)return void e.resolve(void 0);const s=await this.fetchConnection(),c=await s.read();if(!c)return t();const u=d.SpeechConnectionMessage.fromConnectionMessage(c);switch(u.path.toLowerCase()){case"turn.start":{const e=u.requestId.toUpperCase();e!==this.privRequestSession.requestId.toUpperCase()?this.privTurnStateManager.StartTurn(e):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const e=l.SpeechDetected.fromJSON(u.textBody),t=new a.RecognitionEventArgs(e.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,t);break;case"speech.enddetected":let i;i=u.textBody.length>0?u.textBody:"{ Offset: 0 }";const r=l.SpeechDetected.fromJSON(i);this.privRequestSession.onServiceRecognized(r.Offset+this.privRequestSession.currentTurnAudioOffset);const s=new a.RecognitionEventArgs(r.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,s);break;case"turn.end":{const e=u.requestId.toUpperCase();if(e!==this.privRequestSession.requestId.toUpperCase())this.privTurnStateManager.CompleteTurn(e);else{const e=new a.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),this.privRecognizerConfig.isContinuousRecognition&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing||this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,e),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(n){this.privErrorCallback&&this.privErrorCallback(n)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(u)||this.serviceEvents&&this.serviceEvents.onEvent(new o.ServiceEvent(u.path.toLowerCase(),u.textBody))}catch(n){}}return t()}catch(i){this.terminateMessageLoop=!0,e.resolve()}};return t().catch((e=>{o.Events.instance.onEvent(new o.BackgroundEvent(e))})),e.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(e){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.RuntimeError,e)}return Promise.resolve()}async configConnection(e){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(e),e)}async sendPreAudioMessages(){const e=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(e,!0),await this.sendAgentContext(e),await this.sendWaveHeader(e)}sendAgentConfig(e){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(a.PropertyId.Conversation_DialogType)===a.DialogServiceConfig.DialogTypes.CustomCommands){const e=this.agentConfig.get();e.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(e)}this.onEvent(new r.SendingAgentContextMessageEvent(this.agentConfig));const t=this.agentConfig.toJsonString();return this.agentConfigSent=!0,e.send(new d.SpeechConnectionMessage(o.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",t))}}sendAgentContext(e){const t=o.createGuid(),n=this.privDialogServiceConnector.properties.getProperty(a.PropertyId.Conversation_Speech_Activity_Template),i={channelData:"",context:{interactionId:t},messagePayload:void 0===typeof n?void 0:n,version:.5},r=JSON.stringify(i);return e.send(new d.SpeechConnectionMessage(o.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",r))}fireEventForResult(e,t){const n=l.EnumTranslation.implTranslateRecognitionResult(e.RecognitionStatus),i=e.Offset+this.privRequestSession.currentTurnAudioOffset,r=new a.SpeechRecognitionResult(this.privRequestSession.requestId,n,e.DisplayText,e.Duration,i,e.Language,e.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(e),t);return new a.SpeechRecognitionEventArgs(r,i,this.privRequestSession.sessionId)}handleResponseMessage(e){const t=JSON.parse(e.textBody);switch(t.messageType.toLowerCase()){case"message":const i=e.requestId.toUpperCase(),r=u.ActivityPayloadResponse.fromJSON(e.textBody),c=this.privTurnStateManager.GetTurn(i);if(r.conversationId){const e=this.agentConfig.get();e.botInfo.conversationId=r.conversationId,this.agentConfig.set(e)}const l=c.processActivityPayload(r,s.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),d=new a.ActivityReceivedEventArgs(r.messagePayload,l);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,d)}catch(n){}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new a.TurnStatusReceivedEventArgs(e.textBody))}catch(n){}break;default:o.Events.instance.onEvent(new o.BackgroundEvent("Unexpected response of type ".concat(t.messageType,". Ignoring.")))}}onEvent(e){this.privEvents.onEvent(e),o.Events.instance.onEvent(e)}addKeywordContextData(){const e=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(void 0===e)return;const t=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),n=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),i=e.split(";"),r=void 0===t?[]:t.split(";"),o=void 0===n?[]:n.split(";"),s=[];for(let a=0;a<i.length;a++){const e={};e.text=i[a],a<r.length&&(e.offset=Number(r[a])),a<o.length&&(e.duration=Number(o[a])),s.push(e)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:s,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}}t.DialogServiceAdapter=h},5787:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceTurnState=void 0;const i=n(7810),r=n(9709),o=n(5132);t.DialogServiceTurnState=class{constructor(e,t){this.privRequestId=t,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,t){return e.messageDataStreamType===o.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=r.AudioOutputStream.createPullStream(),this.privAudioStream.format=void 0!==t?t:i.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){null===this.privAudioStream||this.privAudioStream.isClosed||this.privAudioStream.close()}complete(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout((()=>{this.privTurnManager.CompleteTurn(this.privRequestId)}),2e3)}}},7368:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceTurnStateManager=void 0;const i=n(8446),r=n(5787);t.DialogServiceTurnStateManager=class{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new i.InvalidOperationError("Service error: There is already a turn with id:"+e);const t=new r.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,t),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new i.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);const t=this.privTurnMap.get(e);return t.complete(),this.privTurnMap.delete(e),t}}},4149:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicGrammarBuilder=void 0;t.DynamicGrammarBuilder=class{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(void 0===this.privGrammars&&void 0===this.privPhrases)return;const e={};if(e.ReferenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){const t=[];this.privPhrases.forEach((e=>{t.push({Text:e})})),e.Groups=[{Type:"Generic",Items:t}]}return e}}},2696:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3356:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumTranslation=void 0;const i=n(8040),r=n(9859);t.EnumTranslation=class{static implTranslateRecognitionResult(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=i.ResultReason.Canceled;switch(e){case r.RecognitionStatus.Success:n=i.ResultReason.RecognizedSpeech;break;case r.RecognitionStatus.EndOfDictation:n=t?i.ResultReason.RecognizedSpeech:i.ResultReason.NoMatch;break;case r.RecognitionStatus.NoMatch:case r.RecognitionStatus.InitialSilenceTimeout:case r.RecognitionStatus.BabbleTimeout:n=i.ResultReason.NoMatch;break;case r.RecognitionStatus.Error:case r.RecognitionStatus.BadRequest:case r.RecognitionStatus.Forbidden:default:n=i.ResultReason.Canceled}return n}static implTranslateCancelResult(e){let t=i.CancellationReason.EndOfStream;switch(e){case r.RecognitionStatus.Success:case r.RecognitionStatus.EndOfDictation:case r.RecognitionStatus.NoMatch:t=i.CancellationReason.EndOfStream;break;case r.RecognitionStatus.InitialSilenceTimeout:case r.RecognitionStatus.BabbleTimeout:case r.RecognitionStatus.Error:case r.RecognitionStatus.BadRequest:case r.RecognitionStatus.Forbidden:default:t=i.CancellationReason.Error}return t}static implTranslateCancelErrorCode(e){let t=i.CancellationErrorCode.NoError;switch(e){case r.RecognitionStatus.Error:t=i.CancellationErrorCode.ServiceError;break;case r.RecognitionStatus.TooManyRequests:t=i.CancellationErrorCode.TooManyRequests;break;case r.RecognitionStatus.BadRequest:t=i.CancellationErrorCode.BadRequestParameters;break;case r.RecognitionStatus.Forbidden:t=i.CancellationErrorCode.Forbidden;break;default:t=i.CancellationErrorCode.NoError}return t}static implTranslateErrorDetails(e){let t="The speech service encountered an internal error and could not continue.";switch(e){case i.CancellationErrorCode.Forbidden:t="The recognizer is using a free subscription that ran out of quota.";break;case i.CancellationErrorCode.BadRequestParameters:t="Invalid parameter or unsupported audio format in the request.";break;case i.CancellationErrorCode.TooManyRequests:t="The number of parallel requests exceeded the number of allowed concurrent transcriptions."}return t}}},9859:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguagesOpenRangeOptionName=t.ForceDictationPropertyName=t.ServicePropertiesPropertyName=t.CancellationErrorCodePropertyName=t.OutputFormatPropertyName=void 0,r(n(2070),t),r(n(7487),t),r(n(7339),t),r(n(7961),t),r(n(9135),t),r(n(4920),t),r(n(482),t),r(n(4142),t),r(n(8096),t),r(n(8588),t),r(n(6518),t),r(n(9173),t),r(n(3444),t),r(n(9252),t),r(n(4554),t),r(n(3505),t),r(n(2433),t),r(n(3344),t),r(n(3356),t),r(n(9502),t),r(n(3260),t),r(n(4261),t),r(n(1974),t),r(n(1086),t),r(n(6710),t),r(n(6702),t),r(n(8073),t),r(n(5007),t),r(n(1632),t),r(n(4183),t),r(n(3337),t),r(n(6391),t),r(n(3355),t),r(n(8243),t),r(n(2259),t),r(n(8162),t),r(n(3525),t),r(n(9853),t),r(n(4149),t),r(n(2696),t),r(n(5200),t),r(n(5619),t),r(n(2080),t),r(n(4543),t),r(n(1953),t),r(n(4526),t);var o=n(9290);Object.defineProperty(t,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return o.AvatarSynthesisAdapter}});var s=n(8705);Object.defineProperty(t,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return s.SpeechSynthesisAdapter}}),r(n(3309),t),r(n(8960),t),r(n(4855),t),r(n(4436),t),r(n(7544),t),r(n(8557),t),r(n(4863),t),t.OutputFormatPropertyName="OutputFormat",t.CancellationErrorCodePropertyName="CancellationErrorCode",t.ServicePropertiesPropertyName="ServiceProperties",t.ForceDictationPropertyName="ForceDictation",t.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"},8643:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderNames=void 0;class n{}t.HeaderNames=n,n.AuthKey="Ocp-Apim-Subscription-Key",n.Authorization="Authorization",n.SpIDAuthKey="Apim-Subscription-Id",n.ConnectionId="X-ConnectionId",n.ContentType="Content-Type",n.CustomCommandsAppId="X-CommandsAppId",n.Path="Path",n.RequestId="X-RequestId",n.RequestStreamId="X-StreamId",n.RequestTimestamp="X-Timestamp"},7339:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthInfo=void 0;t.AuthInfo=class{constructor(e,t){this.privHeaderName=e,this.privToken=t}get headerName(){return this.privHeaderName}get token(){return this.privToken}}},7961:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9135:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4920:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentConnectionFactory=void 0;const i=n(2277),r=n(8040),o=n(2679),s=n(9859),a=n(8643);class c extends o.ConnectionFactoryBase{create(e,t,n){let c=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint);if(!c){const t=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_IntentRegion),n=o.ConnectionFactoryBase.getHostSuffix(t);c=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+t+".sr.speech"+n)+"/speech/recognition/interactive/cognitiveservices/v1"}const l={format:"simple",language:e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,l,c);const u={};void 0!==t.token&&""!==t.token&&(u[t.headerName]=t.token),u[a.HeaderNames.ConnectionId]=n,e.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,c);const d="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new i.WebsocketConnection(c,l,u,new s.WebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),d,n)}getSpeechRegionFromIntentRegion(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}}}t.IntentConnectionFactory=c},8243:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentServiceRecognizer=void 0;const i=n(2307),r=n(8040),o=n(9859);class s extends o.ServiceRecognizerBase{constructor(e,t,n,i,r){super(e,t,n,i,r),this.privIntentRecognizer=r,this.privIntentDataSent=!1}setIntents(e,t){this.privAddedLmIntents=e,this.privUmbrellaIntent=t,this.privIntentDataSent=!0}processTypeSpecificMessages(e){let t,n,s=!1;const a=new r.PropertyCollection;switch(e.messageType===i.MessageType.Text&&a.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.hypothesis":const i=o.SpeechHypothesis.fromJSON(e.textBody);if(t=new r.IntentRecognitionResult(void 0,this.privRequestSession.requestId,r.ResultReason.RecognizingIntent,i.Text,i.Duration,i.Offset+this.privRequestSession.currentTurnAudioOffset,i.Language,i.LanguageDetectionConfidence,void 0,e.textBody,a),this.privRequestSession.onHypothesis(t.offset),n=new r.IntentRecognitionEventArgs(t,i.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,n)}catch(l){}s=!0;break;case"speech.phrase":const c=o.SimpleSpeechPhrase.fromJSON(e.textBody);t=new r.IntentRecognitionResult(void 0,this.privRequestSession.requestId,o.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus),c.DisplayText,c.Duration,c.Offset+this.privRequestSession.currentTurnAudioOffset,c.Language,c.LanguageDetectionConfidence,void 0,e.textBody,a),n=new r.IntentRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId);const d=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,n)}catch(l){}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};!1===this.privIntentDataSent||r.ResultReason.NoMatch===n.result.reason?(this.privRequestSession.onPhraseRecognized(n.offset+n.result.duration),d()):this.privPendingIntentArgs=n,s=!0;break;case"response":if(n=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,void 0===n){if(""===e.textBody)return;n=new r.IntentRecognitionEventArgs(new r.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const h=o.IntentResponse.fromJSON(e.textBody);if(null!==h&&h.topScoringIntent&&h.topScoringIntent.intent){let t=this.privAddedLmIntents[h.topScoringIntent.intent];if(void 0!==this.privUmbrellaIntent&&(t=this.privUmbrellaIntent),t){const i=void 0===t||void 0===t.intentName?h.topScoringIntent.intent:t.intentName;let o=n.result.reason;void 0!==i&&(o=r.ResultReason.RecognizedIntent);const s=void 0!==n.result.properties?n.result.properties:new r.PropertyCollection;s.setProperty(r.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,e.textBody),n=new r.IntentRecognitionEventArgs(new r.IntentRecognitionResult(i,n.result.resultId,o,n.result.text,n.result.duration,n.result.offset,void 0,void 0,n.result.errorDetails,n.result.json,s),n.offset,n.sessionId)}}if(this.privRequestSession.onPhraseRecognized(n.offset+n.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,n)}catch(l){}if(this.privSuccessCallback){try{this.privSuccessCallback(n.result)}catch(u){this.privErrorCallback&&this.privErrorCallback(u)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}s=!0}const c=new i.Deferred;return c.resolve(s),c.promise}cancelRecognition(e,t,n,i,s){const a=new r.PropertyCollection;if(a.setProperty(o.CancellationErrorCodePropertyName,r.CancellationErrorCode[i]),this.privIntentRecognizer.canceled){const t=new r.IntentRecognitionCanceledEventArgs(n,s,i,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,t)}catch{}}if(this.privSuccessCallback){const e=new r.IntentRecognitionResult(void 0,t,r.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,s,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch{}}}}t.IntentServiceRecognizer=s},7237:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryParameterNames=void 0;class n{}t.QueryParameterNames=n,n.BotId="botid",n.CustomSpeechDeploymentId="cid",n.CustomVoiceDeploymentId="deploymentId",n.EnableAudioLogging="storeAudio",n.EnableLanguageId="lidEnabled",n.EnableWordLevelTimestamps="wordLevelTimestamps",n.EndSilenceTimeoutMs="endSilenceTimeoutMs",n.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",n.Format="format",n.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",n.Language="language",n.Profanity="profanity",n.RequestBotStatusMessages="enableBotMessageStatus",n.StableIntermediateThreshold="stableIntermediateThreshold",n.StableTranslation="stableTranslation",n.TestHooks="testhooks",n.Postprocessing="postprocessing",n.CtsMeetingId="meetingId",n.CtsDeviceId="deviceId",n.CtsIsParticipant="isParticipant",n.EnableAvatar="enableTalkingAvatar"},4142:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEndedEvent=t.RecognitionCompletionStatus=t.RecognitionStartedEvent=t.ConnectingToServiceEvent=t.ListeningStartedEvent=t.RecognitionTriggeredEvent=t.SpeechRecognitionEvent=void 0;const i=n(2307);class r extends i.PlatformEvent{constructor(e,t,n){super(e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.EventType.Info),this.privRequestId=t,this.privSessionId=n}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}t.SpeechRecognitionEvent=r;t.RecognitionTriggeredEvent=class extends r{constructor(e,t,n,i){super("RecognitionTriggeredEvent",e,t),this.privAudioSourceId=n,this.privAudioNodeId=i}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};t.ListeningStartedEvent=class extends r{constructor(e,t,n,i){super("ListeningStartedEvent",e,t),this.privAudioSourceId=n,this.privAudioNodeId=i}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};t.ConnectingToServiceEvent=class extends r{constructor(e,t,n){super("ConnectingToServiceEvent",e,n),this.privAuthFetchEventid=t}get authFetchEventid(){return this.privAuthFetchEventid}};var o;t.RecognitionStartedEvent=class extends r{constructor(e,t,n,i,r){super("RecognitionStartedEvent",e,r),this.privAudioSourceId=t,this.privAudioNodeId=n,this.privAuthFetchEventId=i}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}},function(e){e[e.Success=0]="Success",e[e.AudioSourceError=1]="AudioSourceError",e[e.AudioSourceTimeout=2]="AudioSourceTimeout",e[e.AuthTokenFetchError=3]="AuthTokenFetchError",e[e.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",e[e.UnAuthorized=5]="UnAuthorized",e[e.ConnectTimeout=6]="ConnectTimeout",e[e.ConnectError=7]="ConnectError",e[e.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",e[e.UnknownError=9]="UnknownError"}(o=t.RecognitionCompletionStatus||(t.RecognitionCompletionStatus={}));t.RecognitionEndedEvent=class extends r{constructor(e,t,n,r,s,a,c,l){super("RecognitionEndedEvent",e,s,c===o.Success?i.EventType.Info:i.EventType.Error),this.privAudioSourceId=t,this.privAudioNodeId=n,this.privAuthFetchEventId=r,this.privStatus=c,this.privError=l,this.privServiceTag=a}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}},6518:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerConfig=t.SpeechResultFormat=t.RecognitionMode=void 0;const i=n(8040),r=n(9859);var o;!function(e){e[e.Interactive=0]="Interactive",e[e.Conversation=1]="Conversation",e[e.Dictation=2]="Dictation"}(o=t.RecognitionMode||(t.RecognitionMode={})),function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(t.SpeechResultFormat||(t.SpeechResultFormat={}));t.RecognizerConfig=class{constructor(e,t){this.privSpeechServiceConfig=e||new r.SpeechServiceConfig(new r.Context(null)),this.privParameters=t,this.privMaxRetryCount=parseInt(t.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=t.getProperty(i.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===o.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=o[e]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==o.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(i.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const e=[];let t=!1;if(void 0!==this.autoDetectSourceLanguages)for(const n of this.autoDetectSourceLanguages.split(",")){const r=n+i.PropertyId.SpeechServiceConnection_EndpointId.toString(),o=this.parameters.getProperty(r,void 0);void 0!==o?(e.push({language:n,endpoint:o}),t=!0):e.push({language:n,endpoint:""})}return t?e:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(e){this.privEnableSpeakerId=e}}},3525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestSession=void 0;const i=n(2307),r=n(4142),o=n(4933);t.RequestSession=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=i.createNoDashGuid(),this.privAudioNodeId=i.createNoDashGuid(),this.privTurnDeferral=new i.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new o.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new r.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(e,t){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?await this.onComplete():this.onEvent(new r.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(e,t){this.privAuthFetchEventId=e,this.privSessionId=t,this.onEvent(new r.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(e){e&&await this.onComplete()}async onConnectionEstablishCompleted(e,t){if(200===e)return this.onEvent(new r.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,void(this.privBytesSent=0);403===e&&await this.onComplete()}async onServiceTurnEndResponse(e){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=i.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch((()=>{}))),this.privInTurn=!0,this.privTurnDeferral=new i.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)await e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),i.Events.instance.onEvent(e)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}}},5132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageDataStreamType=t.ActivityPayloadResponse=void 0;class n{constructor(e){this.privActivityResponse=JSON.parse(e)}static fromJSON(e){return new n(e)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}t.ActivityPayloadResponse=n,function(e){e[e.None=0]="None",e[e.TextToSpeechAudio=1]="TextToSpeechAudio"}(t.MessageDataStreamType||(t.MessageDataStreamType={}))},3337:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DetailedSpeechPhrase=void 0;const i=n(9859);class r{constructor(e){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=i.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new r(e)}getJsonWithCorrectedOffsets(e){if(this.privDetailedSpeechPhrase.NBest){let t;for(const e of this.privDetailedSpeechPhrase.NBest)if(e.Words&&e.Words[0]){t=e.Words[0].Offset;break}if(t&&t<e){const n=e-t;for(const e of this.privDetailedSpeechPhrase.NBest){if(e.Words)for(const t of e.Words)t.Offset+=n;if(e.DisplayWords)for(const t of e.DisplayWords)t.Offset+=n}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}}t.DetailedSpeechPhrase=r},9502:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionStatus=t.SynthesisStatus=void 0,function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"}(t.SynthesisStatus||(t.SynthesisStatus={})),function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests",e[e.BadRequest=7]="BadRequest",e[e.Forbidden=8]="Forbidden"}(t.RecognitionStatus||(t.RecognitionStatus={}))},2259:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentResponse=void 0;class n{constructor(e){this.privIntentResponse=""===e?{}:JSON.parse(e)}static fromJSON(e){return new n(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}t.IntentResponse=n},6391:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleSpeechPhrase=void 0;const i=n(9859);class r{constructor(e){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=i.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new r(e)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}}t.SimpleSpeechPhrase=r},8162:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6710:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechDetected=void 0;class n{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new n(e)}get Offset(){return this.privSpeechStartDetected.Offset}}t.SpeechDetected=n},6702:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechHypothesis=void 0;class n{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new n(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}t.SpeechHypothesis=n},8073:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechKeyword=void 0;class n{constructor(e){this.privSpeechKeyword=JSON.parse(e)}static fromJSON(e){return new n(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}t.SpeechKeyword=n},4543:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAudioMetadata=t.MetadataType=void 0,function(e){e.WordBoundary="WordBoundary",e.Bookmark="Bookmark",e.Viseme="Viseme",e.SentenceBoundary="SentenceBoundary",e.SessionEnd="SessionEnd",e.AvatarSignal="TalkingAvatarSignal"}(t.MetadataType||(t.MetadataType={}));class n{constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}static fromJSON(e){return new n(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}t.SynthesisAudioMetadata=n},4261:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationHypothesis=void 0;const i=n(260),r=n(5253);class o{constructor(e){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Translation.TranslationStatus=r.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new o(JSON.parse(e))}static fromTranslationResponse(e){i.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");const t=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,t.Translation=e,new o(t)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var e;return null===(e=this.privTranslationHypothesis.PrimaryLanguage)||void 0===e?void 0:e.Language}}t.TranslationHypothesis=o},1974:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationPhrase=void 0;const i=n(260),r=n(9859),o=n(5253);class s{constructor(e){this.privTranslationPhrase=e,this.privTranslationPhrase.RecognitionStatus=r.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=o.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(e){return new s(JSON.parse(e))}static fromTranslationResponse(e){i.Contracts.throwIfNullOrUndefined(e,"translationResponse");const t=e.SpeechPhrase;return e.SpeechPhrase=void 0,t.Translation=e,t.Text=t.DisplayText,new s(t)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var e;return null===(e=this.privTranslationPhrase.PrimaryLanguage)||void 0===e?void 0:e.Language}get Confidence(){var e;return null===(e=this.privTranslationPhrase.PrimaryLanguage)||void 0===e?void 0:e.Confidence}get Translation(){return this.privTranslationPhrase.Translation}}t.TranslationPhrase=s},3260:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisEnd=void 0;const i=n(9859);class r{constructor(e){this.privSynthesisEnd=JSON.parse(e),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=i.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=i.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(e){return new r(e)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}}t.TranslationSynthesisEnd=r},81:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TurnStatusResponsePayload=void 0;class n{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new n(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}t.TurnStatusResponsePayload=n},8096:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceRecognizerBase=void 0;const i=n(2277),r=n(2307),o=n(8040),s=n(9859),a=n(222);class c{constructor(e,t,n,i,a){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!e)throw new r.ArgumentNullError("authentication");if(!t)throw new r.ArgumentNullError("connectionFactory");if(!n)throw new r.ArgumentNullError("audioSource");if(!i)throw new r.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=i.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=t,this.privAudioSource=n,this.privRecognizerConfig=i,this.privIsDisposed=!1,this.privRecognizer=a,this.privRequestSession=new s.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new r.EventSource,this.privServiceEvents=new r.EventSource,this.privDynamicGrammar=new s.DynamicGrammarBuilder,this.privSpeechContext=new s.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new s.AgentConfig;"on"===this.privRecognizerConfig.parameters.getProperty(o.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&"undefined"!==typeof Blob&&"undefined"!==typeof Worker?this.privSetTimeout=r.Timeout.setTimeout:"undefined"!==typeof window&&(this.privSetTimeout=window.setTimeout.bind(window)),this.connectionEvents.attach((e=>{if("ConnectionClosedEvent"===e.name){const t=e;(1003===t.statusCode||1007===t.statusCode||1002===t.statusCode||4e3===t.statusCode||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(o.CancellationReason.Error,1007===t.statusCode?o.CancellationErrorCode.BadRequestParameters:o.CancellationErrorCode.ConnectionFailure,"".concat(t.reason," websocket error code: ").concat(t.statusCode))}})),this.privEnableSpeakerId&&(this.privDiarizationSessionId=r.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){const e=this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(void 0!==e){const t=e.split(","),n=this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),i=void 0!==n?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:i},output:{interimResults:{mode:"Always"}},targetLanguages:t}),void 0!==n){const e={};for(const i of t)e[i]=n;this.privSpeechContext.setSection("synthesis",{defaultVoices:e})}}}setSpeechSegmentationTimeoutJson(){const e=this.privRecognizerConfig.parameters.getProperty(o.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(void 0!==e){const t=this.recognitionMode===s.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===s.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",n=parseInt(e,10),i=this.privSpeechContext.getSection("phraseDetection");i.mode=t,i[t]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:n}},this.privSpeechContext.setSection("phraseDetection",i)}}setLanguageIdJson(){const e=this.privSpeechContext.getSection("phraseDetection");if(void 0!==this.privRecognizerConfig.autoDetectSourceLanguages){const t=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let n;n="Continuous"===this.privRecognizerConfig.languageIdMode?"DetectContinuous":"DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:t,mode:n,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const i=this.privRecognizerConfig.sourceLanguageModels;void 0!==i&&(e.customModels=i,e.onInterim={action:"None"},e.onSuccess={action:"None"})}void 0!==this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)&&(e.onInterim={action:"Translate"},e.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",e)}setOutputDetailLevelJson(){if(this.privEnableSpeakerId){if("true"===this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase())this.privSpeechContext.setWordLevelTimings();else{this.privRecognizerConfig.parameters.getProperty(s.OutputFormatPropertyName,o.OutputFormat[o.OutputFormat.Simple]).toLowerCase()===o.OutputFormat[o.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat()}}}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(e){this.privRecognizerConfig.parameters.setProperty(o.PropertyId.ConversationTranslator_Token,e)}set voiceProfileType(e){this.privRecognizerConfig.parameters.setProperty(o.PropertyId.SpeechServiceConnection_SpeakerIdMode,e)}set authentication(e){this.privAuthentication=e}isDisposed(){return this.privIsDisposed}async dispose(e){if(this.privIsDisposed=!0,void 0!==this.privConnectionConfigurationPromise)try{const t=await this.privConnectionConfigurationPromise;await t.dispose(e)}catch(t){return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(e,t,n){if(void 0!==this.recognizeOverride)return void await this.recognizeOverride(e,t,n);this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=e,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=t,this.privErrorCallback=n,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const r=this.connectImpl();let a;try{const e=await this.audioSource.attach(this.privRequestSession.audioNodeId),t=await this.audioSource.format,n=await this.audioSource.deviceInfo;this.privIsLiveAudio=n.type&&n.type===s.type.Microphones,a=new i.ReplayableAudioNode(e,t.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(a,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:n}}catch(l){throw await this.privRequestSession.onStopRecognizing(),l}try{await r}catch(l){return void await this.cancelRecognitionLocal(o.CancellationReason.Error,o.CancellationErrorCode.ConnectionFailure,l)}const c=new o.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,c),this.receiveMessage();this.sendAudio(a).catch((async e=>{await this.cancelRecognitionLocal(o.CancellationReason.Error,o.CancellationErrorCode.RuntimeError,e)}))}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(e,t){this.connectImpl().then((()=>{try{e&&e()}catch(n){t&&t(n)}}),(e=>{try{t&&t(e)}catch(n){}}))}async disconnect(){if(await this.cancelRecognitionLocal(o.CancellationReason.Error,o.CancellationErrorCode.NoError,"Disconnecting"),void 0!==this.disconnectOverride&&await this.disconnectOverride(),void 0!==this.privConnectionPromise)try{await(await this.privConnectionPromise).dispose()}catch(e){}this.privConnectionPromise=void 0}sendMessage(e){}async sendNetworkMessage(e,t){const n="string"===typeof t?r.MessageType.Text:r.MessageType.Binary,i="string"===typeof t?"application/json":"";return(await this.fetchConnection()).send(new a.SpeechConnectionMessage(n,e,this.privRequestSession.requestId,i,t))}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(e){this.privExpectContentAssessmentResponse=e}async sendTelemetryData(){const e=this.privRequestSession.getTelemetry();if(!0!==c.telemetryDataEnabled||this.privIsDisposed||null===e)return;if(c.telemetryData)try{c.telemetryData(e)}catch{}const t=await this.fetchConnection();await t.send(new a.SpeechConnectionMessage(r.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",e))}async cancelRecognitionLocal(e,t,n){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,n))}async receiveMessage(){try{if(this.privIsDisposed)return;let e=await this.fetchConnection();const t=await e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(!t)return this.receiveMessage();this.privServiceHasSentMessage=!0;const n=a.SpeechConnectionMessage.fromConnectionMessage(t);if(n.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(n.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const t=s.SpeechDetected.fromJSON(n.textBody),i=new o.RecognitionEventArgs(t.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,i);break;case"speech.enddetected":let a;a=n.textBody.length>0?n.textBody:"{ Offset: 0 }";const c=s.SpeechDetected.fromJSON(a),l=new o.RecognitionEventArgs(c.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,l);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(o.CancellationReason.EndOfStream,o.CancellationErrorCode.NoError,void 0));const u=new o.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)return void(this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,u));e=await this.fetchConnection(),await this.sendPrePayloadJSON(e);break;default:await this.processTypeSpecificMessages(n)||this.privServiceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(n.path.toLowerCase(),n.textBody))}return this.receiveMessage()}catch(e){return null}}updateSpeakerDiarizationAudioOffset(){const e=this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(e)}sendSpeechContext(e,t){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const n=this.speechContext.toJSON();if(t&&this.privRequestSession.onSpeechContext(),n)return e.send(new a.SpeechConnectionMessage(r.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",n))}noOp(){}async sendPrePayloadJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0!==this.sendPrePayloadJSONOverride)return this.sendPrePayloadJSONOverride(e);await this.sendSpeechContext(e,t),await this.sendWaveHeader(e)}async sendWaveHeader(e){const t=await this.audioSource.format;return e.send(new a.SpeechConnectionMessage(r.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",t.header))}connectImpl(){return void 0!==this.privConnectionPromise?this.privConnectionPromise.then((e=>e.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise),(()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()))):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch((()=>{})),void 0!==this.postConnectImplOverride?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(e,t,n){if(t.onSpeechContext(),!0!==c.telemetryDataEnabled){const e={context:{system:JSON.parse(n).context.system}};n=JSON.stringify(e)}if("true"===this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()){const e=JSON.parse(n);e.context.DisableReferenceChannel="True",e.context.MicSpec="1_0_0",n=JSON.stringify(e)}if(n)return e.send(new a.SpeechConnectionMessage(r.MessageType.Text,"speech.config",t.requestId,"application/json",n))}async fetchConnection(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then((e=>e.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise),(()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()))):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(e){const t=await this.audioSource.format;this.privAverageBytesPerMs=t.avgBytesPerSec/1e3;let n=Date.now();const i=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),o=t.avgBytesPerSec/1e3*parseInt(i,10),s=this.privRequestSession.recogNumber,c=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===s){const i=await this.fetchConnection(),l=await e.read();if(this.privRequestSession.isSpeechEnded)return;let u,d;if(!l||l.isEnd?(u=null,d=0):(u=l.buffer,this.privRequestSession.onAudioSent(u.byteLength),d=o>=this.privRequestSession.bytesSent?0:Math.max(0,n-Date.now())),0!==d&&await this.delay(d),null!==u&&(n=Date.now()+1e3*u.byteLength/(2*t.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===s){if(i.send(new a.SpeechConnectionMessage(r.MessageType.Binary,"audio",this.privRequestSession.requestId,null,u)).catch((()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch((()=>{}))})),null===l||void 0===l||!l.isEnd)return c();this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}}};return c()}async retryableConnect(){let e=!1;this.privAuthFetchEventId=r.createNoDashGuid();const t=this.privRequestSession.sessionId;this.privConnectionId=void 0!==t?t:r.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let n=0,i="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId),r=await t;await this.privRequestSession.onAuthCompleted(!1);const o=this.privConnectionFactory.create(this.privRecognizerConfig,r,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(o.events),o.events.attach((e=>{this.connectionEvents.onEvent(e)}));const s=await o.open();if(200===s.statusCode)return await this.privRequestSession.onConnectionEstablishCompleted(s.statusCode),Promise.resolve(o);1006===s.statusCode&&(e=!0),n=s.statusCode,i=s.reason,this.privRequestSession.onRetryConnection()}return await this.privRequestSession.onConnectionEstablishCompleted(n,i),Promise.reject("Unable to contact server. StatusCode: ".concat(n,", ").concat(this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint)," Reason: ").concat(i))}delay(e){return new Promise((t=>this.privSetTimeout(t,e)))}writeBufferToConsole(e){let t="Buffer Size: ";if(null===e)t+="null";else{const n=new Uint8Array(e);t+="".concat(e.byteLength,"\r\n");for(let i=0;i<e.byteLength;i++)t+=n[i].toString(16).padStart(2,"0")+" ",(i+1)%16===0&&(console.info(t),t="")}console.info(t)}async sendFinalAudio(){const e=await this.fetchConnection();await e.send(new a.SpeechConnectionMessage(r.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const e=await this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(await this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(e,!1),e)}}t.ServiceRecognizerBase=c,c.telemetryDataEnabled=!0},4933:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceTelemetryListener=void 0;const i=n(2307),r=n(4142);t.ServiceTelemetryListener=class{constructor(e,t,n){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=n,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){if(!this.privIsDisposed&&(e instanceof r.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof i.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof i.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof i.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof i.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof i.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof r.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof i.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof i.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof i.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof i.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path)){this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array);const t=50;this.privReceivedMessages[e.message.headers.path].length<t&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)}}getTelemetry(){const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const t={Metrics:e,ReceivedMessages:this.privReceivedMessages},n=JSON.stringify(t);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],n}get hasTelemetry(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}}},4436:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionConfig=void 0;const i=n(9859);t.SpeakerRecognitionConfig=class{constructor(e,t){this.privContext=e||new i.Context(null),this.privParameters=t}get parameters(){return this.privParameters}get Context(){return this.privContext}}},482:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileConnectionFactory=t.SpeakerRecognitionConnectionFactory=void 0;const i=n(2277),r=n(8040),o=n(2679),s=n(9859),a=n(8643);class c extends o.ConnectionFactoryBase{create(e,t,n,c){let l=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint);if(!l){const t=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),i=o.ConnectionFactoryBase.getHostSuffix(t),s=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://".concat(t,".spr-frontend.speech").concat(i)),a=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");l="".concat(s,"/speaker/ws/").concat(this.scenarioToPath(a),"/").concat(n)}const u={format:"simple",language:e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,u,l);const d={};void 0!==t.token&&""!==t.token&&(d[t.headerName]=t.token),d[a.HeaderNames.ConnectionId]=c,d[a.HeaderNames.SpIDAuthKey]=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Key),e.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,l);const h="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new i.WebsocketConnection(l,u,d,new s.WebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),h,c)}scenarioToPath(e){switch(e){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}t.SpeakerRecognitionConnectionFactory=class extends c{create(e,t,n){return super.create(e,t,"recognition",n)}};t.VoiceProfileConnectionFactory=class extends c{create(e,t,n){return super.create(e,t,"profile",n)}}},7544:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerServiceRecognizer=void 0;const i=n(2277),r=n(2307),o=n(8040),s=n(9859),a=n(222);class c extends s.ServiceRecognizerBase{constructor(e,t,n,i,r){super(e,t,n,i,r),this.privSpeakerRecognizer=r,this.privSpeakerAudioSource=n,this.recognizeSpeaker=e=>this.recognizeSpeakerOnce(e),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(e){let t=!1;const n=new o.PropertyCollection;if(e.messageType===r.MessageType.Text&&n.setProperty(o.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),"speaker.response"===e.path.toLowerCase()){const n=JSON.parse(e.textBody);let i;i="success"!==n.status.statusCode.toLowerCase()?new o.SpeakerRecognitionResult(n,o.ResultReason.Canceled,o.CancellationErrorCode.ServiceError,n.status.reason):new o.SpeakerRecognitionResult(n,o.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(i),t=!0}const i=new r.Deferred;return i.resolve(t),i.promise}cancelRecognition(e,t,n,i,r){if((new o.PropertyCollection).setProperty(s.CancellationErrorCodePropertyName,o.CancellationErrorCode[i]),this.privResultDeferral){const e=new o.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:r,reason:r}},o.ResultReason.Canceled,i,r);try{this.privResultDeferral.resolve(e)}catch(r){this.privResultDeferral.reject(r)}}}async recognizeSpeakerOnce(e){this.privSpeakerModel=e,this.voiceProfileType=e.scenario,this.privResultDeferral||(this.privResultDeferral=new r.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(o.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const t=this.connectImpl(),n=this.sendPreAudioMessages(this.extractSpeakerContext(e)),s=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),a=await this.privSpeakerAudioSource.format,c=await this.privSpeakerAudioSource.deviceInfo,l=new i.ReplayableAudioNode(s,a.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(l,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:c};try{await t,await n}catch(d){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.ConnectionFailure,d)}const u=new o.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,u),this.receiveMessage();return this.sendAudio(l).then((()=>{}),(e=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.RuntimeError,e)})),this.privResultDeferral.promise}async sendPreAudioMessages(e){const t=await this.fetchConnection();await this.sendSpeakerRecognition(t,e)}async sendSpeakerRecognition(e,t){const n=JSON.stringify(t);return e.send(new a.SpeechConnectionMessage(r.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",n))}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}}t.SpeakerServiceRecognizer=c},9252:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConnectionFactory=void 0;const i=n(2277),r=n(9859),o=n(8040),s=n(2679),a=n(9859),c=n(8643),l=n(7237);class u extends s.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(e,t,n){let u=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Region,void 0),h=s.ConnectionFactoryBase.getHostSuffix(d),p=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,"wss://"+d+".stt.speech"+h),f={},v=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(v?u&&-1!==u.search(l.QueryParameterNames.CustomSpeechDeploymentId)||(f[l.QueryParameterNames.CustomSpeechDeploymentId]=v):m&&(u&&-1!==u.search(l.QueryParameterNames.Language)||(f[l.QueryParameterNames.Language]=m)),u&&-1!==u.search(l.QueryParameterNames.Format)||(f[l.QueryParameterNames.Format]=e.parameters.getProperty(r.OutputFormatPropertyName,o.OutputFormat[o.OutputFormat.Simple]).toLowerCase()),void 0!==e.autoDetectSourceLanguages&&(f[l.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(e,f,u),!u)switch(e.recognitionMode){case a.RecognitionMode.Conversation:u="true"===e.parameters.getProperty(r.ForceDictationPropertyName,"false")?p+this.dictationRelativeUri:void 0!==e.recognitionEndpointVersion&&parseInt(e.recognitionEndpointVersion,10)>1?"".concat(p).concat(this.universalUri).concat(e.recognitionEndpointVersion):p+this.conversationRelativeUri;break;case a.RecognitionMode.Dictation:u=p+this.dictationRelativeUri;break;default:u=void 0!==e.recognitionEndpointVersion&&parseInt(e.recognitionEndpointVersion,10)>1?"".concat(p).concat(this.universalUri).concat(e.recognitionEndpointVersion):p+this.interactiveRelativeUri}const g={};void 0!==t.token&&""!==t.token&&(g[t.headerName]=t.token),g[c.HeaderNames.ConnectionId]=n;const y="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),S=new i.WebsocketConnection(u,f,g,new a.WebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),y,n),b=S.uri;return e.parameters.setProperty(o.PropertyId.SpeechServiceConnection_Url,b),S}}t.SpeechConnectionFactory=u},222:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConnectionMessage=void 0;const i=n(2307),r=n(8643);class o extends i.ConnectionMessage{constructor(e,t,n,o,s,a,c,l){if(!t)throw new i.ArgumentNullError("path");if(!n)throw new i.ArgumentNullError("requestId");const u={};if(u[r.HeaderNames.Path]=t,u[r.HeaderNames.RequestId]=n,u[r.HeaderNames.RequestTimestamp]=(new Date).toISOString(),o&&(u[r.HeaderNames.ContentType]=o),a&&(u[r.HeaderNames.RequestStreamId]=a),c)for(const i in c)i&&(u[i]=c[i]);l?super(e,s,u,l):super(e,s,u),this.privPath=t,this.privRequestId=n,this.privContentType=o,this.privStreamId=a,this.privAdditionalHeaders=c}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let t=null,n=null,i=null,s=null;const a={};if(e.headers)for(const o in e.headers)o&&(o.toLowerCase()===r.HeaderNames.Path.toLowerCase()?t=e.headers[o]:o.toLowerCase()===r.HeaderNames.RequestId.toLowerCase()?n=e.headers[o]:o.toLowerCase()===r.HeaderNames.ContentType.toLowerCase()?i=e.headers[o]:o.toLowerCase()===r.HeaderNames.RequestStreamId.toLowerCase()?s=e.headers[o]:a[o]=e.headers[o]);return new o(e.messageType,t,n,i,e.body,s,a,e.id)}}t.SpeechConnectionMessage=o},9853:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechContext=void 0;t.SpeechContext=class{constructor(e){this.privContext={},this.privDynamicGrammar=e}getSection(e){return this.privContext[e]||{}}setSection(e,t){this.privContext[e]=t}setPronunciationAssessmentParams(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),void 0===this.privContext.phraseDetection.enrichment&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),n&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),-1===this.privContext.phraseOutput.detailed.options.indexOf("SNR")&&this.privContext.phraseOutput.detailed.options.push("SNR"),t&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:t},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",-1===this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();this.setSection("dgi",e);return JSON.stringify(this.privContext)}}},4863:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.type=t.connectivity=t.Device=t.OS=t.System=t.Context=t.SpeechServiceConfig=void 0;t.SpeechServiceConfig=class{constructor(e){this.context=e}serialize(){return JSON.stringify(this,((e,t)=>{if(t&&"object"===typeof t&&!Array.isArray(t)){const e={};for(const n in t)Object.hasOwnProperty.call(t,n)&&(e[n&&n.charAt(0).toLowerCase()+n.substring(1)]=t[n]);return e}return t}))}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}};t.Context=class{constructor(e){this.system=new n,this.os=e}};class n{constructor(){this.name="SpeechSDK",this.version="1.35.0",this.build="JavaScript",this.lang="JavaScript"}}t.System=n;t.OS=class{constructor(e,t,n){this.platform=e,this.name=t,this.version=n}};t.Device=class{constructor(e,t,n){this.manufacturer=e,this.model=t,this.version=n}},function(e){e.Bluetooth="Bluetooth",e.Wired="Wired",e.WiFi="WiFi",e.Cellular="Cellular",e.InBuilt="InBuilt",e.Unknown="Unknown"}(t.connectivity||(t.connectivity={})),function(e){e.Phone="Phone",e.Speaker="Speaker",e.Car="Car",e.Headset="Headset",e.Thermostat="Thermostat",e.Microphones="Microphones",e.Deskphone="Deskphone",e.RemoteControl="RemoteControl",e.Unknown="Unknown",e.File="File",e.Stream="Stream"}(t.type||(t.type={}))},9173:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5007:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechServiceRecognizer=void 0;const i=n(8040),r=n(9859);class o extends r.ServiceRecognizerBase{constructor(e,t,n,i,r){super(e,t,n,i,r),this.privSpeechRecognizer=r}async processTypeSpecificMessages(e){let t;const n=new i.PropertyCollection;n.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let o=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=r.SpeechHypothesis.fromJSON(e.textBody),l=c.Offset+this.privRequestSession.currentTurnAudioOffset;t=new i.SpeechRecognitionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,c.Text,c.Duration,l,c.Language,c.LanguageDetectionConfidence,void 0,void 0,e.textBody,n),this.privRequestSession.onHypothesis(l);const u=new i.SpeechRecognitionEventArgs(t,c.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,u)}catch(s){}o=!0;break;case"speech.phrase":const d=r.SimpleSpeechPhrase.fromJSON(e.textBody),h=r.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+d.Offset+d.Duration),i.ResultReason.Canceled===h){const e=r.EnumTranslation.implTranslateCancelResult(d.RecognitionStatus),t=r.EnumTranslation.implTranslateCancelErrorCode(d.RecognitionStatus);await this.cancelRecognitionLocal(e,t,r.EnumTranslation.implTranslateErrorDetails(t))}else{if(!this.privRequestSession.isSpeechEnded||h!==i.ResultReason.NoMatch||d.RecognitionStatus===r.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(r.OutputFormatPropertyName)===i.OutputFormat[i.OutputFormat.Simple])t=new i.SpeechRecognitionResult(this.privRequestSession.requestId,h,d.DisplayText,d.Duration,d.Offset+this.privRequestSession.currentTurnAudioOffset,d.Language,d.LanguageDetectionConfidence,void 0,void 0,e.textBody,n);else{const o=r.DetailedSpeechPhrase.fromJSON(e.textBody),s=o.Offset+this.privRequestSession.currentTurnAudioOffset,a=o.getJsonWithCorrectedOffsets(s);t=new i.SpeechRecognitionResult(this.privRequestSession.requestId,h,o.RecognitionStatus===r.RecognitionStatus.Success?o.NBest[0].Display:void 0,o.Duration,s,o.Language,o.LanguageDetectionConfidence,void 0,void 0,a,n)}const o=new i.SpeechRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,o)}catch(s){}}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}o=!0}return o}cancelRecognition(e,t,n,o,s){const a=new i.PropertyCollection;if(a.setProperty(r.CancellationErrorCodePropertyName,i.CancellationErrorCode[o]),this.privSpeechRecognizer.canceled){const t=new i.SpeechRecognitionCanceledEventArgs(n,s,o,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,t)}catch{}}if(this.privSuccessCallback){const e=new i.SpeechRecognitionResult(t,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,s,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch{}}}}t.SpeechServiceRecognizer=o},8705:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisAdapter=void 0;const i=n(8040),r=n(9859);class o extends r.SynthesisAdapterBase{constructor(e,t,n,i,r){super(e,t,n,r),this.privSpeechSynthesizer=i,this.privSynthesizer=i}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(e){const t=new i.SpeechSynthesisEventArgs(new i.SpeechSynthesisResult(e,i.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,t)}onSynthesizing(e){if(this.privSpeechSynthesizer.synthesizing)try{const t=this.privSynthesisTurn.audioOutputFormat.addHeader(e),n=new i.SpeechSynthesisEventArgs(new i.SpeechSynthesisResult(this.privSynthesisTurn.requestId,i.ResultReason.SynthesizingAudio,t));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,n)}catch(t){}}onSynthesisCancelled(e){if(this.privSpeechSynthesizer.SynthesisCanceled){const t=new i.SpeechSynthesisEventArgs(e);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,t)}catch{}}}onSynthesisCompleted(e){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new i.SpeechSynthesisEventArgs(e))}catch(t){}}onWordBoundary(e){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,e)}catch(t){}}onVisemeReceived(e){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,e)}catch(t){}}onBookmarkReached(e){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,e)}catch(t){}}}t.SpeechSynthesisAdapter=o},3344:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisConnectionFactory=void 0;const i=n(2277),r=n(8040),o=n(2679),s=n(9859),a=n(8643),c=n(7237);t.SpeechSynthesisConnectionFactory=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(e,t,n){let l=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const u=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,void 0),d=o.ConnectionFactoryBase.getHostSuffix(u),h=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),p=void 0===h?"tts":"voice",f=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+u+"."+p+".speech"+d),v={},m={};void 0!==t.token&&""!==t.token&&(m[t.headerName]=t.token),m[a.HeaderNames.ConnectionId]=n,void 0!==h&&""!==h&&(l&&-1!==l.search(c.QueryParameterNames.CustomVoiceDeploymentId)||(v[c.QueryParameterNames.CustomVoiceDeploymentId]=h)),e.avatarEnabled&&(l&&-1!==l.search(c.QueryParameterNames.EnableAvatar)||(v[c.QueryParameterNames.EnableAvatar]="true")),l||(l=f+this.synthesisUri),e.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,l);const g="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new i.WebsocketConnection(l,v,m,new s.WebsocketMessageFormatter,i.ProxyInfo.fromParameters(e.parameters),g,n)}}},4526:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAdapterBase=void 0;const i=n(2307),r=n(8040),o=n(9859),s=n(222);class a{constructor(e,t,n,s){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!e)throw new i.ArgumentNullError("authentication");if(!t)throw new i.ArgumentNullError("connectionFactory");if(!n)throw new i.ArgumentNullError("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=t,this.privSynthesizerConfig=n,this.privIsDisposed=!1,this.privSessionAudioDestination=s,this.privSynthesisTurn=new o.SynthesisTurn,this.privConnectionEvents=new i.EventSource,this.privServiceEvents=new i.EventSource,this.privSynthesisContext=new o.SynthesisContext,this.privAgentConfig=new o.AgentConfig,this.connectionEvents.attach((e=>{if("ConnectionClosedEvent"===e.name){const t=e;1e3!==t.statusCode&&this.cancelSynthesisLocal(r.CancellationReason.Error,1007===t.statusCode?r.CancellationErrorCode.BadRequestParameters:r.CancellationErrorCode.ConnectionFailure,"".concat(t.reason," websocket error code: ").concat(t.statusCode))}}))}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)}isDisposed(){return this.privIsDisposed}async dispose(e){if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),void 0!==this.privConnectionConfigurationPromise){const t=await this.privConnectionConfigurationPromise;await t.dispose(e)}}async connect(){await this.connectImpl()}async sendNetworkMessage(e,t){const n="string"===typeof t?i.MessageType.Text:i.MessageType.Binary,r="string"===typeof t?"application/json":"";return(await this.fetchConnection()).send(new s.SpeechConnectionMessage(n,e,this.privSynthesisTurn.requestId,r,t))}async Speak(e,t,n,i,o,s){let a;if(a=t?e:this.privSynthesizer.buildSsml(e),void 0!==this.speakOverride)return this.speakOverride(a,n,i,o);this.privSuccessCallback=i,this.privErrorCallback=o,this.privSynthesisTurn.startNewSynthesis(n,e,t,s);try{await this.connectImpl();const e=await this.fetchConnection();await this.sendSynthesisContext(e),await this.sendSsmlMessage(e,a,n),this.onSynthesisStarted(n),this.receiveMessage()}catch(c){return this.cancelSynthesisLocal(r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,c),Promise.reject(c)}}async stopSpeaking(){await this.connectImpl();return(await this.fetchConnection()).send(new s.SpeechConnectionMessage(i.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(e,t,n,i){const s=new r.PropertyCollection;s.setProperty(o.CancellationErrorCodePropertyName,r.CancellationErrorCode[n]);const a=new r.SpeechSynthesisResult(e,r.ResultReason.Canceled,void 0,i,s);if(this.onSynthesisCancelled(a),this.privSuccessCallback)try{this.privSuccessCallback(a)}catch{}}cancelSynthesisLocal(e,t,n){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,n))}processTypeSpecificMessages(e){return!0}async receiveMessage(){try{const t=await this.fetchConnection(),n=await t.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!n)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const a=s.SpeechConnectionMessage.fromConnectionMessage(n);if(a.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(a.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(a.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(a.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===a.streamId.toLowerCase()&&a.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(a.binaryBody),this.onSynthesizing(a.binaryBody),void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(a.binaryBody));break;case"audio.metadata":const t=o.SynthesisAudioMetadata.fromJSON(a.textBody).Metadata;for(const e of t)switch(e.Type){case o.MetadataType.WordBoundary:case o.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(e);const t=new r.SpeechSynthesisWordBoundaryEventArgs(e.Data.Offset,e.Data.Duration,e.Data.text.Text,e.Data.text.Length,e.Type===o.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,e.Data.text.BoundaryType);this.onWordBoundary(t);break;case o.MetadataType.Bookmark:const n=new r.SpeechSynthesisBookmarkEventArgs(e.Data.Offset,e.Data.Bookmark);this.onBookmarkReached(n);break;case o.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(e),e.Data.IsLastAnimation){const t=new r.SpeechSynthesisVisemeEventArgs(e.Data.Offset,e.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(t)}break;case o.MetadataType.AvatarSignal:this.onAvatarEvent(e);break;case o.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(e)}break;case"turn.end":let n;this.privSynthesisTurn.onServiceTurnEndResponse();try{n=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(n)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.onSynthesisCompleted(n);break;default:this.processTypeSpecificMessages(a)||this.privServiceEvents&&this.serviceEvents.onEvent(new i.ServiceEvent(a.path.toLowerCase(),a.textBody))}return this.receiveMessage()}catch(t){}}sendSynthesisContext(e){this.setSynthesisContextSynthesisSection();const t=this.synthesisContext.toJSON();if(t)return e.send(new s.SpeechConnectionMessage(i.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",t))}setSpeechConfigSynthesisSection(){}connectImpl(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(null!=this.privConnectionPromise)return this.privConnectionPromise.then((e=>e.state()===i.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise),(()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl())));this.privAuthFetchEventId=i.createNoDashGuid(),this.privConnectionId=i.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=t.then((async t=>{this.privSynthesisTurn.onAuthCompleted(!1);const n=this.privConnectionFactory.create(this.privSynthesizerConfig,t,this.privConnectionId);n.events.attach((e=>{this.connectionEvents.onEvent(e)}));const i=await n.open();return 200===i.statusCode?(this.privSynthesisTurn.onConnectionEstablishCompleted(i.statusCode),Promise.resolve(n)):403!==i.statusCode||e?(this.privSynthesisTurn.onConnectionEstablishCompleted(i.statusCode),Promise.reject("Unable to contact server. StatusCode: ".concat(i.statusCode,",\n                    ").concat(this.privSynthesizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Url)," Reason: ").concat(i.reason))):this.connectImpl(!0)}),(e=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(e)})),this.privConnectionPromise.catch((()=>{})),this.privConnectionPromise}sendSpeechServiceConfig(e,t){if(t)return e.send(new s.SpeechConnectionMessage(i.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",t))}sendSsmlMessage(e,t,n){return e.send(new s.SpeechConnectionMessage(i.MessageType.Text,"ssml",n,"application/ssml+xml",t))}async fetchConnection(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then((e=>e.state()===i.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise),(()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()))):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const e=await this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)}onAvatarEvent(e){}onSynthesisStarted(e){}onSynthesizing(e){}onSynthesisCancelled(e){}onSynthesisCompleted(e){}onWordBoundary(e){}onVisemeReceived(e){}onBookmarkReached(e){}}t.SynthesisAdapterBase=a,a.telemetryDataEnabled=!0},4855:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisContext=void 0;const i=n(8040);t.SynthesisContext=class{constructor(){this.privContext={}}setSection(e,t){this.privContext[e]=t}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(e){const t=this.buildSynthesisContext(e);this.setSection("synthesis",t)}buildSynthesisContext(e){return{audio:{metadataOptions:{bookmarkEnabled:!(null===e||void 0===e||!e.bookmarkReached),punctuationBoundaryEnabled:null===e||void 0===e?void 0:e.properties.getProperty(i.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!(null===e||void 0===e||!e.wordBoundary)),sentenceBoundaryEnabled:null===e||void 0===e?void 0:e.properties.getProperty(i.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!(null===e||void 0===e||!e.visemeReceived),wordBoundaryEnabled:null===e||void 0===e?void 0:e.properties.getProperty(i.PropertyId.SpeechServiceResponse_RequestWordBoundary,!(null===e||void 0===e||!e.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:null===e||void 0===e?void 0:e.autoDetectSourceLanguage}}}}},3903:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisStartedEvent=t.ConnectingToSynthesisServiceEvent=t.SynthesisTriggeredEvent=t.SpeechSynthesisEvent=void 0;const i=n(2307);class r extends i.PlatformEvent{constructor(e,t){super(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.EventType.Info),this.privRequestId=t}get requestId(){return this.privRequestId}}t.SpeechSynthesisEvent=r;t.SynthesisTriggeredEvent=class extends r{constructor(e,t,n){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=t,this.privTurnAudioDestinationId=n}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}};t.ConnectingToSynthesisServiceEvent=class extends r{constructor(e,t){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}};t.SynthesisStartedEvent=class extends r{constructor(e,t){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}},3309:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisRestAdapter=void 0;const i=n(2277),r=n(8040),o=n(2679),s=n(8643);t.SynthesisRestAdapter=class{constructor(e,t){let n=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!n){const t=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,"westus"),i=o.ConnectionFactoryBase.getHostSuffix(t);n=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"https://".concat(t,".tts.speech").concat(i))}this.privUri="".concat(n,"/cognitiveservices/voices/list");const s=i.RestConfigBase.requestOptions;this.privRestAdapter=new i.RestMessageAdapter(s),this.privAuthentication=t}getVoicesList(e){return this.privRestAdapter.setHeaders(s.HeaderNames.ConnectionId,e),this.privAuthentication.fetch(e).then((e=>(this.privRestAdapter.setHeaders(e.headerName,e.token),this.privRestAdapter.request(i.RestRequestType.Get,this.privUri))))}}},1953:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisTurn=void 0;const i=n(2307),r=n(9709),o=n(8040),s=n(4543),a=n(3903);class c{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=i.createNoDashGuid(),this.privTurnDeferral=new i.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const e=new o.PropertyCollection;return e.setProperty(o.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),e}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const e=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(e),this.privReceivedAudioWithHeader}return this.getAllReceivedAudio()}startNewSynthesis(e,t,n,i){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=t,this.privIsSSML=n,this.privAudioOutputStream=new r.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",void 0!==i&&(this.privTurnAudioDestination=i,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new a.SynthesisTriggeredEvent(this.requestId,void 0,void 0===i?void 0:i.id()))}onPreConnectionStart(e){this.privAuthFetchEventId=e,this.onEvent(new a.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){if(200===e)return this.onEvent(new a.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),void(this.privBytesReceived=0);403===e&&this.onComplete()}onServiceResponseMessage(e){const t=JSON.parse(e);this.streamId=t.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(e){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch((()=>{}))),this.privInTurn=!0,this.privTurnDeferral=new i.Deferred;const t=JSON.parse(e);t.webrtc&&(this.privWebRTCSDP=t.webrtc.connectionString)}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))}onTextBoundaryEvent(e){this.updateTextOffset(e.Data.text.Text,e.Type)}onVisemeMetadataReceived(e){void 0!==e.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}onSessionEnd(e){this.privAudioDuration=e.Data.Offset}async constructSynthesisResult(){const e=await this.getAllReceivedAudioWithHeader();return new o.SpeechSynthesisResult(this.requestId,o.ResultReason.SynthesizingAudioCompleted,e,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}onEvent(e){i.Events.instance.onEvent(e)}static isXmlTag(e){return e.length>=2&&"<"===e[0]&&">"===e[e.length-1]}updateTextOffset(e,t){t===s.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!c.isXmlTag(e)&&this.updateTextOffset(e,t))):(this.privSentenceOffset=this.privRawText.indexOf(e,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!c.isXmlTag(e)&&this.updateTextOffset(e,t)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch(e){this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(e){return this.privRawText.indexOf("<",e+1)>this.privRawText.indexOf(">",e+1)}}t.SynthesisTurn=c},8960:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesizerConfig=t.SynthesisServiceType=void 0;const i=n(9859);var r;!function(e){e[e.Standard=0]="Standard",e[e.Custom=1]="Custom"}(r=t.SynthesisServiceType||(t.SynthesisServiceType={}));t.SynthesizerConfig=class{constructor(e,t){this.privSynthesisServiceType=r.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=e||new i.SpeechServiceConfig(new i.Context(null)),this.privParameters=t}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(e){this.privSynthesisServiceType=e}set synthesisVideoSection(e){this.privSpeechServiceConfig.Context.synthesis={video:e}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}},3505:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriberConnectionFactory=void 0;const i=n(2277),r=n(8040),o=n(2679),s=n(9859),a=n(8643),c=n(7237);class l extends o.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(e,t,n){let c=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const l=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,"centralus"),u="wss://transcribe."+l+".cts.speech"+o.ConnectionFactoryBase.getHostSuffix(l)+this.multiaudioRelativeUri,d=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,u),h={};this.setQueryParams(h,e,c),c||(c=d);const p={};void 0!==t.token&&""!==t.token&&(p[t.headerName]=t.token),p[a.HeaderNames.ConnectionId]=n,e.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,c);const f="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new i.WebsocketConnection(c,h,p,new s.WebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),f,n)}setQueryParams(e,t,n){const i=t.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),o=t.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);i&&!(c.QueryParameterNames.CustomSpeechDeploymentId in e)&&(e[c.QueryParameterNames.CustomSpeechDeploymentId]=i),o&&!(c.QueryParameterNames.Language in e)&&(e[c.QueryParameterNames.Language]=o);const a="true"===t.parameters.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase(),l=t.parameters.getProperty(s.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple])!==r.OutputFormat[r.OutputFormat.Simple];(a||l)&&(e[c.QueryParameterNames.Format]=r.OutputFormat[r.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(t,e,n)}}t.TranscriberConnectionFactory=l},1666:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionConfig=void 0;const i=n(3593);class r extends i.RestConfigBase{static get host(){return r.privHost}static get apiVersion(){return r.privApiVersion}static get clientAppId(){return r.privClientAppId}static get defaultLanguageCode(){return r.privDefaultLanguageCode}static get restPath(){return r.privRestPath}static get webSocketPath(){return r.privWebSocketPath}static get transcriptionEventKeys(){return r.privTranscriptionEventKeys}}t.ConversationConnectionConfig=r,r.privHost="dev.microsofttranslator.com",r.privRestPath="/capito/room",r.privApiVersion="2.0",r.privDefaultLanguageCode="en-US",r.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",r.privWebSocketPath="/capito/translate",r.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"]},7108:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionFactory=void 0;const i=n(2277),r=n(2307),o=n(260),s=n(8040),a=n(2679),c=n(1666),l=n(4914);class u extends a.ConnectionFactoryBase{create(e,t,n){const a=e.parameters.getProperty(s.PropertyId.ConversationTranslator_Host,c.ConversationConnectionConfig.host),u=e.parameters.getProperty(s.PropertyId.ConversationTranslator_CorrelationId,r.createGuid()),d="wss://".concat(a).concat(c.ConversationConnectionConfig.webSocketPath),h=e.parameters.getProperty(s.PropertyId.ConversationTranslator_Token,void 0);o.Contracts.throwIfNullOrUndefined(h,"token");const p={};p[c.ConversationConnectionConfig.configParams.apiVersion]=c.ConversationConnectionConfig.apiVersion,p[c.ConversationConnectionConfig.configParams.token]=h,p[c.ConversationConnectionConfig.configParams.correlationId]=u;const f="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new i.WebsocketConnection(d,p,{},new l.ConversationWebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),f,n)}}t.ConversationConnectionFactory=u},6109:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionMessage=void 0;const i=n(2307);class r extends i.ConnectionMessage{constructor(e,t,n,i){super(e,t,n,i);const r=JSON.parse(this.textBody);void 0!==r.type&&(this.privConversationMessageType=r.type)}get conversationMessageType(){return this.privConversationMessageType}}t.ConversationConnectionMessage=r},9469:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationManager=void 0;const i=n(2277),r=n(260),o=n(8040),s=n(1666);t.ConversationManager=class{constructor(){this.privRequestParams=s.ConversationConnectionConfig.configParams,this.privErrors=s.ConversationConnectionConfig.restErrors,this.privHost=s.ConversationConnectionConfig.host,this.privApiVersion=s.ConversationConnectionConfig.apiVersion,this.privRestPath=s.ConversationConnectionConfig.restPath,this.privRestAdapter=new i.RestMessageAdapter({})}createOrJoin(e,t,n,a){try{r.Contracts.throwIfNullOrUndefined(e,"args");const c=e.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,s.ConversationConnectionConfig.defaultLanguageCode),l=e.getProperty(o.PropertyId.ConversationTranslator_Name,"conversation_host"),u=e.getProperty(o.PropertyId.ConversationTranslator_Host,this.privHost),d=e.getProperty(o.PropertyId.ConversationTranslator_CorrelationId),h=e.getProperty(o.PropertyId.SpeechServiceConnection_Key),p=e.getProperty(o.PropertyId.SpeechServiceConnection_Region),f=e.getProperty(o.PropertyId.SpeechServiceAuthorization_Token);r.Contracts.throwIfNullOrWhitespace(c,"languageCode"),r.Contracts.throwIfNullOrWhitespace(l,"nickname"),r.Contracts.throwIfNullOrWhitespace(u,"endpointHost");const v={};v[this.privRequestParams.apiVersion]=this.privApiVersion,v[this.privRequestParams.languageCode]=c,v[this.privRequestParams.nickname]=l;const m={};d&&(m[this.privRequestParams.correlationId]=d),m[this.privRequestParams.clientAppId]=s.ConversationConnectionConfig.clientAppId,void 0!==t?v[this.privRequestParams.roomId]=t:(r.Contracts.throwIfNullOrUndefined(p,this.privErrors.authInvalidSubscriptionRegion),m[this.privRequestParams.subscriptionRegion]=p,h?m[this.privRequestParams.subscriptionKey]=h:f?m[this.privRequestParams.authorization]="Bearer ".concat(f):r.Contracts.throwIfNullOrUndefined(h,this.privErrors.authInvalidSubscriptionKey));const g={};g.headers=m,this.privRestAdapter.options=g;const y="https://".concat(u).concat(this.privRestPath);this.privRestAdapter.request(i.RestRequestType.Post,y,v,null).then((e=>{const t=i.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,e.headers);if(!e.ok){if(a){let n,i=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",e.status.toString());try{n=JSON.parse(e.data),i+=" [".concat(n.error.code,": ").concat(n.error.message,"]")}catch(o){i+=" [".concat(e.data,"]")}t&&(i+=" ".concat(t)),a(i)}return}const r=JSON.parse(e.data);if(r&&(r.requestId=t),n){try{n(r)}catch(o){a&&a(o)}n=void 0}})).catch((()=>{}))}catch(c){if(a)if(c instanceof Error){const e=c;a(e.name+": "+e.message)}else a(c)}}leave(e,t){return new Promise(((n,s)=>{try{r.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","token"));const s=e.getProperty(o.PropertyId.ConversationTranslator_Host,this.privHost),a=e.getProperty(o.PropertyId.ConversationTranslator_CorrelationId),c={};c[this.privRequestParams.apiVersion]=this.privApiVersion,c[this.privRequestParams.sessionToken]=t;const l={};a&&(l[this.privRequestParams.correlationId]=a);const u={};u.headers=l,this.privRestAdapter.options=u;const d="https://".concat(s).concat(this.privRestPath);this.privRestAdapter.request(i.RestRequestType.Delete,d,c,null).then((e=>{e.ok,n()})).catch((()=>{}))}catch(a){if(a instanceof Error){const e=a;s(e.name+": "+e.message)}else s(a)}}))}}},7967:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationRequestSession=void 0;const i=n(2307);t.ConversationRequestSession=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=i.createNoDashGuid(),this.privRequestCompletionDeferral=new i.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,t){this.privSessionId=t}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){200!==e&&403===e&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=i.createNoDashGuid():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)await e.detach()}}onComplete(){}}},8486:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationServiceAdapter=void 0;const i=n(2307),r=n(8040),o=n(9859),s=n(6109),a=n(7967),c=n(9537),l=n(4566),u=n(7316);class d extends o.ServiceRecognizerBase{constructor(e,t,n,r,o){super(e,t,n,r,o),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=o,this.privConversationAuthentication=e,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=e=>this.conversationConnectImpl(e),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new a.ConversationRequestSession(i.createNoDashGuid()),this.privConversationConnectionFactory=t,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(e){if(this.privConversationIsDisposed=!0,void 0!==this.privConnectionConfigPromise){const t=await this.privConnectionConfigPromise;await t.dispose(e)}await super.dispose(e)}async sendMessage(e){return(await this.fetchConnection()).send(new s.ConversationConnectionMessage(i.MessageType.Text,e))}async sendMessageAsync(e){const t=await this.fetchConnection();await t.send(new s.ConversationConnectionMessage(i.MessageType.Text,e))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(e,t,n,i,o){this.terminateMessageLoop=!0;const s=new r.ConversationTranslationCanceledEventArgs(n,o,i,void 0,e);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,s)}catch{}}async conversationConnectImpl(e){return this.privConnectionLoop=this.startMessageLoop(),e}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const e=new i.Deferred;try{const n=await this.fetchConnection(),i=await n.read();if(this.isDisposed()||this.terminateMessageLoop)return e.resolve(),Promise.resolve();if(!i)return this.receiveConversationMessageOverride();const s=this.privConversationRequestSession.sessionId,a=i.conversationMessageType.toLowerCase();let d=!1;try{switch(a){case"info":case"participant_command":case"command":const e=u.CommandResponsePayload.fromJSON(i.textBody);switch(e.command.toLowerCase()){case"participantlist":const t=u.ParticipantsListPayloadResponse.fromJSON(i.textBody),n=t.participants.map((e=>({avatar:e.avatar,displayName:e.nickname,id:e.participantId,isHost:e.ishost,isMuted:e.ismuted,isUsingTts:e.usetts,preferredLanguage:e.locale})));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new c.ParticipantsListEventArgs(t.roomid,t.token,t.translateTo,t.profanityFilter,t.roomProfanityFilter,t.roomLocked,t.muteAll,n,s));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new c.ParticipantAttributeEventArgs(e.participantId,l.ConversationTranslatorCommandTypes.setTranslateToLanguages,e.value,s));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new c.ParticipantAttributeEventArgs(e.participantId,l.ConversationTranslatorCommandTypes.setProfanityFiltering,e.value,s));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new c.ParticipantAttributeEventArgs(e.participantId,l.ConversationTranslatorCommandTypes.setMute,e.value,s));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new c.MuteAllEventArgs(e.value,s));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new r.ConversationExpirationEventArgs(e.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new c.ParticipantAttributeEventArgs(e.participantId,l.ConversationTranslatorCommandTypes.setUseTTS,e.value,s));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new c.LockRoomEventArgs(e.value,s));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new c.ParticipantAttributeEventArgs(e.participantId,l.ConversationTranslatorCommandTypes.changeNickname,e.value,s));break;case"joinsession":const a=u.ParticipantPayloadResponse.fromJSON(i.textBody),d={avatar:a.avatar,displayName:a.nickname,id:a.participantId,isHost:a.ishost,isMuted:a.ismuted,isUsingTts:a.usetts,preferredLanguage:a.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new c.ParticipantEventArgs(d,s));break;case"leavesession":const h={id:e.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new c.ParticipantEventArgs(h,s));break;case"disconnectsession":e.participantId;break;case"token":const p=new o.CognitiveTokenAuthentication((()=>{const t=e.token;return Promise.resolve(t)}),(()=>{const t=e.token;return Promise.resolve(t)}));this.authentication=p,this.privConversationServiceConnector.onToken(p)}break;case"partial":case"final":const t=u.SpeechResponsePayload.fromJSON(i.textBody),n="final"===a?r.ResultReason.TranslatedParticipantSpeech:r.ResultReason.TranslatingParticipantSpeech,h=new r.ConversationTranslationResult(t.participantId,this.getTranslations(t.translations),t.language,t.id,n,t.recognition,void 0,void 0,i.textBody,void 0);t.isFinal?((void 0!==h.text&&h.text.length>0||t.id===this.privLastPartialUtteranceId)&&(d=!0),d&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new c.ConversationReceivedTranslationEventArgs(l.ConversationTranslatorMessageTypes.final,h,s))):void 0!==h.text&&(this.privLastPartialUtteranceId=t.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new c.ConversationReceivedTranslationEventArgs(l.ConversationTranslatorMessageTypes.partial,h,s)));break;case"translated_message":const p=u.TextResponsePayload.fromJSON(i.textBody),f=new r.ConversationTranslationResult(p.participantId,this.getTranslations(p.translations),p.language,void 0,void 0,p.originalText,void 0,void 0,void 0,i.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new c.ConversationReceivedTranslationEventArgs(l.ConversationTranslatorMessageTypes.instantMessage,f,s))}}catch(t){}return this.receiveConversationMessageOverride()}catch(t){this.terminateMessageLoop=!0}return e.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const e=this.receiveConversationMessageOverride();try{return await e}catch(t){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,t),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):void 0!==this.privConnectionConfigPromise?this.privConnectionConfigPromise.then((e=>e.state()===i.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise),(()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()))):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then((e=>e)),this.privConnectionConfigPromise)}getTranslations(e){let t;if(void 0!==e){t=new r.Translations;for(const n of e)t.set(n.lang,n.translation)}return t}}t.ConversationServiceAdapter=d},5934:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslatorConnectionFactory=void 0;const i=n(2277),r=n(7354),o=n(260),s=n(8040),a=n(8643),c=n(7237),l=n(2679),u=n(9859);class d extends l.ConnectionFactoryBase{constructor(e){super(),o.Contracts.throwIfNullOrUndefined(e,"convGetter"),this.privConvGetter=e}create(e,t,n){const o="TRUE"===e.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase(),h=this.privConvGetter().room,p=h.cognitiveSpeechRegion||e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region,""),f={hostSuffix:l.ConnectionFactoryBase.getHostSuffix(p),path:d.CTS_VIRT_MIC_PATH,region:encodeURIComponent(p)};f[c.QueryParameterNames.Language]=encodeURIComponent(e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"")),f[c.QueryParameterNames.CtsMeetingId]=encodeURIComponent(h.roomId),f[c.QueryParameterNames.CtsDeviceId]=encodeURIComponent(h.participantId),f[c.QueryParameterNames.CtsIsParticipant]=h.isHost?"":"&"+c.QueryParameterNames.CtsIsParticipant;let v="";const m={},g={};if(o){if(v=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint),!v){v="wss://"+e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"}v=r.StringUtils.formatString(v,f);const t=new URL(v);t.searchParams.forEach(((e,t)=>{m[t]=e}));(new u.TranscriberConnectionFactory).setQueryParams(m,e,v),m[c.QueryParameterNames.CtsMeetingId]=f[c.QueryParameterNames.CtsMeetingId],m[c.QueryParameterNames.CtsDeviceId]=f[c.QueryParameterNames.CtsDeviceId],h.isHost||(m[c.QueryParameterNames.CtsIsParticipant]=""),c.QueryParameterNames.Format in m||(m[c.QueryParameterNames.Format]="simple"),t.searchParams.forEach(((e,n)=>{t.searchParams.set(n,m[n]),delete m[n]})),v=t.toString()}else{const t=new u.TranslationConnectionFactory;v=t.getEndpointUrl(e,!0),v=r.StringUtils.formatString(v,f),t.setQueryParams(m,e,v)}g[a.HeaderNames.ConnectionId]=n,g[i.RestConfigBase.configParams.token]=h.token,t.token&&(g[t.headerName]=t.token);const y="TRUE"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase();return new i.WebsocketConnection(v,m,g,new u.WebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),y,n)}}t.ConversationTranslatorConnectionFactory=d,d.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio"},9537:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationReceivedTranslationEventArgs=t.ParticipantsListEventArgs=t.ParticipantAttributeEventArgs=t.ParticipantEventArgs=t.LockRoomEventArgs=t.MuteAllEventArgs=void 0;const i=n(8040);class r extends i.SessionEventArgs{constructor(e,t){super(t),this.privIsMuted=e}get isMuted(){return this.privIsMuted}}t.MuteAllEventArgs=r;class o extends i.SessionEventArgs{constructor(e,t){super(t),this.privIsLocked=e}get isMuted(){return this.privIsLocked}}t.LockRoomEventArgs=o;class s extends i.SessionEventArgs{constructor(e,t){super(t),this.privParticipant=e}get participant(){return this.privParticipant}}t.ParticipantEventArgs=s;class a extends i.SessionEventArgs{constructor(e,t,n,i){super(i),this.privKey=t,this.privValue=n,this.privParticipantId=e}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}t.ParticipantAttributeEventArgs=a;class c extends i.SessionEventArgs{constructor(e,t,n,i,r,o,s,a,c){super(c),this.privRoomId=e,this.privSessionToken=t,this.privTranslateTo=n,this.privProfanityFilter=i,this.privRoomProfanityFilter=r,this.privIsRoomLocked=o,this.privIsRoomLocked=s,this.privParticipants=a}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}t.ParticipantsListEventArgs=c;t.ConversationReceivedTranslationEventArgs=class{constructor(e,t,n){this.privPayload=t,this.privCommand=e,this.privSessionId=n}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}},4566:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslatorCommandTypes=t.ConversationTranslatorMessageTypes=t.InternalParticipants=void 0;t.InternalParticipants=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this.participants=e,this.meId=t}addOrUpdateParticipant(e){if(void 0===e)return;const t=this.getParticipantIndex(e.id);return t>-1?this.participants.splice(t,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex((t=>t.id===e))}getParticipant(e){return this.participants.find((t=>t.id===e))}deleteParticipant(e){this.participants=this.participants.filter((t=>t.id!==e))}get host(){return this.participants.find((e=>!0===e.isHost))}get me(){return this.getParticipant(this.meId)}},t.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},t.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"}},8388:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslatorRecognizer=t.ConversationRecognizerFactory=void 0;const i=n(9859),r=n(2307),o=n(260),s=n(8040),a=n(7108),c=n(8486);t.ConversationRecognizerFactory=class{static fromConfig(e,t,n){return new l(e,t,n)}};class l extends s.Recognizer{constructor(e,t,n){const i=t;o.Contracts.throwIfNull(i,"speechConfig");const c=e;o.Contracts.throwIfNull(c,"conversationImpl"),super(n,i.properties,new a.ConversationConnectionFactory),this.privConversation=c,this.privIsDisposed=!1,this.privProperties=i.properties.clone(),this.privConnection=s.Connection.fromRecognizer(this);"on"===this.privProperties.getProperty(s.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&"undefined"!==typeof Blob&&"undefined"!==typeof Worker?(this.privSetTimeout=r.Timeout.setTimeout,this.privClearTimeout=r.Timeout.clearTimeout):"undefined"!==typeof window?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(e){this.privConnection.connected=e}set disconnected(e){this.privConnection.disconnected=e}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(e,t,n){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfNullOrWhitespace(e,"token"),this.privReco.conversationTranslatorToken=e,this.resetConversationTimeout(),this.privReco.connectAsync(t,n)}catch(i){if(n)if(i instanceof Error){const e=i;n(e.name+": "+e.message)}else n(i)}}disconnect(e,t){try{o.Contracts.throwIfDisposed(this.privIsDisposed),void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then((()=>{e&&e()}),(e=>{t&&t(e)}))}catch(n){if(t)if(n instanceof Error){const e=n;t(e.name+": "+e.message)}else t(n);this.dispose(!0).catch((e=>{r.Events.instance.onEvent(new r.BackgroundEvent(e))}))}}sendRequest(e,t,n){try{o.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(e,t,n)}catch(i){if(n)if(i instanceof Error){const e=i;n(e.name+": "+e.message)}else n(i);this.dispose(!0).catch((e=>{r.Events.instance.onEvent(new r.BackgroundEvent(e))}))}}onToken(e){this.privConversation.onToken(e)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(e){this.privIsDisposed||e&&(void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(e))}createRecognizerConfig(e){return new i.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,n,i){const r=n;return new c.ConversationServiceAdapter(e,t,r,i,this)}sendMessage(e,t,n){((e,t,n)=>{void 0!==e?e.then((()=>{try{t&&t()}catch(e){n&&n("'Unhandled error on promise callback: ".concat(e,"'"))}}),(e=>{try{n&&n(e)}catch(t){}})):n&&n("Null promise")})(this.privReco.sendMessageAsync(e),t,n),this.resetConversationTimeout()}resetConversationTimeout(){void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout((()=>{this.sendRequest(this.privConversation.getKeepAlive())}),6e4)}}t.ConversationTranslatorRecognizer=l},4914:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationWebsocketMessageFormatter=void 0;const i=n(2307),r=n(6109);t.ConversationWebsocketMessageFormatter=class{toConnectionMessage(e){const t=new i.Deferred;try{if(e.messageType===i.MessageType.Text){const n=new r.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);t.resolve(n)}else e.messageType===i.MessageType.Binary&&t.resolve(new r.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(n){t.reject("Error formatting the message. Error: ".concat(n))}return t.promise}fromConnectionMessage(e){const t=new i.Deferred;try{if(e.messageType===i.MessageType.Text){const n="".concat(e.textBody?e.textBody:"");t.resolve(new i.RawWebsocketMessage(i.MessageType.Text,n,e.id))}}catch(n){t.reject("Error formatting the message. ".concat(n))}return t.promise}}},2080:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9469);Object.defineProperty(t,"ConversationManager",{enumerable:!0,get:function(){return i.ConversationManager}});var r=n(1666);Object.defineProperty(t,"ConversationConnectionConfig",{enumerable:!0,get:function(){return r.ConversationConnectionConfig}});var o=n(8388);Object.defineProperty(t,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return o.ConversationRecognizerFactory}});var s=n(7130);Object.defineProperty(t,"TranscriberRecognizer",{enumerable:!0,get:function(){return s.TranscriberRecognizer}});var a=n(9537);Object.defineProperty(t,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(t,"LockRoomEventArgs",{enumerable:!0,get:function(){return a.LockRoomEventArgs}}),Object.defineProperty(t,"MuteAllEventArgs",{enumerable:!0,get:function(){return a.MuteAllEventArgs}}),Object.defineProperty(t,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return a.ParticipantAttributeEventArgs}}),Object.defineProperty(t,"ParticipantEventArgs",{enumerable:!0,get:function(){return a.ParticipantEventArgs}}),Object.defineProperty(t,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return a.ParticipantsListEventArgs}});var c=n(4566);Object.defineProperty(t,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return c.ConversationTranslatorCommandTypes}}),Object.defineProperty(t,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return c.ConversationTranslatorMessageTypes}}),Object.defineProperty(t,"InternalParticipants",{enumerable:!0,get:function(){return c.InternalParticipants}})},3551:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandResponsePayload=void 0;class n{constructor(e){this.privCommandResponse=(e=>JSON.parse(e))(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new n(e)}}t.CommandResponsePayload=n},7316:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3551);Object.defineProperty(t,"CommandResponsePayload",{enumerable:!0,get:function(){return i.CommandResponsePayload}});var r=n(4555);Object.defineProperty(t,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantsListPayloadResponse}}),Object.defineProperty(t,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantPayloadResponse}});var o=n(4297);Object.defineProperty(t,"SpeechResponsePayload",{enumerable:!0,get:function(){return o.SpeechResponsePayload}}),Object.defineProperty(t,"TextResponsePayload",{enumerable:!0,get:function(){return o.TextResponsePayload}})},4555:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantPayloadResponse=t.ParticipantsListPayloadResponse=void 0;class n{constructor(e){this.privParticipantsPayloadResponse=(e=>JSON.parse(e))(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new n(e)}}t.ParticipantsListPayloadResponse=n;class i{constructor(e){this.privParticipantPayloadResponse=(e=>JSON.parse(e))(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new i(e)}}t.ParticipantPayloadResponse=i},4297:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextResponsePayload=t.SpeechResponsePayload=void 0;class n{constructor(e){this.privSpeechResponse=(e=>JSON.parse(e))(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return"final"===this.privSpeechResponse.type}static fromJSON(e){return new n(e)}}t.SpeechResponsePayload=n;class i{constructor(e){this.privTextResponse=(e=>JSON.parse(e))(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new i(e)}}t.TextResponsePayload=i},7130:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriberRecognizer=void 0;const i=n(2307),r=n(260),o=n(8040),s=n(9859);class a extends o.Recognizer{constructor(e,t){const n=e;r.Contracts.throwIfNull(n,"speechTranslationConfig");const i=t;r.Contracts.throwIfNull(i,"audioConfigImpl"),r.Contracts.throwIfNullOrWhitespace(n.speechRecognitionLanguage,o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage]),super(t,n.properties,new s.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){r.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e)}set conversation(e){r.Contracts.throwIfNullOrUndefined(e,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=e}getConversationInfo(){return r.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(e){r.Contracts.throwIfNullOrUndefined(e,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=e}getMeetingInfo(){return r.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(e,t){i.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(s.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){i.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(e,t){const n=this.privReco;r.Contracts.throwIfNullOrUndefined(n,"serviceRecognizer"),await n.sendSpeechEventAsync(e,t)}async pushMeetingEvent(e,t){const n=this.privReco;r.Contracts.throwIfNullOrUndefined(n,"serviceRecognizer"),await n.sendMeetingSpeechEventAsync(e,t)}async enforceAudioGating(){const e=this.audioConfig,t=(await e.format).channels;if(1===t){if("true"!==this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase())throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(8!==t)throw new Error("Unsupported audio configuration: Detected ".concat(t,"-channel audio"))}connectMeetingCallbacks(e){this.isMeetingRecognizer=!0,this.canceled=(t,n)=>{e.canceled&&e.canceled(e,n)},this.recognizing=(t,n)=>{e.transcribing&&e.transcribing(e,n)},this.recognized=(t,n)=>{e.transcribed&&e.transcribed(e,n)},this.sessionStarted=(t,n)=>{e.sessionStarted&&e.sessionStarted(e,n)},this.sessionStopped=(t,n)=>{e.sessionStopped&&e.sessionStopped(e,n)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(e){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(e))}createRecognizerConfig(e){return new s.RecognizerConfig(e,this.properties)}createServiceRecognizer(e,t,n,i){const r=n;return new s.TranscriptionServiceRecognizer(e,t,r,i,this)}}t.TranscriberRecognizer=a},4183:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriptionServiceRecognizer=void 0;const i=n(2307),r=n(8040),o=n(9859),s=n(222);class a extends o.ConversationServiceRecognizer{constructor(e,t,n,i,o){super(e,t,n,i,o),this.privTranscriberRecognizer=o,this.sendPrePayloadJSONOverride=e=>this.sendTranscriptionStartJSON(e),"true"===this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(e,t){if(this.privRequestSession.isRecognizing){const n=await this.fetchConnection();await this.sendSpeechEvent(n,this.createSpeechEventPayload(e,t))}}async sendMeetingSpeechEventAsync(e,t){if(this.privRequestSession.isRecognizing){const n=await this.fetchConnection();await this.sendSpeechEvent(n,this.createMeetingSpeechEventPayload(e,t))}}processTypeSpecificMessages(e){return this.processSpeechMessages(e)}handleRecognizedCallback(e,t,n){try{const o=new r.SpeechRecognitionEventArgs(e,t,n);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,o),this.privSuccessCallback){try{this.privSuccessCallback(e)}catch(i){this.privErrorCallback&&this.privErrorCallback(i)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch(o){}}handleRecognizingCallback(e,t,n){try{const i=new r.SpeechRecognitionEventArgs(e,t,n);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,i)}catch(i){}}cancelRecognition(e,t,n,i,s){const a=new r.PropertyCollection;if(a.setProperty(o.CancellationErrorCodePropertyName,r.CancellationErrorCode[i]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const t=new r.MeetingTranscriptionCanceledEventArgs(n,s,i,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,t)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const t=new r.ConversationTranscriptionCanceledEventArgs(n,s,i,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,t)}catch{}}if(this.privSuccessCallback){const e=new r.SpeechRecognitionResult(t,r.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,s,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(e){if(await this.sendSpeechContext(e,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const t=this.privTranscriberRecognizer.getMeetingInfo(),n=this.createMeetingSpeechEventPayload(t,"start");await this.sendSpeechEvent(e,n)}else{const t=this.privTranscriberRecognizer.getConversationInfo(),n=this.createSpeechEventPayload(t,"start");await this.sendSpeechEvent(e,n)}await this.sendWaveHeader(e)}sendSpeechEvent(e,t){const n=JSON.stringify(t);if(n)return e.send(new s.SpeechConnectionMessage(i.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",n))}createSpeechEventPayload(e,t){const n={id:"meeting",name:t,meeting:e.conversationProperties};return n.meeting.id=e.id,n.meeting.attendees=e.participants,n}createMeetingSpeechEventPayload(e,t){const n={id:"meeting",name:t,meeting:e.meetingProperties};return n.meeting.id=e.id,n.meeting.attendees=e.participants,n}}t.TranscriptionServiceRecognizer=a},2433:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationConnectionFactory=void 0;const i=n(2277),r=n(7354),o=n(8040),s=n(2679),a=n(9859),c=n(8643),l=n(7237);class u extends s.ConnectionFactoryBase{create(e,t,n){const r=this.getEndpointUrl(e),s={};void 0!==e.autoDetectSourceLanguages&&(s[l.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(s,e,r);const u={};void 0!==t.token&&""!==t.token&&(u[t.headerName]=t.token),u[c.HeaderNames.ConnectionId]=n,e.parameters.setProperty(o.PropertyId.SpeechServiceConnection_Url,r);const d="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new i.WebsocketConnection(r,s,u,new a.WebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),d,n)}getEndpointUrl(e,t){const n=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Region),i=s.ConnectionFactoryBase.getHostSuffix(n);let a=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!a)if(void 0!==e.autoDetectSourceLanguages){a=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+i)+"/speech/universal/v2"}else{a=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+i)+"/speech/translation/cognitiveservices/v1"}return!0===t?a:r.StringUtils.formatString(a,{region:n})}setQueryParams(e,t,n){e.from=t.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage),e.to=t.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages),e.scenario=t.recognitionMode===a.RecognitionMode.Interactive?"interactive":t.recognitionMode===a.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(t,e,n),this.setUrlParameter(o.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,l.QueryParameterNames.StableTranslation,t,e,n);const i=t.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);void 0!==i&&(e.voice=i,e.features="texttospeech")}}t.TranslationConnectionFactory=u},1086:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationServiceRecognizer=void 0;const i=n(2307),r=n(8040),o=n(9859);class s extends o.ConversationServiceRecognizer{constructor(e,t,n,i,r){super(e,t,n,i,r),this.privTranslationRecognizer=r,this.connectionEvents.attach((e=>{"ConnectionEstablishedEvent"===e.name&&this.privTranslationRecognizer.onConnection()}))}async processTypeSpecificMessages(e){const t=new r.PropertyCollection;let n=await this.processSpeechMessages(e);if(n)return!0;const s=async i=>{if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+i.Offset+i.Duration),i.RecognitionStatus===o.RecognitionStatus.Success){const e=this.fireEventForResult(i,t);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(s){}if(this.privSuccessCallback){try{this.privSuccessCallback(e.result)}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const c=o.EnumTranslation.implTranslateRecognitionResult(i.RecognitionStatus),l=new r.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,c,i.Text,i.Duration,this.privRequestSession.currentTurnAudioOffset+i.Offset,i.Language,i.Confidence,void 0,e.textBody,t);if(c===r.ResultReason.Canceled){const e=o.EnumTranslation.implTranslateCancelResult(i.RecognitionStatus),t=o.EnumTranslation.implTranslateCancelErrorCode(i.RecognitionStatus);await this.cancelRecognitionLocal(e,t,o.EnumTranslation.implTranslateErrorDetails(t))}else{if(!this.privRequestSession.isSpeechEnded||c!==r.ResultReason.NoMatch||i.RecognitionStatus===o.RecognitionStatus.InitialSilenceTimeout){const e=new r.TranslationRecognitionEventArgs(l,l.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(s){}}if(this.privSuccessCallback){try{this.privSuccessCallback(l)}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}n=!0}},a=(e,t)=>{const i=this.fireEventForResult(e,t);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+i.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,i)}catch(r){}n=!0};switch(e.messageType===i.MessageType.Text&&t.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"translation.hypothesis":a(o.TranslationHypothesis.fromJSON(e.textBody),t);break;case"translation.response":const i=JSON.parse(e.textBody);if(i.SpeechPhrase)await s(o.TranslationPhrase.fromTranslationResponse(i));else{const n=JSON.parse(e.textBody);n.SpeechHypothesis&&a(o.TranslationHypothesis.fromTranslationResponse(n),t)}break;case"translation.phrase":await s(o.TranslationPhrase.fromJSON(e.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(e.binaryBody,this.privRequestSession.sessionId),n=!0;break;case"audio.end":case"translation.synthesis.end":const l=o.TranslationSynthesisEnd.fromJSON(e.textBody);switch(l.SynthesisStatus){case o.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const e=new r.TranslationSynthesisResult(r.ResultReason.Canceled,void 0),t=new r.TranslationSynthesisEventArgs(e,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,t)}catch(c){}}if(this.privTranslationRecognizer.canceled){const e=new r.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,r.CancellationReason.Error,l.FailureReason,r.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,e)}catch(c){}}break;case o.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId)}n=!0}return n}cancelRecognition(e,t,n,i,s){const a=new r.PropertyCollection;if(a.setProperty(o.CancellationErrorCodePropertyName,r.CancellationErrorCode[i]),this.privTranslationRecognizer.canceled){const t=new r.TranslationRecognitionCanceledEventArgs(e,n,s,i,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,t)}catch{}}if(this.privSuccessCallback){const e=new r.TranslationRecognitionResult(void 0,t,r.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,s,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(e,t,n){try{const i=new r.TranslationRecognitionEventArgs(r.TranslationRecognitionResult.fromSpeechRecognitionResult(e),t,n);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,i)}catch(i){}}handleRecognizedCallback(e,t,n){try{const i=new r.TranslationRecognitionEventArgs(r.TranslationRecognitionResult.fromSpeechRecognitionResult(e),t,n);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,i)}catch(i){}}fireEventForResult(e,t){let n,s,a;if(void 0!==e.Translation.Translations){n=new r.Translations;for(const t of e.Translation.Translations)n.set(t.Language,t.Text||t.DisplayText)}e instanceof o.TranslationPhrase?(s=e.Translation&&e.Translation.TranslationStatus===i.TranslationStatus.Success?r.ResultReason.TranslatedSpeech:r.ResultReason.RecognizedSpeech,a=e.Confidence):s=r.ResultReason.TranslatingSpeech;const c=e.Language,l=e.Offset+this.privRequestSession.currentTurnAudioOffset,u=new r.TranslationRecognitionResult(n,this.privRequestSession.requestId,s,e.Text,e.Duration,l,c,a,e.Translation.FailureReason,JSON.stringify(e),t);return new r.TranslationRecognitionEventArgs(u,l,this.privRequestSession.sessionId)}sendSynthesisAudio(e,t){const n=void 0===e?r.ResultReason.SynthesizingAudioCompleted:r.ResultReason.SynthesizingAudio,i=new r.TranslationSynthesisResult(n,e),o=new r.TranslationSynthesisEventArgs(i,t);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,o)}catch(s){}}}t.TranslationServiceRecognizer=s},5253:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationStatus=void 0,function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(t.TranslationStatus||(t.TranslationStatus={}))},8557:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceServiceRecognizer=void 0;const i=n(2277),r=n(2307),o=n(8040),s=n(9859),a=n(222);class c extends s.ServiceRecognizerBase{constructor(e,t,n,i,o){super(e,t,n,i,o),this.privDeferralMap=new r.DeferralMap,this.privSpeakerAudioSource=n,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(e){this.privSpeakerAudioSource=e}processTypeSpecificMessages(e){let t=!1;const n=new o.PropertyCollection;switch(e.messageType===r.MessageType.Text&&n.setProperty(o.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speaker.profiles":const n=JSON.parse(e.textBody);switch(n.operation.toLowerCase()){case"create":this.handleCreateResponse(n,e.requestId);break;case"delete":case"reset":this.handleResultResponse(n,e.requestId);break;case"fetch":const t=JSON.parse(e.textBody);this.handleFetchResponse(t,e.requestId)}t=!0;break;case"speaker.phrases":const i=JSON.parse(e.textBody);this.handlePhrasesResponse(i,e.requestId),t=!0;break;case"speaker.profile.enrollment":const r=JSON.parse(e.textBody),s=new o.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(r.enrollment?r.enrollment.enrollmentStatus:r.status.statusCode),r.enrollment?JSON.stringify(r.enrollment):void 0,r.status.reason);this.privDeferralMap.getId(e.requestId)&&this.privDeferralMap.complete(e.requestId,s),this.privRequestSession.onSpeechEnded(),t=!0}const i=new r.Deferred;return i.resolve(t),i.promise}cancelRecognition(e,t,n,i,r){(new o.PropertyCollection).setProperty(s.CancellationErrorCodePropertyName,o.CancellationErrorCode[i]);const a=new o.VoiceProfileEnrollmentResult(o.ResultReason.Canceled,r,r);this.privDeferralMap.getId(t)&&this.privDeferralMap.complete(t,a)}async createProfile(e,t){this.voiceProfileType=e.toString();const n=this.connectImpl();try{const i=new r.Deferred;return await n,await this.sendCreateProfile(i,e,t),this.receiveMessage(),i.promise}catch(i){throw i}}async resetProfile(e){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("reset",e.profileType,e)}async deleteProfile(e){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("delete",e.profileType,e)}async retrieveEnrollmentResult(e){return this.voiceProfileType=e.profileType.toString(),this.privExpectedProfileId=e.profileId,this.sendCommonRequest("fetch",e.profileType,e)}async getAllProfiles(e){return this.voiceProfileType=e.toString(),this.sendCommonRequest("fetch",e)}async getActivationPhrases(e,t){this.voiceProfileType=e.toString();const n=this.connectImpl();try{const i=new r.Deferred;return await n,await this.sendPhrasesRequest(i,e,t),this.receiveMessage(),i.promise}catch(i){throw i}}async enrollProfile(e){this.voiceProfileType=e.profileType.toString();const t=new r.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(o.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const n=this.connectImpl(),s=this.sendPreAudioMessages(e,t),a=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),c=await this.privSpeakerAudioSource.format,l=await this.privSpeakerAudioSource.deviceInfo,u=new i.ReplayableAudioNode(a,c.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(u,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:l};try{await n,await s}catch(h){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.ConnectionFailure,h)}const d=new o.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),this.receiveMessage();return this.sendAudio(u).then((()=>{}),(e=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.RuntimeError,e)})),t.promise}async sendPreAudioMessages(e,t){const n=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,t),await this.sendBaseRequest(n,"enroll",this.scenarioFrom(e.profileType),e)}async sendPhrasesRequest(e,t,n){const i=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);const o={locale:n,scenario:this.scenarioFrom(t)};return i.send(new a.SpeechConnectionMessage(r.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(o)))}async sendCreateProfile(e,t,n){const i=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);const s={locale:n,number:"1",scenario:t===o.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":t===o.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"};return i.send(new a.SpeechConnectionMessage(r.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(s)))}async sendCommonRequest(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const i=this.connectImpl();try{const o=new r.Deferred;this.privRequestSession.onSpeechContext(),await i;const s=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,o),await this.sendBaseRequest(s,e,this.scenarioFrom(t),n),this.receiveMessage(),o.promise}catch(o){throw o}}async sendBaseRequest(e,t,n,i){const o={scenario:n};return i?o.profileIds=[i.profileId]:o.maxPageSize=-1,e.send(new a.SpeechConnectionMessage(r.MessageType.Text,"speaker.profile.".concat(t),this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(o)))}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}handlePhrasesResponse(e,t){if(!this.privDeferralMap.getId(t))throw new Error("Voice Profile get activation phrases request for requestID ".concat(t," not found"));if("success"!==e.status.statusCode.toLowerCase()){const n=o.ResultReason.Canceled,i=new o.VoiceProfilePhraseResult(n,e.status.statusCode,e.passPhraseType,[]);this.privDeferralMap.complete(t,i)}else{if(!(e.phrases&&e.phrases.length>0))throw new Error("Voice Profile get activation phrases failed, no phrases received");{const n=o.ResultReason.EnrollingVoiceProfile,i=new o.VoiceProfilePhraseResult(n,e.status.statusCode,e.passPhraseType,e.phrases);this.privDeferralMap.complete(t,i)}}}handleCreateResponse(e,t){if(!(e.profiles&&e.profiles.length>0))throw new Error("Voice Profile create failed, no profile id received");if(!this.privDeferralMap.getId(t))throw new Error("Voice Profile create request for requestID ".concat(t," not found"));{const n=e.profiles.map((e=>e.profileId));this.privDeferralMap.complete(t,n)}}handleResultResponse(e,t){if(!this.privDeferralMap.getId(t))throw new Error("Voice Profile create request for requestID ".concat(t," not found"));{const n="delete"===e.operation.toLowerCase()?o.ResultReason.DeletedVoiceProfile:o.ResultReason.ResetVoiceProfile,i="success"===e.status.statusCode.toLowerCase()?n:o.ResultReason.Canceled,r=new o.VoiceProfileResult(i,"statusCode: ".concat(e.status.statusCode,", errorDetails: ").concat(e.status.reason));this.privDeferralMap.complete(t,r)}}handleFetchResponse(e,t){if(!this.privDeferralMap.getId(t)||!e.profiles[0])throw new Error("Voice Profile fetch request for requestID ".concat(t," not found"));if(this.privExpectedProfileId&&1===e.profiles.length&&e.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const n=e.profiles[0],i=new o.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(n.enrollmentStatus),JSON.stringify(n),e.status.reason);this.privDeferralMap.complete(t,i)}else if(e.profiles.length>0){const n=e.profiles,i=[];for(const t of n)i.push(new o.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(t.enrollmentStatus),JSON.stringify(t),e.status.reason));this.privDeferralMap.complete(t,i)}}enrollmentReasonFrom(e){switch(e.toLowerCase()){case"enrolled":return o.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return o.ResultReason.Canceled;default:return o.ResultReason.EnrollingVoiceProfile}}scenarioFrom(e){return e===o.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":e===o.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}}t.VoiceServiceRecognizer=c},3444:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketMessageFormatter=void 0;const i=n(2307);t.WebsocketMessageFormatter=class{toConnectionMessage(e){const t=new i.Deferred;try{if(e.messageType===i.MessageType.Text){const n=e.textContent;let r={},o=null;if(n){const e=n.split("\r\n\r\n");e&&e.length>0&&(r=this.parseHeaders(e[0]),e.length>1&&(o=e[1]))}t.resolve(new i.ConnectionMessage(e.messageType,o,r,e.id))}else if(e.messageType===i.MessageType.Binary){const n=e.binaryContent;let r={},o=null;if(!n||n.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const s=new DataView(n),a=s.getInt16(0);if(n.byteLength<a+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let e=0;e<a;e++)c+=String.fromCharCode(s.getInt8(e+2));r=this.parseHeaders(c),n.byteLength>a+2&&(o=n.slice(2+a)),t.resolve(new i.ConnectionMessage(e.messageType,o,r,e.id))}}catch(n){t.reject("Error formatting the message. Error: ".concat(n))}return t.promise}fromConnectionMessage(e){const t=new i.Deferred;try{if(e.messageType===i.MessageType.Text){const n="".concat(this.makeHeaders(e)).concat("\r\n").concat(e.textBody?e.textBody:"");t.resolve(new i.RawWebsocketMessage(i.MessageType.Text,n,e.id))}else if(e.messageType===i.MessageType.Binary){const n=this.makeHeaders(e),r=e.binaryBody,o=this.stringToArrayBuffer(n),s=new Int8Array(o),a=s.byteLength,c=new Int8Array(2+a+(r?r.byteLength:0));if(c[0]=a>>8&255,c[1]=255&a,c.set(s,2),r){const e=new Int8Array(r);c.set(e,2+a)}const l=c.buffer;t.resolve(new i.RawWebsocketMessage(i.MessageType.Binary,l,e.id))}}catch(n){t.reject("Error formatting the message. ".concat(n))}return t.promise}makeHeaders(e){let t="";if(e.headers)for(const n in e.headers)n&&(t+="".concat(n,": ").concat(e.headers[n]).concat("\r\n"));return t}parseHeaders(e){const t={};if(e){const n=e.match(/[^\r\n]+/g);if(t)for(const e of n)if(e){const n=e.indexOf(":"),i=n>0?e.substr(0,n).trim().toLowerCase():e,r=n>0&&e.length>n+1?e.substr(n+1).trim():"";t[i]=r}}return t}stringToArrayBuffer(e){const t=new ArrayBuffer(e.length),n=new DataView(t);for(let i=0;i<e.length;i++)n.setUint8(i,e.charCodeAt(i));return t}}},2274:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamNodeErrorEvent=t.AudioStreamNodeDetachedEvent=t.AudioStreamNodeAttachedEvent=t.AudioStreamNodeAttachingEvent=t.AudioStreamNodeEvent=t.AudioSourceErrorEvent=t.AudioSourceOffEvent=t.AudioSourceReadyEvent=t.AudioSourceInitializingEvent=t.AudioSourceEvent=void 0;const i=n(333);class r extends i.PlatformEvent{constructor(e,t){super(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.EventType.Info),this.privAudioSourceId=t}get audioSourceId(){return this.privAudioSourceId}}t.AudioSourceEvent=r;t.AudioSourceInitializingEvent=class extends r{constructor(e){super("AudioSourceInitializingEvent",e)}};t.AudioSourceReadyEvent=class extends r{constructor(e){super("AudioSourceReadyEvent",e)}};t.AudioSourceOffEvent=class extends r{constructor(e){super("AudioSourceOffEvent",e)}};t.AudioSourceErrorEvent=class extends r{constructor(e,t){super("AudioSourceErrorEvent",e,i.EventType.Error),this.privError=t}get error(){return this.privError}};class o extends r{constructor(e,t,n){super(e,t),this.privAudioNodeId=n}get audioNodeId(){return this.privAudioNodeId}}t.AudioStreamNodeEvent=o;t.AudioStreamNodeAttachingEvent=class extends o{constructor(e,t){super("AudioStreamNodeAttachingEvent",e,t)}};t.AudioStreamNodeAttachedEvent=class extends o{constructor(e,t){super("AudioStreamNodeAttachedEvent",e,t)}};t.AudioStreamNodeDetachedEvent=class extends o{constructor(e,t){super("AudioStreamNodeDetachedEvent",e,t)}};t.AudioStreamNodeErrorEvent=class extends o{constructor(e,t,n){super("AudioStreamNodeErrorEvent",e,t),this.privError=n}get error(){return this.privError}}},9862:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundEvent=void 0;const i=n(2307);class r extends i.PlatformEvent{constructor(e){super("BackgroundEvent",i.EventType.Error),this.privError=e}get error(){return this.privError}}t.BackgroundEvent=r},1345:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkedArrayBufferStream=void 0;const i=n(2307);class r extends i.Stream{constructor(e,t){super(t),this.privTargetChunkSize=e,this.privNextBufferReadyBytes=0}writeStreamChunk(e){if(e.isEnd||0===this.privNextBufferReadyBytes&&e.buffer.byteLength===this.privTargetChunkSize)return void super.writeStreamChunk(e);let t=0;for(;t<e.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);const n=Math.min(e.buffer.byteLength-t,this.privTargetChunkSize-this.privNextBufferReadyBytes),i=new Uint8Array(this.privNextBufferToWrite),r=new Uint8Array(e.buffer.slice(t,n+t));i.set(r,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=n,t+=n,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){0===this.privNextBufferReadyBytes||this.isClosed||super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}}t.ChunkedArrayBufferStream=r},7811:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageSentEvent=t.ConnectionMessageReceivedEvent=t.ConnectionEstablishErrorEvent=t.ConnectionErrorEvent=t.ConnectionClosedEvent=t.ConnectionEstablishedEvent=t.ConnectionStartEvent=t.ConnectionEvent=t.ServiceEvent=void 0;const i=n(333);class r extends i.PlatformEvent{constructor(e,t){super(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.EventType.Info),this.privJsonResult=t}get jsonString(){return this.privJsonResult}}t.ServiceEvent=r;class o extends i.PlatformEvent{constructor(e,t){super(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.EventType.Info),this.privConnectionId=t}get connectionId(){return this.privConnectionId}}t.ConnectionEvent=o;t.ConnectionStartEvent=class extends o{constructor(e,t,n){super("ConnectionStartEvent",e),this.privUri=t,this.privHeaders=n}get uri(){return this.privUri}get headers(){return this.privHeaders}};t.ConnectionEstablishedEvent=class extends o{constructor(e){super("ConnectionEstablishedEvent",e)}};t.ConnectionClosedEvent=class extends o{constructor(e,t,n){super("ConnectionClosedEvent",e,i.EventType.Debug),this.privReason=n,this.privStatusCode=t}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};t.ConnectionErrorEvent=class extends o{constructor(e,t,n){super("ConnectionErrorEvent",e,i.EventType.Debug),this.privMessage=t,this.privType=n}get message(){return this.privMessage}get type(){return this.privType}};t.ConnectionEstablishErrorEvent=class extends o{constructor(e,t,n){super("ConnectionEstablishErrorEvent",e,i.EventType.Error),this.privStatusCode=t,this.privReason=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};t.ConnectionMessageReceivedEvent=class extends o{constructor(e,t,n){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=t,this.privMessage=n}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}};t.ConnectionMessageSentEvent=class extends o{constructor(e,t,n){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=t,this.privMessage=n}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}},2771:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessage=t.MessageType=void 0;const i=n(8446),r=n(9463);var o;!function(e){e[e.Text=0]="Text",e[e.Binary=1]="Binary"}(o=t.MessageType||(t.MessageType={}));t.ConnectionMessage=class{constructor(e,t,n,s){if(this.privBody=null,e===o.Text&&t&&"string"!==typeof t)throw new i.InvalidOperationError("Payload must be a string");if(e===o.Binary&&t&&!(t instanceof ArrayBuffer))throw new i.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=t,this.privHeaders=n||{},this.privId=s||r.createNoDashGuid(),this.messageType){case o.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case o.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===o.Binary)throw new i.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===o.Text)throw new i.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}},4941:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionOpenResponse=void 0;t.ConnectionOpenResponse=class{constructor(e,t){this.privStatusCode=e,this.privReason=t}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}},7155:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeferralMap=void 0;t.DeferralMap=class{constructor(){this.privMap={}}add(e,t){this.privMap[e]=t}getId(e){return this.privMap[e]}complete(e,t){try{this.privMap[e].resolve(t)}catch(n){this.privMap[e].reject(n)}finally{this.privMap[e]=void 0}}}},323:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SendingAgentContextMessageEvent=t.DialogEvent=void 0;const i=n(333);class r extends i.PlatformEvent{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.EventType.Info)}}t.DialogEvent=r;t.SendingAgentContextMessageEvent=class extends r{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}}},8446:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectDisposedError=t.InvalidOperationError=t.ArgumentNullError=void 0;class n extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}t.ArgumentNullError=n;class i extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}t.InvalidOperationError=i;class r extends Error{constructor(e,t){super(t),this.name=e+"ObjectDisposed",this.message=t}}t.ObjectDisposedError=r},385:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventSource=void 0;const i=n(8446),r=n(9463);t.EventSource=class{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new i.ObjectDisposedError("EventSource");if(this.metadata)for(const t in this.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=this.metadata[t]));for(const t in this.privEventListeners)t&&this.privEventListeners[t]&&this.privEventListeners[t](e)}attach(e){const t=r.createNoDashGuid();return this.privEventListeners[t]=e,{detach:()=>(delete this.privEventListeners[t],Promise.resolve())}}attachListener(e){return this.attach((t=>e.onEvent(t)))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach((t=>e.onEvent(t))),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}},7807:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0;const i=n(8446),r=n(385);class o{static setEventSource(e){if(!e)throw new i.ArgumentNullError("eventSource");o.privInstance=e}static get instance(){return o.privInstance}}t.Events=o,o.privInstance=new r.EventSource},2307:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(2274),t),r(n(7811),t),r(n(2771),t),r(n(4941),t),r(n(7155),t),r(n(323),t),r(n(8446),t),r(n(7807),t),r(n(385),t),r(n(9463),t),r(n(2188),t),r(n(3151),t),r(n(2064),t),r(n(3643),t),r(n(9973),t),r(n(5047),t),r(n(5670),t),r(n(125),t),r(n(4474),t),r(n(6959),t),r(n(2670),t),r(n(333),t),r(n(553),t),r(n(2091),t),r(n(7252),t),r(n(3071),t),r(n(7722),t);var o=n(5253);Object.defineProperty(t,"TranslationStatus",{enumerable:!0,get:function(){return o.TranslationStatus}}),r(n(1345),t),r(n(2537),t),r(n(699),t),r(n(6002),t),r(n(9862),t)},9463:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNoDashGuid=t.createGuid=void 0;const i=n(7726),r=()=>i.v4();t.createGuid=r;t.createNoDashGuid=()=>r().replace(new RegExp("-","g"),"").toUpperCase()},2537:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2188:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3151:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionState=void 0,function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(t.ConnectionState||(t.ConnectionState={}))},2064:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3643:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9973:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},125:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5047:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5670:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4474:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6959:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2670:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.List=void 0;const i=n(8446);class r{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(const t of e)this.privList.push(t)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,t){this.throwIfDisposed(),0===e?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,t){this.throwIfDisposed();const n=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),n}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[t]=e,{detach:()=>(delete this.privAddSubscriptions[t],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[t]=e,{detach:()=>(delete this.privRemoveSubscriptions[t],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[t]=e,{detach:()=>(delete this.privDisposedSubscriptions[t],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){const e=Array();return this.privList.forEach((t=>{e.push(t)})),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let t=0;t<this.length();t++)e(this.privList[t],t)}select(e){this.throwIfDisposed();const t=[];for(let n=0;n<this.privList.length;n++)t.push(e(this.privList[n],n));return new r(t)}where(e){this.throwIfDisposed();const t=new r;for(let n=0;n<this.privList.length;n++)e(this.privList[n],n)&&t.add(this.privList[n]);return t}orderBy(e){this.throwIfDisposed();const t=this.toArray().sort(e);return new r(t)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy(((t,n)=>e(n,t)))}clone(){return this.throwIfDisposed(),new r(this.toArray())}concat(e){return this.throwIfDisposed(),new r(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new r(this.privList.concat(e))}isDisposed(){return null==this.privList}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new i.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(const t in e)t&&e[t]()}}t.List=r},6002:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OCSPCacheUpdateErrorEvent=t.OCSPResponseRetrievedEvent=t.OCSPCacheFetchErrorEvent=t.OCSPVerificationFailedEvent=t.OCSPCacheHitEvent=t.OCSPCacheEntryNeedsRefreshEvent=t.OCSPCacheEntryExpiredEvent=t.OCSPWSUpgradeStartedEvent=t.OCSPStapleReceivedEvent=t.OCSPCacheUpdateCompleteEvent=t.OCSPDiskCacheStoreEvent=t.OCSPMemoryCacheStoreEvent=t.OCSPCacheUpdateNeededEvent=t.OCSPDiskCacheHitEvent=t.OCSPCacheMissEvent=t.OCSPMemoryCacheHitEvent=t.OCSPEvent=void 0;const i=n(333);class r extends i.PlatformEvent{constructor(e,t,n){super(e,t),this.privSignature=n}}t.OCSPEvent=r;t.OCSPMemoryCacheHitEvent=class extends r{constructor(e){super("OCSPMemoryCacheHitEvent",i.EventType.Debug,e)}};t.OCSPCacheMissEvent=class extends r{constructor(e){super("OCSPCacheMissEvent",i.EventType.Debug,e)}};t.OCSPDiskCacheHitEvent=class extends r{constructor(e){super("OCSPDiskCacheHitEvent",i.EventType.Debug,e)}};t.OCSPCacheUpdateNeededEvent=class extends r{constructor(e){super("OCSPCacheUpdateNeededEvent",i.EventType.Debug,e)}};t.OCSPMemoryCacheStoreEvent=class extends r{constructor(e){super("OCSPMemoryCacheStoreEvent",i.EventType.Debug,e)}};t.OCSPDiskCacheStoreEvent=class extends r{constructor(e){super("OCSPDiskCacheStoreEvent",i.EventType.Debug,e)}};t.OCSPCacheUpdateCompleteEvent=class extends r{constructor(e){super("OCSPCacheUpdateCompleteEvent",i.EventType.Debug,e)}};t.OCSPStapleReceivedEvent=class extends r{constructor(){super("OCSPStapleReceivedEvent",i.EventType.Debug,"")}};t.OCSPWSUpgradeStartedEvent=class extends r{constructor(e){super("OCSPWSUpgradeStartedEvent",i.EventType.Debug,e)}};t.OCSPCacheEntryExpiredEvent=class extends r{constructor(e,t){super("OCSPCacheEntryExpiredEvent",i.EventType.Debug,e),this.privExpireTime=t}};t.OCSPCacheEntryNeedsRefreshEvent=class extends r{constructor(e,t,n){super("OCSPCacheEntryNeedsRefreshEvent",i.EventType.Debug,e),this.privExpireTime=n,this.privStartTime=t}};t.OCSPCacheHitEvent=class extends r{constructor(e,t,n){super("OCSPCacheHitEvent",i.EventType.Debug,e),this.privExpireTime=n,this.privExpireTimeString=new Date(n).toLocaleDateString(),this.privStartTime=t,this.privStartTimeString=new Date(t).toLocaleTimeString()}};t.OCSPVerificationFailedEvent=class extends r{constructor(e,t){super("OCSPVerificationFailedEvent",i.EventType.Debug,e),this.privError=t}};t.OCSPCacheFetchErrorEvent=class extends r{constructor(e,t){super("OCSPCacheFetchErrorEvent",i.EventType.Debug,e),this.privError=t}};t.OCSPResponseRetrievedEvent=class extends r{constructor(e){super("OCSPResponseRetrievedEvent",i.EventType.Debug,e)}};t.OCSPCacheUpdateErrorEvent=class extends r{constructor(e,t){super("OCSPCacheUpdateErrorEvent",i.EventType.Debug,e),this.privError=t}}},333:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformEvent=t.EventType=void 0;const i=n(9463);!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.None=4]="None"}(t.EventType||(t.EventType={}));t.PlatformEvent=class{constructor(e,t){this.privName=e,this.privEventId=i.createNoDashGuid(),this.privEventTime=(new Date).toISOString(),this.privEventType=t,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}},553:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.marshalPromiseToCallbacks=t.Sink=t.Deferred=t.PromiseResultEventSource=t.PromiseResult=t.PromiseState=void 0,function(e){e[e.None=0]="None",e[e.Resolved=1]="Resolved",e[e.Rejected=2]="Rejected"}(n=t.PromiseState||(t.PromiseState={}));class i{constructor(e){this.throwIfError=()=>{if(this.isError)throw this.error},e.on((e=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=e)}),(e=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=e)}))}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}t.PromiseResult=i;class r{constructor(){this.setResult=e=>{this.privOnSetResult(e)},this.setError=e=>{this.privOnSetError(e)},this.on=(e,t)=>{this.privOnSetResult=e,this.privOnSetError=t}}}t.PromiseResultEventSource=r;t.Deferred=class{constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise(((e,t)=>{this.privResolve=e,this.privReject=t}))}get promise(){return this.privPromise}};t.Sink=class{constructor(){this.privState=n.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new r,this.privPromiseResult=new i(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(e){if(this.privState!==n.None)throw new Error("'Cannot resolve a completed promise'");this.privState=n.Resolved,this.privPromiseResultEvents.setResult(e);for(let t=0;t<this.privSuccessHandlers.length;t++)this.executeSuccessCallback(e,this.privSuccessHandlers[t],this.privErrorHandlers[t]);this.detachHandlers()}reject(e){if(this.privState!==n.None)throw new Error("'Cannot reject a completed promise'");this.privState=n.Rejected,this.privPromiseResultEvents.setError(e);for(const t of this.privErrorHandlers)this.executeErrorCallback(e,t);this.detachHandlers()}on(e,t){null==e&&(e=()=>{}),this.privState===n.None?(this.privSuccessHandlers.push(e),this.privErrorHandlers.push(t)):(this.privState===n.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,e,t):this.privState===n.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,t),this.detachHandlers())}executeSuccessCallback(e,t,n){try{t(e)}catch(i){this.executeErrorCallback("'Unhandled callback error: ".concat(i,"'"),n)}}executeErrorCallback(e,t){if(!t)throw new Error("'Unhandled error: ".concat(e,"'"));try{t(e)}catch(n){throw new Error("'Unhandled callback error: ".concat(n,". InnerError: ").concat(e,"'"))}}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}},t.marshalPromiseToCallbacks=function(e,t,n){e.then((e=>{try{t&&t(e)}catch(i){if(n)try{if(i instanceof Error){const e=i;n(e.name+": "+e.message)}else n(i)}catch(i){}}}),(e=>{if(n)try{if(e instanceof Error){const t=e;n(t.name+": "+t.message)}else n(e)}catch(e){}}))}},2091:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=void 0;const i=n(8446),r=n(2670),o=n(553);var s;!function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"}(s||(s={}));t.Queue=class{constructor(e){this.privPromiseStore=new r.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new r.List,this.privDetachables=[],this.privSubscribers=new r.List,this.privDetachables.push(this.privList.onAdded((()=>this.drain())))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise((t=>t(e))))}enqueueFromPromise(e){this.throwIfDispose(),e.then((e=>{this.privList.add(e)}),(()=>{}))}dequeue(){this.throwIfDispose();const e=new o.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:s.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();const e=new o.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:s.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return null==this.privSubscribers}async drainAndDispose(e,t){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=t,this.privIsDisposing=!0;const n=this.privSubscribers;if(n){for(;n.length()>0;){n.removeFirst().deferral.resolve(void 0)}this.privSubscribers===n&&(this.privSubscribers=n)}for(const e of this.privDetachables)await e.detach();if(this.privPromiseStore.length()>0&&e){const t=[];return this.privPromiseStore.toArray().forEach((e=>{t.push(e)})),Promise.all(t).finally((()=>{this.privSubscribers=null,this.privList.forEach((t=>{e(t)})),this.privList=null})).then()}this.privSubscribers=null,this.privList=null}}async dispose(e){await this.drainAndDispose(null,e)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){const n=e.removeFirst();if(n.type===s.Peek)n.deferral.resolve(t.first());else{const e=t.removeFirst();n.deferral.resolve(e)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed()){if(this.privDisposeReason)throw new i.InvalidOperationError(this.privDisposeReason);throw new i.ObjectDisposedError("Queue")}if(this.privIsDisposing)throw new i.InvalidOperationError("Queue disposing")}}},7252:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawWebsocketMessage=void 0;const i=n(2771),r=n(8446),o=n(9463);t.RawWebsocketMessage=class{constructor(e,t,n){if(this.privPayload=null,!t)throw new r.ArgumentNullError("payload");if(e===i.MessageType.Binary&&"ArrayBuffer"!==Object.getPrototypeOf(t).constructor.name)throw new r.InvalidOperationError("Payload must be ArrayBuffer");if(e===i.MessageType.Text&&"string"!==typeof t)throw new r.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=n||o.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===i.MessageType.Binary)throw new r.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===i.MessageType.Text)throw new r.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}},3071:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RiffPcmEncoder=void 0;t.RiffPcmEncoder=class{constructor(e,t){this.privActualSampleRate=e,this.privDesiredSampleRate=t}encode(e){const t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;const n=2*t.length,i=new ArrayBuffer(n),r=new DataView(i);return this.floatTo16BitPCM(r,0,t),i}setString(e,t,n){for(let i=0;i<n.length;i++)e.setUint8(t+i,n.charCodeAt(i))}floatTo16BitPCM(e,t,n){for(let i=0;i<n.length;i++,t+=2){const r=Math.max(-1,Math.min(1,n[i]));e.setInt16(t,r<0?32768*r:32767*r,!0)}}downSampleAudioFrame(e,t,n){if(!e)return null;if(n===t||n>t)return e;const i=t/n,r=Math.round(e.length/i),o=new Float32Array(r);let s=0,a=0;for(;a<r;){const t=Math.round((a+1)*i);let n=0,r=0;for(;s<t&&s<e.length;)n+=e[s++],r++;o[a++]=n/r}return o}}},7722:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stream=void 0;const i=n(8446),r=n(9463),o=n(2091);t.Stream=class{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||r.createNoDashGuid(),this.privReaderQueue=new o.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(t){}}read(){if(this.privIsReadEnded)throw new i.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then((async e=>((void 0===e||e.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),e)))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new o.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new i.InvalidOperationError("Stream closed")}}},7354:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtils=void 0;t.StringUtils=class{static formatString(e,t){if(!e)return"";if(!t)return e;let n="",i="";const r=e=>{n+=e},o=e=>{i+=e};let s=r;for(let a=0;a<e.length;a++){const c=e[a],l=a+1<e.length?e[a+1]:"";switch(c){case"{":"{"===l?(s("{"),a++):s=o;break;case"}":"}"===l?(s("}"),a++):(t.hasOwnProperty(i)&&(n+=t[i]),s=r,i="");break;default:s(c)}}return n}}},699:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timeout=void 0;class n{static load(){const e=new Map([[0,()=>{}]]),t=new Map,i="data:text/javascript;base64,"+btoa('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'),r=new Worker(i);r.addEventListener("message",(i=>{let{data:r}=i;if(n.isCallNotification(r)){const{params:{timerId:n}}=r,i=e.get(n);if("number"===typeof i){const e=t.get(i);if(void 0===e||e!==n)throw new Error("The timer is in an undefined state.")}else{if("undefined"===typeof i)throw new Error("The timer is in an undefined state.");i(),e.delete(n)}}else{if(!n.isClearResponse(r)){const{error:{message:e}}=r;throw new Error(e)}{const{id:n}=r,i=t.get(n);if(void 0===i)throw new Error("The timer is in an undefined state.");t.delete(n),e.delete(i)}}}));return{clearTimeout:n=>{const i=Math.random();t.set(i,n),e.set(n,i),r.postMessage({id:i,method:"clear",params:{timerId:n}})},setTimeout:(t,n)=>{const i=Math.random();return e.set(i,t),r.postMessage({id:null,method:"set",params:{delay:n,now:performance.now(),timerId:i}}),i}}}static loadWorkerTimers(){return()=>(null!==n.workerTimers||(n.workerTimers=n.load()),n.workerTimers)}static isCallNotification(e){return void 0!==e.method&&"call"===e.method}static isClearResponse(e){return null===e.error&&"number"===typeof e.id}}t.Timeout=n,n.workerTimers=null,n.clearTimeout=e=>n.timers().clearTimeout(e),n.setTimeout=(e,t)=>n.timers().setTimeout(e,t),n.timers=n.loadWorkerTimers()},840:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityReceivedEventArgs=void 0;t.ActivityReceivedEventArgs=class{constructor(e,t){this.privActivity=e,this.privAudioStream=t}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}},6782:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioOutputConfigImpl=t.AudioConfigImpl=t.AudioConfig=void 0;const i=n(2277),r=n(260),o=n(8040),s=n(8777),a=n(6182),c=n(9709);class l{static fromDefaultMicrophoneInput(){const e=new i.PcmRecorder(!0);return new u(new i.MicAudioSource(e))}static fromMicrophoneInput(e){const t=new i.PcmRecorder(!0);return new u(new i.MicAudioSource(t,e))}static fromWavFileInput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamedBuffer.wav";return new u(new i.FileAudioSource(e,t))}static fromStreamInput(e){if(e instanceof o.PullAudioInputStreamCallback)return new u(new a.PullAudioInputStreamImpl(e));if(e instanceof o.AudioInputStream)return new u(e);if("undefined"!==typeof MediaStream&&e instanceof MediaStream){const t=new i.PcmRecorder(!1);return new u(new i.MicAudioSource(t,null,null,e))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new d(new o.SpeakerAudioDestination)}static fromSpeakerOutput(e){if(void 0===e)return l.fromDefaultSpeakerOutput();if(e instanceof o.SpeakerAudioDestination)return new d(e);throw new Error("Not Supported Type")}static fromAudioFileOutput(e){return new d(new s.AudioFileWriter(e))}static fromStreamOutput(e){if(e instanceof o.PushAudioOutputStreamCallback)return new d(new c.PushAudioOutputStreamImpl(e));if(e instanceof o.PushAudioOutputStream)return new d(e);if(e instanceof o.PullAudioOutputStream)return new d(e);throw new Error("Not Supported Type")}}t.AudioConfig=l;class u extends l{constructor(e){super(),this.privSource=e}get format(){return this.privSource.format}close(e,t){this.privSource.turnOff().then((()=>{e&&e()}),(e=>{t&&t(e)}))}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,t){if(r.Contracts.throwIfNull(t,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(e,t)}getProperty(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}t.AudioConfigImpl=u;class d extends l{constructor(e){super(),this.privDestination=e}set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}t.AudioOutputConfigImpl=d},8777:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AudioFileWriter=void 0;const s=o(n(952)),a=n(260);t.AudioFileWriter=class{constructor(e){a.Contracts.throwIfNullOrUndefined(s.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=s.openSync(e,"w")}set format(e){a.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=s.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}write(e){a.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){void 0!==this.privFd&&(this.privWriteStream.on("finish",(()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),s.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),s.closeSync(this.privFd),this.privFd=void 0})),this.privWriteStream.end())}id(){return this.privId}}},6182:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PullAudioInputStreamImpl=t.PullAudioInputStream=t.PushAudioInputStreamImpl=t.PushAudioInputStream=t.AudioInputStream=void 0;const i=n(9859),r=n(2307),o=n(9463),s=n(8040),a=n(4175);class c{constructor(){}static createPushStream(e){return l.create(e)}static createPullStream(e,t){return d.create(e,t)}}t.AudioInputStream=c;class l extends c{static create(e){return new u(e)}}t.PushAudioInputStream=l;class u extends l{constructor(e){super(),this.privFormat=void 0===e?a.AudioStreamFormatImpl.getDefaultInputFormat():e,this.privEvents=new r.EventSource,this.privId=o.createNoDashGuid(),this.privStream=new r.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new r.AudioSourceInitializingEvent(this.privId)),this.onEvent(new r.AudioSourceReadyEvent(this.privId))}async attach(e){this.onEvent(new r.AudioStreamNodeAttachingEvent(this.privId,e)),await this.turnOn();const t=this.privStream;return this.onEvent(new r.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:async()=>(this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()),id:()=>e,read:()=>t.read()}}detach(e){this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:i.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:i.type.Stream})}onEvent(e){this.privEvents.onEvent(e),r.Events.instance.onEvent(e)}toBuffer(e){const t=Buffer.alloc(e.byteLength),n=new Uint8Array(e);for(let i=0;i<t.length;++i)t[i]=n[i];return t}}t.PushAudioInputStreamImpl=u;class d extends c{constructor(){super()}static create(e,t){return new h(e,t)}}t.PullAudioInputStream=d;class h extends d{constructor(e,t){super(),this.privFormat=void 0===t?s.AudioStreamFormat.getDefaultInputFormat():t,this.privEvents=new r.EventSource,this.privId=o.createNoDashGuid(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new r.AudioSourceInitializingEvent(this.privId)),this.onEvent(new r.AudioSourceReadyEvent(this.privId))}async attach(e){return this.onEvent(new r.AudioStreamNodeAttachingEvent(this.privId,e)),await this.turnOn(),this.onEvent(new r.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let e,t=0;for(;t<this.privBufferSize;){const n=new ArrayBuffer(this.privBufferSize-t),i=this.privCallback.read(n);if(void 0===e)e=n;else{new Int8Array(e).set(new Int8Array(n),t)}if(0===i)break;t+=i}return Promise.resolve({buffer:e.slice(0,t),isEnd:this.privIsClosed||0===t,timeReceived:Date.now()})}}}detach(e){this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:i.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:i.type.Stream})}onEvent(e){this.privEvents.onEvent(e),r.Events.instance.onEvent(e)}}t.PullAudioInputStreamImpl=h},7810:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioOutputFormatImpl=void 0;const i=n(8765),r=n(4175);class o extends r.AudioStreamFormatImpl{constructor(e,t,n,i,r,o,s,a,c){super(n,o,t,e),this.formatTag=e,this.avgBytesPerSec=i,this.blockAlign=r,this.priAudioFormatString=s,this.priRequestAudioFormatString=a,this.priHasHeader=c}static fromSpeechSynthesisOutputFormat(e){return void 0===e?o.getDefaultOutputFormat():o.fromSpeechSynthesisOutputFormatString(o.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new o(r.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new o(r.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new o(r.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new o(r.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new o(r.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new o(r.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new o(r.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new o(r.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new o(r.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new o(r.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new o(r.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new o(r.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new o(r.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new o(r.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new o(r.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new o(r.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new o(r.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new o(r.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new o(r.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new o(r.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new o(r.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new o(r.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new o(r.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new o(r.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new o(r.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new o(r.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new o(r.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);default:return new o(r.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return o.fromSpeechSynthesisOutputFormatString("undefined"!==typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){const t=new DataView(this.privHeader);t.setUint32(4,e+this.privHeader.byteLength-8,!0),t.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);const t=new Uint8Array(e.byteLength+this.header.byteLength);return t.set(new Uint8Array(this.header),0),t.set(new Uint8Array(e),this.header.byteLength),t.buffer}}t.AudioOutputFormatImpl=o,o.SpeechSynthesisOutputFormatToString={[i.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[i.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[i.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[i.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[i.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[i.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[i.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[i.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[i.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[i.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[i.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[i.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[i.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[i.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[i.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[i.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[i.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[i.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[i.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[i.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[i.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[i.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[i.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[i.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[i.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[i.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm"}},9709:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PushAudioOutputStreamImpl=t.PushAudioOutputStream=t.PullAudioOutputStreamImpl=t.PullAudioOutputStream=t.AudioOutputStream=void 0;const i=n(2307),r=n(260),o=n(7810);class s{constructor(){}static createPullStream(){return a.create()}}t.AudioOutputStream=s;class a extends s{static create(){return new c}}t.PullAudioOutputStream=a;class c extends a{constructor(){super(),this.privId=i.createNoDashGuid(),this.privStream=new i.Stream}set format(e){void 0!==e&&null!==e||(this.privFormat=o.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(e){const t=new Int8Array(e);let n=0;if(void 0!==this.privLastChunkView){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);t.set(this.privLastChunkView),n=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;n<e.byteLength&&!this.privStream.isReadEnded;){const i=await this.privStream.read();if(void 0===i||i.isEnd)this.privStream.readEnded();else{let r;i.buffer.byteLength>e.byteLength-n?(r=i.buffer.slice(0,e.byteLength-n),this.privLastChunkView=new Int8Array(i.buffer.slice(e.byteLength-n))):r=i.buffer,t.set(new Int8Array(r),n),n+=r.byteLength}}return n}write(e){r.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}t.PullAudioOutputStreamImpl=c;class l extends s{constructor(){super()}static create(e){return new u(e)}}t.PushAudioOutputStream=l;class u extends l{constructor(e){super(),this.privId=i.createNoDashGuid(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}t.PushAudioOutputStreamImpl=u},4175:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamFormatImpl=t.AudioStreamFormat=t.AudioFormatTag=void 0,function(e){e[e.PCM=1]="PCM",e[e.MuLaw=2]="MuLaw",e[e.Siren=3]="Siren",e[e.MP3=4]="MP3",e[e.SILKSkype=5]="SILKSkype",e[e.OGG_OPUS=6]="OGG_OPUS",e[e.WEBM_OPUS=7]="WEBM_OPUS",e[e.ALaw=8]="ALaw",e[e.FLAC=9]="FLAC",e[e.OPUS=10]="OPUS"}(n=t.AudioFormatTag||(t.AudioFormatTag={}));class i{static getDefaultInputFormat(){return r.getDefaultInputFormat()}static getWaveFormat(e,t,n,i){return new r(e,t,n,i)}static getWaveFormatPCM(e,t,n){return new r(e,t,n)}}t.AudioStreamFormat=i;class r extends i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.PCM;super();let o=!0;switch(r){case n.PCM:this.formatTag=1;break;case n.ALaw:this.formatTag=6;break;case n.MuLaw:this.formatTag=7;break;default:o=!1}if(this.bitsPerSample=t,this.samplesPerSec=e,this.channels=i,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),o){this.privHeader=new ArrayBuffer(44);const e=new DataView(this.privHeader);this.setString(e,0,"RIFF"),e.setUint32(4,0,!0),this.setString(e,8,"WAVEfmt "),e.setUint32(16,16,!0),e.setUint16(20,this.formatTag,!0),e.setUint16(22,this.channels,!0),e.setUint32(24,this.samplesPerSec,!0),e.setUint32(28,this.avgBytesPerSec,!0),e.setUint16(32,this.channels*(this.bitsPerSample/8),!0),e.setUint16(34,this.bitsPerSample,!0),this.setString(e,36,"data"),e.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new r}static getAudioContext(e){const t=window.AudioContext||window.webkitAudioContext||!1;if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(e,t,n){for(let i=0;i<n.length;i++)e.setUint8(t+i,n.charCodeAt(i))}}t.AudioStreamFormatImpl=r},4902:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAudioPlayer=void 0;const i=n(8446),r=n(8040),o=n(4175);t.BaseAudioPlayer=class{constructor(e){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,void 0===e&&(e=r.AudioStreamFormat.getDefaultInputFormat()),this.init(e)}playAudioSample(e,t,n){try{this.ensureInitializedContext();const n=this.formatAudioData(e),i=new Float32Array(this.samples.length+n.length);i.set(this.samples,0),i.set(n,this.samples.length),this.samples=i,t&&t()}catch(i){n&&n(i)}}stopAudio(e,t){null!==this.audioContext&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then((()=>{e&&e()}),(e=>{t&&t(e)})),this.audioContext=null)}init(e){this.audioFormat=e,this.samples=new Float32Array}ensureInitializedContext(){if(null===this.audioContext){this.createAudioContext();const e=200;this.autoUpdateBufferTimer=setInterval((()=>{this.updateAudioBuffer()}),e)}}createAudioContext(){this.audioContext=o.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(e){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(e),128);case 16:return this.formatArrayBuffer(new Int16Array(e),32768);case 32:return this.formatArrayBuffer(new Int32Array(e),2147483648);default:throw new i.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(e,t){const n=new Float32Array(e.length);for(let i=0;i<e.length;i++)n[i]=e[i]/t;return n}updateAudioBuffer(){if(0===this.samples.length)return;const e=this.audioFormat.channels,t=this.audioContext.createBufferSource(),n=this.samples.length/e,i=this.audioContext.createBuffer(e,n,this.audioFormat.samplesPerSec);for(let r=0;r<e;r++){let t=r;const n=i.getChannelData(r);for(let i=0;i<this.samples.length;i++,t+=e)n[i]=this.samples[t]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),t.buffer=i,t.connect(this.gainNode),t.start(this.startTime),this.startTime+=i.duration,this.samples=new Float32Array}async playAudio(e){null===this.audioContext&&this.createAudioContext();const t=this.audioContext.createBufferSource(),n=this.audioContext.destination;await this.audioContext.decodeAudioData(e,(e=>{t.buffer=e,t.connect(n),t.start(0)}))}}},7014:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PullAudioInputStreamCallback=void 0;t.PullAudioInputStreamCallback=class{}},8626:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PushAudioOutputStreamCallback=void 0;t.PushAudioOutputStreamCallback=class{}},9553:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerAudioDestination=void 0;const i=n(2307),r=n(9709),o=n(4175),s={[o.AudioFormatTag.PCM]:"audio/wav",[o.AudioFormatTag.MuLaw]:"audio/x-wav",[o.AudioFormatTag.MP3]:"audio/mpeg",[o.AudioFormatTag.OGG_OPUS]:"audio/ogg",[o.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[o.AudioFormatTag.ALaw]:"audio/x-wav",[o.AudioFormatTag.FLAC]:"audio/flac"};t.SpeakerAudioDestination=class{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||i.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,t,n){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then((()=>{t&&t()}),(e=>{n&&n(e)}))):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,t){if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then((()=>{e&&e()}),(e=>{t&&t(e)}));else if(void 0!==this.privAudioOutputStream&&"undefined"!==typeof window)if(this.privFormat.formatTag!==o.AudioFormatTag.PCM&&this.privFormat.formatTag!==o.AudioFormatTag.MuLaw&&this.privFormat.formatTag!==o.AudioFormatTag.ALaw||!1!==this.privFormat.hasHeader){let n=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(n).then((()=>{n=this.privFormat.addHeader(n);const i=new Blob([n],{type:s[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then((()=>{e&&e()}),(e=>{t&&t(e)}))}),(e=>{t&&t(e)}))}else console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if("undefined"!==typeof AudioContext||"undefined"!==typeof window&&"undefined"!==typeof window.webkitAudioContext){this.privFormat=e;const t=s[this.privFormat.formatTag];void 0===t?console.warn("Unknown mimeType for format ".concat(o.AudioFormatTag[this.privFormat.formatTag],"; playback is not supported.")):"undefined"!==typeof MediaSource&&MediaSource.isTypeSupported(t)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=1800,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(t),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch((e=>{i.Events.instance.onEvent(new i.BackgroundEvent(e))}))},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch((e=>{i.Events.instance.onEvent(new i.BackgroundEvent(e))}))},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch((e=>{i.Events.instance.onEvent(new i.BackgroundEvent(e))}))):(console.warn("Format ".concat(o.AudioFormatTag[this.privFormat.formatTag]," could not be played by MSE, streaming playback is not enabled.")),this.privAudioOutputStream=new r.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var e,t;return null!==(e=null===(t=this.privAudio)||void 0===t?void 0:t.volume)&&void 0!==e?e:-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}pause(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then((()=>{e&&e()}),(e=>{t&&t(e)})),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const t=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(t)}catch(e){return this.privAudioBuffer.unshift(t),void console.log("buffer filled, pausing addition of binaries until space is made")}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){this.privPlaybackStarted||void 0===this.privAudio||(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}sourceBufferAvailable(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}}},9982:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguageConfig=void 0;const i=n(9859),r=n(260),o=n(8040),s=n(9531);class a{constructor(){this.privProperties=new o.PropertyCollection,this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=s.LanguageIdMode.AtStart}static fromOpenRange(){const e=new a;return e.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,i.AutoDetectSourceLanguagesOpenRangeOptionName),e}static fromLanguages(e){r.Contracts.throwIfArrayEmptyOrWhitespace(e,"languages");const t=new a;return t.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.join()),t}static fromSourceLanguageConfigs(e){if(e.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const t=new a,n=[];return e.forEach((e=>{if(n.push(e.language),void 0!==e.endpointId&&""!==e.endpointId){const n=e.language+o.PropertyId.SpeechServiceConnection_EndpointId.toString();t.properties.setProperty(n,e.endpointId)}})),t.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,n.join()),t}get properties(){return this.privProperties}set mode(e){e===s.LanguageIdMode.Continuous?(this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=e}}t.AutoDetectSourceLanguageConfig=a},6481:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguageResult=void 0;const i=n(260);class r{constructor(e,t){i.Contracts.throwIfNullOrUndefined(e,"language"),i.Contracts.throwIfNullOrUndefined(t,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=t}static fromResult(e){return new r(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new r(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}t.AutoDetectSourceLanguageResult=r},4572:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarConfig=void 0;const i=n(260),r=n(8040);t.AvatarConfig=class{constructor(e,t,n){this.privCustomized=!1,i.Contracts.throwIfNullOrWhitespace(e,"character"),this.character=e,this.style=t,void 0===n&&(n=new r.AvatarVideoFormat),this.videoFormat=n}get customized(){return this.privCustomized}set customized(e){this.privCustomized=e}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(e){this.privBackgroundColor=e}}},6669:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarEventArgs=t.AvatarEventTypes=void 0,function(e){e.SwitchedToSpeaking="SwitchedToSpeaking",e.SwitchedToIdle="SwitchedToIdle",e.SessionClosed="SessionClosed"}(t.AvatarEventTypes||(t.AvatarEventTypes={}));t.AvatarEventArgs=class{constructor(e,t){this.privOffset=e,this.privDescription=t}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}},5886:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarSynthesizer=void 0;const i=n(3344),r=n(9859),o=n(2307),s=n(7810),a=n(8040),c=n(260),l=n(8021);class u extends a.Synthesizer{constructor(e,t){super(e),c.Contracts.throwIfNullOrUndefined(t,"avatarConfig"),this.privConnectionFactory=new i.SpeechSynthesisConnectionFactory,this.privAvatarConfig=t,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=s.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(e){c.Contracts.throwIfNullOrUndefined(e,"peerConnection"),this.privIceServers=e.getConfiguration().iceServers,c.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const t=new o.Deferred;e.onicegatheringstatechange=()=>{o.Events.instance.onEvent(new o.PlatformEvent("peer connection: ice gathering state: "+e.iceGatheringState,o.EventType.Debug)),"complete"===e.iceGatheringState&&(o.Events.instance.onEvent(new o.PlatformEvent("peer connection: ice gathering complete.",o.EventType.Info)),t.resolve())},e.onicecandidate=e=>{e.candidate?o.Events.instance.onEvent(new o.PlatformEvent("peer connection: ice candidate: "+e.candidate.candidate,o.EventType.Debug)):(o.Events.instance.onEvent(new o.PlatformEvent("peer connection: ice candidate: complete",o.EventType.Debug)),t.resolve())},setTimeout((()=>{"complete"!==e.iceGatheringState&&(o.Events.instance.onEvent(new o.PlatformEvent("peer connection: ice gathering timeout.",o.EventType.Warning)),t.resolve())}),2e3);const n=await e.createOffer();await e.setLocalDescription(n),await t.promise,o.Events.instance.onEvent(new o.PlatformEvent("peer connection: got local SDP.",o.EventType.Info)),this.privProperties.setProperty(a.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(e.localDescription));const i=await this.speak("",!1);if(i.reason!==a.ResultReason.SynthesizingAudioCompleted)return new a.SynthesisResult(i.resultId,i.reason,i.errorDetails,i.properties);const r=atob(i.properties.getProperty(a.PropertyId.TalkingAvatarService_WebRTC_SDP)),s=new RTCSessionDescription(JSON.parse(r));return await e.setRemoteDescription(s),new a.SynthesisResult(i.resultId,i.reason,void 0,i.properties)}async speakTextAsync(e){const t=await this.speak(e,!1);return new a.SynthesisResult(t.resultId,t.reason,t.errorDetails,t.properties)}async speakSsmlAsync(e){const t=await this.speak(e,!0);return new a.SynthesisResult(t.resultId,t.reason,t.errorDetails,t.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;){(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.")}return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return c.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(e,t,n){return new r.AvatarSynthesisAdapter(e,t,n,this,this.privAvatarConfig)}createRestSynthesisAdapter(e,t){}createSynthesizerConfig(e){const t=super.createSynthesizerConfig(e);return t.avatarEnabled=!0,t}async speak(e,t){const n=o.createNoDashGuid(),i=new o.Deferred;return this.synthesisRequestQueue.enqueue(new l.SynthesisRequest(n,e,t,(e=>{i.resolve(e),this.privSynthesizing=!1,this.adapterSpeak()}),(e=>{i.reject(e),this.privSynthesizing=!1}))),this.adapterSpeak(),i.promise}}t.AvatarSynthesizer=u},7996:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarVideoFormat=t.Coordinate=void 0;t.Coordinate=class{constructor(e,t){this.x=e,this.y=t}};t.AvatarVideoFormat=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"H264",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1920,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1080;this.codec=e,this.bitrate=t,this.width=n,this.height=i}setCropRange(e,t){this.cropRange={bottomRight:t,topLeft:e}}}},6222:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarWebRTCConnectionResult=void 0;const i=n(8040);class r extends i.SynthesisResult{constructor(e,t,n,i,r){super(t,n,i,r),this.privSDPAnswer=e}get SDPAnswer(){return this.privSDPAnswer}}t.AvatarWebRTCConnectionResult=r},6566:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BotFrameworkConfig=void 0;const i=n(260),r=n(3542),o=n(8040);class s extends r.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(e,t,n){i.Contracts.throwIfNullOrWhitespace(e,"subscription"),i.Contracts.throwIfNullOrWhitespace(t,"region");const s=new r.DialogServiceConfigImpl;return s.setProperty(o.PropertyId.Conversation_DialogType,r.DialogServiceConfig.DialogTypes.BotFramework),s.setProperty(o.PropertyId.SpeechServiceConnection_Key,e),s.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),n&&s.setProperty(o.PropertyId.Conversation_ApplicationId,n),s}static fromAuthorizationToken(e,t,n){i.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),i.Contracts.throwIfNullOrWhitespace(t,"region");const s=new r.DialogServiceConfigImpl;return s.setProperty(o.PropertyId.Conversation_DialogType,r.DialogServiceConfig.DialogTypes.BotFramework),s.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e),s.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),n&&s.setProperty(o.PropertyId.Conversation_ApplicationId,n),s}static fromHost(e,t,n){i.Contracts.throwIfNullOrUndefined(e,"host");const s=e instanceof URL?e:new URL("wss://".concat(e,".convai.speech.azure.us"));i.Contracts.throwIfNullOrUndefined(s,"resolvedHost");const a=new r.DialogServiceConfigImpl;return a.setProperty(o.PropertyId.Conversation_DialogType,r.DialogServiceConfig.DialogTypes.BotFramework),a.setProperty(o.PropertyId.SpeechServiceConnection_Host,s.toString()),void 0!==t&&a.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),a}static fromEndpoint(e,t){i.Contracts.throwIfNull(e,"endpoint");const n=new r.DialogServiceConfigImpl;return n.setProperty(o.PropertyId.Conversation_DialogType,r.DialogServiceConfig.DialogTypes.BotFramework),n.setProperty(o.PropertyId.SpeechServiceConnection_Endpoint,e.toString()),void 0!==t&&n.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),n}}t.BotFrameworkConfig=s},4148:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationDetails=void 0;const i=n(9859),r=n(8293),o=n(8040);class s extends r.CancellationDetailsBase{constructor(e,t,n){super(e,t,n)}static fromResult(e){let t=o.CancellationReason.Error,n=o.CancellationErrorCode.NoError;if(e instanceof o.RecognitionResult&&e.json){const n=i.SimpleSpeechPhrase.fromJSON(e.json);t=i.EnumTranslation.implTranslateCancelResult(n.RecognitionStatus)}return e.properties&&(n=o.CancellationErrorCode[e.properties.getProperty(i.CancellationErrorCodePropertyName,o.CancellationErrorCode[o.CancellationErrorCode.NoError])]),new s(t,e.errorDetails||i.EnumTranslation.implTranslateErrorDetails(n),n)}}t.CancellationDetails=s},8293:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationDetailsBase=void 0;t.CancellationDetailsBase=class{constructor(e,t,n){this.privReason=e,this.privErrorDetails=t,this.privErrorCode=n}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}},372:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationErrorCode=void 0,function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"}(t.CancellationErrorCode||(t.CancellationErrorCode={}))},8706:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationEventArgsBase=void 0;const i=n(8040);class r extends i.RecognitionEventArgs{constructor(e,t,n,i,r){super(i,r),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=n}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}t.CancellationEventArgsBase=r},2096:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationReason=void 0,function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(t.CancellationReason||(t.CancellationReason={}))},4931:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;const i=n(9859),r=n(2307),o=n(344),s=n(260),a=n(8040);class c{static fromRecognizer(e){const t=e.internalData,n=new c;return n.privInternalData=t,n.setupEvents(),n}static fromSynthesizer(e){const t=e.internalData,n=new c;return n.privInternalData=t,n.setupEvents(),n}openConnection(e,t){r.marshalPromiseToCallbacks(this.privInternalData.connect(),e,t)}closeConnection(e,t){if(this.privInternalData instanceof i.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");r.marshalPromiseToCallbacks(this.privInternalData.disconnect(),e,t)}setMessageProperty(e,t,n){if(s.Contracts.throwIfNullOrWhitespace(t,"propertyName"),this.privInternalData instanceof i.ServiceRecognizerBase){if("speech.context"!==e.toLowerCase())throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(t,n)}else if(this.privInternalData instanceof i.SynthesisAdapterBase){if("synthesis.context"!==e.toLowerCase())throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(t,n)}}sendMessageAsync(e,t,n,i){r.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(e,t),n,i)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach((e=>{"ConnectionEstablishedEvent"===e.name?this.connected&&this.connected(new a.ConnectionEventArgs(e.connectionId)):"ConnectionClosedEvent"===e.name?this.disconnected&&this.disconnected(new a.ConnectionEventArgs(e.connectionId)):"ConnectionMessageSentEvent"===e.name?this.messageSent&&this.messageSent(new a.ConnectionMessageEventArgs(new o.ConnectionMessageImpl(e.message))):"ConnectionMessageReceivedEvent"===e.name&&this.messageReceived&&this.messageReceived(new a.ConnectionMessageEventArgs(new o.ConnectionMessageImpl(e.message)))})),this.privServiceEventListener=this.privInternalData.serviceEvents.attach((e=>{this.receivedServiceMessage&&this.receivedServiceMessage(new a.ServiceEventArgs(e.jsonString,e.name))}))}}t.Connection=c},5850:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionEventArgs=void 0;const i=n(8040);class r extends i.SessionEventArgs{}t.ConnectionEventArgs=r},344:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageImpl=t.ConnectionMessage=void 0;const i=n(8643),r=n(2307),o=n(6058),s=n(1743);t.ConnectionMessage=class{};t.ConnectionMessageImpl=class{constructor(e){this.privConnectionMessage=e,this.privProperties=new o.PropertyCollection,this.privConnectionMessage.headers[i.HeaderNames.ConnectionId]&&this.privProperties.setProperty(s.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[i.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach((e=>{this.privProperties.setProperty(e,this.privConnectionMessage.headers[e])}))}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find((e=>e.toLowerCase()==="path".toLowerCase()))]}get isTextMessage(){return this.privConnectionMessage.messageType===r.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===r.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}},6471:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageEventArgs=void 0;t.ConnectionMessageEventArgs=class{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}},260:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Contracts=void 0;class n{static throwIfNullOrUndefined(e,t){if(void 0===e||null===e)throw new Error("throwIfNullOrUndefined:"+t)}static throwIfNull(e,t){if(null===e)throw new Error("throwIfNull:"+t)}static throwIfNullOrWhitespace(e,t){if(n.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+t)}static throwIfNullOrTooLong(e,t,i){if(n.throwIfNullOrUndefined(e,t),(""+e).length>i)throw new Error("throwIfNullOrTooLong:"+t+" (more than "+i.toString()+" characters)")}static throwIfNullOrTooShort(e,t,i){if(n.throwIfNullOrUndefined(e,t),(""+e).length<i)throw new Error("throwIfNullOrTooShort:"+t+" (less than "+i.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,t){if(n.throwIfNullOrUndefined(e,t),0===e.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+t);for(const i of e)n.throwIfNullOrWhitespace(i,t)}static throwIfFileDoesNotExist(e,t){n.throwIfNullOrWhitespace(e,t)}static throwIfNotUndefined(e,t){if(void 0!==e)throw new Error("throwIfNotUndefined:"+t)}}t.Contracts=n},684:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionCanceledEventArgs=void 0;const i=n(8706);class r extends i.CancellationEventArgsBase{}t.ConversationTranscriptionCanceledEventArgs=r},980:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCommandsConfig=void 0;const i=n(260),r=n(3542),o=n(8040);class s extends r.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(e,t,n){i.Contracts.throwIfNullOrWhitespace(e,"applicationId"),i.Contracts.throwIfNullOrWhitespace(t,"subscription"),i.Contracts.throwIfNullOrWhitespace(n,"region");const s=new r.DialogServiceConfigImpl;return s.setProperty(o.PropertyId.Conversation_DialogType,r.DialogServiceConfig.DialogTypes.CustomCommands),s.setProperty(o.PropertyId.Conversation_ApplicationId,e),s.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),s.setProperty(o.PropertyId.SpeechServiceConnection_Region,n),s}static fromAuthorizationToken(e,t,n){i.Contracts.throwIfNullOrWhitespace(e,"applicationId"),i.Contracts.throwIfNullOrWhitespace(t,"authorizationToken"),i.Contracts.throwIfNullOrWhitespace(n,"region");const s=new r.DialogServiceConfigImpl;return s.setProperty(o.PropertyId.Conversation_DialogType,r.DialogServiceConfig.DialogTypes.CustomCommands),s.setProperty(o.PropertyId.Conversation_ApplicationId,e),s.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,t),s.setProperty(o.PropertyId.SpeechServiceConnection_Region,n),s}set applicationId(e){i.Contracts.throwIfNullOrWhitespace(e,"value"),this.setProperty(o.PropertyId.Conversation_ApplicationId,e)}get applicationId(){return this.getProperty(o.PropertyId.Conversation_ApplicationId)}}t.CustomCommandsConfig=s},2999:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Diagnostics=void 0;const i=n(2277),r=n(2307);class o{static SetLoggingLevel(e){this.privListener=new i.ConsoleLoggingListener(e),r.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(e){if("undefined"!==typeof window)throw new Error("File system logging not available in browser.");this.privListener&&(this.privListener.logPath=e)}}t.Diagnostics=o,o.privListener=void 0},3542:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceConfigImpl=t.DialogServiceConfig=void 0;const i=n(260),r=n(8040);class o{constructor(){}set applicationId(e){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}}t.DialogServiceConfig=o;t.DialogServiceConfigImpl=class extends o{constructor(){super(),this.privSpeechConfig=new r.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(e){i.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechConfig.speechRecognitionLanguage=e}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(e){this.privSpeechConfig.outputFormat=e}setProperty(e,t){this.privSpeechConfig.setProperty(e,t)}getProperty(e,t){return this.privSpeechConfig.getProperty(e)}setProxy(e,t,n,i){this.setProperty(r.PropertyId.SpeechServiceConnection_ProxyHostName,e),this.setProperty(r.PropertyId.SpeechServiceConnection_ProxyPort,"".concat(t)),n&&this.setProperty(r.PropertyId.SpeechServiceConnection_ProxyUserName,n),i&&this.setProperty(r.PropertyId.SpeechServiceConnection_ProxyPassword,i)}setServiceProperty(e,t,n){this.privSpeechConfig.setServiceProperty(e,t)}close(){}}},4229:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceConnector=void 0;const i=n(8401),r=n(9859),o=n(2307),s=n(260),a=n(8040),c=n(1743);class l extends a.Recognizer{constructor(e,t){const n=e;s.Contracts.throwIfNull(e,"dialogConfig"),super(t,n.properties,new i.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=n.properties.clone();const r=this.buildAgentConfig();this.privReco.agentConfig.set(r)}connect(e,t){o.marshalPromiseToCallbacks(this.privReco.connect(),e,t)}disconnect(e,t){o.marshalPromiseToCallbacks(this.privReco.disconnect(),e,t)}get authorizationToken(){return this.properties.getProperty(c.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(c.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(c.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(e){this.properties.setProperty(c.PropertyId.Conversation_Speech_Activity_Template,e)}listenOnceAsync(e,t){if(this.isTurnComplete){s.Contracts.throwIfDisposed(this.privIsDisposed);const n=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const e=new o.Deferred;await this.privReco.recognize(r.RecognitionMode.Conversation,e.resolve,e.reject);const t=await e.promise;return await this.implRecognizerStop(),t})();n.catch((()=>{this.dispose(!0).catch((()=>{}))})),o.marshalPromiseToCallbacks(n.finally((()=>{this.isTurnComplete=!0})),e,t)}}sendActivityAsync(e,t,n){o.marshalPromiseToCallbacks(this.privReco.sendMessage(e),t,n)}close(e,t){s.Contracts.throwIfDisposed(this.privIsDisposed),o.marshalPromiseToCallbacks(this.dispose(!0),e,t)}async dispose(e){this.privIsDisposed||e&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(e))}createRecognizerConfig(e){return new r.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,n,i){const o=n;return new r.DialogServiceAdapter(e,t,o,i,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(c.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(c.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(c.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(c.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}}t.DialogServiceConnector=l},8040:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6782);Object.defineProperty(t,"AudioConfig",{enumerable:!0,get:function(){return i.AudioConfig}});var r=n(4175);Object.defineProperty(t,"AudioStreamFormat",{enumerable:!0,get:function(){return r.AudioStreamFormat}}),Object.defineProperty(t,"AudioFormatTag",{enumerable:!0,get:function(){return r.AudioFormatTag}});var o=n(6182);Object.defineProperty(t,"AudioInputStream",{enumerable:!0,get:function(){return o.AudioInputStream}}),Object.defineProperty(t,"PullAudioInputStream",{enumerable:!0,get:function(){return o.PullAudioInputStream}}),Object.defineProperty(t,"PushAudioInputStream",{enumerable:!0,get:function(){return o.PushAudioInputStream}});var s=n(9709);Object.defineProperty(t,"AudioOutputStream",{enumerable:!0,get:function(){return s.AudioOutputStream}}),Object.defineProperty(t,"PullAudioOutputStream",{enumerable:!0,get:function(){return s.PullAudioOutputStream}}),Object.defineProperty(t,"PushAudioOutputStream",{enumerable:!0,get:function(){return s.PushAudioOutputStream}});var a=n(2096);Object.defineProperty(t,"CancellationReason",{enumerable:!0,get:function(){return a.CancellationReason}});var c=n(7014);Object.defineProperty(t,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return c.PullAudioInputStreamCallback}});var l=n(8626);Object.defineProperty(t,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return l.PushAudioOutputStreamCallback}});var u=n(1220);Object.defineProperty(t,"KeywordRecognitionModel",{enumerable:!0,get:function(){return u.KeywordRecognitionModel}});var d=n(9070);Object.defineProperty(t,"SessionEventArgs",{enumerable:!0,get:function(){return d.SessionEventArgs}});var h=n(8743);Object.defineProperty(t,"RecognitionEventArgs",{enumerable:!0,get:function(){return h.RecognitionEventArgs}});var p=n(3833);Object.defineProperty(t,"OutputFormat",{enumerable:!0,get:function(){return p.OutputFormat}});var f=n(4065);Object.defineProperty(t,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return f.IntentRecognitionEventArgs}});var v=n(7501);Object.defineProperty(t,"RecognitionResult",{enumerable:!0,get:function(){return v.RecognitionResult}});var m=n(127);Object.defineProperty(t,"SpeechRecognitionResult",{enumerable:!0,get:function(){return m.SpeechRecognitionResult}});var g=n(2399);Object.defineProperty(t,"IntentRecognitionResult",{enumerable:!0,get:function(){return g.IntentRecognitionResult}});var y=n(590);Object.defineProperty(t,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return y.LanguageUnderstandingModel}});var S=n(1649);Object.defineProperty(t,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return S.SpeechRecognitionEventArgs}}),Object.defineProperty(t,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return S.ConversationTranscriptionEventArgs}}),Object.defineProperty(t,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return S.MeetingTranscriptionEventArgs}});var b=n(4832);Object.defineProperty(t,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return b.SpeechRecognitionCanceledEventArgs}});var _=n(6452);Object.defineProperty(t,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return _.TranslationRecognitionEventArgs}});var w=n(4823);Object.defineProperty(t,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return w.TranslationSynthesisEventArgs}});var x=n(2936);Object.defineProperty(t,"TranslationRecognitionResult",{enumerable:!0,get:function(){return x.TranslationRecognitionResult}});var C=n(3213);Object.defineProperty(t,"TranslationSynthesisResult",{enumerable:!0,get:function(){return C.TranslationSynthesisResult}});var E=n(3906);Object.defineProperty(t,"ResultReason",{enumerable:!0,get:function(){return E.ResultReason}});var P=n(3051);Object.defineProperty(t,"SpeechConfig",{enumerable:!0,get:function(){return P.SpeechConfig}}),Object.defineProperty(t,"SpeechConfigImpl",{enumerable:!0,get:function(){return P.SpeechConfigImpl}});var T=n(3468);Object.defineProperty(t,"SpeechTranslationConfig",{enumerable:!0,get:function(){return T.SpeechTranslationConfig}}),Object.defineProperty(t,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return T.SpeechTranslationConfigImpl}});var R=n(6058);Object.defineProperty(t,"PropertyCollection",{enumerable:!0,get:function(){return R.PropertyCollection}});var M=n(1743);Object.defineProperty(t,"PropertyId",{enumerable:!0,get:function(){return M.PropertyId}});var A=n(8045);Object.defineProperty(t,"Recognizer",{enumerable:!0,get:function(){return A.Recognizer}});var I=n(5411);Object.defineProperty(t,"SpeechRecognizer",{enumerable:!0,get:function(){return I.SpeechRecognizer}});var k=n(7747);Object.defineProperty(t,"IntentRecognizer",{enumerable:!0,get:function(){return k.IntentRecognizer}});var O=n(8472);Object.defineProperty(t,"VoiceProfileType",{enumerable:!0,get:function(){return O.VoiceProfileType}});var D=n(2058);Object.defineProperty(t,"TranslationRecognizer",{enumerable:!0,get:function(){return D.TranslationRecognizer}});var L=n(7515);Object.defineProperty(t,"Translations",{enumerable:!0,get:function(){return L.Translations}});var N=n(6727);Object.defineProperty(t,"NoMatchReason",{enumerable:!0,get:function(){return N.NoMatchReason}});var z=n(6501);Object.defineProperty(t,"NoMatchDetails",{enumerable:!0,get:function(){return z.NoMatchDetails}});var F=n(9169);Object.defineProperty(t,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return F.TranslationRecognitionCanceledEventArgs}});var U=n(3552);Object.defineProperty(t,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return U.IntentRecognitionCanceledEventArgs}});var B=n(8293);Object.defineProperty(t,"CancellationDetailsBase",{enumerable:!0,get:function(){return B.CancellationDetailsBase}});var j=n(4148);Object.defineProperty(t,"CancellationDetails",{enumerable:!0,get:function(){return j.CancellationDetails}});var V=n(372);Object.defineProperty(t,"CancellationErrorCode",{enumerable:!0,get:function(){return V.CancellationErrorCode}});var H=n(5850);Object.defineProperty(t,"ConnectionEventArgs",{enumerable:!0,get:function(){return H.ConnectionEventArgs}});var W=n(3707);Object.defineProperty(t,"ServiceEventArgs",{enumerable:!0,get:function(){return W.ServiceEventArgs}});var G=n(4931);Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return G.Connection}});var q=n(6945);Object.defineProperty(t,"PhraseListGrammar",{enumerable:!0,get:function(){return q.PhraseListGrammar}});var X=n(3542);Object.defineProperty(t,"DialogServiceConfig",{enumerable:!0,get:function(){return X.DialogServiceConfig}});var K=n(6566);Object.defineProperty(t,"BotFrameworkConfig",{enumerable:!0,get:function(){return K.BotFrameworkConfig}});var J=n(980);Object.defineProperty(t,"CustomCommandsConfig",{enumerable:!0,get:function(){return J.CustomCommandsConfig}});var Y=n(4229);Object.defineProperty(t,"DialogServiceConnector",{enumerable:!0,get:function(){return Y.DialogServiceConnector}});var $=n(840);Object.defineProperty(t,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return $.ActivityReceivedEventArgs}});var Q=n(716);Object.defineProperty(t,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return Q.TurnStatusReceivedEventArgs}});var Z=n(8282);Object.defineProperty(t,"ServicePropertyChannel",{enumerable:!0,get:function(){return Z.ServicePropertyChannel}});var ee=n(94);Object.defineProperty(t,"ProfanityOption",{enumerable:!0,get:function(){return ee.ProfanityOption}});var te=n(4902);Object.defineProperty(t,"BaseAudioPlayer",{enumerable:!0,get:function(){return te.BaseAudioPlayer}});var ne=n(6471);Object.defineProperty(t,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return ne.ConnectionMessageEventArgs}});var ie=n(344);Object.defineProperty(t,"ConnectionMessage",{enumerable:!0,get:function(){return ie.ConnectionMessage}});var re=n(4384);Object.defineProperty(t,"VoiceProfile",{enumerable:!0,get:function(){return re.VoiceProfile}});var oe=n(6917);Object.defineProperty(t,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return oe.VoiceProfileEnrollmentResult}}),Object.defineProperty(t,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return oe.VoiceProfileEnrollmentCancellationDetails}});var se=n(9941);Object.defineProperty(t,"VoiceProfileResult",{enumerable:!0,get:function(){return se.VoiceProfileResult}}),Object.defineProperty(t,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return se.VoiceProfileCancellationDetails}});var ae=n(7268);Object.defineProperty(t,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return ae.VoiceProfilePhraseResult}});var ce=n(8163);Object.defineProperty(t,"VoiceProfileClient",{enumerable:!0,get:function(){return ce.VoiceProfileClient}});var le=n(4656);Object.defineProperty(t,"SpeakerRecognizer",{enumerable:!0,get:function(){return le.SpeakerRecognizer}});var ue=n(6031);Object.defineProperty(t,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return ue.SpeakerIdentificationModel}});var de=n(2040);Object.defineProperty(t,"SpeakerVerificationModel",{enumerable:!0,get:function(){return de.SpeakerVerificationModel}});var he=n(9982);Object.defineProperty(t,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return he.AutoDetectSourceLanguageConfig}});var pe=n(6481);Object.defineProperty(t,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return pe.AutoDetectSourceLanguageResult}});var fe=n(7646);Object.defineProperty(t,"SourceLanguageConfig",{enumerable:!0,get:function(){return fe.SourceLanguageConfig}});var ve=n(9818);Object.defineProperty(t,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return ve.SpeakerRecognitionResult}}),Object.defineProperty(t,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return ve.SpeakerRecognitionResultType}}),Object.defineProperty(t,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return ve.SpeakerRecognitionCancellationDetails}});var me=n(5463);Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return me.Conversation}}),Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return me.ConversationExpirationEventArgs}}),Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return me.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return me.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return me.ConversationTranslationEventArgs}}),Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return me.ConversationTranslationResult}}),Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return me.ConversationTranslator}}),Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return me.ConversationTranscriber}}),Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return me.ConversationTranscriptionResult}}),Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return me.Meeting}}),Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return me.MeetingTranscriber}}),Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return me.Participant}}),Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return me.ParticipantChangedReason}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return me.User}});var ge=n(8021);Object.defineProperty(t,"Synthesizer",{enumerable:!0,get:function(){return ge.Synthesizer}});var ye=n(8765);Object.defineProperty(t,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return ye.SpeechSynthesisOutputFormat}});var Se=n(9783);Object.defineProperty(t,"SpeechSynthesizer",{enumerable:!0,get:function(){return Se.SpeechSynthesizer}});var be=n(9548);Object.defineProperty(t,"SynthesisResult",{enumerable:!0,get:function(){return be.SynthesisResult}});var _e=n(8394);Object.defineProperty(t,"SpeechSynthesisResult",{enumerable:!0,get:function(){return _e.SpeechSynthesisResult}});var we=n(3289);Object.defineProperty(t,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return we.SpeechSynthesisEventArgs}});var xe=n(8608);Object.defineProperty(t,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return xe.SpeechSynthesisWordBoundaryEventArgs}});var Ce=n(4814);Object.defineProperty(t,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return Ce.SpeechSynthesisBookmarkEventArgs}});var Ee=n(3911);Object.defineProperty(t,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return Ee.SpeechSynthesisVisemeEventArgs}});var Pe=n(9225);Object.defineProperty(t,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return Pe.SpeechSynthesisBoundaryType}});var Te=n(2359);Object.defineProperty(t,"SynthesisVoicesResult",{enumerable:!0,get:function(){return Te.SynthesisVoicesResult}});var Re=n(8833);Object.defineProperty(t,"VoiceInfo",{enumerable:!0,get:function(){return Re.VoiceInfo}});var Me=n(9553);Object.defineProperty(t,"SpeakerAudioDestination",{enumerable:!0,get:function(){return Me.SpeakerAudioDestination}});var Ae=n(684);Object.defineProperty(t,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Ae.ConversationTranscriptionCanceledEventArgs}});var Ie=n(6822);Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Ie.MeetingTranscriptionCanceledEventArgs}});var ke=n(175);Object.defineProperty(t,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return ke.PronunciationAssessmentGradingSystem}});var Oe=n(338);Object.defineProperty(t,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return Oe.PronunciationAssessmentGranularity}});var De=n(1074);Object.defineProperty(t,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return De.PronunciationAssessmentConfig}});var Le=n(1045);Object.defineProperty(t,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return Le.PronunciationAssessmentResult}});var Ne=n(9531);Object.defineProperty(t,"LanguageIdMode",{enumerable:!0,get:function(){return Ne.LanguageIdMode}});var ze=n(4572);Object.defineProperty(t,"AvatarConfig",{enumerable:!0,get:function(){return ze.AvatarConfig}});var Fe=n(6669);Object.defineProperty(t,"AvatarEventArgs",{enumerable:!0,get:function(){return Fe.AvatarEventArgs}});var Ue=n(5886);Object.defineProperty(t,"AvatarSynthesizer",{enumerable:!0,get:function(){return Ue.AvatarSynthesizer}});var Be=n(7996);Object.defineProperty(t,"AvatarVideoFormat",{enumerable:!0,get:function(){return Be.AvatarVideoFormat}}),Object.defineProperty(t,"Coordinate",{enumerable:!0,get:function(){return Be.Coordinate}});var je=n(6222);Object.defineProperty(t,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return je.AvatarWebRTCConnectionResult}});var Ve=n(2999);Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return Ve.Diagnostics}});var He=n(9099);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return He.LogLevel}})},3552:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionCanceledEventArgs=void 0;const i=n(8040);class r extends i.IntentRecognitionEventArgs{constructor(e,t,n,i,r,o){super(i,r,o),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=n}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}t.IntentRecognitionCanceledEventArgs=r},4065:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionEventArgs=void 0;const i=n(8040);class r extends i.RecognitionEventArgs{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}}t.IntentRecognitionEventArgs=r},2399:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionResult=void 0;const i=n(8040);class r extends i.SpeechRecognitionResult{constructor(e,t,n,i,r,o,s,a,c,l,u){super(t,n,i,r,o,s,a,void 0,c,l,u),this.privIntentId=e}get intentId(){return this.privIntentId}}t.IntentRecognitionResult=r},7747:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognizer=void 0;const i=n(9859),r=n(2307),o=n(260),s=n(8040);class a extends s.Recognizer{constructor(e,t){o.Contracts.throwIfNullOrUndefined(e,"speechConfig");const n=e;o.Contracts.throwIfNullOrUndefined(n,"speechConfig"),super(t,n.properties,new i.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=n.properties,o.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return o.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,t){if(o.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const e=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",e.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars);this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}r.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(i.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){if(0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const e=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",e.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars);this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}r.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){r.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,n){o.Contracts.throwIfNull(e,"model"),n&&n("Not yet implemented.")}stopKeywordRecognitionAsync(e,t){if(e)try{e()}catch(n){t&&t(n)}}addIntent(e,t){o.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),o.Contracts.throwIfNullOrWhitespace(t,"intentId"),o.Contracts.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([t,e])}addIntentWithLanguageModel(e,t,n){o.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),o.Contracts.throwIfNullOrWhitespace(e,"intentId"),o.Contracts.throwIfNull(t,"model");const r=t;o.Contracts.throwIfNullOrWhitespace(r.appId,"model.appId"),this.privAddedLmIntents[e]=new i.AddedLmIntent(r,n)}addAllIntents(e,t){o.Contracts.throwIfNull(e,"model");const n=e;o.Contracts.throwIfNullOrWhitespace(n.appId,"model.appId"),this.privUmbrellaIntent=new i.AddedLmIntent(n,t)}close(e,t){o.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.marshalPromiseToCallbacks(this.dispose(!0),e,t)}createRecognizerConfig(e){return new i.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,n,r){const o=n;return new i.IntentServiceRecognizer(e,t,o,r,this)}async dispose(e){this.privDisposedIntentRecognizer||e&&(this.privDisposedIntentRecognizer=!0,await super.dispose(e))}buildSpeechContext(){let e,t,n;const i=[];void 0!==this.privUmbrellaIntent&&(e=this.privUmbrellaIntent.modelImpl.appId,t=this.privUmbrellaIntent.modelImpl.region,n=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const r of Object.keys(this.privAddedLmIntents)){const o=this.privAddedLmIntents[r];if(void 0===e)e=o.modelImpl.appId;else if(e!==o.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(void 0===t)t=o.modelImpl.region;else if(t!==o.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(void 0===n)n=o.modelImpl.subscriptionKey;else if(n!==o.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const s="luis/"+e+"-PRODUCTION#"+r;i.push(s)}return{Intent:{id:e,key:void 0===n?this.privProperties.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key]):n,provider:"LUIS"},ReferenceGrammars:void 0===this.privUmbrellaIntent?i:["luis/"+e+"-PRODUCTION"]}}}t.IntentRecognizer=a},1220:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeywordRecognitionModel=void 0;const i=n(260);t.KeywordRecognitionModel=class{constructor(){this.privDisposed=!1}static fromFile(e){throw i.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw i.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}},9531:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageIdMode=void 0,function(e){e[e.AtStart=0]="AtStart",e[e.Continuous=1]="Continuous"}(t.LanguageIdMode||(t.LanguageIdMode={}))},590:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageUnderstandingModelImpl=t.LanguageUnderstandingModel=void 0;const i=n(260);class r{constructor(){}static fromEndpoint(e){i.Contracts.throwIfNull(e,"uri"),i.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");const t=new o,n=e.host.indexOf(".");if(-1===n)throw new Error("Could not determine region from endpoint");t.region=e.host.substr(0,n);const r=e.pathname.lastIndexOf("/")+1;if(-1===r)throw new Error("Could not determine appId from endpoint");if(t.appId=e.pathname.substr(r),t.subscriptionKey=e.searchParams.get("subscription-key"),void 0===t.subscriptionKey)throw new Error("Could not determine subscription key from endpoint");return t}static fromAppId(e){i.Contracts.throwIfNullOrWhitespace(e,"appId");const t=new o;return t.appId=e,t}static fromSubscription(e,t,n){i.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),i.Contracts.throwIfNullOrWhitespace(t,"appId"),i.Contracts.throwIfNullOrWhitespace(n,"region");const r=new o;return r.appId=t,r.region=n,r.subscriptionKey=e,r}}t.LanguageUnderstandingModel=r;class o extends r{}t.LanguageUnderstandingModelImpl=o},9099:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0;const i=n(2307);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return i.EventType}})},6822:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingTranscriptionCanceledEventArgs=void 0;const i=n(8706);class r extends i.CancellationEventArgsBase{}t.MeetingTranscriptionCanceledEventArgs=r},6501:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchDetails=void 0;const i=n(9859),r=n(8040);class o{constructor(e){this.privReason=e}static fromResult(e){const t=i.SimpleSpeechPhrase.fromJSON(e.json);let n=r.NoMatchReason.NotRecognized;switch(t.RecognitionStatus){case i.RecognitionStatus.BabbleTimeout:n=r.NoMatchReason.InitialBabbleTimeout;break;case i.RecognitionStatus.InitialSilenceTimeout:n=r.NoMatchReason.InitialSilenceTimeout;break;default:n=r.NoMatchReason.NotRecognized}return new o(n)}get reason(){return this.privReason}}t.NoMatchDetails=o},6727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchReason=void 0,function(e){e[e.NotRecognized=0]="NotRecognized",e[e.InitialSilenceTimeout=1]="InitialSilenceTimeout",e[e.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(t.NoMatchReason||(t.NoMatchReason={}))},3833:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputFormat=void 0,function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(t.OutputFormat||(t.OutputFormat={}))},6945:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhraseListGrammar=void 0;class n{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){const t=e.internalData;return new n(t)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}}t.PhraseListGrammar=n},94:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProfanityOption=void 0,function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(t.ProfanityOption||(t.ProfanityOption={}))},1074:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentConfig=void 0;const i=n(260),r=n(8040);class o{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.PronunciationAssessmentGradingSystem.FivePoint,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.PronunciationAssessmentGranularity.Phoneme,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i.Contracts.throwIfNullOrUndefined(e,"referenceText"),this.privProperties=new r.PropertyCollection,this.privProperties.setProperty(r.PropertyId.PronunciationAssessment_ReferenceText,e),this.privProperties.setProperty(r.PropertyId.PronunciationAssessment_GradingSystem,r.PronunciationAssessmentGradingSystem[t]),this.privProperties.setProperty(r.PropertyId.PronunciationAssessment_Granularity,r.PronunciationAssessmentGranularity[n]),this.privProperties.setProperty(r.PropertyId.PronunciationAssessment_EnableMiscue,String(o))}static fromJSON(e){i.Contracts.throwIfNullOrUndefined(e,"json");const t=new o("");return t.privProperties=new r.PropertyCollection,t.properties.setProperty(r.PropertyId.PronunciationAssessment_Json,e),t}toJSON(){return this.updateJson(),this.privProperties.getProperty(r.PropertyId.PronunciationAssessment_Params)}applyTo(e){this.updateJson();const t=e.internalData;t.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,t.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(r.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,t.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(r.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(e){i.Contracts.throwIfNullOrWhitespace(e,"referenceText"),this.properties.setProperty(r.PropertyId.PronunciationAssessment_ReferenceText,e)}set phonemeAlphabet(e){i.Contracts.throwIfNullOrWhitespace(e,"phonemeAlphabet"),this.privPhonemeAlphabet=e}set enableMiscue(e){const t=e?"true":"false";this.properties.setProperty(r.PropertyId.PronunciationAssessment_EnableMiscue,t)}get enableMiscue(){return"true"===this.properties.getProperty(r.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()}set nbestPhonemeCount(e){this.privNBestPhonemeCount=e}set enableProsodyAssessment(e){this.privEnableProsodyAssessment=e}enableContentAssessmentWithTopic(e){this.privContentAssessmentTopic=e}get properties(){return this.privProperties}updateJson(){const e=this.privProperties.getProperty(r.PropertyId.PronunciationAssessment_Json,"{}"),t=JSON.parse(e),n=this.privProperties.getProperty(r.PropertyId.PronunciationAssessment_ReferenceText);n&&(t.referenceText=n);const i=this.privProperties.getProperty(r.PropertyId.PronunciationAssessment_GradingSystem);i&&(t.gradingSystem=i);const o=this.privProperties.getProperty(r.PropertyId.PronunciationAssessment_Granularity);o&&(t.granularity=o),this.privPhonemeAlphabet&&(t.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(t.nbestPhonemeCount=this.privNBestPhonemeCount),t.enableProsodyAssessment=this.privEnableProsodyAssessment,t.dimension="Comprehensive";this.privProperties.getProperty(r.PropertyId.PronunciationAssessment_EnableMiscue)&&(t.enableMiscue=this.enableMiscue),this.privProperties.setProperty(r.PropertyId.PronunciationAssessment_Params,JSON.stringify(t))}}t.PronunciationAssessmentConfig=o},175:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGradingSystem=void 0,function(e){e[e.FivePoint=1]="FivePoint",e[e.HundredMark=2]="HundredMark"}(t.PronunciationAssessmentGradingSystem||(t.PronunciationAssessmentGradingSystem={}))},338:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGranularity=void 0,function(e){e[e.Phoneme=1]="Phoneme",e[e.Word=2]="Word",e[e.FullText=3]="FullText"}(t.PronunciationAssessmentGranularity||(t.PronunciationAssessmentGranularity={}))},1045:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentResult=t.ContentAssessmentResult=void 0;const i=n(260),r=n(8040);class o{constructor(e){this.privPronJson=e}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}t.ContentAssessmentResult=o;class s{constructor(e){const t=JSON.parse(e);i.Contracts.throwIfNullOrUndefined(t.NBest[0],"NBest"),this.privPronJson=t.NBest[0]}static fromResult(e){i.Contracts.throwIfNullOrUndefined(e,"result");const t=e.properties.getProperty(r.PropertyId.SpeechServiceResponse_JsonResult);return i.Contracts.throwIfNullOrUndefined(t,"json"),new s(t)}get detailResult(){return this.privPronJson}get accuracyScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.AccuracyScore}get pronunciationScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.PronScore}get completenessScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.CompletenessScore}get fluencyScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.FluencyScore}get prosodyScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.ProsodyScore}get contentAssessmentResult(){if(void 0!==this.detailResult.ContentAssessment)return new o(this.detailResult)}}t.PronunciationAssessmentResult=s},6058:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyCollection=void 0;const i=n(8040);class r{constructor(){this.privKeys=[],this.privValues=[]}getProperty(e,t){let n;n="string"===typeof e?e:i.PropertyId[e];for(let i=0;i<this.privKeys.length;i++)if(this.privKeys[i]===n)return this.privValues[i];if(void 0!==t)return String(t)}setProperty(e,t){let n;n="string"===typeof e?e:i.PropertyId[e];for(let i=0;i<this.privKeys.length;i++)if(this.privKeys[i]===n)return void(this.privValues[i]=t);this.privKeys.push(n),this.privValues.push(t)}clone(){const e=new r;for(let t=0;t<this.privKeys.length;t++)e.privKeys.push(this.privKeys[t]),e.privValues.push(this.privValues[t]);return e}mergeTo(e){this.privKeys.forEach((t=>{if(void 0===e.getProperty(t,void 0)){const n=this.getProperty(t);e.setProperty(t,n)}}))}get keys(){return this.privKeys}}t.PropertyCollection=r},1743:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyId=void 0,function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",e[e.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",e[e.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",e[e.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",e[e.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",e[e.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",e[e.Conversation_ApplicationId=46]="Conversation_ApplicationId",e[e.Conversation_DialogType=47]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=49]="Conversation_From_Id",e[e.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=56]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=57]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=59]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",e[e.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version",e[e.WebWorkerLoadType=67]="WebWorkerLoadType",e[e.TalkingAvatarService_WebRTC_SDP=68]="TalkingAvatarService_WebRTC_SDP"}(t.PropertyId||(t.PropertyId={}))},8743:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEventArgs=void 0;const i=n(8040);class r extends i.SessionEventArgs{constructor(e,t){super(t),this.privOffset=e}get offset(){return this.privOffset}}t.RecognitionEventArgs=r},7501:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionResult=void 0;t.RecognitionResult=class{constructor(e,t,n,i,r,o,s,a,c,l){this.privResultId=e,this.privReason=t,this.privText=n,this.privDuration=i,this.privOffset=r,this.privLanguage=o,this.privLanguageDetectionConfidence=s,this.privErrorDetails=a,this.privJson=c,this.privProperties=l}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}},8045:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Recognizer=void 0;const i=n(9859),r=n(2307),o=n(260),s=n(8040);class a{constructor(e,t,n){this.audioConfig=void 0!==e?e:s.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=t.clone(),this.privConnectionFactory=n,this.implCommonRecognizerSetup()}close(e,t){o.Contracts.throwIfDisposed(this.privDisposed),r.marshalPromiseToCallbacks(this.dispose(!0),e,t)}get internalData(){return this.privReco}async dispose(e){this.privDisposed||(this.privDisposed=!0,e&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return i.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(e){i.ServiceRecognizerBase.telemetryDataEnabled=e}implCommonRecognizerSetup(){let e="undefined"!==typeof window?"Browser":"Node",t="unknown",n="unknown";"undefined"!==typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,n=navigator.appVersion);const r=this.createRecognizerConfig(new i.SpeechServiceConfig(new i.Context(new i.OS(e,t,n))));this.privReco=this.createServiceRecognizer(a.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,r)}async recognizeOnceAsyncImpl(e){o.Contracts.throwIfDisposed(this.privDisposed);const t=new r.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(e,t.resolve,t.reject);const n=await t.promise;return await this.implRecognizerStop(),n}async startContinuousRecognitionAsyncImpl(e){o.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(e,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){o.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuthFromProperties(e){const t=e.getProperty(s.PropertyId.SpeechServiceConnection_Key,void 0);return t&&""!==t?new i.CognitiveSubscriptionKeyAuthentication(t):new i.CognitiveTokenAuthentication((()=>{const t=e.getProperty(s.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(t)}),(()=>{const t=e.getProperty(s.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(t)}))}}t.Recognizer=a},3906:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResultReason=void 0,function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile",e[e.VoicesListRetrieved=18]="VoicesListRetrieved",e[e.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",e[e.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",e[e.TranslatedInstantMessage=21]="TranslatedInstantMessage",e[e.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(t.ResultReason||(t.ResultReason={}))},3707:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceEventArgs=void 0;const i=n(8040);class r extends i.SessionEventArgs{constructor(e,t,n){super(n),this.privJsonResult=e,this.privEventName=t}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}}t.ServiceEventArgs=r},8282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServicePropertyChannel=void 0,function(e){e[e.UriQueryParameter=0]="UriQueryParameter"}(t.ServicePropertyChannel||(t.ServicePropertyChannel={}))},9070:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionEventArgs=void 0;t.SessionEventArgs=class{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}}},7646:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceLanguageConfig=void 0;const i=n(260);class r{constructor(e,t){i.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=t}static fromLanguage(e,t){return new r(e,t)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}t.SourceLanguageConfig=r},6031:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerIdentificationModel=void 0;const i=n(260),r=n(8040);class o{constructor(e){if(this.privVoiceProfiles=[],this.privProfileIds=[],i.Contracts.throwIfNullOrUndefined(e,"VoiceProfiles"),0===e.length)throw new Error("Empty Voice Profiles array");for(const t of e){if(t.profileType!==r.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+t.profileId);this.privVoiceProfiles.push(t),this.privProfileIds.push(t.profileId)}}static fromProfiles(e){return new o(e)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}}t.SpeakerIdentificationModel=o},9818:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionCancellationDetails=t.SpeakerRecognitionResult=t.SpeakerRecognitionResultType=void 0;const i=n(9859),r=n(8040);var o;!function(e){e[e.Verify=0]="Verify",e[e.Identify=1]="Identify"}(o=t.SpeakerRecognitionResultType||(t.SpeakerRecognitionResultType={}));t.SpeakerRecognitionResult=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.ResultReason.RecognizedSpeaker,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.CancellationErrorCode.NoError,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.privProperties=new r.PropertyCollection;const a="TextIndependentIdentification"===e.scenario?o.Identify:o.Verify;this.privReason=t,this.privReason!==r.ResultReason.Canceled?a===o.Identify?(this.privProfileId=e.identificationResult.identifiedProfile.profileId,this.privScore=e.identificationResult.identifiedProfile.score,this.privReason=r.ResultReason.RecognizedSpeakers):(this.privScore=e.verificationResult.score,"accept"!==e.verificationResult.recognitionResult.toLowerCase()&&(this.privReason=r.ResultReason.NoMatch),void 0!==e.verificationResult.profileId&&""!==e.verificationResult.profileId&&(this.privProfileId=e.verificationResult.profileId)):(this.privErrorDetails=s,this.privProperties.setProperty(i.CancellationErrorCodePropertyName,r.CancellationErrorCode[n])),this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(e))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}};class s extends r.CancellationDetailsBase{constructor(e,t,n){super(e,t,n)}static fromResult(e){const t=r.CancellationReason.Error;let n=r.CancellationErrorCode.NoError;return e.properties&&(n=r.CancellationErrorCode[e.properties.getProperty(i.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new s(t,e.errorDetails,n)}}t.SpeakerRecognitionCancellationDetails=s},4656:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognizer=void 0;const i=n(9859),r=n(260),o=n(8040);class s extends o.Recognizer{constructor(e,t){r.Contracts.throwIfNullOrUndefined(e,"speechConfig");const n=e;r.Contracts.throwIfNullOrUndefined(n,"speechConfig"),super(t,n.properties,new i.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=t,r.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=n.properties}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){r.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}async recognizeOnceAsync(e){return r.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(e)}async close(){r.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(e){r.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const t=await this.privReco.recognizeSpeaker(e);return await this.implRecognizerStop(),t}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(e){return new i.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,n,r){const o=n;return new i.SpeakerServiceRecognizer(e,t,o,r,this)}async dispose(e){this.privDisposedSpeakerRecognizer||e&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(e))}}t.SpeakerRecognizer=s},2040:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerVerificationModel=void 0;const i=n(260),r=n(8040);class o{constructor(e){if(i.Contracts.throwIfNullOrUndefined(e,"VoiceProfile"),e.profileType===r.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=e}static fromProfile(e){return new o(e)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===r.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}}t.SpeakerVerificationModel=o},3051:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConfigImpl=t.SpeechConfig=void 0;const i=n(9859),r=n(260),o=n(8040);class s{constructor(){}static fromSubscription(e,t){r.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),r.Contracts.throwIfNullOrWhitespace(t,"region");const n=new a;return n.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),n.setProperty(o.PropertyId.SpeechServiceConnection_IntentRegion,t),n.setProperty(o.PropertyId.SpeechServiceConnection_Key,e),n}static fromEndpoint(e,t){r.Contracts.throwIfNull(e,"endpoint");const n=new a;return n.setProperty(o.PropertyId.SpeechServiceConnection_Endpoint,e.href),void 0!==t&&n.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),n}static fromHost(e,t){r.Contracts.throwIfNull(e,"hostName");const n=new a;return n.setProperty(o.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&n.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),n}static fromAuthorizationToken(e,t){r.Contracts.throwIfNull(e,"authorizationToken"),r.Contracts.throwIfNullOrWhitespace(t,"region");const n=new a;return n.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),n.setProperty(o.PropertyId.SpeechServiceConnection_IntentRegion,t),n.authorizationToken=e,n}close(){}}t.SpeechConfig=s;class a extends s{constructor(){super(),this.privProperties=new o.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=o.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return o.OutputFormat[this.privProperties.getProperty(i.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privProperties.setProperty(i.OutputFormatPropertyName,o.OutputFormat[e])}get endpointId(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_EndpointId,e)}setProperty(e,t){r.Contracts.throwIfNull(t,"value"),this.privProperties.setProperty(e,t)}getProperty(e,t){return this.privProperties.getProperty(e,t)}setProxy(e,t,n,i){this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyUserName],n),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyPassword],i)}setServiceProperty(e,t){const n=JSON.parse(this.privProperties.getProperty(i.ServicePropertiesPropertyName,"{}"));n[e]=t,this.privProperties.setProperty(i.ServicePropertiesPropertyName,JSON.stringify(n))}setProfanity(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceResponse_ProfanityOption,o.ProfanityOption[e])}enableAudioLogging(){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(o.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(i.ForceDictationPropertyName,"true")}clone(){const e=new a;return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return o.SpeechSynthesisOutputFormat[this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,o.SpeechSynthesisOutputFormat[e])}}t.SpeechConfigImpl=a},4832:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognitionCanceledEventArgs=void 0;const i=n(8706);class r extends i.CancellationEventArgsBase{}t.SpeechRecognitionCanceledEventArgs=r},1649:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingTranscriptionEventArgs=t.ConversationTranscriptionEventArgs=t.SpeechRecognitionEventArgs=void 0;const i=n(8040);class r extends i.RecognitionEventArgs{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}}t.SpeechRecognitionEventArgs=r;class o extends i.RecognitionEventArgs{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}}t.ConversationTranscriptionEventArgs=o;t.MeetingTranscriptionEventArgs=class extends r{}},127:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognitionResult=void 0;const i=n(8040);class r extends i.RecognitionResult{constructor(e,t,n,i,r,o,s,a,c,l,u){super(e,t,n,i,r,o,s,c,l,u),this.privSpeakerId=a}get speakerId(){return this.privSpeakerId}}t.SpeechRecognitionResult=r},5411:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognizer=void 0;const i=n(9859),r=n(2307),o=n(260),s=n(8040);class a extends s.Recognizer{constructor(e,t){const n=e;o.Contracts.throwIfNull(n,"speechConfig"),o.Contracts.throwIfNullOrWhitespace(n.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),super(t,n.properties,new i.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(e,t,n){const i=e;t.properties.mergeTo(i.properties);return new a(e,n)}get endpointId(){return o.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){o.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return o.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return o.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple])===s.OutputFormat[s.OutputFormat.Simple]?s.OutputFormat.Simple:s.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(e,t){r.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(i.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){r.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){r.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,n){o.Contracts.throwIfNull(e,"model"),n&&n("Not yet implemented.")}stopKeywordRecognitionAsync(e){e&&e()}close(e,t){o.Contracts.throwIfDisposed(this.privDisposedRecognizer),r.marshalPromiseToCallbacks(this.dispose(!0),e,t)}async dispose(e){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(e))}createRecognizerConfig(e){return new i.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,n,r){const o=n;return new i.SpeechServiceRecognizer(e,t,o,r,this)}}t.SpeechRecognizer=a},4814:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBookmarkEventArgs=void 0;t.SpeechSynthesisBookmarkEventArgs=class{constructor(e,t){this.privAudioOffset=e,this.privText=t}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}},9225:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBoundaryType=void 0,function(e){e.Word="WordBoundary",e.Punctuation="PunctuationBoundary",e.Sentence="SentenceBoundary"}(t.SpeechSynthesisBoundaryType||(t.SpeechSynthesisBoundaryType={}))},3289:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisEventArgs=void 0;t.SpeechSynthesisEventArgs=class{constructor(e){this.privResult=e}get result(){return this.privResult}}},8765:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisOutputFormat=void 0,function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",e[e.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",e[e.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",e[e.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",e[e.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",e[e.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",e[e.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",e[e.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm"}(t.SpeechSynthesisOutputFormat||(t.SpeechSynthesisOutputFormat={}))},8394:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisResult=void 0;const i=n(8040);class r extends i.SynthesisResult{constructor(e,t,n,i,r,o){super(e,t,i,r),this.privAudioData=n,this.privAudioDuration=o}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}}t.SpeechSynthesisResult=r},3911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisVisemeEventArgs=void 0;t.SpeechSynthesisVisemeEventArgs=class{constructor(e,t,n){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=n}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}},8608:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisWordBoundaryEventArgs=void 0;t.SpeechSynthesisWordBoundaryEventArgs=class{constructor(e,t,n,i,r,o){this.privAudioOffset=e,this.privDuration=t,this.privText=n,this.privWordLength=i,this.privTextOffset=r,this.privBoundaryType=o}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}},9783:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesizer=void 0;const i=n(9859),r=n(2307),o=n(8777),s=n(7810),a=n(9709),c=n(260),l=n(8040),u=n(8021);class d extends l.Synthesizer{constructor(e,t){super(e),null!==t&&(this.audioConfig=void 0===t?"undefined"===typeof window?void 0:l.AudioConfig.fromDefaultSpeakerOutput():t),this.privConnectionFactory=new i.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(e,t,n){const i=e;return t.properties.mergeTo(i.properties),new d(e,n)}speakTextAsync(e,t,n,i){this.speakImpl(e,!1,t,n,i)}speakSsmlAsync(e,t,n,i){this.speakImpl(e,!0,t,n,i)}async getVoicesAsync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.getVoices(e)}close(e,t){c.Contracts.throwIfDisposed(this.privDisposed),r.marshalPromiseToCallbacks(this.dispose(!0),e,t)}get internalData(){return this.privAdapter}createSynthesisAdapter(e,t,n){return new i.SpeechSynthesisAdapter(e,t,n,this,this.audioConfig)}createRestSynthesisAdapter(e,t){return new i.SynthesisRestAdapter(t,e)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=s.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(l.SpeechSynthesisOutputFormat[this.properties.getProperty(l.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(e,t,n,i,s){try{c.Contracts.throwIfDisposed(this.privDisposed);const d=r.createNoDashGuid();let h;h=s instanceof l.PushAudioOutputStreamCallback?new a.PushAudioOutputStreamImpl(s):s instanceof l.PullAudioOutputStream?s:void 0!==s?new o.AudioFileWriter(s):void 0,this.synthesisRequestQueue.enqueue(new u.SynthesisRequest(d,e,t,(e=>{if(this.privSynthesizing=!1,n)try{n(e)}catch(e){i&&i(e)}n=void 0,this.adapterSpeak().catch((()=>{}))}),(e=>{i&&i(e)}),h)),this.adapterSpeak().catch((()=>{}))}catch(d){if(i)if(d instanceof Error){const e=d;i(e.name+": "+e.message)}else i(d);this.dispose(!0).catch((()=>{}))}}async getVoices(e){const t=r.createNoDashGuid(),n=await this.privRestAdapter.getVoicesList(t);if(n.ok&&Array.isArray(n.json)){let i=n.json;return e&&e.length>0&&(i=i.filter((t=>!!t.Locale&&t.Locale.toLowerCase()===e.toLowerCase()))),new l.SynthesisVoicesResult(t,i,void 0)}return new l.SynthesisVoicesResult(t,void 0,"Error: ".concat(n.status,": ").concat(n.statusText))}}t.SpeechSynthesizer=d},3468:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechTranslationConfigImpl=t.SpeechTranslationConfig=void 0;const i=n(9859),r=n(260),o=n(8040);class s extends o.SpeechConfig{constructor(){super()}static fromSubscription(e,t){r.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),r.Contracts.throwIfNullOrWhitespace(t,"region");const n=new a;return n.properties.setProperty(o.PropertyId.SpeechServiceConnection_Key,e),n.properties.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),n}static fromAuthorizationToken(e,t){r.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),r.Contracts.throwIfNullOrWhitespace(t,"region");const n=new a;return n.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e),n.properties.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),n}static fromHost(e,t){r.Contracts.throwIfNull(e,"hostName");const n=new a;return n.setProperty(o.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&n.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),n}static fromEndpoint(e,t){r.Contracts.throwIfNull(e,"endpoint"),r.Contracts.throwIfNull(t,"subscriptionKey");const n=new a;return n.properties.setProperty(o.PropertyId.SpeechServiceConnection_Endpoint,e.href),n.properties.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),n}}t.SpeechTranslationConfig=s;class a extends s{constructor(){super(),this.privSpeechProperties=new o.PropertyCollection,this.outputFormat=o.OutputFormat.Simple}set authorizationToken(e){r.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e)}set speechRecognitionLanguage(e){r.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return o.OutputFormat[this.privSpeechProperties.getProperty(i.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privSpeechProperties.setProperty(i.OutputFormatPropertyName,o.OutputFormat[e])}get endpointId(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_EndpointId,e)}addTargetLanguage(e){r.Contracts.throwIfNullOrWhitespace(e,"value");const t=this.targetLanguages;t.includes(e)||(t.push(e),this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")))}get targetLanguages(){return void 0!==this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(e){r.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,e)}get region(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_Region)}setProxy(e,t,n,i){this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyUserName],n),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyPassword],i)}getProperty(e,t){return this.privSpeechProperties.getProperty(e,t)}setProperty(e,t){this.privSpeechProperties.setProperty(e,t)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(e,t){const n=JSON.parse(this.privSpeechProperties.getProperty(i.ServicePropertiesPropertyName,"{}"));n[e]=t,this.privSpeechProperties.setProperty(i.ServicePropertiesPropertyName,JSON.stringify(n))}setProfanity(e){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceResponse_ProfanityOption,o.ProfanityOption[e])}enableAudioLogging(){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(i.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return o.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,o.SpeechSynthesisOutputFormat[e])}}t.SpeechTranslationConfigImpl=a},9548:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisResult=void 0;t.SynthesisResult=class{constructor(e,t,n,i){this.privResultId=e,this.privReason=t,this.privErrorDetails=n,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}},2359:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisVoicesResult=void 0;const i=n(8040);class r extends i.SynthesisResult{constructor(e,t,n){if(Array.isArray(t)){super(e,i.ResultReason.VoicesListRetrieved,void 0,new i.PropertyCollection),this.privVoices=[];for(const e of t)this.privVoices.push(new i.VoiceInfo(e))}else super(e,i.ResultReason.Canceled,n||"Error information unavailable",new i.PropertyCollection)}get voices(){return this.privVoices}}t.SynthesisVoicesResult=r},8021:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisRequest=t.Synthesizer=void 0;const i=n(9859),r=n(2307),o=n(260),s=n(8040);class a{constructor(e){const t=e;o.Contracts.throwIfNull(t,"speechConfig"),this.privProperties=t.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new r.Queue}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){o.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===i.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(e){const t={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-JennyNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let n=this.properties.getProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),i=this.properties.getProperty(s.PropertyId.SpeechServiceConnection_SynthVoice,""),r=a.XMLEncode(e);return this.autoDetectSourceLanguage?n="en-US":i=i||t[n],i&&(r="<voice name='".concat(i,"'>").concat(r,"</voice>")),r="<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='".concat(n,"'>").concat(r,"</speak>"),r}async dispose(e){this.privDisposed||(e&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const e=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)}}createSynthesizerConfig(e){return new i.SynthesizerConfig(e,this.privProperties)}implCommonSynthesizeSetup(){let e="undefined"!==typeof window?"Browser":"Node",t="unknown",n="unknown";"undefined"!==typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,n=navigator.appVersion);const r=this.createSynthesizerConfig(new i.SpeechServiceConfig(new i.Context(new i.OS(e,t,n)))),o=this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Key,void 0),a=o&&""!==o?new i.CognitiveSubscriptionKeyAuthentication(o):new i.CognitiveTokenAuthentication((()=>{const e=this.privProperties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)}),(()=>{const e=this.privProperties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)}));this.privAdapter=this.createSynthesisAdapter(a,this.privConnectionFactory,r),this.privRestAdapter=this.createRestSynthesisAdapter(a,r)}static XMLEncode(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}t.Synthesizer=a;t.SynthesisRequest=class{constructor(e,t,n,i,r,o){this.requestId=e,this.text=t,this.isSSML=n,this.cb=i,this.err=r,this.dataStream=o}}},2465:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationImpl=t.Conversation=void 0;const i=n(9859),r=n(2307),o=n(260),s=n(8040);class a{constructor(){}static createConversationAsync(e,t,n,a){let l,u,d;return o.Contracts.throwIfNullOrUndefined(e,i.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),o.Contracts.throwIfNullOrUndefined(e.region,i.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),e.subscriptionKey||e.getProperty(s.PropertyId[s.PropertyId.SpeechServiceAuthorization_Token])||o.Contracts.throwIfNullOrUndefined(e.subscriptionKey,i.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key")),"string"===typeof t?(l=new c(e,t),r.marshalPromiseToCallbacks((async()=>{})(),n,a)):(l=new c(e),u=t,d=n,l.createConversationAsync((()=>{u&&u()}),(e=>{d&&d(e)}))),l}}t.Conversation=a;class c extends a{constructor(e,t){super(),this.privErrors=i.ConversationConnectionConfig.restErrors,this.onConnected=e=>{this.privIsConnected=!0;try{var t;null!==(t=this.privConversationTranslator)&&void 0!==t&&t.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(e){}},this.onDisconnected=e=>{try{var t;null!==(t=this.privConversationTranslator)&&void 0!==t&&t.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(e){}finally{this.close(!1)}},this.onCanceled=(e,t)=>{try{var n;null!==(n=this.privConversationTranslator)&&void 0!==n&&n.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,t)}catch(t){}},this.onParticipantUpdateCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.id);if(void 0!==e){switch(t.key){case i.ConversationTranslatorCommandTypes.changeNickname:e.displayName=t.value;break;case i.ConversationTranslatorCommandTypes.setUseTTS:e.isUsingTts=t.value;break;case i.ConversationTranslatorCommandTypes.setProfanityFiltering:e.profanity=t.value;break;case i.ConversationTranslatorCommandTypes.setMute:e.isMuted=t.value;break;case i.ConversationTranslatorCommandTypes.setTranslateToLanguages:e.translateToLanguages=t.value}this.privParticipants.addOrUpdateParticipant(e),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.Updated,[this.toParticipant(e)],t.sessionId))}}catch(t){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(e,t)=>{try{this.privParticipants.participants.forEach((e=>e.isMuted=!e.isHost&&t.isMuted)),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.Updated,this.toParticipants(!1),t.sessionId))}catch(t){}},this.onParticipantJoinCommandReceived=(e,t)=>{try{const e=this.privParticipants.addOrUpdateParticipant(t.participant);void 0!==e&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.JoinedConversation,[this.toParticipant(e)],t.sessionId))}catch(t){}},this.onParticipantLeaveCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.participant.id);void 0!==e&&(this.privParticipants.deleteParticipant(t.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.LeftConversation,[this.toParticipant(e)],t.sessionId)))}catch(t){}},this.onTranslationReceived=(e,t)=>{try{switch(t.command){case i.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new s.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case i.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new s.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case i.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new s.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId))}}catch(t){}},this.onParticipantsListReceived=(e,t)=>{try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(this.privRoom.token=t.sessionToken),this.privParticipants.participants=[...t.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),t.sessionId)),this.me.isHost){var n;const e=null===(n=this.privConversationTranslator)||void 0===n?void 0:n.properties.getProperty(s.PropertyId.ConversationTranslator_Name);void 0!==e&&e.length>0&&e!==this.me.displayName&&this.changeNicknameAsync(e)}}catch(t){}},this.onConversationExpiration=(e,t)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,t)}catch(t){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new s.PropertyCollection,this.privManager=new i.ConversationManager;if(e.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])||e.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage],i.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),t)this.privConversationId=t;else{0===e.targetLanguages.length&&e.addTargetLanguage(this.privLanguage);e.getProperty(s.PropertyId[s.PropertyId.SpeechServiceResponse_ProfanityOption])||e.setProfanity(s.ProfanityOption.Masked);let t=e.getProperty(s.PropertyId[s.PropertyId.ConversationTranslator_Name]);void 0!==t&&null!==t||(t="Host"),o.Contracts.throwIfNullOrTooLong(t,"nickname",50),o.Contracts.throwIfNullOrTooShort(t,"nickname",2),e.setProperty(s.PropertyId[s.PropertyId.ConversationTranslator_Name],t)}this.privConfig=e;const n=e;o.Contracts.throwIfNull(n,"speechConfig"),this.privProperties=n.properties.clone(),this.privIsConnected=!1,this.privParticipants=new i.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var e,t;return(null===(e=this.privParticipants.me)||void 0===e||!e.isHost)&&(null===(t=this.privParticipants.me)||void 0===t?void 0:t.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const e=this.conversationId,t=this.participants.map((e=>({id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice}))),n={};for(const r of i.ConversationConnectionConfig.transcriptionEventKeys){const e=this.properties.getProperty(r,"");""!==e&&(n[r]=e)}return{id:e,participants:t,conversationProperties:n}}get canSend(){var e;return this.privIsConnected&&!(null!==(e=this.privParticipants.me)&&void 0!==e&&e.isMuted)}get canSendAsHost(){var e;return this.privIsConnected&&(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(e){o.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}set conversationTranslator(e){this.privConversationTranslator=e}onToken(e){this.privConversationTranslator.onToken(e)}createConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,(n=>{n||this.handleError(new Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=n,this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}startConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=i.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}addParticipantAsync(e,t,n){o.Contracts.throwIfNullOrUndefined(e,"Participant"),r.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),t,n)}joinConversationAsync(e,t,n,i,r){try{o.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),o.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),o.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,(e=>{o.Contracts.throwIfNullOrUndefined(e,this.privErrors.permissionDeniedConnect),this.privRoom=e,this.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,i&&i(e.cognitiveSpeechAuthToken)}),(e=>{this.handleError(e,r)}))}catch(s){this.handleError(s,r)}}deleteConversationAsync(e,t){r.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),e,t)}async deleteConversationImplAsync(){o.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),o.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(e,t){r.marshalPromiseToCallbacks(this.endConversationImplAsync(),e,t)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(e,t){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}muteAllParticipantsAsync(e,t){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}muteParticipantAsync(e,t,n){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n);-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}removeParticipantAsync(e,t,n){try{if(o.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))r.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),t,n);else{o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),n);let i="";if("string"===typeof e)i=e;else if(e.hasOwnProperty("id")){i=e.id}else if(e.hasOwnProperty("userId")){i=e.userId}o.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId"));-1===this.participants.findIndex((e=>e.id===i))&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(i),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}}catch(i){this.handleError(i,n)}}unlockConversationAsync(e,t){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}unmuteAllParticipantsAsync(e,t){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}unmuteParticipantAsync(e,t,n){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n);-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}sendTextMessageAsync(e,t,n){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}setTranslatedLanguagesAsync(e,t,n){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}changeNicknameAsync(e,t,n){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(e){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const e=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:e,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:i.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){const t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);const t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"leave")}async close(e){try{var t;this.privIsConnected=!1,await(null===(t=this.privConversationRecognizer)||void 0===t?void 0:t.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(n){throw n}e&&this.dispose()}handleCallback(e,t){if(e){try{e()}catch(n){t&&t(n)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const n=e;t(n.name+": "+n.message)}else t(e)}toParticipants(e){const t=this.privParticipants.participants.map((e=>this.toParticipant(e)));return e?t:t.filter((e=>!1===e.isHost))}toParticipant(e){return new s.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:i.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:i.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,t){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),o.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:i.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:i.ConversationTranslatorMessageTypes.participantCommand,value:t})}getLockCommand(e){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:i.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:i.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),o.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:i.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:i.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(e){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:i.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:i.ConversationTranslatorMessageTypes.participantCommand,value:e})}getChangeNicknameCommand(e){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),o.Contracts.throwIfNullOrWhitespace(e,"nickname"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:i.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:i.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),o.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:i.ConversationTranslatorMessageTypes.instantMessage})}}t.ConversationImpl=c},796:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationCommon=void 0;t.ConversationCommon=class{constructor(e){this.privAudioConfig=e}handleCallback(e,t){if(e){try{e()}catch(n){t&&t(n)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const n=e;t(n.name+": "+n.message)}else t(e)}}},1115:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationExpirationEventArgs=void 0;const i=n(8040);class r extends i.SessionEventArgs{constructor(e,t){super(t),this.privExpirationTime=e}get expirationTime(){return this.privExpirationTime}}t.ConversationExpirationEventArgs=r},4314:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationParticipantsChangedEventArgs=void 0;const i=n(8040);class r extends i.SessionEventArgs{constructor(e,t,n){super(n),this.privReason=e,this.privParticipant=t}get reason(){return this.privReason}get participants(){return this.privParticipant}}t.ConversationParticipantsChangedEventArgs=r},5482:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriber=void 0;const i=n(9859),r=n(2307),o=n(260),s=n(8040);class a extends s.Recognizer{constructor(e,t){const n=e;o.Contracts.throwIfNull(n,"speechConfig"),o.Contracts.throwIfNullOrWhitespace(n.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),super(t,n.properties,new i.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(e,t,n){const i=e;t.properties.mergeTo(i.properties);return new a(e,n)}get endpointId(){return o.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){o.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return o.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return o.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple])===s.OutputFormat[s.OutputFormat.Simple]?s.OutputFormat.Simple:s.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(e,t){r.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),e,t)}stopTranscribingAsync(e,t){r.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}close(e,t){o.Contracts.throwIfDisposed(this.privDisposedRecognizer),r.marshalPromiseToCallbacks(this.dispose(!0),e,t)}async dispose(e){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(e))}createRecognizerConfig(e){return new i.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,n,r){const o=n;return r.isSpeakerDiarizationEnabled=!0,new i.ConversationTranscriptionServiceRecognizer(e,t,o,r,this)}}t.ConversationTranscriber=a},3496:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionResult=void 0;const i=n(8040);class r extends i.RecognitionResult{constructor(e,t,n,i,r,o,s,a,c,l,u){super(e,t,n,i,r,o,s,c,l,u),this.privSpeakerId=a}get speakerId(){return this.privSpeakerId}}t.ConversationTranscriptionResult=r},8400:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationCanceledEventArgs=void 0;const i=n(8706);class r extends i.CancellationEventArgsBase{}t.ConversationTranslationCanceledEventArgs=r},2033:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationEventArgs=void 0;const i=n(8040);class r extends i.RecognitionEventArgs{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}}t.ConversationTranslationEventArgs=r},4383:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationResult=void 0;const i=n(2936);class r extends i.TranslationRecognitionResult{constructor(e,t,n,i,r,o,s,a,c,l,u){super(t,i,r,o,s,a,void 0,void 0,c,l,u),this.privId=e,this.privOrigLang=n}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}}t.ConversationTranslationResult=r},2663:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslator=t.SpeechState=void 0;const i=n(9859),r=n(5934),o=n(2307),s=n(260),a=n(8040),c=n(2465),l=n(5463);var u;!function(e){e[e.Inactive=0]="Inactive",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected"}(u=t.SpeechState||(t.SpeechState={}));class d extends a.TranslationRecognizer{constructor(e,t,n,i){super(e,t,new r.ConversationTranslatorConnectionFactory(i)),this.privSpeechState=u.Inactive,n&&(this.privTranslator=n,this.sessionStarted=()=>{this.privSpeechState=u.Connected},this.sessionStopped=()=>{this.privSpeechState=u.Inactive},this.recognizing=(e,t)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,t)},this.recognized=async(e,t)=>{var n;null!==(n=t.result)&&void 0!==n&&n.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(t.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,t)},this.canceled=async()=>{if(this.privSpeechState!==u.Inactive)try{await this.cancelSpeech()}catch(e){this.privSpeechState=u.Inactive}})}get state(){return this.privSpeechState}set state(e){this.privSpeechState=e}set authentication(e){this.privReco.authentication=e}onConnection(){this.privSpeechState=u.Connected}async onCancelSpeech(){this.privSpeechState=u.Inactive,await this.cancelSpeech()}fireCancelEvent(e){try{if(this.privTranslator.canceled){const t=new l.ConversationTranslationCanceledEventArgs(a.CancellationReason.Error,e,a.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,t)}}catch(t){}}async cancelSpeech(){try{var e;this.stopContinuousRecognitionAsync(),await(null===(e=this.privReco)||void 0===e?void 0:e.disconnect()),this.privSpeechState=u.Inactive}catch(t){}}}class h extends l.ConversationCommon{constructor(e){super(e),this.privErrors=i.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new a.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var e;return null===(e=this.privConversation)||void 0===e?void 0:e.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer)&&(!this.privIsSpeaking&&this.privCTRecognizer.state!==u.Connected&&this.privCTRecognizer.state!==u.Connecting&&!this.privConversation.isMutedByHost)}onToken(e){this.privCTRecognizer.authentication=e}setServiceProperty(e,t){const n=JSON.parse(this.privProperties.getProperty(i.ServicePropertiesPropertyName,"{}"));n[e]=t,this.privProperties.setProperty(i.ServicePropertiesPropertyName,JSON.stringify(n))}joinConversationAsync(e,t,n,r,o){try{if("string"===typeof e){s.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),s.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),o);let l=n;void 0!==l&&null!==l&&""!==l||(l=i.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=a.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(a.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(l),this.privSpeechTranslationConfig.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage],l),this.privSpeechTranslationConfig.setProperty(a.PropertyId[a.PropertyId.ConversationTranslator_Name],t);const u=[a.PropertyId.SpeechServiceConnection_Host,a.PropertyId.ConversationTranslator_Host,a.PropertyId.SpeechServiceConnection_Endpoint,a.PropertyId.SpeechServiceConnection_ProxyHostName,a.PropertyId.SpeechServiceConnection_ProxyPassword,a.PropertyId.SpeechServiceConnection_ProxyPort,a.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const e of u){const t=this.privProperties.getProperty(e);if(t){const n="string"===typeof e?e:a.PropertyId[e];this.privSpeechTranslationConfig.setProperty(n,t)}}const d=JSON.parse(this.privProperties.getProperty(i.ServicePropertiesPropertyName,"{}"));for(const e of Object.keys(d))this.privSpeechTranslationConfig.setServiceProperty(e,d[e],a.ServicePropertyChannel.UriQueryParameter);this.privConversation=new c.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(e,t,l,(e=>{e||this.handleError(new Error(this.privErrors.permissionDeniedConnect),o),this.privSpeechTranslationConfig.authorizationToken=e,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync((()=>{this.handleCallback(r,o)}),(e=>{this.handleError(e,o)}))}),(e=>{this.handleError(e,o)}))}else"object"===typeof e?(s.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),s.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(a.PropertyId.ConversationTranslator_Name,t),this.privConversation=e,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,s.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),s.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=e.config,this.handleCallback(n,r)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),r)}catch(l){this.handleError(l,"string"===typeof n?o:r)}}leaveConversationAsync(e,t){o.marshalPromiseToCallbacks((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),e,t)}sendTextMessageAsync(e,t,n){try{s.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}",e)),this.privConversation.sendTextMessageAsync(e,t,n)}catch(i){this.handleError(i,n)}}startTranscribingAsync(e,t){o.marshalPromiseToCallbacks((async()=>{try{s.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),s.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),void 0===this.privCTRecognizer&&await this.connectTranslatorRecognizer(),s.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),t),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(e){throw this.privIsSpeaking=!1,await this.cancelSpeech(),e}})(),e,t)}stopTranscribingAsync(e,t){o.marshalPromiseToCallbacks((async()=>{try{if(!this.privIsSpeaking)return void await this.cancelSpeech();this.privIsSpeaking=!1,await new Promise(((e,t)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(e,t)}))}catch(e){await this.cancelSpeech()}})(),e,t)}isDisposed(){return this.privIsDisposed}dispose(e,t,n){o.marshalPromiseToCallbacks((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),t,n)}async cancelSpeech(){try{var e;this.privIsSpeaking=!1,await(null===(e=this.privCTRecognizer)||void 0===e?void 0:e.onCancelSpeech()),this.privCTRecognizer=void 0}catch(t){}}async connectTranslatorRecognizer(){try{void 0===this.privAudioConfig&&(this.privAudioConfig=a.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_Key],"");const e=()=>this.privConversation;this.privCTRecognizer=new d(this.privSpeechTranslationConfig,this.privAudioConfig,this,e)}catch(e){throw await this.cancelSpeech(),e}}startContinuousRecognition(){return new Promise(((e,t)=>{this.privCTRecognizer.startContinuousRecognitionAsync(e,t)}))}}t.ConversationTranslator=h},5463:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2465);Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return i.Conversation}}),Object.defineProperty(t,"ConversationImpl",{enumerable:!0,get:function(){return i.ConversationImpl}});var r=n(796);Object.defineProperty(t,"ConversationCommon",{enumerable:!0,get:function(){return r.ConversationCommon}});var o=n(1115);Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return o.ConversationExpirationEventArgs}});var s=n(4314);Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return s.ConversationParticipantsChangedEventArgs}});var a=n(8400);Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationCanceledEventArgs}});var c=n(2033);Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return c.ConversationTranslationEventArgs}});var l=n(4383);Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return l.ConversationTranslationResult}});var u=n(2663);Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return u.ConversationTranslator}});var d=n(5482);Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return d.ConversationTranscriber}});var h=n(4874);Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return h.Participant}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return h.User}});var p=n(8545);Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return p.ParticipantChangedReason}});var f=n(5005);Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return f.Meeting}}),Object.defineProperty(t,"MeetingImpl",{enumerable:!0,get:function(){return f.MeetingImpl}});var v=n(2013);Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return v.MeetingTranscriptionCanceledEventArgs}});var m=n(182);Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return m.MeetingTranscriber}});var g=n(3496);Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return g.ConversationTranscriptionResult}})},4874:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Participant=t.User=void 0;const i=n(8040);t.User=class{constructor(e){this.privUserId=e}get userId(){return this.privUserId}};class r{constructor(e,t,n,r,o,s,a,c){this.privId=e,this.privAvatar=t,this.privDisplayName=n,this.privIsHost=r,this.privIsMuted=o,this.privIsUsingTts=s,this.privPreferredLanguage=a,this.privVoice=c,this.privProperties=new i.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(e,t,n){return new r(e,"",e,!1,!1,!1,t,n)}}t.Participant=r},5005:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingImpl=t.Meeting=void 0;const i=n(9859),r=n(2307),o=n(260),s=n(8040);class a{constructor(){}static createMeetingAsync(e,t,n,a){if(o.Contracts.throwIfNullOrUndefined(e,i.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),o.Contracts.throwIfNullOrUndefined(e.region,i.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),o.Contracts.throwIfNull(t,"meetingId"),0===t.length)throw new Error("meetingId cannot be empty");e.subscriptionKey||e.getProperty(s.PropertyId[s.PropertyId.SpeechServiceAuthorization_Token])||o.Contracts.throwIfNullOrUndefined(e.subscriptionKey,i.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const l=new c(e,t);return r.marshalPromiseToCallbacks((async()=>{})(),n,a),l}}t.Meeting=a;class c extends a{constructor(e,t){super(),this.privErrors=i.ConversationConnectionConfig.restErrors,this.onConnected=e=>{this.privIsConnected=!0;try{var t;null!==(t=this.privConversationTranslator)&&void 0!==t&&t.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(e){}},this.onDisconnected=e=>{try{var t;null!==(t=this.privConversationTranslator)&&void 0!==t&&t.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(e){}finally{this.close(!1)}},this.onCanceled=(e,t)=>{try{var n;null!==(n=this.privConversationTranslator)&&void 0!==n&&n.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,t)}catch(t){}},this.onParticipantUpdateCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.id);if(void 0!==e){switch(t.key){case i.ConversationTranslatorCommandTypes.changeNickname:e.displayName=t.value;break;case i.ConversationTranslatorCommandTypes.setUseTTS:e.isUsingTts=t.value;break;case i.ConversationTranslatorCommandTypes.setProfanityFiltering:e.profanity=t.value;break;case i.ConversationTranslatorCommandTypes.setMute:e.isMuted=t.value;break;case i.ConversationTranslatorCommandTypes.setTranslateToLanguages:e.translateToLanguages=t.value}this.privParticipants.addOrUpdateParticipant(e),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.Updated,[this.toParticipant(e)],t.sessionId))}}catch(t){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(e,t)=>{try{this.privParticipants.participants.forEach((e=>e.isMuted=!e.isHost&&t.isMuted)),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.Updated,this.toParticipants(!1),t.sessionId))}catch(t){}},this.onParticipantJoinCommandReceived=(e,t)=>{try{const e=this.privParticipants.addOrUpdateParticipant(t.participant);void 0!==e&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.JoinedConversation,[this.toParticipant(e)],t.sessionId))}catch(t){}},this.onParticipantLeaveCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.participant.id);void 0!==e&&(this.privParticipants.deleteParticipant(t.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.LeftConversation,[this.toParticipant(e)],t.sessionId)))}catch(t){}},this.onTranslationReceived=(e,t)=>{try{switch(t.command){case i.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new s.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case i.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new s.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case i.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new s.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId))}}catch(t){}},this.onParticipantsListReceived=(e,t)=>{try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(this.privRoom.token=t.sessionToken),this.privParticipants.participants=[...t.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),t.sessionId)),this.me.isHost){var n;const e=null===(n=this.privConversationTranslator)||void 0===n?void 0:n.properties.getProperty(s.PropertyId.ConversationTranslator_Name);void 0!==e&&e.length>0&&e!==this.me.displayName&&this.changeNicknameAsync(e)}}catch(t){}},this.onConversationExpiration=(e,t)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,t)}catch(t){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new s.PropertyCollection,this.privManager=new i.ConversationManager;e.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])||e.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage],i.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=t,this.privConfig=e;const n=e;o.Contracts.throwIfNull(n,"speechConfig"),this.privProperties=n.properties.clone(),this.privIsConnected=!1,this.privParticipants=new i.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var e,t;return(null===(e=this.privParticipants.me)||void 0===e||!e.isHost)&&(null===(t=this.privParticipants.me)||void 0===t?void 0:t.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const e=this.meetingId,t=this.participants.map((e=>({id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice}))),n={};for(const r of i.ConversationConnectionConfig.transcriptionEventKeys){const e=this.properties.getProperty(r,"");""!==e&&(n[r]=e)}return{id:e,participants:t,meetingProperties:n}}get canSend(){var e;return this.privIsConnected&&!(null!==(e=this.privParticipants.me)&&void 0!==e&&e.isMuted)}get canSendAsHost(){var e;return this.privIsConnected&&(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(e){o.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}createMeetingAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,(n=>{n||this.handleError(new Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=n,this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}startMeetingAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}addParticipantAsync(e,t,n){o.Contracts.throwIfNullOrUndefined(e,"Participant"),r.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),t,n)}joinMeetingAsync(e,t,n,i,r){try{o.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),o.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),o.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,(e=>{o.Contracts.throwIfNullOrUndefined(e,this.privErrors.permissionDeniedConnect),this.privRoom=e,this.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,i&&i(e.cognitiveSpeechAuthToken)}),(e=>{this.handleError(e,r)}))}catch(s){this.handleError(s,r)}}deleteMeetingAsync(e,t){r.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),e,t)}async deleteMeetingImplAsync(){o.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),o.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(e,t){r.marshalPromiseToCallbacks(this.endMeetingImplAsync(),e,t)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(e,t){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}muteAllParticipantsAsync(e,t){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}muteParticipantAsync(e,t,n){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n);-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}removeParticipantAsync(e,t,n){try{if(o.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))r.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),t,n);else{o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),n);let i="";if("string"===typeof e)i=e;else if(e.hasOwnProperty("id")){i=e.id}else if(e.hasOwnProperty("userId")){i=e.userId}o.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId"));-1===this.participants.findIndex((e=>e.id===i))&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(i),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}}catch(i){this.handleError(i,n)}}unlockMeetingAsync(e,t){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}unmuteAllParticipantsAsync(e,t){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}unmuteParticipantAsync(e,t,n){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n);-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}sendTextMessageAsync(e,t,n){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}setTranslatedLanguagesAsync(e,t,n){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}changeNicknameAsync(e,t,n){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(e){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const e=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:e,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:i.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){const t=this.meetingInfo;return t.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(t,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);const t=this.meetingInfo;return t.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(t,"leave")}async close(e){try{var t;this.privIsConnected=!1,await(null===(t=this.privConversationRecognizer)||void 0===t?void 0:t.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(n){throw n}e&&this.dispose()}handleCallback(e,t){if(e){try{e()}catch(n){t&&t(n)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const n=e;t(n.name+": "+n.message)}else t(e)}toParticipants(e){const t=this.privParticipants.participants.map((e=>this.toParticipant(e)));return e?t:t.filter((e=>!1===e.isHost))}toParticipant(e){return new s.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:i.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:i.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,t){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),o.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:i.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:i.ConversationTranslatorMessageTypes.participantCommand,value:t})}getLockCommand(e){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:i.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:i.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),o.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:i.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:i.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(e){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:i.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:i.ConversationTranslatorMessageTypes.participantCommand,value:e})}getChangeNicknameCommand(e){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),o.Contracts.throwIfNullOrWhitespace(e,"nickname"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:i.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:i.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),o.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:i.ConversationTranslatorMessageTypes.instantMessage})}}t.MeetingImpl=c},182:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingTranscriber=void 0;const i=n(9859),r=n(2307),o=n(260),s=n(8040),a=n(5463);t.MeetingTranscriber=class{constructor(e){this.privAudioConfig=e,this.privProperties=new s.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return o.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return s.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){o.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}joinMeetingAsync(e,t,n){const s=e;o.Contracts.throwIfNullOrUndefined(a.MeetingImpl,"Meeting"),this.privRecognizer=new i.TranscriberRecognizer(e.config,this.privAudioConfig),o.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),r.marshalPromiseToCallbacks(s.connectTranscriberRecognizer(this.privRecognizer),t,n)}startTranscribingAsync(e,t){this.privRecognizer.startContinuousRecognitionAsync(e,t)}stopTranscribingAsync(e,t){this.privRecognizer.stopContinuousRecognitionAsync(e,t)}leaveMeetingAsync(e,t){this.privRecognizer.disconnectCallbacks(),r.marshalPromiseToCallbacks((async()=>{})(),e,t)}close(e,t){o.Contracts.throwIfDisposed(this.privDisposedRecognizer),r.marshalPromiseToCallbacks(this.dispose(!0),e,t)}async dispose(e){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),e&&(this.privDisposedRecognizer=!0))}}},2013:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingTranscriptionCanceledEventArgs=void 0;const i=n(8706);class r extends i.CancellationEventArgsBase{}t.MeetingTranscriptionCanceledEventArgs=r},8545:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantChangedReason=void 0,function(e){e[e.JoinedConversation=0]="JoinedConversation",e[e.LeftConversation=1]="LeftConversation",e[e.Updated=2]="Updated"}(t.ParticipantChangedReason||(t.ParticipantChangedReason={}))},9169:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionCanceledEventArgs=void 0;t.TranslationRecognitionCanceledEventArgs=class{constructor(e,t,n,i,r){this.privCancelReason=t,this.privErrorDetails=n,this.privResult=r,this.privSessionId=e,this.privErrorCode=i}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}},6452:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionEventArgs=void 0;const i=n(8040);class r extends i.RecognitionEventArgs{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}}t.TranslationRecognitionEventArgs=r},2936:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionResult=void 0;const i=n(8040);class r extends i.SpeechRecognitionResult{constructor(e,t,n,i,r,o,s,a,c,l,u){super(t,n,i,r,o,s,a,void 0,c,l,u),this.privTranslations=e}static fromSpeechRecognitionResult(e){return new r(void 0,e.resultId,e.reason,e.text,e.duration,e.offset,e.language,e.languageDetectionConfidence,e.errorDetails,e.json,e.properties)}get translations(){return this.privTranslations}}t.TranslationRecognitionResult=r},2058:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognizer=void 0;const i=n(9859),r=n(2307),o=n(4931),s=n(260),a=n(8040);class c extends a.Recognizer{constructor(e,t,n){const r=e;s.Contracts.throwIfNull(r,"speechConfig"),super(t,r.properties,n||new i.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,void 0!==this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&s.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice),a.PropertyId[a.PropertyId.SpeechServiceConnection_TranslationVoice]),s.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages),a.PropertyId[a.PropertyId.SpeechServiceConnection_TranslationToLanguages]),s.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage),a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(e,t,n){const i=e;return t.properties.mergeTo(i.properties),new c(e,n)}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e)}recognizeOnceAsync(e,t){s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),r.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(i.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){r.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){r.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}removeTargetLanguage(e){if(s.Contracts.throwIfNullOrUndefined(e,"language to be removed"),void 0!==this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)){const t=this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),n=t.indexOf(e);n>-1&&(t.splice(n,1),this.properties.setProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")),this.updateLanguages(t))}}addTargetLanguage(e){s.Contracts.throwIfNullOrUndefined(e,"language to be added");let t=[];void 0!==this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?(t=this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),t.includes(e)||(t.push(e),this.properties.setProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")))):(this.properties.setProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,e),t=[e]),this.updateLanguages(t)}close(e,t){s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),r.marshalPromiseToCallbacks(this.dispose(!0),e,t)}onConnection(){}async dispose(e){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,e&&(await this.implRecognizerStop(),await super.dispose(e)))}createRecognizerConfig(e){return new i.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,n,r){const o=n;return new i.TranslationServiceRecognizer(e,t,o,r,this)}updateLanguages(e){const t=o.Connection.fromRecognizer(this);t&&(t.setMessageProperty("speech.context","translationcontext",{to:e}),t.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:e})))}}t.TranslationRecognizer=c},4823:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisEventArgs=void 0;const i=n(8040);class r extends i.SessionEventArgs{constructor(e,t){super(t),this.privResult=e}get result(){return this.privResult}}t.TranslationSynthesisEventArgs=r},3213:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisResult=void 0;t.TranslationSynthesisResult=class{constructor(e,t){this.privReason=e,this.privAudio=t}get audio(){return this.privAudio}get reason(){return this.privReason}}},7515:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Translations=void 0;const i=n(8040);t.Translations=class{constructor(){this.privMap=new i.PropertyCollection}get languages(){return this.privMap.keys}get(e,t){return this.privMap.getProperty(e,t)}set(e,t){this.privMap.setProperty(e,t)}}},716:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TurnStatusReceivedEventArgs=void 0;const i=n(81);t.TurnStatusReceivedEventArgs=class{constructor(e){this.privTurnStatus=i.TurnStatusResponsePayload.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}},8833:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceInfo=t.SynthesisVoiceType=t.SynthesisVoiceGender=void 0,function(e){e[e.Unknown=0]="Unknown",e[e.Female=1]="Female",e[e.Male=2]="Male",e[e.Neutral=3]="Neutral"}(n=t.SynthesisVoiceGender||(t.SynthesisVoiceGender={})),function(e){e[e.OnlineNeural=1]="OnlineNeural",e[e.OnlineStandard=2]="OnlineStandard",e[e.OfflineNeural=3]="OfflineNeural",e[e.OfflineStandard=4]="OfflineStandard"}(i=t.SynthesisVoiceType||(t.SynthesisVoiceType={}));const r={[n[n.Neutral]]:n.Neutral,[n[n.Male]]:n.Male,[n[n.Female]]:n.Female};t.VoiceInfo=class{constructor(e){if(this.privStyleList=[],e){if(this.privName=e.Name,this.privLocale=e.Locale,this.privShortName=e.ShortName,this.privLocaleName=e.LocaleName,this.privDisplayName=e.DisplayName,this.privLocalName=e.LocalName,this.privVoiceType=e.VoiceType.endsWith("Standard")?i.OnlineStandard:i.OnlineNeural,this.privGender=r[e.Gender]||n.Unknown,e.StyleList&&Array.isArray(e.StyleList))for(const t of e.StyleList)this.privStyleList.push(t);this.privSampleRateHertz=e.SampleRateHertz,this.privStatus=e.Status,e.ExtendedPropertyMap&&(this.privExtendedPropertyMap=e.ExtendedPropertyMap),this.privWordsPerMinute=e.WordsPerMinute,Array.isArray(e.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...e.SecondaryLocaleList]),Array.isArray(e.RolePlayList)&&(this.privRolePlayList=[...e.RolePlayList])}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}}},4384:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfile=void 0;t.VoiceProfile=class{constructor(e,t){this.privId=e,this.privProfileType=t}get profileId(){return this.privId}get profileType(){return this.privProfileType}}},8163:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileClient=void 0;const i=n(9859),r=n(6782),o=n(260),s=n(8040);class a extends s.Recognizer{constructor(e){o.Contracts.throwIfNullOrUndefined(e,"speechConfig");const t=e;o.Contracts.throwIfNull(t,"speechConfig"),super(r.AudioConfig.fromStreamInput(s.AudioInputStream.createPushStream()),t.properties,new i.VoiceProfileConnectionFactory),this.privProperties=t.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){o.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}async createProfileAsync(e,t){const n=await this.privVoiceAdapter.createProfile(e,t);return new s.VoiceProfile(n[0],e)}async retrieveEnrollmentResultAsync(e){return this.privVoiceAdapter.retrieveEnrollmentResult(e)}async getAllProfilesAsync(e){return this.privVoiceAdapter.getAllProfiles(e)}async getActivationPhrasesAsync(e,t){return this.privVoiceAdapter.getActivationPhrases(e,t)}async enrollProfileAsync(e,t){const n=t;return o.Contracts.throwIfNullOrUndefined(n,"audioConfig"),this.audioConfig=t,this.privVoiceAdapter.SpeakerAudioSource=n,this.privVoiceAdapter.enrollProfile(e)}async deleteProfileAsync(e){return this.privVoiceAdapter.deleteProfile(e)}async resetProfileAsync(e){return this.privVoiceAdapter.resetProfile(e)}async close(){await this.dispose(!0)}createServiceRecognizer(e,t,n,r){const o=n;return new i.VoiceServiceRecognizer(e,t,o,r,this)}async dispose(e){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,e&&await super.dispose(e))}createRecognizerConfig(e){return new i.RecognizerConfig(e,this.properties)}getResult(e,t){return new s.VoiceProfileResult(e.ok?t:s.ResultReason.Canceled,e.statusText)}}t.VoiceProfileClient=a},6917:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileEnrollmentCancellationDetails=t.VoiceProfileEnrollmentResult=void 0;const i=n(9859),r=n(8040);class o{constructor(e,t,n){this.privReason=e,this.privProperties=new r.PropertyCollection,this.privReason!==r.ResultReason.Canceled?t&&(this.privDetails=JSON.parse(t),"enrolling"===this.privDetails.enrollmentStatus.toLowerCase()&&(this.privReason=r.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=n,this.privProperties.setProperty(i.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(e){const t=[];for(const n of e.value){const e="enrolling"===n.enrollmentStatus.toLowerCase()?r.ResultReason.EnrollingVoiceProfile:"enrolled"===n.enrollmentStatus.toLowerCase()?r.ResultReason.EnrolledVoiceProfile:r.ResultReason.Canceled,i=new o(e,null,null);i.privDetails=this.getIdentificationDetails(n),t.push(i)}return t}static FromVerificationProfileList(e){const t=[];for(const n of e.value){const e="enrolling"===n.enrollmentStatus.toLowerCase()?r.ResultReason.EnrollingVoiceProfile:"enrolled"===n.enrollmentStatus.toLowerCase()?r.ResultReason.EnrolledVoiceProfile:r.ResultReason.Canceled,i=new o(e,null,null);i.privDetails=this.getVerificationDetails(n),t.push(i)}return t}static getIdentificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount||0,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.identificationProfileId,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.verificationProfileId,remainingEnrollmentsCount:e.remainingEnrollments||e.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}}t.VoiceProfileEnrollmentResult=o;class s extends r.CancellationDetailsBase{constructor(e,t,n){super(e,t,n)}static fromResult(e){const t=r.CancellationReason.Error;let n=r.CancellationErrorCode.NoError;return e.properties&&(n=r.CancellationErrorCode[e.properties.getProperty(i.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new s(t,e.errorDetails,n)}}t.VoiceProfileEnrollmentCancellationDetails=s},7268:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfilePhraseResult=void 0;const i=n(260),r=n(8040);class o extends r.VoiceProfileResult{constructor(e,t,n,r){super(e,t),this.privPhrases=[],i.Contracts.throwIfNullOrUndefined(r,"phrase array"),this.privType=n,r&&r[0]&&(this.privPhrases=r)}get phrases(){return this.privPhrases}get type(){return this.privType}}t.VoiceProfilePhraseResult=o},9941:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileCancellationDetails=t.VoiceProfileResult=void 0;const i=n(9859),r=n(260),o=n(8040);t.VoiceProfileResult=class{constructor(e,t){this.privReason=e,this.privProperties=new o.PropertyCollection,e===o.ResultReason.Canceled&&(r.Contracts.throwIfNullOrUndefined(t,"statusText"),this.privErrorDetails=t,this.privProperties.setProperty(i.CancellationErrorCodePropertyName,o.CancellationErrorCode[o.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};class s extends o.CancellationDetailsBase{constructor(e,t,n){super(e,t,n)}static fromResult(e){const t=o.CancellationReason.Error;let n=o.CancellationErrorCode.NoError;return e.properties&&(n=o.CancellationErrorCode[e.properties.getProperty(i.CancellationErrorCodePropertyName,o.CancellationErrorCode[o.CancellationErrorCode.NoError])]),new s(t,e.errorDetails,n)}}t.VoiceProfileCancellationDetails=s},8472:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileType=void 0,function(e){e[e.TextIndependentIdentification=0]="TextIndependentIdentification",e[e.TextDependentVerification=1]="TextDependentVerification",e[e.TextIndependentVerification=2]="TextIndependentVerification"}(t.VoiceProfileType||(t.VoiceProfileType={}))},1497:(e,t,n)=>{"use strict";var i=n(3218);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,s){if(s!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},5173:(e,t,n)=>{e.exports=n(1497)()},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2730:(e,t,n)=>{"use strict";var i=n(5043),r=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function v(e,t,n,i,r,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function S(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),T=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var N,z=Object.assign;function F(e){if(void 0===N)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var i=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){i=l}e.call(t.prototype)}else{try{throw Error()}catch(l){i=l}e()}}catch(l){if(l&&i&&"string"===typeof l.stack){for(var r=l.stack.split("\n"),o=i.stack.split("\n"),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==o[a]){var c="\n"+r[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=s&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function j(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case w:return"Portal";case E:return"Profiler";case C:return"StrictMode";case M:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case P:return(e._context.displayName||"Context")+".Provider";case R:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=G(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&S(e,"checked",t,!1)}function Q(e,t){$(e,t);var n=W(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),i=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ve(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ge=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,xe=null,Ce=null;function Ee(e){if(e=Sr(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=_r(t),we(e.stateNode,e.type,t))}}function Pe(e){xe?Ce?Ce.push(e):Ce=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ce;if(Ce=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Re(e,t){return e(t)}function Me(){}var Ae=!1;function Ie(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Re(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ce)&&(Me(),Te())}}function ke(e,t){var n=e.stateNode;if(null===n)return null;var i=_r(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Le(e,t,n,i,r,o,s,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Ne=!1,ze=null,Fe=!1,Ue=null,Be={onError:function(e){Ne=!0,ze=e}};function je(e,t,n,i,r,o,s,a,c){Ne=!1,ze=null,Le.apply(Be,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ve(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return We(r),e;if(s===i)return We(r),t;s=s.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,c=r.child;c;){if(c===n){a=!0,n=r,i=s;break}if(c===i){a=!0,i=r,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,i=r;break}if(c===i){a=!0,i=s,n=r;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Xe=r.unstable_scheduleCallback,Ke=r.unstable_cancelCallback,Je=r.unstable_shouldYield,Ye=r.unstable_requestPaint,$e=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~r;0!==a?i=dt(a):0!==(o&=s)&&(i=dt(o))}else 0!==(s=n&~r)?i=dt(s):0!==o&&(i=dt(o));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(o=t&-t)||16===r&&0!==(4194240&o)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-st(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-st(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var St=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,wt,xt,Ct,Et,Pt=!1,Tt=[],Rt=null,Mt=null,At=null,It=new Map,kt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kt.delete(t.pointerId)}}function Nt(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=Sr(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function zt(e){var t=yr(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Sr(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);be=i,n.target.dispatchEvent(i),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Pt=!1,null!==Rt&&Ft(Rt)&&(Rt=null),null!==Mt&&Ft(Mt)&&(Mt=null),null!==At&&Ft(At)&&(At=null),It.forEach(Ut),kt.forEach(Ut)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Pt||(Pt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bt)))}function Vt(e){function t(t){return jt(t,e)}if(0<Tt.length){jt(Tt[0],e);for(var n=1;n<Tt.length;n++){var i=Tt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Rt&&jt(Rt,e),null!==Mt&&jt(Mt,e),null!==At&&jt(At,e),It.forEach(t),kt.forEach(t),n=0;n<Ot.length;n++)(i=Ot[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)zt(n),null===n.blockedOn&&Ot.shift()}var Ht=b.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,n,i){var r=St,o=Ht.transition;Ht.transition=null;try{St=1,Xt(e,t,n,i)}finally{St=r,Ht.transition=o}}function qt(e,t,n,i){var r=St,o=Ht.transition;Ht.transition=null;try{St=4,Xt(e,t,n,i)}finally{St=r,Ht.transition=o}}function Xt(e,t,n,i){if(Wt){var r=Jt(e,t,n,i);if(null===r)Wi(e,t,i,Kt,n),Lt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Rt=Nt(Rt,e,t,n,i,r),!0;case"dragenter":return Mt=Nt(Mt,e,t,n,i,r),!0;case"mouseover":return At=Nt(At,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return It.set(o,Nt(It.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,kt.set(o,Nt(kt.get(o)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Lt(e,i),4&t&&-1<Dt.indexOf(e)){for(;null!==r;){var o=Sr(r);if(null!==o&&_t(o),null===(o=Jt(e,t,n,i))&&Wi(e,t,i,Kt,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else Wi(e,t,i,null,n)}}var Kt=null;function Jt(e,t,n,i){if(Kt=null,null!==(e=yr(e=_e(i))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var $t=null,Qt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Qt,i=n.length,r="value"in $t?$t.value:$t.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===r[o-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,i,r,o){for(var s in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(ln),dn=z({},ln,{view:0,detail:0}),hn=on(dn),pn=z({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(sn=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=sn=0,cn=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=on(pn),vn=on(z({},pn,{dataTransfer:0})),mn=on(z({},dn,{relatedTarget:0})),gn=on(z({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=z({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sn=on(yn),bn=on(z({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return Cn}var Pn=z({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=on(Pn),Rn=on(z({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=on(z({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=on(z({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=z({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kn=on(In),On=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Nn=u&&"TextEvent"in window&&!Ln,zn=u&&(!Dn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Gn(e,t,n,i){Pe(i),0<(t=qi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var qn=null,Xn=null;function Kn(e){Fi(e,0)}function Jn(e){if(X(br(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(u){var Qn;if(u){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Qn=Zn}else Qn=!1;$n=Qn&&(!document.documentMode||9<document.documentMode)}function ti(){qn&&(qn.detachEvent("onpropertychange",ni),Xn=qn=null)}function ni(e){if("value"===e.propertyName&&Jn(Xn)){var t=[];Gn(t,Xn,e,_e(e)),Ie(Kn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Xn=n,(qn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Xn)}function oi(e,t){if("click"===e)return Jn(t)}function si(e,t){if("input"===e||"change"===e)return Jn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ci(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function li(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=li(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=li(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=void 0===i.end?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=ui(n,o);var s=ui(n,i);r&&s&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,gi=null,yi=null,Si=!1;function bi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Si||null==mi||mi!==K(i)||("selectionStart"in(i=mi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&ci(yi,i)||(yi=i,0<(i=qi(gi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function _i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},xi={},Ci={};function Ei(e){if(xi[e])return xi[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ci)return xi[e]=n[t];return e}u&&(Ci=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Pi=Ei("animationend"),Ti=Ei("animationiteration"),Ri=Ei("animationstart"),Mi=Ei("transitionend"),Ai=new Map,Ii="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(e,t){Ai.set(e,t),c(t,[e])}for(var Oi=0;Oi<Ii.length;Oi++){var Di=Ii[Oi];ki(Di.toLowerCase(),"on"+(Di[0].toUpperCase()+Di.slice(1)))}ki(Pi,"onAnimationEnd"),ki(Ti,"onAnimationIteration"),ki(Ri,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(Mi,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ni=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function zi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,s,a,c,l){if(je.apply(this,arguments),Ne){if(!Ne)throw Error(o(198));var u=ze;Ne=!1,ze=null,Fe||(Fe=!0,Ue=u)}}(i,t,void 0,e),e.currentTarget=null}function Fi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==o&&r.isPropagationStopped())break e;zi(r,a,l),o=c}else for(s=0;s<i.length;s++){if(c=(a=i[s]).instance,l=a.currentTarget,a=a.listener,c!==o&&r.isPropagationStopped())break e;zi(r,a,l),o=c}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ui(e,t){var n=t[vr];void 0===n&&(n=t[vr]=new Set);var i=e+"__bubble";n.has(i)||(Hi(t,e,2,!1),n.add(i))}function Bi(e,t,n){var i=0;t&&(i|=4),Hi(n,e,i,t)}var ji="_reactListening"+Math.random().toString(36).slice(2);function Vi(e){if(!e[ji]){e[ji]=!0,s.forEach((function(t){"selectionchange"!==t&&(Ni.has(t)||Bi(t,!1,e),Bi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ji]||(t[ji]=!0,Bi("selectionchange",!1,t))}}function Hi(e,t,n,i){switch(Yt(t)){case 1:var r=Gt;break;case 4:r=qt;break;default:r=Xt}n=r.bind(null,t,n,e),r=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wi(e,t,n,i,r){var o=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===s)for(s=i.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===r||8===c.nodeType&&c.parentNode===r))return;s=s.return}for(;null!==a;){if(null===(s=yr(a)))return;if(5===(c=s.tag)||6===c){i=o=s;continue e}a=a.parentNode}}i=i.return}Ie((function(){var i=o,r=_e(n),s=[];e:{var a=Ai.get(e);if(void 0!==a){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Tn;break;case"focusin":l="focus",c=mn;break;case"focusout":l="blur",c=mn;break;case"beforeblur":case"afterblur":c=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Mn;break;case Pi:case Ti:case Ri:c=gn;break;case Mi:c=An;break;case"scroll":c=hn;break;case"wheel":c=kn;break;case"copy":case"cut":case"paste":c=Sn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Rn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=i;null!==f;){var v=(p=f).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==h&&(null!=(v=ke(f,h))&&u.push(Gi(f,v,p)))),d)break;f=f.return}0<u.length&&(a=new c(a,l,null,n,r),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!yr(l)&&!l[fr])&&(c||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=i,null!==(l=(l=n.relatedTarget||n.toElement)?yr(l):null)&&(l!==(d=Ve(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=i),c!==l)){if(u=fn,v="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Rn,v="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==c?a:br(c),p=null==l?a:br(l),(a=new u(v,f+"leave",c,n,r)).target=d,a.relatedTarget=p,v=null,yr(r)===i&&((u=new u(h,f+"enter",l,n,r)).target=p,u.relatedTarget=d,v=u),d=v,c&&l)e:{for(h=l,f=0,p=u=c;p;p=Xi(p))f++;for(p=0,v=h;v;v=Xi(v))p++;for(;0<f-p;)u=Xi(u),f--;for(;0<p-f;)h=Xi(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Xi(u),h=Xi(h)}u=null}else u=null;null!==c&&Ki(s,a,c,u,!1),null!==l&&null!==d&&Ki(s,d,l,u,!0)}if("select"===(c=(a=i?br(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var m=Yn;else if(Wn(a))if($n)m=si;else{m=ri;var g=ii}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=oi);switch(m&&(m=m(e,i))?Gn(s,m,n,r):(g&&g(e,a,i),"focusout"===e&&(g=a._wrapperState)&&g.controlled&&"number"===a.type&&ee(a,"number",a.value)),g=i?br(i):window,e){case"focusin":(Wn(g)||"true"===g.contentEditable)&&(mi=g,gi=i,yi=null);break;case"focusout":yi=gi=mi=null;break;case"mousedown":Si=!0;break;case"contextmenu":case"mouseup":case"dragend":Si=!1,bi(s,n,r);break;case"selectionchange":if(vi)break;case"keydown":case"keyup":bi(s,n,r)}var y;if(Dn)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Vn?Bn(e,n)&&(S="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(S="onCompositionStart");S&&(zn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==S?"onCompositionEnd"===S&&Vn&&(y=en()):(Qt="value"in($t=r)?$t.value:$t.textContent,Vn=!0)),0<(g=qi(i,S)).length&&(S=new bn(S,e,null,n,r),s.push({event:S,listeners:g}),y?S.data=y:null!==(y=jn(n))&&(S.data=y))),(y=Nn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Dn&&Bn(e,t)?(e=en(),Zt=Qt=$t=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=qi(i,"onBeforeInput")).length&&(r=new bn("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:i}),r.data=y))}Fi(s,t)}))}function Gi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=ke(e,n))&&i.unshift(Gi(e,o,r)),null!=(o=ke(e,t))&&i.push(Gi(e,o,r))),e=e.return}return i}function Xi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ki(e,t,n,i,r){for(var o=t._reactName,s=[];null!==n&&n!==i;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===i)break;5===a.tag&&null!==l&&(a=l,r?null!=(c=ke(n,o))&&s.unshift(Gi(n,c,a)):r||null!=(c=ke(n,o))&&s.push(Gi(n,c,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Ji=/\r\n?/g,Yi=/\u0000|\uFFFD/g;function $i(e){return("string"===typeof e?e:""+e).replace(Ji,"\n").replace(Yi,"")}function Qi(e,t,n){if(t=$i(t),$i(e)!==t&&n)throw Error(o(425))}function Zi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,or="function"===typeof Promise?Promise:void 0,sr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof or?function(e){return or.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout((function(){throw e}))}function cr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Vt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Vt(t)}function lr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),hr="__reactFiber$"+dr,pr="__reactProps$"+dr,fr="__reactContainer$"+dr,vr="__reactEvents$"+dr,mr="__reactListeners$"+dr,gr="__reactHandles$"+dr;function yr(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[hr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function Sr(e){return!(e=e[hr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _r(e){return e[pr]||null}var wr=[],xr=-1;function Cr(e){return{current:e}}function Er(e){0>xr||(e.current=wr[xr],wr[xr]=null,xr--)}function Pr(e,t){xr++,wr[xr]=e.current,e.current=t}var Tr={},Rr=Cr(Tr),Mr=Cr(!1),Ar=Tr;function Ir(e,t){var n=e.type.contextTypes;if(!n)return Tr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function kr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Or(){Er(Mr),Er(Rr)}function Dr(e,t,n){if(Rr.current!==Tr)throw Error(o(168));Pr(Rr,t),Pr(Mr,n)}function Lr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(o(108,H(e)||"Unknown",r));return z({},n,i)}function Nr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,Ar=Rr.current,Pr(Rr,e),Pr(Mr,Mr.current),!0}function zr(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=Lr(e,t,Ar),i.__reactInternalMemoizedMergedChildContext=e,Er(Mr),Er(Rr),Pr(Rr,e)):Er(Mr),Pr(Mr,n)}var Fr=null,Ur=!1,Br=!1;function jr(e){null===Fr?Fr=[e]:Fr.push(e)}function Vr(){if(!Br&&null!==Fr){Br=!0;var e=0,t=St;try{var n=Fr;for(St=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Fr=null,Ur=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(e+1)),Xe(Ze,Vr),r}finally{St=t,Br=!1}}return null}var Hr=[],Wr=0,Gr=null,qr=0,Xr=[],Kr=0,Jr=null,Yr=1,$r="";function Qr(e,t){Hr[Wr++]=qr,Hr[Wr++]=Gr,Gr=e,qr=t}function Zr(e,t,n){Xr[Kr++]=Yr,Xr[Kr++]=$r,Xr[Kr++]=Jr,Jr=e;var i=Yr;e=$r;var r=32-st(i)-1;i&=~(1<<r),n+=1;var o=32-st(t)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Yr=1<<32-st(t)+r|n<<r|i,$r=o+e}else Yr=1<<o|n<<r|i,$r=e}function eo(e){null!==e.return&&(Qr(e,1),Zr(e,1,0))}function to(e){for(;e===Gr;)Gr=Hr[--Wr],Hr[Wr]=null,qr=Hr[--Wr],Hr[Wr]=null;for(;e===Jr;)Jr=Xr[--Kr],Xr[Kr]=null,$r=Xr[--Kr],Xr[Kr]=null,Yr=Xr[--Kr],Xr[Kr]=null}var no=null,io=null,ro=!1,oo=null;function so(e,t){var n=kl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,io=lr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Jr?{id:Yr,overflow:$r}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=kl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,io=null,!0);default:return!1}}function co(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(ro){var t=io;if(t){var n=t;if(!ao(e,t)){if(co(e))throw Error(o(418));t=lr(n.nextSibling);var i=no;t&&ao(e,t)?so(i,n):(e.flags=-4097&e.flags|2,ro=!1,no=e)}}else{if(co(e))throw Error(o(418));e.flags=-4097&e.flags|2,ro=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!ro)return uo(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=io)){if(co(e))throw po(),Error(o(418));for(;t;)so(e,t),t=lr(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){io=lr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}io=null}}else io=no?lr(e.stateNode.nextSibling):null;return!0}function po(){for(var e=io;e;)e=lr(e.nextSibling)}function fo(){io=no=null,ro=!1}function vo(e){null===oo?oo=[e]:oo.push(e)}var mo=b.ReactCurrentBatchConfig;function go(e,t){if(e&&e.defaultProps){for(var n in t=z({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Cr(null),So=null,bo=null,_o=null;function wo(){_o=bo=So=null}function xo(e){var t=yo.current;Er(yo),e._currentValue=t}function Co(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Eo(e,t){So=e,_o=bo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Po(e){var t=e._currentValue;if(_o!==e)if(e={context:e,memoizedValue:t,next:null},null===bo){if(null===So)throw Error(o(308));bo=e,So.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return t}var To=null;function Ro(e){null===To?To=[e]:To.push(e)}function Mo(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Ro(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ao(e,i)}function Ao(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Io=!1;function ko(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Do(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Mc)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Ao(e,n)}return null===(r=i.interleaved)?(t.next=t,Ro(i)):(t.next=r.next,r.next=t),i.interleaved=t,Ao(e,n)}function No(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zo(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fo(e,t,n,i){var r=e.updateQueue;Io=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var c=a,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(null!==o){var d=r.baseState;for(s=0,u=l=c=null,a=o;;){var h=a.lane,p=a.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,v=a;switch(h=t,p=n,v.tag){case 1:if("function"===typeof(f=v.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=v.payload)?f.call(p,d,h):f)||void 0===h)break e;d=z({},d,h);break e;case 2:Io=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(l=u=p,c=d):u=u.next=p,s|=h;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(h=a).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(c=d),r.baseState=c,r.firstBaseUpdate=l,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{s|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);zc|=s,e.lanes=s,e.memoizedState=d}}function Uo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var Bo=(new i.Component).refs;function jo(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:z({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Vo={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tl(),r=nl(e),o=Do(i,r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,r))&&(il(t,e,r,i),No(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tl(),r=nl(e),o=Do(i,r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,r))&&(il(t,e,r,i),No(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),i=nl(e),r=Do(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Lo(e,r,i))&&(il(t,e,i,n),No(t,e,i))}};function Ho(e,t,n,i,r,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!ci(n,i)||!ci(r,o))}function Wo(e,t,n){var i=!1,r=Tr,o=t.contextType;return"object"===typeof o&&null!==o?o=Po(o):(r=kr(t)?Ar:Rr.current,o=(i=null!==(i=t.contextTypes)&&void 0!==i)?Ir(e,r):Tr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vo,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function Go(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Vo.enqueueReplaceState(t,t.state,null)}function qo(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=Bo,ko(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=Po(o):(o=kr(t)?Ar:Rr.current,r.context=Ir(e,o)),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(jo(e,t,o,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Vo.enqueueReplaceState(r,r.state,null),Fo(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function Xo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=i,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;t===Bo&&(t=r.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ko(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jo(e){return(0,e._init)(e._payload)}function Yo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Dl(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,i){return null===t||6!==t.tag?((t=Fl(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function l(e,t,n,i){var o=n.type;return o===x?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===k&&Jo(o)===t.type)?((i=r(t,n.props)).ref=Xo(e,t,n),i.return=e,i):((i=Ll(n.type,n.key,n.props,null,e.mode,i)).ref=Xo(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ul(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,o){return null===t||7!==t.tag?((t=Nl(n,e.mode,i,o)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=Xo(e,null,t),n.return=e,n;case w:return(t=Ul(t,e.mode,n)).return=e,t;case k:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Nl(t,e.mode,n,null)).return=e,t;Ko(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:c(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===r?l(e,t,n,i):null;case w:return n.key===r?u(e,t,n,i):null;case k:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||L(n))return null!==r?null:d(e,t,n,i,null);Ko(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return c(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case _:return l(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case k:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||L(i))return d(t,e=e.get(n)||null,i,r,null);Ko(t,i)}return null}function v(r,o,a,c){for(var l=null,u=null,d=o,v=o=0,m=null;null!==d&&v<a.length;v++){d.index>v?(m=d,d=null):m=d.sibling;var g=p(r,d,a[v],c);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(r,d),o=s(g,o,v),null===u?l=g:u.sibling=g,u=g,d=m}if(v===a.length)return n(r,d),ro&&Qr(r,v),l;if(null===d){for(;v<a.length;v++)null!==(d=h(r,a[v],c))&&(o=s(d,o,v),null===u?l=d:u.sibling=d,u=d);return ro&&Qr(r,v),l}for(d=i(r,d);v<a.length;v++)null!==(m=f(d,r,v,a[v],c))&&(e&&null!==m.alternate&&d.delete(null===m.key?v:m.key),o=s(m,o,v),null===u?l=m:u.sibling=m,u=m);return e&&d.forEach((function(e){return t(r,e)})),ro&&Qr(r,v),l}function m(r,a,c,l){var u=L(c);if("function"!==typeof u)throw Error(o(150));if(null==(c=u.call(c)))throw Error(o(151));for(var d=u=null,v=a,m=a=0,g=null,y=c.next();null!==v&&!y.done;m++,y=c.next()){v.index>m?(g=v,v=null):g=v.sibling;var S=p(r,v,y.value,l);if(null===S){null===v&&(v=g);break}e&&v&&null===S.alternate&&t(r,v),a=s(S,a,m),null===d?u=S:d.sibling=S,d=S,v=g}if(y.done)return n(r,v),ro&&Qr(r,m),u;if(null===v){for(;!y.done;m++,y=c.next())null!==(y=h(r,y.value,l))&&(a=s(y,a,m),null===d?u=y:d.sibling=y,d=y);return ro&&Qr(r,m),u}for(v=i(r,v);!y.done;m++,y=c.next())null!==(y=f(v,r,m,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),a=s(y,a,m),null===d?u=y:d.sibling=y,d=y);return e&&v.forEach((function(e){return t(r,e)})),ro&&Qr(r,m),u}return function e(i,o,s,c){if("object"===typeof s&&null!==s&&s.type===x&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var l=s.key,u=o;null!==u;){if(u.key===l){if((l=s.type)===x){if(7===u.tag){n(i,u.sibling),(o=r(u,s.props.children)).return=i,i=o;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===k&&Jo(l)===u.type){n(i,u.sibling),(o=r(u,s.props)).ref=Xo(i,u,s),o.return=i,i=o;break e}n(i,u);break}t(i,u),u=u.sibling}s.type===x?((o=Nl(s.props.children,i.mode,c,s.key)).return=i,i=o):((c=Ll(s.type,s.key,s.props,null,i.mode,c)).ref=Xo(i,o,s),c.return=i,i=c)}return a(i);case w:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(i,o.sibling),(o=r(o,s.children||[])).return=i,i=o;break e}n(i,o);break}t(i,o),o=o.sibling}(o=Ul(s,i.mode,c)).return=i,i=o}return a(i);case k:return e(i,o,(u=s._init)(s._payload),c)}if(te(s))return v(i,o,s,c);if(L(s))return m(i,o,s,c);Ko(i,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(i,o.sibling),(o=r(o,s)).return=i,i=o):(n(i,o),(o=Fl(s,i.mode,c)).return=i,i=o),a(i)):n(i,o)}}var $o=Yo(!0),Qo=Yo(!1),Zo={},es=Cr(Zo),ts=Cr(Zo),ns=Cr(Zo);function is(e){if(e===Zo)throw Error(o(174));return e}function rs(e,t){switch(Pr(ns,t),Pr(ts,e),Pr(es,Zo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Er(es),Pr(es,t)}function os(){Er(es),Er(ts),Er(ns)}function ss(e){is(ns.current);var t=is(es.current),n=ce(t,e.type);t!==n&&(Pr(ts,e),Pr(es,n))}function as(e){ts.current===e&&(Er(es),Er(ts))}var cs=Cr(0);function ls(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function ds(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var hs=b.ReactCurrentDispatcher,ps=b.ReactCurrentBatchConfig,fs=0,vs=null,ms=null,gs=null,ys=!1,Ss=!1,bs=0,_s=0;function ws(){throw Error(o(321))}function xs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function Cs(e,t,n,i,r,s){if(fs=s,vs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hs.current=null===e||null===e.memoizedState?aa:ca,e=n(i,r),Ss){s=0;do{if(Ss=!1,bs=0,25<=s)throw Error(o(301));s+=1,gs=ms=null,t.updateQueue=null,hs.current=la,e=n(i,r)}while(Ss)}if(hs.current=sa,t=null!==ms&&null!==ms.next,fs=0,gs=ms=vs=null,ys=!1,t)throw Error(o(300));return e}function Es(){var e=0!==bs;return bs=0,e}function Ps(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===gs?vs.memoizedState=gs=e:gs=gs.next=e,gs}function Ts(){if(null===ms){var e=vs.alternate;e=null!==e?e.memoizedState:null}else e=ms.next;var t=null===gs?vs.memoizedState:gs.next;if(null!==t)gs=t,ms=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ms=e).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===gs?vs.memoizedState=gs=e:gs=gs.next=e}return gs}function Rs(e,t){return"function"===typeof t?t(e):t}function Ms(e){var t=Ts(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=ms,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,i=i.baseState;var c=a=null,l=null,u=s;do{var d=u.lane;if((fs&d)===d)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=h,a=i):l=l.next=h,vs.lanes|=d,zc|=d}u=u.next}while(null!==u&&u!==s);null===l?a=i:l.next=c,ai(i,t.memoizedState)||(ba=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=l,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{s=r.lane,vs.lanes|=s,zc|=s,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function As(e){var t=Ts(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{s=e(s,a.action),a=a.next}while(a!==r);ai(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function Is(){}function ks(e,t){var n=vs,i=Ts(),r=t(),s=!ai(i.memoizedState,r);if(s&&(i.memoizedState=r,ba=!0),i=i.queue,Ws(Ls.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||null!==gs&&1&gs.memoizedState.tag){if(n.flags|=2048,Us(9,Ds.bind(null,n,i,r,t),void 0,null),null===Ac)throw Error(o(349));0!==(30&fs)||Os(n,t,r)}return r}function Os(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vs.updateQueue)?(t={lastEffect:null,stores:null},vs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ds(e,t,n,i){t.value=n,t.getSnapshot=i,Ns(t)&&zs(e)}function Ls(e,t,n){return n((function(){Ns(t)&&zs(e)}))}function Ns(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function zs(e){var t=Ao(e,1);null!==t&&il(t,e,1,-1)}function Fs(e){var t=Ps();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,vs,e),[t.memoizedState,e]}function Us(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=vs.updateQueue)?(t={lastEffect:null,stores:null},vs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Bs(){return Ts().memoizedState}function js(e,t,n,i){var r=Ps();vs.flags|=e,r.memoizedState=Us(1|t,n,void 0,void 0===i?null:i)}function Vs(e,t,n,i){var r=Ts();i=void 0===i?null:i;var o=void 0;if(null!==ms){var s=ms.memoizedState;if(o=s.destroy,null!==i&&xs(i,s.deps))return void(r.memoizedState=Us(t,n,o,i))}vs.flags|=e,r.memoizedState=Us(1|t,n,o,i)}function Hs(e,t){return js(8390656,8,e,t)}function Ws(e,t){return Vs(2048,8,e,t)}function Gs(e,t){return Vs(4,2,e,t)}function qs(e,t){return Vs(4,4,e,t)}function Xs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ks(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vs(4,4,Xs.bind(null,t,e),n)}function Js(){}function Ys(e,t){var n=Ts();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&xs(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function $s(e,t){var n=Ts();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&xs(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Qs(e,t,n){return 0===(21&fs)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ai(n,t)||(n=vt(),vs.lanes|=n,zc|=n,e.baseState=!0),t)}function Zs(e,t){var n=St;St=0!==n&&4>n?n:4,e(!0);var i=ps.transition;ps.transition={};try{e(!1),t()}finally{St=n,ps.transition=i}}function ea(){return Ts().memoizedState}function ta(e,t,n){var i=nl(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ia(e))ra(t,n);else if(null!==(n=Mo(e,t,n,i))){il(n,e,i,tl()),oa(n,t,i)}}function na(e,t,n){var i=nl(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ia(e))ra(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,s)){var c=t.interleaved;return null===c?(r.next=r,Ro(t)):(r.next=c.next,c.next=r),void(t.interleaved=r)}}catch(l){}null!==(n=Mo(e,t,r,i))&&(il(n,e,i,r=tl()),oa(n,t,i))}}function ia(e){var t=e.alternate;return e===vs||null!==t&&t===vs}function ra(e,t){Ss=ys=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oa(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var sa={readContext:Po,useCallback:ws,useContext:ws,useEffect:ws,useImperativeHandle:ws,useInsertionEffect:ws,useLayoutEffect:ws,useMemo:ws,useReducer:ws,useRef:ws,useState:ws,useDebugValue:ws,useDeferredValue:ws,useTransition:ws,useMutableSource:ws,useSyncExternalStore:ws,useId:ws,unstable_isNewReconciler:!1},aa={readContext:Po,useCallback:function(e,t){return Ps().memoizedState=[e,void 0===t?null:t],e},useContext:Po,useEffect:Hs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,js(4194308,4,Xs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return js(4194308,4,e,t)},useInsertionEffect:function(e,t){return js(4,2,e,t)},useMemo:function(e,t){var n=Ps();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Ps();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ta.bind(null,vs,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Ps().memoizedState=e},useState:Fs,useDebugValue:Js,useDeferredValue:function(e){return Ps().memoizedState=e},useTransition:function(){var e=Fs(!1),t=e[0];return e=Zs.bind(null,e[1]),Ps().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=vs,r=Ps();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ac)throw Error(o(349));0!==(30&fs)||Os(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Hs(Ls.bind(null,i,s,e),[e]),i.flags|=2048,Us(9,Ds.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=Ps(),t=Ac.identifierPrefix;if(ro){var n=$r;t=":"+t+"R"+(n=(Yr&~(1<<32-st(Yr)-1)).toString(32)+n),0<(n=bs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_s++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:Po,useCallback:Ys,useContext:Po,useEffect:Ws,useImperativeHandle:Ks,useInsertionEffect:Gs,useLayoutEffect:qs,useMemo:$s,useReducer:Ms,useRef:Bs,useState:function(){return Ms(Rs)},useDebugValue:Js,useDeferredValue:function(e){return Qs(Ts(),ms.memoizedState,e)},useTransition:function(){return[Ms(Rs)[0],Ts().memoizedState]},useMutableSource:Is,useSyncExternalStore:ks,useId:ea,unstable_isNewReconciler:!1},la={readContext:Po,useCallback:Ys,useContext:Po,useEffect:Ws,useImperativeHandle:Ks,useInsertionEffect:Gs,useLayoutEffect:qs,useMemo:$s,useReducer:As,useRef:Bs,useState:function(){return As(Rs)},useDebugValue:Js,useDeferredValue:function(e){var t=Ts();return null===ms?t.memoizedState=e:Qs(t,ms.memoizedState,e)},useTransition:function(){return[As(Rs)[0],Ts().memoizedState]},useMutableSource:Is,useSyncExternalStore:ks,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",i=t;do{n+=j(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r,digest:null}}function da(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var pa="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Do(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Gc||(Gc=!0,qc=i),ha(0,t)},n}function va(e,t,n){(n=Do(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){ha(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof i&&(null===Xc?Xc=new Set([this]):Xc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new pa;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Pl.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Do(-1,1)).tag=2,Lo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var Sa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,i){t.child=null===e?Qo(t,null,n,i):$o(t,e.child,n,i)}function wa(e,t,n,i,r){n=n.render;var o=t.ref;return Eo(t,r),i=Cs(e,t,n,i,o,r),n=Es(),null===e||ba?(ro&&n&&eo(t),t.flags|=1,_a(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ga(e,t,r))}function xa(e,t,n,i,r){if(null===e){var o=n.type;return"function"!==typeof o||Ol(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ca(e,t,o,i,r))}if(o=e.child,0===(e.lanes&r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:ci)(s,i)&&e.ref===t.ref)return Ga(e,t,r)}return t.flags|=1,(e=Dl(o,i)).ref=t.ref,e.return=t,t.child=e}function Ca(e,t,n,i,r){if(null!==e){var o=e.memoizedProps;if(ci(o,i)&&e.ref===t.ref){if(ba=!1,t.pendingProps=i=o,0===(e.lanes&r))return t.lanes=e.lanes,Ga(e,t,r);0!==(131072&e.flags)&&(ba=!0)}}return Ta(e,t,n,i,r)}function Ea(e,t,n){var i=t.pendingProps,r=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pr(Dc,Oc),Oc|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pr(Dc,Oc),Oc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==o?o.baseLanes:n,Pr(Dc,Oc),Oc|=i}else null!==o?(i=o.baseLanes|n,t.memoizedState=null):i=n,Pr(Dc,Oc),Oc|=i;return _a(e,t,r,n),t.child}function Pa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,i,r){var o=kr(n)?Ar:Rr.current;return o=Ir(t,o),Eo(t,r),n=Cs(e,t,n,i,o,r),i=Es(),null===e||ba?(ro&&i&&eo(t),t.flags|=1,_a(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ga(e,t,r))}function Ra(e,t,n,i,r){if(kr(n)){var o=!0;Nr(t)}else o=!1;if(Eo(t,r),null===t.stateNode)Wa(e,t),Wo(t,n,i),qo(t,n,i,r),i=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,l=n.contextType;"object"===typeof l&&null!==l?l=Po(l):l=Ir(t,l=kr(n)?Ar:Rr.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==i||c!==l)&&Go(t,s,i,l),Io=!1;var h=t.memoizedState;s.state=h,Fo(t,i,s,r),c=t.memoizedState,a!==i||h!==c||Mr.current||Io?("function"===typeof u&&(jo(t,n,u,i),c=t.memoizedState),(a=Io||Ho(t,n,a,i,h,c,l))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),s.props=i,s.state=c,s.context=l,i=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Oo(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:go(t.type,a),s.props=l,d=t.pendingProps,h=s.context,"object"===typeof(c=n.contextType)&&null!==c?c=Po(c):c=Ir(t,c=kr(n)?Ar:Rr.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==c)&&Go(t,s,i,c),Io=!1,h=t.memoizedState,s.state=h,Fo(t,i,s,r);var f=t.memoizedState;a!==d||h!==f||Mr.current||Io?("function"===typeof p&&(jo(t,n,p,i),f=t.memoizedState),(l=Io||Ho(t,n,l,i,h,f,c)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,f,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,f,c)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),s.props=i,s.state=f,s.context=c,i=l):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Ma(e,t,n,i,o,r)}function Ma(e,t,n,i,r,o){Pa(e,t);var s=0!==(128&t.flags);if(!i&&!s)return r&&zr(t,n,!1),Ga(e,t,o);i=t.stateNode,Sa.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&s?(t.child=$o(t,e.child,null,o),t.child=$o(t,null,a,o)):_a(e,t,a,o),t.memoizedState=i.state,r&&zr(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Dr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Dr(0,t.context,!1),rs(e,t.containerInfo)}function Ia(e,t,n,i,r){return fo(),vo(r),t.flags|=256,_a(e,t,n,i),t.child}var ka,Oa,Da,La,Na={dehydrated:null,treeContext:null,retryLane:0};function za(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var i,r=t.pendingProps,s=cs.current,a=!1,c=0!==(128&t.flags);if((i=c)||(i=(null===e||null!==e.memoizedState)&&0!==(2&s)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Pr(cs,1&s),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=r.children,e=r.fallback,a?(r=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=zl(c,r,0,null),e=Nl(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=za(n),t.memoizedState=Na,e):Ua(t,c));if(null!==(s=e.memoizedState)&&null!==(i=s.dehydrated))return function(e,t,n,i,r,s,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,i=da(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,r=t.mode,i=zl({mode:"visible",children:i.children},r,0,null),(s=Nl(s,r,a,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&$o(t,e.child,null,a),t.child.memoizedState=za(a),t.memoizedState=Na,s);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var c=i.dgst;return i=c,Ba(e,t,a,i=da(s=Error(o(419)),i,void 0))}if(c=0!==(a&e.childLanes),ba||c){if(null!==(i=Ac)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==s.retryLane&&(s.retryLane=r,Ao(e,r),il(i,e,r,-1))}return ml(),Ba(e,t,a,i=da(Error(o(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Rl.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,io=lr(r.nextSibling),no=t,ro=!0,oo=null,null!==e&&(Xr[Kr++]=Yr,Xr[Kr++]=$r,Xr[Kr++]=Jr,Yr=e.id,$r=e.overflow,Jr=t),t=Ua(t,i.children),t.flags|=4096,t)}(e,t,c,r,i,s,n);if(a){a=r.fallback,c=t.mode,i=(s=e.child).sibling;var l={mode:"hidden",children:r.children};return 0===(1&c)&&t.child!==s?((r=t.child).childLanes=0,r.pendingProps=l,t.deletions=null):(r=Dl(s,l)).subtreeFlags=14680064&s.subtreeFlags,null!==i?a=Dl(i,a):(a=Nl(a,c,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,c=null===(c=e.child.memoizedState)?za(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=Na,r}return e=(a=e.child).sibling,r=Dl(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ua(e,t){return(t=zl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,i){return null!==i&&vo(i),$o(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ja(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Co(e.return,t,n)}function Va(e,t,n,i,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Ha(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(_a(e,t,i.children,n),0!==(2&(i=cs.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ja(e,n,t);else if(19===e.tag)ja(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Pr(cs,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ls(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Va(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ls(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Va(t,!0,n,null,o);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ga(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Dl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qa(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Xa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ka(e,t,n){var i=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xa(t),null;case 1:case 17:return kr(t.type)&&Or(),Xa(t),null;case 3:return i=t.stateNode,os(),Er(Mr),Er(Rr),ds(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(al(oo),oo=null))),Oa(e,t),Xa(t),null;case 5:as(t);var r=is(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(o(166));return Xa(t),null}if(e=is(es.current),ho(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[hr]=t,i[pr]=s,e=0!==(1&t.mode),n){case"dialog":Ui("cancel",i),Ui("close",i);break;case"iframe":case"object":case"embed":Ui("load",i);break;case"video":case"audio":for(r=0;r<Li.length;r++)Ui(Li[r],i);break;case"source":Ui("error",i);break;case"img":case"image":case"link":Ui("error",i),Ui("load",i);break;case"details":Ui("toggle",i);break;case"input":Y(i,s),Ui("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ui("invalid",i);break;case"textarea":re(i,s),Ui("invalid",i)}for(var c in ye(n,s),r=null,s)if(s.hasOwnProperty(c)){var l=s[c];"children"===c?"string"===typeof l?i.textContent!==l&&(!0!==s.suppressHydrationWarning&&Qi(i.textContent,l,e),r=["children",l]):"number"===typeof l&&i.textContent!==""+l&&(!0!==s.suppressHydrationWarning&&Qi(i.textContent,l,e),r=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Ui("scroll",i)}switch(n){case"input":q(i),Z(i,s,!0);break;case"textarea":q(i),se(i);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(i.onclick=Zi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{c=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=c.createElement(n,{is:i.is}):(e=c.createElement(n),"select"===n&&(c=e,i.multiple?c.multiple=!0:i.size&&(c.size=i.size))):e=c.createElementNS(e,n),e[hr]=t,e[pr]=i,ka(e,t,!1,!1),t.stateNode=e;e:{switch(c=Se(n,i),n){case"dialog":Ui("cancel",e),Ui("close",e),r=i;break;case"iframe":case"object":case"embed":Ui("load",e),r=i;break;case"video":case"audio":for(r=0;r<Li.length;r++)Ui(Li[r],e);r=i;break;case"source":Ui("error",e),r=i;break;case"img":case"image":case"link":Ui("error",e),Ui("load",e),r=i;break;case"details":Ui("toggle",e),r=i;break;case"input":Y(e,i),r=J(e,i),Ui("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=z({},i,{value:void 0}),Ui("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Ui("invalid",e)}for(s in ye(n,r),l=r)if(l.hasOwnProperty(s)){var u=l[s];"style"===s?me(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Ui("scroll",e):null!=u&&S(e,s,u,c))}switch(n){case"input":q(e),Z(e,i,!1);break;case"textarea":q(e),se(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(s=i.value)?ne(e,!!i.multiple,s,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xa(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));if(n=is(ns.current),is(es.current),ho(t)){if(i=t.stateNode,n=t.memoizedProps,i[hr]=t,(s=i.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Qi(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qi(i.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hr]=t,t.stateNode=i}return Xa(t),null;case 13:if(Er(cs),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==io&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,s=!1;else if(s=ho(t),null!==i&&null!==i.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hr]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xa(t),s=!1}else null!==oo&&(al(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&cs.current)?0===Lc&&(Lc=3):ml())),null!==t.updateQueue&&(t.flags|=4),Xa(t),null);case 4:return os(),Oa(e,t),null===e&&Vi(t.stateNode.containerInfo),Xa(t),null;case 10:return xo(t.type._context),Xa(t),null;case 19:if(Er(cs),null===(s=t.memoizedState))return Xa(t),null;if(i=0!==(128&t.flags),null===(c=s.rendering))if(i)qa(s,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=ls(e))){for(t.flags|=128,qa(s,!1),null!==(i=c.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(s=n).flags&=14680066,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pr(cs,1&cs.current|2),t.child}e=e.sibling}null!==s.tail&&$e()>Hc&&(t.flags|=128,i=!0,qa(s,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ls(c))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!c.alternate&&!ro)return Xa(t),null}else 2*$e()-s.renderingStartTime>Hc&&1073741824!==n&&(t.flags|=128,i=!0,qa(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=s.last)?n.sibling=c:t.child=c,s.last=c)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=$e(),t.sibling=null,n=cs.current,Pr(cs,i?1&n|2:1&n),t):(Xa(t),null);case 22:case 23:return hl(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Oc)&&(Xa(t),6&t.subtreeFlags&&(t.flags|=8192)):Xa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ja(e,t){switch(to(t),t.tag){case 1:return kr(t.type)&&Or(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),Er(Mr),Er(Rr),ds(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(Er(cs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Er(cs),null;case 4:return os(),null;case 10:return xo(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}ka=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},Da=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,is(es.current);var o,s=null;switch(n){case"input":r=J(e,r),i=J(e,i),s=[];break;case"select":r=z({},r,{value:void 0}),i=z({},i,{value:void 0}),s=[];break;case"textarea":r=ie(e,r),i=ie(e,i),s=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(u in ye(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var c=r[u];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(c=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Ui("scroll",e),s||c===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ya=!1,$a=!1,Qa="function"===typeof WeakSet?WeakSet:Set,Za=null;function ec(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){El(e,t,i)}else n.current=null}function tc(e,t,n){try{n()}catch(i){El(e,t,i)}}var nc=!1;function ic(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&tc(t,n,o)}r=r.next}while(r!==i)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function oc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sc(e){var t=e.alternate;null!==t&&(e.alternate=null,sc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[pr],delete t[vr],delete t[mr],delete t[gr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lc(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}function uc(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}var dc=null,hc=!1;function pc(e,t,n){for(n=n.child;null!==n;)fc(e,t,n),n=n.sibling}function fc(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:$a||ec(n,t);case 6:var i=dc,r=hc;dc=null,pc(e,t,n),hc=r,null!==(dc=i)&&(hc?(e=dc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dc.removeChild(n.stateNode));break;case 18:null!==dc&&(hc?(e=dc,n=n.stateNode,8===e.nodeType?cr(e.parentNode,n):1===e.nodeType&&cr(e,n),Vt(e)):cr(dc,n.stateNode));break;case 4:i=dc,r=hc,dc=n.stateNode.containerInfo,hc=!0,pc(e,t,n),dc=i,hc=r;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tc(n,t,s),r=r.next}while(r!==i)}pc(e,t,n);break;case 1:if(!$a&&(ec(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){El(n,t,a)}pc(e,t,n);break;case 21:pc(e,t,n);break;case 22:1&n.mode?($a=(i=$a)||null!==n.memoizedState,pc(e,t,n),$a=i):pc(e,t,n);break;default:pc(e,t,n)}}function vc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qa),t.forEach((function(t){var i=Ml.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function mc(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var s=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:dc=c.stateNode,hc=!1;break e;case 3:case 4:dc=c.stateNode.containerInfo,hc=!0;break e}c=c.return}if(null===dc)throw Error(o(160));fc(s,a,r),dc=null,hc=!1;var l=r.alternate;null!==l&&(l.return=null),r.return=null}catch(u){El(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gc(t,e),t=t.sibling}function gc(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),yc(e),4&i){try{ic(3,e,e.return),rc(3,e)}catch(m){El(e,e.return,m)}try{ic(5,e,e.return)}catch(m){El(e,e.return,m)}}break;case 1:mc(t,e),yc(e),512&i&&null!==n&&ec(n,n.return);break;case 5:if(mc(t,e),yc(e),512&i&&null!==n&&ec(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(m){El(e,e.return,m)}}if(4&i&&null!=(r=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===s.type&&null!=s.name&&$(r,s),Se(c,a);var u=Se(c,s);for(a=0;a<l.length;a+=2){var d=l[a],h=l[a+1];"style"===d?me(r,h):"dangerouslySetInnerHTML"===d?de(r,h):"children"===d?he(r,h):S(r,d,h,u)}switch(c){case"input":Q(r,s);break;case"textarea":oe(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(r,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(r,!!s.multiple,s.defaultValue,!0):ne(r,!!s.multiple,s.multiple?[]:"",!1))}r[pr]=s}catch(m){El(e,e.return,m)}}break;case 6:if(mc(t,e),yc(e),4&i){if(null===e.stateNode)throw Error(o(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(m){El(e,e.return,m)}}break;case 3:if(mc(t,e),yc(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){El(e,e.return,m)}break;case 4:default:mc(t,e),yc(e);break;case 13:mc(t,e),yc(e),8192&(r=e.child).flags&&(s=null!==r.memoizedState,r.stateNode.isHidden=s,!s||null!==r.alternate&&null!==r.alternate.memoizedState||(Vc=$e())),4&i&&vc(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||d,mc(t,e),$a=u):mc(t,e),yc(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Za=e,d=e.child;null!==d;){for(h=Za=d;null!==Za;){switch(f=(p=Za).child,p.tag){case 0:case 11:case 14:case 15:ic(4,p,p.return);break;case 1:ec(p,p.return);var v=p.stateNode;if("function"===typeof v.componentWillUnmount){i=p,n=p.return;try{t=i,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){El(i,n,m)}}break;case 5:ec(p,p.return);break;case 22:if(null!==p.memoizedState){wc(h);continue}}null!==f?(f.return=p,Za=f):wc(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,u?"function"===typeof(s=r.style).setProperty?s.setProperty("display","none","important"):s.display="none":(c=h.stateNode,a=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=ve("display",a))}catch(m){El(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){El(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mc(t,e),yc(e),4&i&&vc(e);case 21:}}function yc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ac(n)){var i=n;break e}n=n.return}throw Error(o(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(he(r,""),i.flags&=-33),uc(e,cc(e),r);break;case 3:case 4:var s=i.stateNode.containerInfo;lc(e,cc(e),s);break;default:throw Error(o(161))}}catch(a){El(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Sc(e,t,n){Za=e,bc(e,t,n)}function bc(e,t,n){for(var i=0!==(1&e.mode);null!==Za;){var r=Za,o=r.child;if(22===r.tag&&i){var s=null!==r.memoizedState||Ya;if(!s){var a=r.alternate,c=null!==a&&null!==a.memoizedState||$a;a=Ya;var l=$a;if(Ya=s,($a=c)&&!l)for(Za=r;null!==Za;)c=(s=Za).child,22===s.tag&&null!==s.memoizedState?xc(r):null!==c?(c.return=s,Za=c):xc(r);for(;null!==o;)Za=o,bc(o,t,n),o=o.sibling;Za=r,Ya=a,$a=l}_c(e)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,Za=o):_c(e)}}function _c(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||rc(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!$a)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:go(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Uo(t,s,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Uo(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(o(163))}$a||512&t.flags&&oc(t)}catch(p){El(t,t.return,p)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function wc(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function xc(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(c){El(t,n,c)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(c){El(t,r,c)}}var o=t.return;try{oc(t)}catch(c){El(t,o,c)}break;case 5:var s=t.return;try{oc(t)}catch(c){El(t,s,c)}}}catch(c){El(t,t.return,c)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Cc,Ec=Math.ceil,Pc=b.ReactCurrentDispatcher,Tc=b.ReactCurrentOwner,Rc=b.ReactCurrentBatchConfig,Mc=0,Ac=null,Ic=null,kc=0,Oc=0,Dc=Cr(0),Lc=0,Nc=null,zc=0,Fc=0,Uc=0,Bc=null,jc=null,Vc=0,Hc=1/0,Wc=null,Gc=!1,qc=null,Xc=null,Kc=!1,Jc=null,Yc=0,$c=0,Qc=null,Zc=-1,el=0;function tl(){return 0!==(6&Mc)?$e():-1!==Zc?Zc:Zc=$e()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Mc)&&0!==kc?kc&-kc:null!==mo.transition?(0===el&&(el=vt()),el):0!==(e=St)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function il(e,t,n,i){if(50<$c)throw $c=0,Qc=null,Error(o(185));gt(e,n,i),0!==(2&Mc)&&e===Ac||(e===Ac&&(0===(2&Mc)&&(Fc|=n),4===Lc&&cl(e,kc)),rl(e,i),1===n&&0===Mc&&0===(1&t.mode)&&(Hc=$e()+500,Ur&&Vr()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,c=r[s];-1===c?0!==(a&n)&&0===(a&i)||(r[s]=pt(a,t)):c<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var i=ht(e,e===Ac?kc:0);if(0===i)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ur=!0,jr(e)}(ll.bind(null,e)):jr(ll.bind(null,e)),sr((function(){0===(6&Mc)&&Vr()})),n=null;else{switch(bt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Al(n,ol.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ol(e,t){if(Zc=-1,el=0,0!==(6&Mc))throw Error(o(327));var n=e.callbackNode;if(xl()&&e.callbackNode!==n)return null;var i=ht(e,e===Ac?kc:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=gl(e,i);else{t=i;var r=Mc;Mc|=2;var s=vl();for(Ac===e&&kc===t||(Wc=null,Hc=$e()+500,pl(e,t));;)try{Sl();break}catch(c){fl(e,c)}wo(),Pc.current=s,Mc=r,null!==Ic?t=0:(Ac=null,kc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=sl(e,r))),1===t)throw n=Nc,pl(e,0),cl(e,i),rl(e,$e()),n;if(6===t)cl(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ai(o(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gl(e,i))&&(0!==(s=ft(e))&&(i=s,t=sl(e,s))),1===t))throw n=Nc,pl(e,0),cl(e,i),rl(e,$e()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(o(345));case 2:case 5:wl(e,jc,Wc);break;case 3:if(cl(e,i),(130023424&i)===i&&10<(t=Vc+500-$e())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){tl(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(wl.bind(null,e,jc,Wc),t);break}wl(e,jc,Wc);break;case 4:if(cl(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-st(i);s=1<<a,(a=t[a])>r&&(r=a),i&=~s}if(i=r,10<(i=(120>(i=$e()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ec(i/1960))-i)){e.timeoutHandle=ir(wl.bind(null,e,jc,Wc),i);break}wl(e,jc,Wc);break;default:throw Error(o(329))}}}return rl(e,$e()),e.callbackNode===n?ol.bind(null,e):null}function sl(e,t){var n=Bc;return e.current.memoizedState.isDehydrated&&(pl(e,t).flags|=256),2!==(e=gl(e,t))&&(t=jc,jc=n,null!==t&&al(t)),e}function al(e){null===jc?jc=e:jc.push.apply(jc,e)}function cl(e,t){for(t&=~Uc,t&=~Fc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),i=1<<n;e[n]=-1,t&=~i}}function ll(e){if(0!==(6&Mc))throw Error(o(327));xl();var t=ht(e,0);if(0===(1&t))return rl(e,$e()),null;var n=gl(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=sl(e,i))}if(1===n)throw n=Nc,pl(e,0),cl(e,t),rl(e,$e()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wl(e,jc,Wc),rl(e,$e()),null}function ul(e,t){var n=Mc;Mc|=1;try{return e(t)}finally{0===(Mc=n)&&(Hc=$e()+500,Ur&&Vr())}}function dl(e){null!==Jc&&0===Jc.tag&&0===(6&Mc)&&xl();var t=Mc;Mc|=1;var n=Rc.transition,i=St;try{if(Rc.transition=null,St=1,e)return e()}finally{St=i,Rc.transition=n,0===(6&(Mc=t))&&Vr()}}function hl(){Oc=Dc.current,Er(Dc)}function pl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Ic)for(n=Ic.return;null!==n;){var i=n;switch(to(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Or();break;case 3:os(),Er(Mr),Er(Rr),ds();break;case 5:as(i);break;case 4:os();break;case 13:case 19:Er(cs);break;case 10:xo(i.type._context);break;case 22:case 23:hl()}n=n.return}if(Ac=e,Ic=e=Dl(e.current,null),kc=Oc=t,Lc=0,Nc=null,Uc=Fc=zc=0,jc=Bc=null,null!==To){for(t=0;t<To.length;t++)if(null!==(i=(n=To[t]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var s=o.next;o.next=r,i.next=s}n.pending=i}To=null}return e}function fl(e,t){for(;;){var n=Ic;try{if(wo(),hs.current=sa,ys){for(var i=vs.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ys=!1}if(fs=0,gs=ms=vs=null,Ss=!1,bs=0,Tc.current=null,null===n||null===n.return){Lc=1,Nc=t,Ic=null;break}e:{var s=e,a=n.return,c=n,l=t;if(t=kc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,d=c,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ga(a);if(null!==f){f.flags&=-257,ya(f,a,c,0,t),1&f.mode&&ma(s,u,t),l=u;var v=(t=f).updateQueue;if(null===v){var m=new Set;m.add(l),t.updateQueue=m}else v.add(l);break e}if(0===(1&t)){ma(s,u,t),ml();break e}l=Error(o(426))}else if(ro&&1&c.mode){var g=ga(a);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ya(g,a,c,0,t),vo(ua(l,c));break e}}s=l=ua(l,c),4!==Lc&&(Lc=2),null===Bc?Bc=[s]:Bc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,zo(s,fa(0,l,t));break e;case 1:c=l;var y=s.type,S=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==S&&"function"===typeof S.componentDidCatch&&(null===Xc||!Xc.has(S)))){s.flags|=65536,t&=-t,s.lanes|=t,zo(s,va(s,c,t));break e}}s=s.return}while(null!==s)}_l(n)}catch(b){t=b,Ic===n&&null!==n&&(Ic=n=n.return);continue}break}}function vl(){var e=Pc.current;return Pc.current=sa,null===e?sa:e}function ml(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Ac||0===(268435455&zc)&&0===(268435455&Fc)||cl(Ac,kc)}function gl(e,t){var n=Mc;Mc|=2;var i=vl();for(Ac===e&&kc===t||(Wc=null,pl(e,t));;)try{yl();break}catch(r){fl(e,r)}if(wo(),Mc=n,Pc.current=i,null!==Ic)throw Error(o(261));return Ac=null,kc=0,Lc}function yl(){for(;null!==Ic;)bl(Ic)}function Sl(){for(;null!==Ic&&!Je();)bl(Ic)}function bl(e){var t=Cc(e.alternate,e,Oc);e.memoizedProps=e.pendingProps,null===t?_l(e):Ic=t,Tc.current=null}function _l(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Oc)))return void(Ic=n)}else{if(null!==(n=Ja(n,t)))return n.flags&=32767,void(Ic=n);if(null===e)return Lc=6,void(Ic=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ic=t);Ic=t=e}while(null!==t);0===Lc&&(Lc=5)}function wl(e,t,n){var i=St,r=Rc.transition;try{Rc.transition=null,St=1,function(e,t,n,i){do{xl()}while(null!==Jc);if(0!==(6&Mc))throw Error(o(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-st(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}(e,s),e===Ac&&(Ic=Ac=null,kc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kc||(Kc=!0,Al(tt,(function(){return xl(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Rc.transition,Rc.transition=null;var a=St;St=1;var c=Mc;Mc|=4,Tc.current=null,function(e,t){if(er=Wt,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(_){n=null;break e}var a=0,c=-1,l=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==r&&3!==h.nodeType||(c=a+r),h!==s||0!==i&&3!==h.nodeType||(l=a+i),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===r&&(c=a),p===s&&++d===i&&(l=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Wt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,S=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:go(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(_){El(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}v=nc,nc=!1}(e,n),gc(n,e),fi(tr),Wt=!!er,tr=er=null,e.current=n,Sc(n,e,r),Ye(),Mc=c,St=a,Rc.transition=s}else e.current=n;if(Kc&&(Kc=!1,Jc=e,Yc=r),s=e.pendingLanes,0===s&&(Xc=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,$e()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Gc)throw Gc=!1,e=qc,qc=null,e;0!==(1&Yc)&&0!==e.tag&&xl(),s=e.pendingLanes,0!==(1&s)?e===Qc?$c++:($c=0,Qc=e):$c=0,Vr()}(e,t,n,i)}finally{Rc.transition=r,St=i}return null}function xl(){if(null!==Jc){var e=bt(Yc),t=Rc.transition,n=St;try{if(Rc.transition=null,St=16>e?16:e,null===Jc)var i=!1;else{if(e=Jc,Jc=null,Yc=0,0!==(6&Mc))throw Error(o(331));var r=Mc;for(Mc|=4,Za=e.current;null!==Za;){var s=Za,a=s.child;if(0!==(16&Za.flags)){var c=s.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Za=u;null!==Za;){var d=Za;switch(d.tag){case 0:case 11:case 15:ic(8,d,s)}var h=d.child;if(null!==h)h.return=d,Za=h;else for(;null!==Za;){var p=(d=Za).sibling,f=d.return;if(sc(d),d===u){Za=null;break}if(null!==p){p.return=f,Za=p;break}Za=f}}}var v=s.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Za=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Za=a;else e:for(;null!==Za;){if(0!==(2048&(s=Za).flags))switch(s.tag){case 0:case 11:case 15:ic(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Za=y;break e}Za=s.return}}var S=e.current;for(Za=S;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=S;null!==Za;){if(0!==(2048&(c=Za).flags))try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(w){El(c,c.return,w)}if(c===a){Za=null;break e}var _=c.sibling;if(null!==_){_.return=c.return,Za=_;break e}Za=c.return}}if(Mc=r,Vr(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(rt,e)}catch(w){}i=!0}return i}finally{St=n,Rc.transition=t}}return!1}function Cl(e,t,n){e=Lo(e,t=fa(0,t=ua(n,t),1),1),t=tl(),null!==e&&(gt(e,1,t),rl(e,t))}function El(e,t,n){if(3===e.tag)Cl(e,e,n);else for(;null!==t;){if(3===t.tag){Cl(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Xc||!Xc.has(i))){t=Lo(t,e=va(t,e=ua(n,e),1),1),e=tl(),null!==t&&(gt(t,1,e),rl(t,e));break}}t=t.return}}function Pl(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Ac===e&&(kc&n)===n&&(4===Lc||3===Lc&&(130023424&kc)===kc&&500>$e()-Vc?pl(e,0):Uc|=n),rl(e,t)}function Tl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tl();null!==(e=Ao(e,t))&&(gt(e,t,n),rl(e,n))}function Rl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tl(e,n)}function Ml(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(t),Tl(e,n)}function Al(e,t){return Xe(e,t)}function Il(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kl(e,t,n,i){return new Il(e,t,n,i)}function Ol(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dl(e,t){var n=e.alternate;return null===n?((n=kl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,i,r,s){var a=2;if(i=e,"function"===typeof e)Ol(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case x:return Nl(n.children,r,s,t);case C:a=8,r|=8;break;case E:return(e=kl(12,n,t,2|r)).elementType=E,e.lanes=s,e;case M:return(e=kl(13,n,t,r)).elementType=M,e.lanes=s,e;case A:return(e=kl(19,n,t,r)).elementType=A,e.lanes=s,e;case O:return zl(n,r,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case P:a=10;break e;case T:a=9;break e;case R:a=11;break e;case I:a=14;break e;case k:a=16,i=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=kl(a,n,t,r)).elementType=e,t.type=i,t.lanes=s,t}function Nl(e,t,n,i){return(e=kl(7,e,i,t)).lanes=n,e}function zl(e,t,n,i){return(e=kl(22,e,i,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fl(e,t,n){return(e=kl(6,e,null,t)).lanes=n,e}function Ul(e,t,n){return(t=kl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bl(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function jl(e,t,n,i,r,o,s,a,c){return e=new Bl(e,t,n,a,c),1===t?(t=1,!0===o&&(t|=8)):t=0,o=kl(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ko(o),e}function Vl(e){if(!e)return Tr;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(kr(n))return Lr(e,n,t)}return t}function Hl(e,t,n,i,r,o,s,a,c){return(e=jl(n,i,!0,e,0,o,0,a,c)).context=Vl(null),n=e.current,(o=Do(i=tl(),r=nl(n))).callback=void 0!==t&&null!==t?t:null,Lo(n,o,r),e.current.lanes=r,gt(e,r,i),rl(e,i),e}function Wl(e,t,n,i){var r=t.current,o=tl(),s=nl(r);return n=Vl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Do(o,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Lo(r,t,s))&&(il(e,r,s,o),No(e,r,s)),s}function Gl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ql(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xl(e,t){ql(e,t),(e=e.alternate)&&ql(e,t)}Cc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Mr.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fo();break;case 5:ss(t);break;case 1:kr(t.type)&&Nr(t);break;case 4:rs(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Pr(yo,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Pr(cs,1&cs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Pr(cs,1&cs.current),null!==(e=Ga(e,t,n))?e.sibling:null);Pr(cs,1&cs.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ha(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Pr(cs,cs.current),i)break;return null;case 22:case 23:return t.lanes=0,Ea(e,t,n)}return Ga(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,ro&&0!==(1048576&t.flags)&&Zr(t,qr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Wa(e,t),e=t.pendingProps;var r=Ir(t,Rr.current);Eo(t,n),r=Cs(null,t,i,e,r,n);var s=Es();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kr(i)?(s=!0,Nr(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,ko(t),r.updater=Vo,t.stateNode=r,r._reactInternals=t,qo(t,i,e,n),t=Ma(null,t,i,!0,s,n)):(t.tag=0,ro&&s&&eo(t),_a(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Ol(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===R)return 11;if(e===I)return 14}return 2}(i),e=go(i,e),r){case 0:t=Ta(null,t,i,e,n);break e;case 1:t=Ra(null,t,i,e,n);break e;case 11:t=wa(null,t,i,e,n);break e;case 14:t=xa(null,t,i,go(i.type,e),n);break e}throw Error(o(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ta(e,t,i,r=t.elementType===i?r:go(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ra(e,t,i,r=t.elementType===i?r:go(i,r),n);case 3:e:{if(Aa(t),null===e)throw Error(o(387));i=t.pendingProps,r=(s=t.memoizedState).element,Oo(e,t),Fo(t,i,null,n);var a=t.memoizedState;if(i=a.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ia(e,t,i,n,r=ua(Error(o(423)),t));break e}if(i!==r){t=Ia(e,t,i,n,r=ua(Error(o(424)),t));break e}for(io=lr(t.stateNode.containerInfo.firstChild),no=t,ro=!0,oo=null,n=Qo(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),i===r){t=Ga(e,t,n);break e}_a(e,t,i,n)}t=t.child}return t;case 5:return ss(t),null===e&&lo(t),i=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==s&&nr(i,s)&&(t.flags|=32),Pa(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&lo(t),null;case 13:return Fa(e,t,n);case 4:return rs(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=$o(t,null,i,n):_a(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,wa(e,t,i,r=t.elementType===i?r:go(i,r),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,a=r.value,Pr(yo,i._currentValue),i._currentValue=a,null!==s)if(ai(s.value,a)){if(s.children===r.children&&!Mr.current){t=Ga(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){a=s.child;for(var l=c.firstContext;null!==l;){if(l.context===i){if(1===s.tag){(l=Do(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Co(s.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Co(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}_a(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Eo(t,n),i=i(r=Po(r)),t.flags|=1,_a(e,t,i,n),t.child;case 14:return r=go(i=t.type,t.pendingProps),xa(e,t,i,r=go(i.type,r),n);case 15:return Ca(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:go(i,r),Wa(e,t),t.tag=1,kr(i)?(e=!0,Nr(t)):e=!1,Eo(t,n),Wo(t,i,r),qo(t,i,r,n),Ma(null,t,i,!0,e,n);case 19:return Ha(e,t,n);case 22:return Ea(e,t,n)}throw Error(o(156,t.tag))};var Kl="function"===typeof reportError?reportError:function(e){console.error(e)};function Jl(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function eu(e,t,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof r){var a=r;r=function(){var e=Gl(s);a.call(e)}}Wl(t,s,e,r)}else s=function(e,t,n,i,r){if(r){if("function"===typeof i){var o=i;i=function(){var e=Gl(s);o.call(e)}}var s=Hl(t,i,e,0,null,!1,0,"",Zl);return e._reactRootContainer=s,e[fr]=s.current,Vi(8===e.nodeType?e.parentNode:e),dl(),s}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=Gl(c);a.call(e)}}var c=jl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=c,e[fr]=c.current,Vi(8===e.nodeType?e.parentNode:e),dl((function(){Wl(t,c,n,i)})),c}(n,t,e,r,i);return Gl(s)}Yl.prototype.render=Jl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wl(e,t,null,null)},Yl.prototype.unmount=Jl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dl((function(){Wl(null,e,null,null)})),t[fr]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&zt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,$e()),0===(6&Mc)&&(Hc=$e()+500,Vr()))}break;case 13:dl((function(){var t=Ao(e,1);if(null!==t){var n=tl();il(t,e,1,n)}})),Xl(e,1)}},wt=function(e){if(13===e.tag){var t=Ao(e,134217728);if(null!==t)il(t,e,134217728,tl());Xl(e,134217728)}},xt=function(e){if(13===e.tag){var t=nl(e),n=Ao(e,t);if(null!==n)il(n,e,t,tl());Xl(e,t)}},Ct=function(){return St},Et=function(e,t){var n=St;try{return St=e,t()}finally{St=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=_r(i);if(!r)throw Error(o(90));X(i),Q(i,r)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Re=ul,Me=dl;var tu={usingClientEntryPoint:!1,Events:[Sr,br,_r,Pe,Te,ul]},nu={findFiberByHostInstance:yr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{rt=ru.inject(iu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$l(t))throw Error(o(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$l(e))throw Error(o(299));var n=!1,i="",r=Kl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=jl(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,Vi(8===e.nodeType?e.parentNode:e),new Jl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return dl(e)},t.hydrate=function(e,t,n){if(!Ql(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$l(e))throw Error(o(405));var i=null!=n&&n.hydratedSources||null,r=!1,s="",a=Kl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Hl(t,null,e,1,null!=n?n:null,r,0,s,a),e[fr]=t.current,Vi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Yl(t)},t.render=function(e,t,n){if(!Ql(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ql(e))throw Error(o(40));return!!e._reactRootContainer&&(dl((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=ul,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Ql(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},4391:(e,t,n)=>{"use strict";var i=n(7950);t.H=i.createRoot,i.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},6366:e=>{var t="undefined"!==typeof Element,n="function"===typeof Map,i="function"===typeof Set,r="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(e,s){if(e===s)return!0;if(e&&s&&"object"==typeof e&&"object"==typeof s){if(e.constructor!==s.constructor)return!1;var a,c,l,u;if(Array.isArray(e)){if((a=e.length)!=s.length)return!1;for(c=a;0!==c--;)if(!o(e[c],s[c]))return!1;return!0}if(n&&e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;for(u=e.entries();!(c=u.next()).done;)if(!s.has(c.value[0]))return!1;for(u=e.entries();!(c=u.next()).done;)if(!o(c.value[1],s.get(c.value[0])))return!1;return!0}if(i&&e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;for(u=e.entries();!(c=u.next()).done;)if(!s.has(c.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(s)){if((a=e.length)!=s.length)return!1;for(c=a;0!==c--;)if(e[c]!==s[c])return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof s.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof s.toString)return e.toString()===s.toString();if((a=(l=Object.keys(e)).length)!==Object.keys(s).length)return!1;for(c=a;0!==c--;)if(!Object.prototype.hasOwnProperty.call(s,l[c]))return!1;if(t&&e instanceof Element)return!1;for(c=a;0!==c--;)if(("_owner"!==l[c]&&"__v"!==l[c]&&"__o"!==l[c]||!e.$$typeof)&&!o(e[l[c]],s[l[c]]))return!1;return!0}return e!==e&&s!==s}e.exports=function(e,t){try{return o(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},5082:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,S=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case u:case d:case o:case a:case s:case p:return e;default:switch(e=e&&e.$$typeof){case l:case h:case m:case v:case c:return e;default:return t}}case r:return t}}}function w(e){return _(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=h,t.Fragment=o,t.Lazy=m,t.Memo=v,t.Portal=r,t.Profiler=a,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||_(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return _(e)===l},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return _(e)===h},t.isFragment=function(e){return _(e)===o},t.isLazy=function(e){return _(e)===m},t.isMemo=function(e){return _(e)===v},t.isPortal=function(e){return _(e)===r},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===s},t.isSuspense=function(e){return _(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===a||e===s||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===c||e.$$typeof===l||e.$$typeof===h||e.$$typeof===y||e.$$typeof===S||e.$$typeof===b||e.$$typeof===g)},t.typeOf=_},2086:(e,t,n)=>{"use strict";e.exports=n(5082)},1153:(e,t,n)=>{"use strict";var i=n(5043),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var i,o={},l=null,u=null;for(i in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,i)&&!c.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:r,type:e,key:l,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function y(){}function S(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=S.prototype=new y;b.constructor=S,v(b,g.prototype),b.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,x={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,i){var r,o={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)w.call(t,r)&&!C.hasOwnProperty(r)&&(o[r]=t[r]);var c=arguments.length-2;if(1===c)o.children=i;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===o[r]&&(o[r]=c[r]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:x.current}}function P(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function M(e,t,r,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case i:c=!0}}if(c)return s=s(c=e),e=""===o?"."+R(c,0):o,_(s)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),M(s,t,r,"",(function(e){return e}))):null!=s&&(P(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(c=0,o=""===o?".":o+":",_(e))for(var l=0;l<e.length;l++){var u=o+R(a=e[l],l);c+=M(a,t,r,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=M(a=a.value,t,r,u=o+R(a,l++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,n){if(null==e)return e;var i=[],r=0;return M(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var k={current:null},O={transition:null},D={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!P(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=r,t.Profiler=s,t.PureComponent=S,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=v({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!C.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}return{$$typeof:n,type:e.type,key:o,ref:s,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=P,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return k.current.useCallback(e,t)},t.useContext=function(e){return k.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return k.current.useDeferredValue(e)},t.useEffect=function(e,t){return k.current.useEffect(e,t)},t.useId=function(){return k.current.useId()},t.useImperativeHandle=function(e,t,n){return k.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.current.useMemo(e,t)},t.useReducer=function(e,t,n){return k.current.useReducer(e,t,n)},t.useRef=function(e){return k.current.useRef(e)},t.useState=function(e){return k.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.current.useTransition()},t.version="18.2.0"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<o(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,s=r>>>1;i<s;){var a=2*(i+1)-1,c=e[a],l=a+1,u=e[l];if(0>o(c,n))l<r&&0>o(u,c)?(e[i]=u,e[l]=n,i=l):(e[i]=c,e[a]=n,i=a);else{if(!(l<r&&0>o(u,n)))break e;e[i]=u,e[l]=n,i=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],d=1,h=null,p=3,f=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,S="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(l,t)}t=i(u)}}function _(e){if(m=!1,b(e),!v)if(null!==i(l))v=!0,O(w);else{var t=i(u);null!==t&&D(_,t.startTime-e)}}function w(e,n){v=!1,m&&(m=!1,y(P),P=-1),f=!0;var o=p;try{for(b(n),h=i(l);null!==h&&(!(h.expirationTime>n)||e&&!M());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===i(l)&&r(l),b(n)}else r(l);h=i(l)}if(null!==h)var c=!0;else{var d=i(u);null!==d&&D(_,d.startTime-n),c=!1}return c}finally{h=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,C=!1,E=null,P=-1,T=5,R=-1;function M(){return!(t.unstable_now()-R<T)}function A(){if(null!==E){var e=t.unstable_now();R=e;var n=!0;try{n=E(!0,e)}finally{n?x():(C=!1,E=null)}}else C=!1}if("function"===typeof S)x=function(){S(A)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,k=I.port2;I.port1.onmessage=A,x=function(){k.postMessage(null)}}else x=function(){g(A,0)};function O(e){E=e,C||(C=!0,x())}function D(e,n){P=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||f||(v=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(l)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===i(l)&&e===i(u)&&(m?(y(P),P=-1):m=!0,D(_,o-s))):(e.sortIndex=a,n(l,e),v||f||(v=!0,O(w))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},7324:e=>{e.exports=function(e,t,n,i){var r=n?n.call(i,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),c=0;c<o.length;c++){var l=o[c];if(!a(l))return!1;var u=e[l],d=t[l];if(!1===(r=n?n.call(i,u,d,l):void 0)||void 0===r&&u!==d)return!1}return!0}},6345:e=>{"use strict";var t;t=function(){var e={},t={};return e.on=function(e,n){var i={name:e,handler:n};return t[e]=t[e]||[],t[e].unshift(i),i},e.off=function(e){var n=t[e.name].indexOf(e);-1!==n&&t[e.name].splice(n,1)},e.trigger=function(e,n){var i,r=t[e];if(r)for(i=r.length;i--;)r[i].handler(n)},e},e.exports=t},7726:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return c.default}});var i=h(n(6857)),r=h(n(9175)),o=h(n(646)),s=h(n(9605)),a=h(n(6129)),c=h(n(4762)),l=h(n(2378)),u=h(n(8771)),d=h(n(1949));function h(e){return e&&e.__esModule?e:{default:e}}},1434:(e,t)=>{"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function i(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t,n,r,o,s){return i((a=i(i(t,e),i(r,s)))<<(c=o)|a>>>32-c,n);var a,c}function o(e,t,n,i,o,s,a){return r(t&n|~t&i,e,t,o,s,a)}function s(e,t,n,i,o,s,a){return r(t&i|n&~i,e,t,o,s,a)}function a(e,t,n,i,o,s,a){return r(t^n^i,e,t,o,s,a)}function c(e,t,n,i,o,s,a){return r(n^(t|~i),e,t,o,s,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){if("string"===typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length,i="0123456789abcdef";for(let r=0;r<n;r+=8){const n=e[r>>5]>>>r%32&255,o=parseInt(i.charAt(n>>>4&15)+i.charAt(15&n),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let r=1732584193,l=-271733879,u=-1732584194,d=271733878;for(let n=0;n<e.length;n+=16){const t=r,h=l,p=u,f=d;r=o(r,l,u,d,e[n],7,-680876936),d=o(d,r,l,u,e[n+1],12,-389564586),u=o(u,d,r,l,e[n+2],17,606105819),l=o(l,u,d,r,e[n+3],22,-1044525330),r=o(r,l,u,d,e[n+4],7,-176418897),d=o(d,r,l,u,e[n+5],12,1200080426),u=o(u,d,r,l,e[n+6],17,-1473231341),l=o(l,u,d,r,e[n+7],22,-45705983),r=o(r,l,u,d,e[n+8],7,1770035416),d=o(d,r,l,u,e[n+9],12,-1958414417),u=o(u,d,r,l,e[n+10],17,-42063),l=o(l,u,d,r,e[n+11],22,-1990404162),r=o(r,l,u,d,e[n+12],7,1804603682),d=o(d,r,l,u,e[n+13],12,-40341101),u=o(u,d,r,l,e[n+14],17,-1502002290),l=o(l,u,d,r,e[n+15],22,1236535329),r=s(r,l,u,d,e[n+1],5,-165796510),d=s(d,r,l,u,e[n+6],9,-1069501632),u=s(u,d,r,l,e[n+11],14,643717713),l=s(l,u,d,r,e[n],20,-373897302),r=s(r,l,u,d,e[n+5],5,-701558691),d=s(d,r,l,u,e[n+10],9,38016083),u=s(u,d,r,l,e[n+15],14,-660478335),l=s(l,u,d,r,e[n+4],20,-405537848),r=s(r,l,u,d,e[n+9],5,568446438),d=s(d,r,l,u,e[n+14],9,-1019803690),u=s(u,d,r,l,e[n+3],14,-187363961),l=s(l,u,d,r,e[n+8],20,1163531501),r=s(r,l,u,d,e[n+13],5,-1444681467),d=s(d,r,l,u,e[n+2],9,-51403784),u=s(u,d,r,l,e[n+7],14,1735328473),l=s(l,u,d,r,e[n+12],20,-1926607734),r=a(r,l,u,d,e[n+5],4,-378558),d=a(d,r,l,u,e[n+8],11,-2022574463),u=a(u,d,r,l,e[n+11],16,1839030562),l=a(l,u,d,r,e[n+14],23,-35309556),r=a(r,l,u,d,e[n+1],4,-1530992060),d=a(d,r,l,u,e[n+4],11,1272893353),u=a(u,d,r,l,e[n+7],16,-155497632),l=a(l,u,d,r,e[n+10],23,-1094730640),r=a(r,l,u,d,e[n+13],4,681279174),d=a(d,r,l,u,e[n],11,-358537222),u=a(u,d,r,l,e[n+3],16,-722521979),l=a(l,u,d,r,e[n+6],23,76029189),r=a(r,l,u,d,e[n+9],4,-640364487),d=a(d,r,l,u,e[n+12],11,-421815835),u=a(u,d,r,l,e[n+15],16,530742520),l=a(l,u,d,r,e[n+2],23,-995338651),r=c(r,l,u,d,e[n],6,-198630844),d=c(d,r,l,u,e[n+7],10,1126891415),u=c(u,d,r,l,e[n+14],15,-1416354905),l=c(l,u,d,r,e[n+5],21,-57434055),r=c(r,l,u,d,e[n+12],6,1700485571),d=c(d,r,l,u,e[n+3],10,-1894986606),u=c(u,d,r,l,e[n+10],15,-1051523),l=c(l,u,d,r,e[n+1],21,-2054922799),r=c(r,l,u,d,e[n+8],6,1873313359),d=c(d,r,l,u,e[n+15],10,-30611744),u=c(u,d,r,l,e[n+6],15,-1560198380),l=c(l,u,d,r,e[n+13],21,1309151649),r=c(r,l,u,d,e[n+4],6,-145523070),d=c(d,r,l,u,e[n+11],10,-1120210379),u=c(u,d,r,l,e[n+2],15,718787259),l=c(l,u,d,r,e[n+9],21,-343485551),r=i(r,t),l=i(l,h),u=i(u,p),d=i(d,f)}return[r,l,u,d]}(function(e){if(0===e.length)return[];const t=8*e.length,i=new Uint32Array(n(t));for(let n=0;n<t;n+=8)i[n>>5]|=(255&e[n/8])<<n%32;return i}(e),8*e.length))};t.default=l},2715:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=n},6129:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="00000000-0000-0000-0000-000000000000"},1949:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(2378))&&i.__esModule?i:{default:i};var o=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};t.default=o},4417:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},8811:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)};const i=new Uint8Array(16)},8805:(e,t)=>{"use strict";function n(e,t,n,i){switch(e){case 0:return t&n^~t&i;case 1:case 3:return t^n^i;case 2:return t&n^t&i^n&i}}function i(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"===typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const o=e.length/4+2,s=Math.ceil(o/16),a=new Array(s);for(let n=0;n<s;++n){const t=new Uint32Array(16);for(let i=0;i<16;++i)t[i]=e[64*n+4*i]<<24|e[64*n+4*i+1]<<16|e[64*n+4*i+2]<<8|e[64*n+4*i+3];a[n]=t}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(let c=0;c<s;++c){const e=new Uint32Array(80);for(let t=0;t<16;++t)e[t]=a[c][t];for(let t=16;t<80;++t)e[t]=i(e[t-3]^e[t-8]^e[t-14]^e[t-16],1);let o=r[0],s=r[1],l=r[2],u=r[3],d=r[4];for(let r=0;r<80;++r){const a=Math.floor(r/20),c=i(o,5)+n(a,s,l,u)+d+t[a]+e[r]>>>0;d=u,u=l,l=i(s,30)>>>0,s=o,o=c}r[0]=r[0]+o>>>0,r[1]=r[1]+s>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+u>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};t.default=r},8771:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=s;var i,r=(i=n(2378))&&i.__esModule?i:{default:i};const o=[];for(let c=0;c<256;++c)o.push((c+256).toString(16).slice(1));function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]}var a=function(e){const t=s(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);if(!(0,r.default)(t))throw TypeError("Stringified UUID is invalid");return t};t.default=a},6857:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(8811))&&i.__esModule?i:{default:i},o=n(8771);let s,a,c=0,l=0;var u=function(e,t,n){let i=t&&n||0;const u=t||new Array(16);let d=(e=e||{}).node||s,h=void 0!==e.clockseq?e.clockseq:a;if(null==d||null==h){const t=e.random||(e.rng||r.default)();null==d&&(d=s=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=a=16383&(t[6]<<8|t[7]))}let p=void 0!==e.msecs?e.msecs:Date.now(),f=void 0!==e.nsecs?e.nsecs:l+1;const v=p-c+(f-l)/1e4;if(v<0&&void 0===e.clockseq&&(h=h+1&16383),(v<0||p>c)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=p,l=f,a=h,p+=122192928e5;const m=(1e4*(268435455&p)+f)%4294967296;u[i++]=m>>>24&255,u[i++]=m>>>16&255,u[i++]=m>>>8&255,u[i++]=255&m;const g=p/4294967296*1e4&268435455;u[i++]=g>>>8&255,u[i++]=255&g,u[i++]=g>>>24&15|16,u[i++]=g>>>16&255,u[i++]=h>>>8|128,u[i++]=255&h;for(let r=0;r<6;++r)u[i+r]=d[r];return t||(0,o.unsafeStringify)(u)};t.default=u},9175:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(9124)),r=o(n(1434));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,i.default)("v3",48,r.default);t.default=s},9124:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function i(e,i,s,a){var c;if("string"===typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"===typeof i&&(i=(0,o.default)(i)),16!==(null===(c=i)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(i),l.set(e,i.length),l=n(l),l[6]=15&l[6]|t,l[8]=63&l[8]|128,s){a=a||0;for(let e=0;e<16;++e)s[a+e]=l[e];return s}return(0,r.unsafeStringify)(l)}try{i.name=e}catch(c){}return i.DNS=s,i.URL=a,i};var i,r=n(8771),o=(i=n(1949))&&i.__esModule?i:{default:i};const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=s;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=a},646:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n(2715)),r=s(n(8811)),o=n(8771);function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,n){if(i.default.randomUUID&&!t&&!e)return i.default.randomUUID();const s=(e=e||{}).random||(e.rng||r.default)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=s[e];return t}return(0,o.unsafeStringify)(s)};t.default=a},9605:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(9124)),r=o(n(8805));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,i.default)("v5",80,r.default);t.default=s},2378:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(4417))&&i.__esModule?i:{default:i};var o=function(e){return"string"===typeof e&&r.default.test(e)};t.default=o},4762:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(2378))&&i.__esModule?i:{default:i};var o=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};t.default=o},7101:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(4561),o=(i=r)&&i.__esModule?i:{default:i};t.default={pauseVideo:{acceptableStates:[o.default.ENDED,o.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[o.default.ENDED,o.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[o.default.ENDED,o.default.PLAYING,o.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default},1750:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(9429)),r=a(n(7866)),o=a(n(144)),s=a(n(7101));function a(e){return e&&e.__esModule?e:{default:e}}var c=(0,i.default)("youtube-player"),l={proxyEvents:function(e){var t={},n=function(n){var i="on"+n.slice(0,1).toUpperCase()+n.slice(1);t[i]=function(t){c('event "%s"',i,t),e.trigger(n,t)}},i=!0,r=!1,s=void 0;try{for(var a,l=o.default[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){n(a.value)}}catch(u){r=!0,s=u}finally{try{!i&&l.return&&l.return()}finally{if(r)throw s}}return t},promisifyPlayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},i=function(i){t&&s.default[i]?n[i]=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.then((function(e){var t=s.default[i],r=e.getPlayerState(),o=e[i].apply(e,n);return t.stateChangeRequired||Array.isArray(t.acceptableStates)&&-1===t.acceptableStates.indexOf(r)?new Promise((function(n){e.addEventListener("onStateChange",(function i(){var r=e.getPlayerState(),o=void 0;"number"===typeof t.timeout&&(o=setTimeout((function(){e.removeEventListener("onStateChange",i),n()}),t.timeout)),Array.isArray(t.acceptableStates)&&-1!==t.acceptableStates.indexOf(r)&&(e.removeEventListener("onStateChange",i),clearTimeout(o),n())}))})).then((function(){return o})):o}))}:n[i]=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.then((function(e){return e[i].apply(e,n)}))}},o=!0,a=!1,c=void 0;try{for(var l,u=r.default[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){i(l.value)}}catch(d){a=!0,c=d}finally{try{!o&&u.return&&u.return()}finally{if(a)throw c}}return n}};t.default=l,e.exports=t.default},4561:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default},144:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default},7866:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default},7282:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=a(n(6345)),o=a(n(4151)),s=a(n(1750));function a(e){return e&&e.__esModule?e:{default:e}}var c=void 0;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=(0,r.default)();if(c||(c=(0,o.default)(a)),t.events)throw new Error("Event handlers cannot be overwritten.");if("string"===typeof e&&!document.getElementById(e))throw new Error('Element "'+e+'" does not exist.');t.events=s.default.proxyEvents(a);var l=new Promise((function(n){"object"===("undefined"===typeof e?"undefined":i(e))&&e.playVideo instanceof Function?n(e):c.then((function(i){var r=new i.Player(e,t);return a.on("ready",(function(){n(r)})),null}))})),u=s.default.promisifyPlayer(l,n);return u.on=a.on,u.off=a.off,u},e.exports=t.default},4151:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(3452),o=(i=r)&&i.__esModule?i:{default:i};t.default=function(e){return new Promise((function(t){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function)t(window.YT);else{var n="http:"===window.location.protocol?"http:":"https:";(0,o.default)(n+"//www.youtube.com/iframe_api",(function(t){t&&e.trigger("error",t)}));var i=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){i&&i(),t(window.YT)}}}))},e.exports=t.default},9429:(e,t,n)=>{function i(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"/EVA-libre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG),e}(t=e.exports=n(8826)).log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))})),e.splice(o,0,i)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}},t.load=i,t.useColors=function(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(i())},8826:(e,t,n)=>{var i;function r(e){function n(){if(n.enabled){var e=n,r=+new Date,o=r-(i||r);e.diff=o,e.prev=i,e.curr=r,i=r;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!==typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;c++;var r=t.formatters[i];if("function"===typeof r){var o=s[c];n=r.call(e,o),s.splice(c,1),c--}return n})),t.formatArgs.call(e,s),(n.log||t.log||console.log.bind(console)).apply(e,s)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}(e),"function"===typeof t.init&&t.init(n),n}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"===typeof e?e:"").split(/[\s,]+/),i=n.length,r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(8445),t.names=[],t.skips=[],t.formatters={}},8445:e=>{var t=1e3,n=60*t,i=60*n,r=24*i,o=365.25*r;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,a){a=a||{};var c,l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!s)return;var a=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*o;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===l&&!1===isNaN(e))return a.long?s(c=e,r,"day")||s(c,i,"hour")||s(c,n,"minute")||s(c,t,"second")||c+" ms":function(e){if(e>=r)return Math.round(e/r)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},6308:()=>{},2250:()=>{},9645:()=>{},8632:()=>{},3678:()=>{},4573:()=>{},952:()=>{}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>i[e]));return s.default=()=>i,n.d(o,s),o}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{APIConnectionError:()=>PV,APIConnectionTimeoutError:()=>TV,APIError:()=>CV,APIUserAbortError:()=>EV,AuthenticationError:()=>MV,BadRequestError:()=>RV,ConflictError:()=>kV,InternalServerError:()=>LV,NotFoundError:()=>IV,OpenAIError:()=>xV,PermissionDeniedError:()=>AV,RateLimitError:()=>DV,UnprocessableEntityError:()=>OV});var t=n(5043),i=n.t(t,2),r=n(4391);function o(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var s=function(){return s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};Object.create;function a(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;var c=n(7324),l=n.n(c),u="-ms-",d="-moz-",h="-webkit-",p="comm",f="rule",v="decl",m="@import",g="@keyframes",y="@layer",S=Math.abs,b=String.fromCharCode,_=Object.assign;function w(e){return e.trim()}function x(e,t){return(e=t.exec(e))?e[0]:e}function C(e,t,n){return e.replace(t,n)}function E(e,t,n){return e.indexOf(t,n)}function P(e,t){return 0|e.charCodeAt(t)}function T(e,t,n){return e.slice(t,n)}function R(e){return e.length}function M(e){return e.length}function A(e,t){return t.push(e),e}function I(e,t){return e.filter((function(e){return!x(e,t)}))}var k=1,O=1,D=0,L=0,N=0,z="";function F(e,t,n,i,r,o,s,a){return{value:e,root:t,parent:n,type:i,props:r,children:o,line:k,column:O,length:s,return:"",siblings:a}}function U(e,t){return _(F("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function B(e){for(;e.root;)e=U(e.root,{children:[e]});A(e,e.siblings)}function j(){return N=L>0?P(z,--L):0,O--,10===N&&(O=1,k--),N}function V(){return N=L<D?P(z,L++):0,O++,10===N&&(O=1,k++),N}function H(){return P(z,L)}function W(){return L}function G(e,t){return T(z,e,t)}function q(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function X(e){return k=O=1,D=R(z=e),L=0,[]}function K(e){return z="",e}function J(e){return w(G(L-1,Q(91===e?e+2:40===e?e+1:e)))}function Y(e){for(;(N=H())&&N<33;)V();return q(e)>2||q(N)>3?"":" "}function $(e,t){for(;--t&&V()&&!(N<48||N>102||N>57&&N<65||N>70&&N<97););return G(e,W()+(t<6&&32==H()&&32==V()))}function Q(e){for(;V();)switch(N){case e:return L;case 34:case 39:34!==e&&39!==e&&Q(N);break;case 40:41===e&&Q(e);break;case 92:V()}return L}function Z(e,t){for(;V()&&e+N!==57&&(e+N!==84||47!==H()););return"/*"+G(t,L-1)+"*"+b(47===e?e:V())}function ee(e){for(;!q(H());)V();return G(e,L)}function te(e,t){for(var n="",i=0;i<e.length;i++)n+=t(e[i],i,e,t)||"";return n}function ne(e,t,n,i){switch(e.type){case y:if(e.children.length)break;case m:case v:return e.return=e.return||e.value;case p:return"";case g:return e.return=e.value+"{"+te(e.children,i)+"}";case f:if(!R(e.value=e.props.join(",")))return""}return R(n=te(e.children,i))?e.return=e.value+"{"+n+"}":""}function ie(e,t,n){switch(function(e,t){return 45^P(e,0)?(((t<<2^P(e,0))<<2^P(e,1))<<2^P(e,2))<<2^P(e,3):0}(e,t)){case 5103:return h+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return h+e+e;case 4789:return d+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return h+e+d+e+u+e+e;case 5936:switch(P(e,t+11)){case 114:return h+e+u+C(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return h+e+u+C(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return h+e+u+C(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return h+e+u+e+e;case 6165:return h+e+u+"flex-"+e+e;case 5187:return h+e+C(e,/(\w+).+(:[^]+)/,h+"box-$1$2"+u+"flex-$1$2")+e;case 5443:return h+e+u+"flex-item-"+C(e,/flex-|-self/g,"")+(x(e,/flex-|baseline/)?"":u+"grid-row-"+C(e,/flex-|-self/g,""))+e;case 4675:return h+e+u+"flex-line-pack"+C(e,/align-content|flex-|-self/g,"")+e;case 5548:return h+e+u+C(e,"shrink","negative")+e;case 5292:return h+e+u+C(e,"basis","preferred-size")+e;case 6060:return h+"box-"+C(e,"-grow","")+h+e+u+C(e,"grow","positive")+e;case 4554:return h+C(e,/([^-])(transform)/g,"$1"+h+"$2")+e;case 6187:return C(C(C(e,/(zoom-|grab)/,h+"$1"),/(image-set)/,h+"$1"),e,"")+e;case 5495:case 3959:return C(e,/(image-set\([^]*)/,h+"$1$`$1");case 4968:return C(C(e,/(.+:)(flex-)?(.*)/,h+"box-pack:$3"+u+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+h+e+e;case 4200:if(!x(e,/flex-|baseline/))return u+"grid-column-align"+T(e,t)+e;break;case 2592:case 3360:return u+C(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,x(e.props,/grid-\w+-end/)}))?~E(e+(n=n[t].value),"span",0)?e:u+C(e,"-start","")+e+u+"grid-row-span:"+(~E(n,"span",0)?x(n,/\d+/):+x(n,/\d+/)-+x(e,/\d+/))+";":u+C(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return x(e.props,/grid-\w+-start/)}))?e:u+C(C(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return C(e,/(.+)-inline(.+)/,h+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(R(e)-1-t>6)switch(P(e,t+1)){case 109:if(45!==P(e,t+4))break;case 102:return C(e,/(.+:)(.+)-([^]+)/,"$1"+h+"$2-$3$1"+d+(108==P(e,t+3)?"$3":"$2-$3"))+e;case 115:return~E(e,"stretch",0)?ie(C(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return C(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,i,r,o,s,a){return u+n+":"+i+a+(r?u+n+"-span:"+(o?s:+s-+i)+a:"")+e}));case 4949:if(121===P(e,t+6))return C(e,":",":"+h)+e;break;case 6444:switch(P(e,45===P(e,14)?18:11)){case 120:return C(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+h+(45===P(e,14)?"inline-":"")+"box$3$1"+h+"$2$3$1"+u+"$2box$3")+e;case 100:return C(e,":",":"+u)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return C(e,"scroll-","scroll-snap-")+e}return e}function re(e,t,n,i){if(e.length>-1&&!e.return)switch(e.type){case v:return void(e.return=ie(e.value,e.length,n));case g:return te([U(e,{value:C(e.value,"@","@"+h)})],i);case f:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(x(t,i=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":B(U(e,{props:[C(t,/:(read-\w+)/,":"+d+"$1")]})),B(U(e,{props:[t]})),_(e,{props:I(n,i)});break;case"::placeholder":B(U(e,{props:[C(t,/:(plac\w+)/,":"+h+"input-$1")]})),B(U(e,{props:[C(t,/:(plac\w+)/,":"+d+"$1")]})),B(U(e,{props:[C(t,/:(plac\w+)/,u+"input-$1")]})),B(U(e,{props:[t]})),_(e,{props:I(n,i)})}return""}))}}function oe(e){return K(se("",null,null,null,[""],e=X(e),0,[0],e))}function se(e,t,n,i,r,o,s,a,c){for(var l=0,u=0,d=s,h=0,p=0,f=0,v=1,m=1,g=1,y=0,_="",w=r,x=o,T=i,M=_;m;)switch(f=y,y=V()){case 40:if(108!=f&&58==P(M,d-1)){-1!=E(M+=C(J(y),"&","&\f"),"&\f",S(l?a[l-1]:0))&&(g=-1);break}case 34:case 39:case 91:M+=J(y);break;case 9:case 10:case 13:case 32:M+=Y(f);break;case 92:M+=$(W()-1,7);continue;case 47:switch(H()){case 42:case 47:A(ce(Z(V(),W()),t,n,c),c);break;default:M+="/"}break;case 123*v:a[l++]=R(M)*g;case 125*v:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+u:-1==g&&(M=C(M,/\f/g,"")),p>0&&R(M)-d&&A(p>32?le(M+";",i,n,d-1,c):le(C(M," ","")+";",i,n,d-2,c),c);break;case 59:M+=";";default:if(A(T=ae(M,t,n,l,u,r,a,_,w=[],x=[],d,o),o),123===y)if(0===u)se(M,t,T,T,w,o,d,a,x);else switch(99===h&&110===P(M,3)?100:h){case 100:case 108:case 109:case 115:se(e,T,T,i&&A(ae(e,T,T,0,0,r,a,_,r,w=[],d,x),x),r,x,d,a,i?w:x);break;default:se(M,T,T,T,[""],x,0,a,x)}}l=u=p=0,v=g=1,_=M="",d=s;break;case 58:d=1+R(M),p=f;default:if(v<1)if(123==y)--v;else if(125==y&&0==v++&&125==j())continue;switch(M+=b(y),y*v){case 38:g=u>0?1:(M+="\f",-1);break;case 44:a[l++]=(R(M)-1)*g,g=1;break;case 64:45===H()&&(M+=J(V())),h=H(),u=d=R(_=M+=ee(W())),y++;break;case 45:45===f&&2==R(M)&&(v=0)}}return o}function ae(e,t,n,i,r,o,s,a,c,l,u,d){for(var h=r-1,p=0===r?o:[""],v=M(p),m=0,g=0,y=0;m<i;++m)for(var b=0,_=T(e,h+1,h=S(g=s[m])),x=e;b<v;++b)(x=w(g>0?p[b]+" "+_:C(_,/&\f/g,p[b])))&&(c[y++]=x);return F(e,t,n,0===r?f:a,c,l,u,d)}function ce(e,t,n,i){return F(e,t,n,p,b(N),T(e,2,-2),0,i)}function le(e,t,n,i,r){return F(e,t,n,v,T(e,0,i),T(e,i+1,-1),i,r)}const ue={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var de="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/EVA-libre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"/EVA-libre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/EVA-libre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",he="active",pe="data-styled-version",fe="6.1.8",ve="/*!sc*/\n",me="undefined"!=typeof window&&"HTMLElement"in window,ge=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/EVA-libre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/EVA-libre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/EVA-libre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/EVA-libre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/EVA-libre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/EVA-libre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/EVA-libre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/EVA-libre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/EVA-libre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/EVA-libre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),ye=(new Set,Object.freeze([])),Se=Object.freeze({});function be(e,t,n){return void 0===n&&(n=Se),e.theme!==n.theme&&e.theme||t||n.theme}var _e=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),we=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,xe=/(^-|-$)/g;function Ce(e){return e.replace(we,"-").replace(xe,"")}var Ee=/(a)(d)/gi,Pe=52,Te=function(e){return String.fromCharCode(e+(e>25?39:97))};function Re(e){var t,n="";for(t=Math.abs(e);t>Pe;t=t/Pe|0)n=Te(t%Pe)+n;return(Te(t%Pe)+n).replace(Ee,"$1-$2")}var Me,Ae=5381,Ie=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},ke=function(e){return Ie(Ae,e)};function Oe(e){return Re(ke(e)>>>0)}function De(e){return e.displayName||e.name||"Component"}function Le(e){return"string"==typeof e&&!0}var Ne="function"==typeof Symbol&&Symbol.for,ze=Ne?Symbol.for("react.memo"):60115,Fe=Ne?Symbol.for("react.forward_ref"):60112,Ue={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Be={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},je={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ve=((Me={})[Fe]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Me[ze]=je,Me);function He(e){return("type"in(t=e)&&t.type.$$typeof)===ze?je:"$$typeof"in e?Ve[e.$$typeof]:Ue;var t}var We=Object.defineProperty,Ge=Object.getOwnPropertyNames,qe=Object.getOwnPropertySymbols,Xe=Object.getOwnPropertyDescriptor,Ke=Object.getPrototypeOf,Je=Object.prototype;function Ye(e,t,n){if("string"!=typeof t){if(Je){var i=Ke(t);i&&i!==Je&&Ye(e,i,n)}var r=Ge(t);qe&&(r=r.concat(qe(t)));for(var o=He(e),s=He(t),a=0;a<r.length;++a){var c=r[a];if(!(c in Be||n&&n[c]||s&&c in s||o&&c in o)){var l=Xe(t,c);try{We(e,c,l)}catch(e){}}}}return e}function $e(e){return"function"==typeof e}function Qe(e){return"object"==typeof e&&"styledComponentId"in e}function Ze(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function et(e,t){if(0===e.length)return"";for(var n=e[0],i=1;i<e.length;i++)n+=t?t+e[i]:e[i];return n}function tt(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function nt(e,t,n){if(void 0===n&&(n=!1),!n&&!tt(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var i=0;i<t.length;i++)e[i]=nt(e[i],t[i]);else if(tt(t))for(var i in t)e[i]=nt(e[i],t[i]);return e}function it(e,t){Object.defineProperty(e,"toString",{value:t})}function rt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var ot=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,r=i;e>=r;)if((r<<=1)<0)throw rt(16,"".concat(e));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var o=i;o<r;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(e+1),a=(o=0,t.length);o<a;o++)this.tag.insertRule(s,t[o])&&(this.groupSizes[e]++,s++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),i=n+t;this.groupSizes[e]=0;for(var r=n;r<i;r++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],i=this.indexOfGroup(e),r=i+n,o=i;o<r;o++)t+="".concat(this.tag.getRule(o)).concat(ve);return t},e}(),st=new Map,at=new Map,ct=1,lt=function(e){if(st.has(e))return st.get(e);for(;at.has(ct);)ct++;var t=ct++;return st.set(e,t),at.set(t,e),t},ut=function(e,t){ct=t+1,st.set(e,t),at.set(t,e)},dt="style[".concat(de,"][").concat(pe,'="').concat(fe,'"]'),ht=new RegExp("^".concat(de,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),pt=function(e,t,n){for(var i,r=n.split(","),o=0,s=r.length;o<s;o++)(i=r[o])&&e.registerName(t,i)},ft=function(e,t){for(var n,i=(null!==(n=t.textContent)&&void 0!==n?n:"").split(ve),r=[],o=0,s=i.length;o<s;o++){var a=i[o].trim();if(a){var c=a.match(ht);if(c){var l=0|parseInt(c[1],10),u=c[2];0!==l&&(ut(u,l),pt(e,u,c[3]),e.getTag().insertRules(l,r)),r.length=0}else r.push(a)}}};function vt(){return n.nc}var mt=function(e){var t=document.head,n=e||t,i=document.createElement("style"),r=function(e){var t=Array.from(e.querySelectorAll("style[".concat(de,"]")));return t[t.length-1]}(n),o=void 0!==r?r.nextSibling:null;i.setAttribute(de,he),i.setAttribute(pe,fe);var s=vt();return s&&i.setAttribute("nonce",s),n.insertBefore(i,o),i},gt=function(){function e(e){this.element=mt(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,i=t.length;n<i;n++){var r=t[n];if(r.ownerNode===e)return r}throw rt(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),yt=function(){function e(e){this.element=mt(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),St=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),bt=me,_t={isServer:!me,useCSSOMInjection:!ge},wt=function(){function e(e,t,n){void 0===e&&(e=Se),void 0===t&&(t={});var i=this;this.options=s(s({},_t),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&me&&bt&&(bt=!1,function(e){for(var t=document.querySelectorAll(dt),n=0,i=t.length;n<i;n++){var r=t[n];r&&r.getAttribute(de)!==he&&(ft(e,r),r.parentNode&&r.parentNode.removeChild(r))}}(this)),it(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,i="",r=function(n){var r=function(e){return at.get(e)}(n);if(void 0===r)return"continue";var o=e.names.get(r),s=t.getGroup(n);if(void 0===o||0===s.length)return"continue";var a="".concat(de,".g").concat(n,'[id="').concat(r,'"]'),c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+="".concat(e,","))})),i+="".concat(s).concat(a,'{content:"').concat(c,'"}').concat(ve)},o=0;o<n;o++)r(o);return i}(i)}))}return e.registerId=function(e){return lt(e)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(s(s({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new St(n):t?new gt(n):new yt(n)}(this.options),new ot(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(lt(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(lt(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(lt(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),xt=/&/g,Ct=/^\s*\/\/.*$/gm;function Et(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Et(e.children,t)),e}))}function Pt(e){var t,n,i,r=void 0===e?Se:e,o=r.options,s=void 0===o?Se:o,a=r.plugins,c=void 0===a?ye:a,l=function(e,i,r){return r.startsWith(n)&&r.endsWith(n)&&r.replaceAll(n,"").length>0?".".concat(t):e},u=c.slice();u.push((function(e){e.type===f&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(xt,n).replace(i,l))})),s.prefix&&u.push(re),u.push(ne);var d=function(e,r,o,a){void 0===r&&(r=""),void 0===o&&(o=""),void 0===a&&(a="&"),t=a,n=r,i=new RegExp("\\".concat(n,"\\b"),"g");var c=e.replace(Ct,""),l=oe(o||r?"".concat(o," ").concat(r," { ").concat(c," }"):c);s.namespace&&(l=Et(l,s.namespace));var d,h=[];return te(l,function(e){var t=M(e);return function(n,i,r,o){for(var s="",a=0;a<t;a++)s+=e[a](n,i,r,o)||"";return s}}(u.concat((d=function(e){return h.push(e)},function(e){e.root||(e=e.return)&&d(e)})))),h};return d.hash=c.length?c.reduce((function(e,t){return t.name||rt(15),Ie(e,t.name)}),Ae).toString():"",d}var Tt=new wt,Rt=Pt(),Mt=t.createContext({shouldForwardProp:void 0,styleSheet:Tt,stylis:Rt}),At=(Mt.Consumer,t.createContext(void 0));function It(){return(0,t.useContext)(Mt)}function kt(e){var n=(0,t.useState)(e.stylisPlugins),i=n[0],r=n[1],o=It().styleSheet,s=(0,t.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,o]),a=(0,t.useMemo)((function(){return Pt({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:i})}),[e.enableVendorPrefixes,e.namespace,i]);(0,t.useEffect)((function(){l()(i,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]);var c=(0,t.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:s,stylis:a}}),[e.shouldForwardProp,s,a]);return t.createElement(Mt.Provider,{value:c},t.createElement(At.Provider,{value:a},e.children))}var Ot=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Rt);var i=n.name+t.hash;e.hasNameForId(n.id,i)||e.insertRules(n.id,i,t(n.rules,i,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,it(this,(function(){throw rt(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=Rt),this.name+e.hash},e}(),Dt=function(e){return e>="A"&&e<="Z"};function Lt(e){for(var t="",n=0;n<e.length;n++){var i=e[n];if(1===n&&"-"===i&&"-"===e[0])return e;Dt(i)?t+="-"+i.toLowerCase():t+=i}return t.startsWith("ms-")?"-"+t:t}var Nt=function(e){return null==e||!1===e||""===e},zt=function(e){var t,n,i=[];for(var r in e){var o=e[r];e.hasOwnProperty(r)&&!Nt(o)&&(Array.isArray(o)&&o.isCss||$e(o)?i.push("".concat(Lt(r),":"),o,";"):tt(o)?i.push.apply(i,a(a(["".concat(r," {")],zt(o),!1),["}"],!1)):i.push("".concat(Lt(r),": ").concat((t=r,null==(n=o)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in ue||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return i};function Ft(e,t,n,i){return Nt(e)?[]:Qe(e)?[".".concat(e.styledComponentId)]:$e(e)?!$e(r=e)||r.prototype&&r.prototype.isReactComponent||!t?[e]:Ft(e(t),t,n,i):e instanceof Ot?n?(e.inject(n,i),[e.getName(i)]):[e]:tt(e)?zt(e):Array.isArray(e)?Array.prototype.concat.apply(ye,e.map((function(e){return Ft(e,t,n,i)}))):[e.toString()];var r}function Ut(e){for(var t=0;t<e.length;t+=1){var n=e[t];if($e(n)&&!Qe(n))return!1}return!0}var Bt=ke(fe),jt=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Ut(e),this.componentId=t,this.baseHash=Ie(Bt,t),this.baseStyle=n,wt.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))i=Ze(i,this.staticRulesId);else{var r=et(Ft(this.rules,e,t,n)),o=Re(Ie(this.baseHash,r)>>>0);if(!t.hasNameForId(this.componentId,o)){var s=n(r,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,s)}i=Ze(i,o),this.staticRulesId=o}else{for(var a=Ie(this.baseHash,n.hash),c="",l=0;l<this.rules.length;l++){var u=this.rules[l];if("string"==typeof u)c+=u;else if(u){var d=et(Ft(u,e,t,n));a=Ie(a,d+l),c+=d}}if(c){var h=Re(a>>>0);t.hasNameForId(this.componentId,h)||t.insertRules(this.componentId,h,n(c,".".concat(h),void 0,this.componentId)),i=Ze(i,h)}}return i},e}(),Vt=t.createContext(void 0);Vt.Consumer;var Ht={};new Set;function Wt(e,n,i){var r=Qe(e),o=e,a=!Le(e),c=n.attrs,l=void 0===c?ye:c,u=n.componentId,d=void 0===u?function(e,t){var n="string"!=typeof e?"sc":Ce(e);Ht[n]=(Ht[n]||0)+1;var i="".concat(n,"-").concat(Oe(fe+n+Ht[n]));return t?"".concat(t,"-").concat(i):i}(n.displayName,n.parentComponentId):u,h=n.displayName,p=void 0===h?function(e){return Le(e)?"styled.".concat(e):"Styled(".concat(De(e),")")}(e):h,f=n.displayName&&n.componentId?"".concat(Ce(n.displayName),"-").concat(n.componentId):n.componentId||d,v=r&&o.attrs?o.attrs.concat(l).filter(Boolean):l,m=n.shouldForwardProp;if(r&&o.shouldForwardProp){var g=o.shouldForwardProp;if(n.shouldForwardProp){var y=n.shouldForwardProp;m=function(e,t){return g(e,t)&&y(e,t)}}else m=g}var S=new jt(i,f,r?o.componentStyle:void 0);function b(e,n){return function(e,n,i){var r=e.attrs,o=e.componentStyle,a=e.defaultProps,c=e.foldedComponentIds,l=e.styledComponentId,u=e.target,d=t.useContext(Vt),h=It(),p=e.shouldForwardProp||h.shouldForwardProp,f=be(n,d,a)||Se,v=function(e,t,n){for(var i,r=s(s({},t),{className:void 0,theme:n}),o=0;o<e.length;o+=1){var a=$e(i=e[o])?i(r):i;for(var c in a)r[c]="className"===c?Ze(r[c],a[c]):"style"===c?s(s({},r[c]),a[c]):a[c]}return t.className&&(r.className=Ze(r.className,t.className)),r}(r,n,f),m=v.as||u,g={};for(var y in v)void 0===v[y]||"$"===y[0]||"as"===y||"theme"===y&&v.theme===f||("forwardedAs"===y?g.as=v.forwardedAs:p&&!p(y,m)||(g[y]=v[y]));var S=function(e,t){var n=It();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(o,v),b=Ze(c,l);return S&&(b+=" "+S),v.className&&(b+=" "+v.className),g[Le(m)&&!_e.has(m)?"class":"className"]=b,g.ref=i,(0,t.createElement)(m,g)}(_,e,n)}b.displayName=p;var _=t.forwardRef(b);return _.attrs=v,_.componentStyle=S,_.displayName=p,_.shouldForwardProp=m,_.foldedComponentIds=r?Ze(o.foldedComponentIds,o.styledComponentId):"",_.styledComponentId=f,_.target=r?o.target:e,Object.defineProperty(_,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=r?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=0,r=t;i<r.length;i++)nt(e,r[i],!0);return e}({},o.defaultProps,e):e}}),it(_,(function(){return".".concat(_.styledComponentId)})),a&&Ye(_,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),_}function Gt(e,t){for(var n=[e[0]],i=0,r=t.length;i<r;i+=1)n.push(t[i],e[i+1]);return n}var qt=function(e){return Object.assign(e,{isCss:!0})};function Xt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if($e(e)||tt(e))return qt(Ft(Gt(ye,a([e],t,!0))));var i=e;return 0===t.length&&1===i.length&&"string"==typeof i[0]?Ft(i):qt(Ft(Gt(i,t)))}function Kt(e,t,n){if(void 0===n&&(n=Se),!t)throw rt(1,t);var i=function(i){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return e(t,n,Xt.apply(void 0,a([i],r,!1)))};return i.attrs=function(i){return Kt(e,t,s(s({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},i.withConfig=function(i){return Kt(e,t,s(s({},n),i))},i}var Jt=function(e){return Kt(Wt,e)},Yt=Jt;_e.forEach((function(e){Yt[e]=Jt(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Ut(e),wt.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,i){var r=i(et(Ft(this.rules,t,n,i)),""),o=this.componentId+e;n.insertRules(o,o,r)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,i){e>2&&wt.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,i)}}();function $t(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=et(Xt.apply(void 0,a([e],t,!1))),r=Oe(i);return new Ot(r,i)}(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),n=vt(),i=et([n&&'nonce="'.concat(n,'"'),"".concat(de,'="true"'),"".concat(pe,'="').concat(fe,'"')].filter(Boolean)," ");return"<style ".concat(i,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw rt(2);return e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)throw rt(2);var i=((n={})[de]="",n[pe]=fe,n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),r=vt();return r&&(i.nonce=r),[t.createElement("style",s({},i,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new wt({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw rt(2);return t.createElement(kt,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw rt(3)}})(),"__sc-".concat(de,"__");const Qt="generated",Zt="pointerleave",en="pointermove",tn="touchend",nn="tsParticles - Error";class rn{constructor(e,t,n){if(this._updateFromAngle=(e,t)=>{this.x=Math.cos(e)*t,this.y=Math.sin(e)*t},!$n(e)&&e){this.x=e.x,this.y=e.y;const t=e;this.z=t.z?t.z:0}else{if(void 0===e||void 0===t)throw new Error("".concat(nn," Vector3d not initialized correctly"));this.x=e,this.y=t,this.z=null!==n&&void 0!==n?n:0}}static get origin(){return rn.create(0,0,0)}get angle(){return Math.atan2(this.y,this.x)}set angle(e){this._updateFromAngle(e,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(e){this._updateFromAngle(this.angle,e)}static clone(e){return rn.create(e.x,e.y,e.z)}static create(e,t,n){return new rn(e,t,n)}add(e){return rn.create(this.x+e.x,this.y+e.y,this.z+e.z)}addTo(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}copy(){return rn.clone(this)}distanceTo(e){return this.sub(e).length}distanceToSq(e){return this.sub(e).getLengthSq()}div(e){return rn.create(this.x/e,this.y/e,this.z/e)}divTo(e){this.x/=e,this.y/=e,this.z/=e}getLengthSq(){return this.x**2+this.y**2}mult(e){return rn.create(this.x*e,this.y*e,this.z*e)}multTo(e){this.x*=e,this.y*=e,this.z*=e}normalize(){const e=this.length;0!=e&&this.multTo(1/e)}rotate(e){return rn.create(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e),0)}setTo(e){this.x=e.x,this.y=e.y;const t=e;this.z=t.z?t.z:0}sub(e){return rn.create(this.x-e.x,this.y-e.y,this.z-e.z)}subFrom(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}}class on extends rn{constructor(e,t){super(e,t,0)}static get origin(){return on.create(0,0)}static clone(e){return on.create(e.x,e.y)}static create(e,t){return new on(e,t)}}let sn=Math.random;const an=new Map;function cn(e,t){an.get(e)||an.set(e,t)}function ln(e){return an.get(e)||(e=>e)}function un(){return dn(sn(),0,1-1e-16)}function dn(e,t,n){return Math.min(Math.max(e,t),n)}function hn(e,t,n,i){return Math.floor((e*n+t*i)/(n+i))}function pn(e){const t=mn(e);let n=vn(e);return t===n&&(n=0),un()*(t-n)+n}function fn(e){return $n(e)?e:pn(e)}function vn(e){return $n(e)?e:e.min}function mn(e){return $n(e)?e:e.max}function gn(e,t){if(e===t||void 0===t&&$n(e))return e;const n=vn(e),i=mn(e);return void 0!==t?{min:Math.min(n,t),max:Math.max(i,t)}:gn(n,i)}function yn(e){const t=e.random,{enable:n,minimumValue:i}=Jn(t)?{enable:t,minimumValue:0}:t;return fn(n?gn(e.value,i):e.value)}function Sn(e,t){const n=e.x-t.x,i=e.y-t.y;return{dx:n,dy:i,distance:Math.sqrt(n**2+i**2)}}function bn(e,t){return Sn(e,t).distance}function _n(e,t,n,i){return on.create(e.x*(n-i)/(n+i)+2*t.x*i/(n+i),e.y)}function wn(e){var t,n,i,r;return{x:(null!==(t=null===(n=e.position)||void 0===n?void 0:n.x)&&void 0!==t?t:100*un())*e.size.width/100,y:(null!==(i=null===(r=e.position)||void 0===r?void 0:r.y)&&void 0!==i?i:100*un())*e.size.height/100}}function xn(e){var t,n;const i={x:void 0!==(null===(t=e.position)||void 0===t?void 0:t.x)?fn(e.position.x):void 0,y:void 0!==(null===(n=e.position)||void 0===n?void 0:n.y)?fn(e.position.y):void 0};return wn({size:e.size,position:i})}function Cn(e){var t,n,i,r;return{x:null!==(t=null===(n=e.position)||void 0===n?void 0:n.x)&&void 0!==t?t:un()*e.size.width,y:null!==(i=null===(r=e.position)||void 0===r?void 0:r.y)&&void 0!==i?i:un()*e.size.height}}function En(e){return e?e.endsWith("%")?parseFloat(e)/100:parseFloat(e):1}const Pn={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function Tn(){return Pn}function Rn(e){const t={bounced:!1},{pSide:n,pOtherSide:i,rectSide:r,rectOtherSide:o,velocity:s,factor:a}=e;return i.min<o.min||i.min>o.max||i.max<o.min||i.max>o.max||(n.max>=r.min&&n.max<=(r.max+r.min)/2&&s>0||n.min<=r.max&&n.min>(r.max+r.min)/2&&s<0)&&(t.velocity=s*-a,t.bounced=!0),t}function Mn(){return"undefined"===typeof window||!window||"undefined"===typeof window.document||!window.document}function An(e){if(!Mn()&&"undefined"!==typeof matchMedia)return matchMedia(e)}function In(e,t){return e===t||ei(t)&&t.indexOf(e)>-1}function kn(e){return Math.floor(un()*e.length)}function On(e,t){return e[void 0!==t&&(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])?t%e.length:kn(e)]}function Dn(e,t,n,i,r){return function(e,t,n,i){let r=!0;i&&"bottom"!==i||(r=e.top<t.height+n.x);!r||i&&"left"!==i||(r=e.right>n.x);!r||i&&"right"!==i||(r=e.left<t.width+n.y);!r||i&&"top"!==i||(r=e.bottom>n.y);return r}(Ln(e,null!==i&&void 0!==i?i:0),t,n,r)}function Ln(e,t){return{bottom:e.y+t,left:e.x-t,right:e.x+t,top:e.y-t}}function Nn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n){if(void 0===r||null===r)continue;if(!Zn(r)){e=r;continue}const t=Array.isArray(r);!t||!Zn(e)&&e&&Array.isArray(e)?t||!Zn(e)&&e&&!Array.isArray(e)||(e={}):e=[];for(const n in r){if("__proto__"===n)continue;const t=r[n],i=e;i[n]=Zn(t)&&Array.isArray(t)?t.map((e=>Nn(i[n],e))):Nn(i[n],t)}}return e}function zn(e,t){return!!Gn(t,(t=>t.enable&&In(e,t.mode)))}function Fn(e,t,n){Hn(t,(t=>{const i=t.mode;t.enable&&In(e,i)&&function(e,t){const n=e.selectors;Hn(n,(n=>{t(n,e)}))}(t,n)}))}function Un(e,t){if(t&&e)return Gn(e,(e=>function(e,t){const n=Hn(t,(t=>e.matches(t)));return ei(n)?n.some((e=>e)):n}(t,e.selectors)))}function Bn(e){return{position:e.getPosition(),radius:e.getRadius(),mass:e.getMass(),velocity:e.velocity,factor:on.create(yn(e.options.bounce.horizontal),yn(e.options.bounce.vertical))}}function jn(e,t){const{x:n,y:i}=e.velocity.sub(t.velocity),[r,o]=[e.position,t.position],{dx:s,dy:a}=Sn(o,r);if(n*s+i*a<0)return;const c=-Math.atan2(a,s),l=e.mass,u=t.mass,d=e.velocity.rotate(c),h=t.velocity.rotate(c),p=_n(d,h,l,u),f=_n(h,d,l,u),v=p.rotate(-c),m=f.rotate(-c);e.velocity.x=v.x*e.factor.x,e.velocity.y=v.y*e.factor.y,t.velocity.x=m.x*t.factor.x,t.velocity.y=m.y*t.factor.y}function Vn(e,t){const n=Ln(e.getPosition(),e.getRadius()),i=Rn({pSide:{min:n.left,max:n.right},pOtherSide:{min:n.top,max:n.bottom},rectSide:{min:t.left,max:t.right},rectOtherSide:{min:t.top,max:t.bottom},velocity:e.velocity.x,factor:yn(e.options.bounce.horizontal)});i.bounced&&(void 0!==i.velocity&&(e.velocity.x=i.velocity),void 0!==i.position&&(e.position.x=i.position));const r=Rn({pSide:{min:n.top,max:n.bottom},pOtherSide:{min:n.left,max:n.right},rectSide:{min:t.top,max:t.bottom},rectOtherSide:{min:t.left,max:t.right},velocity:e.velocity.y,factor:yn(e.options.bounce.vertical)});r.bounced&&(void 0!==r.velocity&&(e.velocity.y=r.velocity),void 0!==r.position&&(e.position.y=r.position))}function Hn(e,t){return ei(e)?e.map(((e,n)=>t(e,n))):t(e,0)}function Wn(e,t,n){return ei(e)?On(e,t,n):e}function Gn(e,t){return ei(e)?e.find(((e,n)=>t(e,n))):t(e,0)?e:void 0}function qn(e,t){const n=e.value,i=e.animation,r={delayTime:1e3*fn(i.delay),enable:i.enable,value:fn(e.value)*t,max:mn(n)*t,min:vn(n)*t,loops:0,maxLoops:fn(i.count),time:0};if(i.enable){switch(r.decay=1-fn(i.decay),i.mode){case"increase":r.status="increasing";break;case"decrease":r.status="decreasing";break;case"random":r.status=un()>=.5?"increasing":"decreasing"}const e="auto"===i.mode;switch(i.startValue){case"min":r.value=r.min,e&&(r.status="increasing");break;case"max":r.value=r.max,e&&(r.status="decreasing");break;default:r.value=pn(r),e&&(r.status=un()>=.5?"increasing":"decreasing")}}return r.initialValue=r.value,r}function Xn(e,t){if(!("percent"===e.mode)){const{mode:t,...n}=e;return n}return"x"in e?{x:e.x/100*t.width,y:e.y/100*t.height}:{width:e.width/100*t.width,height:e.height/100*t.height}}function Kn(e,t){return Xn(e,t)}function Jn(e){return"boolean"===typeof e}function Yn(e){return"string"===typeof e}function $n(e){return"number"===typeof e}function Qn(e){return"function"===typeof e}function Zn(e){return"object"===typeof e&&null!==e}function ei(e){return Array.isArray(e)}const ti="random",ni="mid",ii=new Map;function ri(e){ii.set(e.key,e)}function oi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function si(e){for(const[,i]of ii)if(e.startsWith(i.stringPrefix))return i.parseString(e);const t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,((e,t,n,i,r)=>t+t+n+n+i+i+(void 0!==r?r+r:""))),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(t);return n?{a:void 0!==n[4]?parseInt(n[4],16)/255:1,b:parseInt(n[3],16),g:parseInt(n[2],16),r:parseInt(n[1],16)}:void 0}function ai(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return;const i=Yn(e)?{value:e}:e;if(Yn(i.value))return ci(i.value,t,n);if(ei(i.value))return ai({value:On(i.value,t,n)});for(const[,r]of ii){const e=r.handleRangeColor(i);if(e)return e}}function ci(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return;const i=Yn(e)?{value:e}:e;if(Yn(i.value))return i.value===ti?hi():function(e){return si(e)}(i.value);if(ei(i.value))return ci({value:On(i.value,t,n)});for(const[,r]of ii){const e=r.handleColor(i);if(e)return e}}function li(e,t){const n=ai(e,t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2]);return n?ui(n):void 0}function ui(e){const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),o=Math.min(t,n,i),s={h:0,l:(r+o)/2,s:0};return r!==o&&(s.s=s.l<.5?(r-o)/(r+o):(r-o)/(2-r-o),s.h=t===r?(n-i)/(r-o):s.h=n===r?2+(i-t)/(r-o):4+(t-n)/(r-o)),s.l*=100,s.s*=100,s.h*=60,s.h<0&&(s.h+=360),s.h>=360&&(s.h-=360),s}function di(e){const t={b:0,g:0,r:0},n={h:e.h/360,l:e.l/100,s:e.s/100};if(n.s){const e=n.l<.5?n.l*(1+n.s):n.l+n.s-n.l*n.s,i=2*n.l-e;t.r=oi(i,e,n.h+1/3),t.g=oi(i,e,n.h),t.b=oi(i,e,n.h-1/3)}else t.r=t.g=t.b=n.l;return t.r=Math.floor(255*t.r),t.g=Math.floor(255*t.g),t.b=Math.floor(255*t.b),t}function hi(e){const t=null!==e&&void 0!==e?e:0;return{b:Math.floor(pn(gn(t,256))),g:Math.floor(pn(gn(t,256))),r:Math.floor(pn(gn(t,256)))}}function pi(e,t){return"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(null!==t&&void 0!==t?t:1,")")}function fi(e,t){return"hsla(".concat(e.h,", ").concat(e.s,"%, ").concat(e.l,"%, ").concat(null!==t&&void 0!==t?t:1,")")}function vi(e,t,n,i){let r=e,o=t;return void 0===r.r&&(r=di(e)),void 0===o.r&&(o=di(t)),{b:hn(r.b,o.b,n,i),g:hn(r.g,o.g,n,i),r:hn(r.r,o.r,n,i)}}function mi(e,t,n){if(n===ti)return hi();if(n!==ni)return n;{var i,r;const n=null!==(i=e.getFillColor())&&void 0!==i?i:e.getStrokeColor(),o=null!==(r=null===t||void 0===t?void 0:t.getFillColor())&&void 0!==r?r:null===t||void 0===t?void 0:t.getStrokeColor();if(n&&o&&t)return vi(n,o,e.getRadius(),t.getRadius());{const e=null!==n&&void 0!==n?n:o;if(e)return di(e)}}}function gi(e,t,n){const i=Yn(e)?e:e.value;return i===ti?n?ai({value:i}):t?ti:ni:i===ni?ni:ai({value:i})}function yi(e){return void 0!==e?{h:e.h.value,s:e.s.value,l:e.l.value}:void 0}function Si(e,t,n){const i={h:{enable:!1,value:e.h},s:{enable:!1,value:e.s},l:{enable:!1,value:e.l}};return t&&(bi(i.h,t.h,n),bi(i.s,t.s,n),bi(i.l,t.l,n)),i}function bi(e,t,n){e.enable=t.enable,e.enable?(e.velocity=fn(t.speed)/100*n,e.decay=1-fn(t.decay),e.status="increasing",e.loops=0,e.maxLoops=fn(t.count),e.time=0,e.delayTime=1e3*fn(t.delay),t.sync||(e.velocity*=un(),e.value*=un()),e.initialValue=e.value):e.velocity=0}function _i(e,t,n){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.closePath()}function wi(e,t){e.clearRect(0,0,t.width,t.height)}function xi(e,t,n){const i=t[n];var r;void 0!==i&&(e[n]=(null!==(r=e[n])&&void 0!==r?r:1)*i)}class Ci{constructor(e){this.container=e,this._applyPostDrawUpdaters=e=>{for(const t of this._postDrawUpdaters)t.afterDraw&&t.afterDraw(e)},this._applyPreDrawUpdaters=(e,t,n,i,r,o)=>{for(const s of this._preDrawUpdaters){if(s.getColorStyles){const{fill:o,stroke:a}=s.getColorStyles(t,e,n,i);o&&(r.fill=o),a&&(r.stroke=a)}if(s.getTransformValues){const e=s.getTransformValues(t);for(const t in e)xi(o,e,t)}s.beforeDraw&&s.beforeDraw(t)}},this._applyResizePlugins=()=>{for(const e of this._resizePlugins)e.resize&&e.resize()},this._getPluginParticleColors=e=>{let t,n;for(const i of this._colorPlugins)if(!t&&i.particleFillColor&&(t=li(i.particleFillColor(e))),!n&&i.particleStrokeColor&&(n=li(i.particleStrokeColor(e))),t&&n)break;return[t,n]},this._initCover=()=>{const e=this.container.actualOptions.backgroundMask.cover,t=ai(e.color);if(t){const n={...t,a:e.opacity};this._coverColorStyle=pi(n,n.a)}},this._initStyle=()=>{const e=this.element,t=this.container.actualOptions;if(e){this._fullScreen?(this._originalStyle=Nn({},e.style),this._setFullScreenStyle()):this._resetOriginalStyle();for(const n in t.style){if(!n||!t.style)continue;const i=t.style[n];i&&e.style.setProperty(n,i,"important")}}},this._initTrail=async()=>{const e=this.container.actualOptions,t=e.particles.move.trail,n=t.fill;if(t.enable)if(n.color){const t=ai(n.color);if(!t)return;const i=e.particles.move.trail;this._trailFill={color:{...t},opacity:1/i.length}}else await new Promise(((e,i)=>{if(!n.image)return;const r=document.createElement("img");r.addEventListener("load",(()=>{this._trailFill={image:r,opacity:1/t.length},e()})),r.addEventListener("error",(e=>{i(e.error)})),r.src=n.image}))},this._paintBase=e=>{this.draw((t=>function(e,t,n){e.fillStyle=null!==n&&void 0!==n?n:"rgba(0,0,0,0)",e.fillRect(0,0,t.width,t.height)}(t,this.size,e)))},this._paintImage=(e,t)=>{this.draw((n=>function(e,t,n,i){n&&(e.globalAlpha=i,e.drawImage(n,0,0,t.width,t.height),e.globalAlpha=1)}(n,this.size,e,t)))},this._repairStyle=()=>{const e=this.element;e&&(this._safeMutationObserver((e=>e.disconnect())),this._initStyle(),this.initBackground(),this._safeMutationObserver((t=>t.observe(e,{attributes:!0}))))},this._resetOriginalStyle=()=>{const e=this.element,t=this._originalStyle;if(!e||!t)return;const n=e.style;n.position=t.position,n.zIndex=t.zIndex,n.top=t.top,n.left=t.left,n.width=t.width,n.height=t.height},this._safeMutationObserver=e=>{this._mutationObserver&&e(this._mutationObserver)},this._setFullScreenStyle=()=>{const e=this.element;if(!e)return;const t="important",n=e.style;n.setProperty("position","fixed",t),n.setProperty("z-index",this.container.actualOptions.fullScreen.zIndex.toString(10),t),n.setProperty("top","0",t),n.setProperty("left","0",t),n.setProperty("width","100%",t),n.setProperty("height","100%",t)},this.size={height:0,width:0},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const e=this.container.actualOptions,t=e.particles.move.trail,n=this._trailFill;e.backgroundMask.enable?this.paint():t.enable&&t.length>0&&n?n.color?this._paintBase(pi(n.color,n.opacity)):n.image&&this._paintImage(n.image,n.opacity):this.draw((e=>{wi(e,this.size)}))}destroy(){if(this.stop(),this._generated){const e=this.element;e&&e.remove()}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(e){const t=this._context;if(t)return e(t)}drawParticle(e,t){var n;if(e.spawning||e.destroyed)return;const i=e.getRadius();if(i<=0)return;const r=e.getFillColor(),o=null!==(n=e.getStrokeColor())&&void 0!==n?n:r;let[s,a]=this._getPluginParticleColors(e);s||(s=r),a||(a=o),(s||a)&&this.draw((n=>{var r,o,c,l;const u=this.container,d=u.actualOptions,h=e.options.zIndex,p=(1-e.zIndexFactor)**h.opacityRate,f=null!==(r=null!==(o=e.bubble.opacity)&&void 0!==o?o:null===(c=e.opacity)||void 0===c?void 0:c.value)&&void 0!==r?r:1,v=f*p,m=(null!==(l=e.strokeOpacity)&&void 0!==l?l:f)*p,g={},y={fill:s?fi(s,v):void 0};y.stroke=a?fi(a,m):y.fill,this._applyPreDrawUpdaters(n,e,i,v,y,g),function(e){var t,n,i,r,o;const{container:s,context:a,particle:c,delta:l,colorStyles:u,backgroundMask:d,composite:h,radius:p,opacity:f,shadow:v,transform:m}=e,g=c.getPosition(),y=c.rotation+(c.pathRotation?c.velocity.angle:0),S=Math.sin(y),b=Math.cos(y),_={a:b*(null!==(t=m.a)&&void 0!==t?t:1),b:S*(null!==(n=m.b)&&void 0!==n?n:1),c:-S*(null!==(i=m.c)&&void 0!==i?i:1),d:b*(null!==(r=m.d)&&void 0!==r?r:1)};a.setTransform(_.a,_.b,_.c,_.d,g.x,g.y),a.beginPath(),d&&(a.globalCompositeOperation=h);const w=c.shadowColor;v.enable&&w&&(a.shadowBlur=v.blur,a.shadowColor=pi(w),a.shadowOffsetX=v.offset.x,a.shadowOffsetY=v.offset.y),u.fill&&(a.fillStyle=u.fill);const x=null!==(o=c.strokeWidth)&&void 0!==o?o:0;a.lineWidth=x,u.stroke&&(a.strokeStyle=u.stroke),function(e,t,n,i,r,o){if(!n.shape)return;const s=e.drawers.get(n.shape);s&&s.draw(t,n,i,r,o,e.retina.pixelRatio)}(s,a,c,p,f,l),x>0&&a.stroke(),c.close&&a.closePath(),c.fill&&a.fill(),function(e,t,n,i,r,o){if(!n.shape)return;const s=e.drawers.get(n.shape);s&&s.afterEffect&&s.afterEffect(t,n,i,r,o,e.retina.pixelRatio)}(s,a,c,p,f,l),a.globalCompositeOperation="source-over",a.setTransform(1,0,0,1,0,0)}({container:u,context:n,particle:e,delta:t,colorStyles:y,backgroundMask:d.backgroundMask.enable,composite:d.backgroundMask.composite,radius:i*(1-e.zIndexFactor)**h.sizeRate,opacity:v,shadow:e.options.shadow,transform:g}),this._applyPostDrawUpdaters(e)}))}drawParticlePlugin(e,t,n){this.draw((i=>function(e,t,n,i){t.drawParticle&&t.drawParticle(e,n,i)}(i,e,t,n)))}drawPlugin(e,t){this.draw((n=>function(e,t,n){t.draw&&t.draw(e,n)}(n,e,t)))}async init(){this._safeMutationObserver((e=>e.disconnect())),this._mutationObserver=function(e){if(!Mn()&&"undefined"!==typeof MutationObserver)return new MutationObserver(e)}((e=>{for(const t of e)"attributes"===t.type&&"style"===t.attributeName&&this._repairStyle()})),this.resize(),this._initStyle(),this._initCover();try{await this._initTrail()}catch(e){Tn().error(e)}this.initBackground(),this._safeMutationObserver((e=>{this.element&&e.observe(this.element,{attributes:!0})})),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const e=this.container.actualOptions.background,t=this.element;if(!t)return;const n=t.style;if(n){if(e.color){const t=ai(e.color);n.backgroundColor=t?pi(t,e.opacity):""}else n.backgroundColor="";n.backgroundImage=e.image||"",n.backgroundPosition=e.position||"",n.backgroundRepeat=e.repeat||"",n.backgroundSize=e.size||""}}initPlugins(){this._resizePlugins=[];for(const[,e]of this.container.plugins)e.resize&&this._resizePlugins.push(e),(e.particleFillColor||e.particleStrokeColor)&&this._colorPlugins.push(e)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const e of this.container.particles.updaters)e.afterDraw&&this._postDrawUpdaters.push(e),(e.getColorStyles||e.getTransformValues||e.beforeDraw)&&this._preDrawUpdaters.push(e)}loadCanvas(e){this._generated&&this.element&&this.element.remove(),this._generated=e.dataset&&Qt in e.dataset?"true"===e.dataset[Qt]:this._generated,this.element=e,this.element.ariaHidden="true",this._originalStyle=Nn({},this.element.style),this.size.height=e.offsetHeight,this.size.width=e.offsetWidth,this._context=this.element.getContext("2d"),this._safeMutationObserver((e=>{this.element&&e.observe(this.element,{attributes:!0})})),this.container.retina.init(),this.initBackground()}paint(){const e=this.container.actualOptions;this.draw((t=>{e.backgroundMask.enable&&e.backgroundMask.cover?(wi(t,this.size),this._paintBase(this._coverColorStyle)):this._paintBase()}))}resize(){if(!this.element)return!1;const e=this.container,t=e.retina.pixelRatio,n=e.canvas.size,i=this.element.offsetWidth*t,r=this.element.offsetHeight*t;if(r===n.height&&i===n.width&&r===this.element.height&&i===this.element.width)return!1;const o={...n};return this.element.width=n.width=this.element.offsetWidth*t,this.element.height=n.height=this.element.offsetHeight*t,this.container.started&&(this.resizeFactor={width:n.width/o.width,height:n.height/o.height}),!0}stop(){this._safeMutationObserver((e=>e.disconnect())),this._mutationObserver=void 0,this.draw((e=>wi(e,this.size)))}async windowResize(){if(!this.element||!this.resize())return;const e=this.container,t=e.updateActualOptions();e.particles.setDensity(),this._applyResizePlugins(),t&&await e.refresh()}}function Ei(e,t,n,i,r){if(i){let i={passive:!0};Jn(r)?i.capture=r:void 0!==r&&(i=r),e.addEventListener(t,n,i)}else{const i=r;e.removeEventListener(t,n,i)}}class Pi{constructor(e){this.container=e,this._doMouseTouchClick=e=>{const t=this.container,n=t.actualOptions;if(this._canPush){const e=t.interactivity.mouse,i=e.position;if(!i)return;e.clickPosition={...i},e.clickTime=(new Date).getTime();Hn(n.interactivity.events.onClick.mode,(e=>this.container.handleClickMode(e)))}"touchend"===e.type&&setTimeout((()=>this._mouseTouchFinish()),500)},this._handleThemeChange=e=>{const t=e,n=this.container,i=n.options,r=i.defaultThemes,o=t.matches?r.dark:r.light,s=i.themes.find((e=>e.name===o));s&&s.default.auto&&n.loadTheme(o)},this._handleVisibilityChange=()=>{const e=this.container,t=e.actualOptions;this._mouseTouchFinish(),t.pauseOnBlur&&(document&&document.hidden?(e.pageHidden=!0,e.pause()):(e.pageHidden=!1,e.getAnimationStatus()?e.play(!0):e.draw(!0)))},this._handleWindowResize=async()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout),this._resizeTimeout=setTimeout((async()=>{const e=this.container.canvas;e&&await e.windowResize()}),1e3*this.container.actualOptions.interactivity.events.resize.delay)},this._manageInteractivityListeners=(e,t)=>{const n=this._handlers,i=this.container,r=i.actualOptions,o=i.interactivity.element;if(!o)return;const s=o,a=i.canvas.element;a&&(a.style.pointerEvents=s===a?"initial":"none"),(r.interactivity.events.onHover.enable||r.interactivity.events.onClick.enable)&&(Ei(o,en,n.mouseMove,t),Ei(o,"touchstart",n.touchStart,t),Ei(o,"touchmove",n.touchMove,t),r.interactivity.events.onClick.enable?(Ei(o,tn,n.touchEndClick,t),Ei(o,"pointerup",n.mouseUp,t),Ei(o,"pointerdown",n.mouseDown,t)):Ei(o,tn,n.touchEnd,t),Ei(o,e,n.mouseLeave,t),Ei(o,"touchcancel",n.touchCancel,t))},this._manageListeners=e=>{const t=this._handlers,n=this.container,i=n.actualOptions.interactivity.detectsOn,r=n.canvas.element;let o=Zt;if("window"===i)n.interactivity.element=window,o="pointerout";else if("parent"===i&&r){var s;n.interactivity.element=null!==(s=r.parentElement)&&void 0!==s?s:r.parentNode}else n.interactivity.element=r;this._manageMediaMatch(e),this._manageResize(e),this._manageInteractivityListeners(o,e),document&&Ei(document,"visibilitychange",t.visibilityChange,e,!1)},this._manageMediaMatch=e=>{const t=this._handlers,n=An("(prefers-color-scheme: dark)");n&&(void 0===n.addEventListener?void 0!==n.addListener&&(e?n.addListener(t.oldThemeChange):n.removeListener(t.oldThemeChange)):Ei(n,"change",t.themeChange,e))},this._manageResize=e=>{const t=this._handlers,n=this.container;if(!n.actualOptions.interactivity.events.resize)return;if("undefined"===typeof ResizeObserver)return void Ei(window,"resize",t.resize,e);const i=n.canvas.element;this._resizeObserver&&!e?(i&&this._resizeObserver.unobserve(i),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&e&&i&&(this._resizeObserver=new ResizeObserver((async e=>{e.find((e=>e.target===i))&&await this._handleWindowResize()})),this._resizeObserver.observe(i))},this._mouseDown=()=>{const{interactivity:e}=this.container;if(!e)return;const{mouse:t}=e;t.clicking=!0,t.downPosition=t.position},this._mouseTouchClick=e=>{const t=this.container,n=t.actualOptions,{mouse:i}=t.interactivity;i.inside=!0;let r=!1;const o=i.position;if(o&&n.interactivity.events.onClick.enable){for(const[,e]of t.plugins)if(e.clickPositionValid&&(r=e.clickPositionValid(o),r))break;r||this._doMouseTouchClick(e),i.clicking=!1}},this._mouseTouchFinish=()=>{const e=this.container.interactivity;if(!e)return;const t=e.mouse;delete t.position,delete t.clickPosition,delete t.downPosition,e.status=Zt,t.inside=!1,t.clicking=!1},this._mouseTouchMove=e=>{const t=this.container,n=t.actualOptions,i=t.interactivity,r=t.canvas.element;if(!i||!i.element)return;let o;if(i.mouse.inside=!0,e.type.startsWith("pointer")){this._canPush=!0;const t=e;if(i.element===window){if(r){const e=r.getBoundingClientRect();o={x:t.clientX-e.left,y:t.clientY-e.top}}}else if("parent"===n.interactivity.detectsOn){const e=t.target,n=t.currentTarget;if(e&&n&&r){const i=e.getBoundingClientRect(),s=n.getBoundingClientRect(),a=r.getBoundingClientRect();o={x:t.offsetX+2*i.left-(s.left+a.left),y:t.offsetY+2*i.top-(s.top+a.top)}}else{var s,a;o={x:null!==(s=t.offsetX)&&void 0!==s?s:t.clientX,y:null!==(a=t.offsetY)&&void 0!==a?a:t.clientY}}}else if(t.target===r){var c,l;o={x:null!==(c=t.offsetX)&&void 0!==c?c:t.clientX,y:null!==(l=t.offsetY)&&void 0!==l?l:t.clientY}}}else if(this._canPush="touchmove"!==e.type,r){var u,d;const t=e,n=t.touches[t.touches.length-1],i=r.getBoundingClientRect();o={x:n.clientX-(null!==(u=i.left)&&void 0!==u?u:0),y:n.clientY-(null!==(d=i.top)&&void 0!==d?d:0)}}const h=t.retina.pixelRatio;o&&(o.x*=h,o.y*=h),i.mouse.position=o,i.status=en},this._touchEnd=e=>{const t=e,n=Array.from(t.changedTouches);for(const i of n)this._touches.delete(i.identifier);this._mouseTouchFinish()},this._touchEndClick=e=>{const t=e,n=Array.from(t.changedTouches);for(const i of n)this._touches.delete(i.identifier);this._mouseTouchClick(e)},this._touchStart=e=>{const t=e,n=Array.from(t.changedTouches);for(const i of n)this._touches.set(i.identifier,performance.now());this._mouseTouchMove(e)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:e=>this._mouseTouchMove(e),mouseUp:e=>this._mouseTouchClick(e),touchStart:e=>this._touchStart(e),touchMove:e=>this._mouseTouchMove(e),touchEnd:e=>this._touchEnd(e),touchCancel:e=>this._touchEnd(e),touchEndClick:e=>this._touchEndClick(e),visibilityChange:()=>this._handleVisibilityChange(),themeChange:e=>this._handleThemeChange(e),oldThemeChange:e=>this._handleThemeChange(e),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}class Ti{constructor(){this.value=""}static create(e,t){const n=new Ti;return n.load(e),void 0!==t&&(Yn(t)||ei(t)?n.load({value:t}):n.load(t)),n}load(e){void 0!==(null===e||void 0===e?void 0:e.value)&&(this.value=e.value)}}class Ri{constructor(){this.color=new Ti,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(e){e&&(void 0!==e.color&&(this.color=Ti.create(this.color,e.color)),void 0!==e.image&&(this.image=e.image),void 0!==e.position&&(this.position=e.position),void 0!==e.repeat&&(this.repeat=e.repeat),void 0!==e.size&&(this.size=e.size),void 0!==e.opacity&&(this.opacity=e.opacity))}}class Mi{constructor(){this.color=new Ti,this.color.value="#fff",this.opacity=1}load(e){e&&(void 0!==e.color&&(this.color=Ti.create(this.color,e.color)),void 0!==e.opacity&&(this.opacity=e.opacity))}}class Ai{constructor(){this.composite="destination-out",this.cover=new Mi,this.enable=!1}load(e){if(e){if(void 0!==e.composite&&(this.composite=e.composite),void 0!==e.cover){const t=e.cover,n=Yn(e.cover)?{color:e.cover}:e.cover;this.cover.load(void 0!==t.color?t:{color:n})}void 0!==e.enable&&(this.enable=e.enable)}}}class Ii{constructor(){this.enable=!0,this.zIndex=0}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.zIndex&&(this.zIndex=e.zIndex))}}class ki{constructor(){this.enable=!1,this.mode=[]}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.mode&&(this.mode=e.mode))}}class Oi{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type="circle"}get el(){return this.elementId}set el(e){this.elementId=e}get elementId(){return this.ids}set elementId(e){this.ids=e}get ids(){return Hn(this.selectors,(e=>e.replace("#","")))}set ids(e){this.selectors=Hn(e,(e=>"#".concat(e)))}load(e){var t,n;if(!e)return;const i=null!==(t=null!==(n=e.ids)&&void 0!==n?n:e.elementId)&&void 0!==t?t:e.el;void 0!==i&&(this.ids=i),void 0!==e.selectors&&(this.selectors=e.selectors),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.type&&(this.type=e.type)}}class Di{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.force&&(this.force=e.force),void 0!==e.smooth&&(this.smooth=e.smooth))}}class Li{constructor(){this.enable=!1,this.mode=[],this.parallax=new Di}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.mode&&(this.mode=e.mode),this.parallax.load(e.parallax))}}class Ni{constructor(){this.delay=.5,this.enable=!0}load(e){void 0!==e&&(void 0!==e.delay&&(this.delay=e.delay),void 0!==e.enable&&(this.enable=e.enable))}}class zi{constructor(){this.onClick=new ki,this.onDiv=new Oi,this.onHover=new Li,this.resize=new Ni}get onclick(){return this.onClick}set onclick(e){this.onClick=e}get ondiv(){return this.onDiv}set ondiv(e){this.onDiv=e}get onhover(){return this.onHover}set onhover(e){this.onHover=e}load(e){var t,n,i;if(!e)return;this.onClick.load(null!==(t=e.onClick)&&void 0!==t?t:e.onclick);const r=null!==(n=e.onDiv)&&void 0!==n?n:e.ondiv;void 0!==r&&(this.onDiv=Hn(r,(e=>{const t=new Oi;return t.load(e),t}))),this.onHover.load(null!==(i=e.onHover)&&void 0!==i?i:e.onhover),Jn(e.resize)?this.resize.enable=e.resize:this.resize.load(e.resize)}}class Fi{constructor(e,t){this._engine=e,this._container=t}load(e){if(!e)return;if(!this._container)return;const t=this._engine.plugins.interactors.get(this._container);if(t)for(const n of t)n.loadModeOptions&&n.loadModeOptions(this,e)}}class Ui{constructor(e,t){this.detectsOn="window",this.events=new zi,this.modes=new Fi(e,t)}get detect_on(){return this.detectsOn}set detect_on(e){this.detectsOn=e}load(e){var t;if(!e)return;const n=null!==(t=e.detectsOn)&&void 0!==t?t:e.detect_on;void 0!==n&&(this.detectsOn=n),this.events.load(e.events),this.modes.load(e.modes)}}class Bi{load(e){if(e){var t,n,i;if(e.position)this.position={x:null!==(t=e.position.x)&&void 0!==t?t:50,y:null!==(n=e.position.y)&&void 0!==n?n:50,mode:null!==(i=e.position.mode)&&void 0!==i?i:"percent"};e.options&&(this.options=Nn({},e.options))}}}class ji{constructor(){this.maxWidth=1/0,this.options={},this.mode="canvas"}load(e){e&&(void 0!==e.maxWidth&&(this.maxWidth=e.maxWidth),void 0!==e.mode&&("screen"===e.mode?this.mode="screen":this.mode="canvas"),void 0!==e.options&&(this.options=Nn({},e.options)))}}class Vi{constructor(){this.auto=!1,this.mode="any",this.value=!1}load(e){e&&(void 0!==e.auto&&(this.auto=e.auto),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.value&&(this.value=e.value))}}class Hi{constructor(){this.name="",this.default=new Vi}load(e){e&&(void 0!==e.name&&(this.name=e.name),this.default.load(e.default),void 0!==e.options&&(this.options=Nn({},e.options)))}}class Wi{constructor(){this.count=0,this.enable=!1,this.offset=0,this.speed=1,this.delay=0,this.decay=0,this.sync=!0}load(e){e&&(void 0!==e.count&&(this.count=gn(e.count)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.offset&&(this.offset=gn(e.offset)),void 0!==e.speed&&(this.speed=gn(e.speed)),void 0!==e.decay&&(this.decay=gn(e.decay)),void 0!==e.delay&&(this.delay=gn(e.delay)),void 0!==e.sync&&(this.sync=e.sync))}}class Gi{constructor(){this.h=new Wi,this.s=new Wi,this.l=new Wi}load(e){e&&(this.h.load(e.h),this.s.load(e.s),this.l.load(e.l))}}class qi extends Ti{constructor(){super(),this.animation=new Gi}static create(e,t){const n=new qi;return n.load(e),void 0!==t&&(Yn(t)||ei(t)?n.load({value:t}):n.load(t)),n}load(e){if(super.load(e),!e)return;const t=e.animation;void 0!==t&&(void 0!==t.enable?this.animation.h.load(t):this.animation.load(e.animation))}}class Xi{constructor(){this.speed=2}load(e){e&&void 0!==e.speed&&(this.speed=e.speed)}}class Ki{constructor(){this.enable=!0,this.retries=0}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.retries&&(this.retries=e.retries))}}class Ji{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(e){e&&(void 0!==e.count&&(this.count=gn(e.count)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.speed&&(this.speed=gn(e.speed)),void 0!==e.decay&&(this.decay=gn(e.decay)),void 0!==e.delay&&(this.delay=gn(e.delay)),void 0!==e.sync&&(this.sync=e.sync))}}class Yi extends Ji{constructor(){super(),this.mode="auto",this.startValue="random"}load(e){super.load(e),e&&(void 0!==e.minimumValue&&(this.minimumValue=e.minimumValue),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.startValue&&(this.startValue=e.startValue))}}class $i{constructor(){this.enable=!1,this.minimumValue=0}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.minimumValue&&(this.minimumValue=e.minimumValue))}}class Qi{constructor(){this.random=new $i,this.value=0}load(e){e&&(Jn(e.random)?this.random.enable=e.random:this.random.load(e.random),void 0!==e.value&&(this.value=gn(e.value,this.random.enable?this.random.minimumValue:void 0)))}}class Zi extends Qi{constructor(){super(),this.random.minimumValue=.1,this.value=1}}class er{constructor(){this.horizontal=new Zi,this.vertical=new Zi}load(e){e&&(this.horizontal.load(e.horizontal),this.vertical.load(e.vertical))}}class tr{constructor(){this.absorb=new Xi,this.bounce=new er,this.enable=!1,this.maxSpeed=50,this.mode="bounce",this.overlap=new Ki}load(e){e&&(this.absorb.load(e.absorb),this.bounce.load(e.bounce),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.maxSpeed&&(this.maxSpeed=gn(e.maxSpeed)),void 0!==e.mode&&(this.mode=e.mode),this.overlap.load(e.overlap))}}class nr{constructor(){this.offset=0,this.value=90}load(e){e&&(void 0!==e.offset&&(this.offset=gn(e.offset)),void 0!==e.value&&(this.value=gn(e.value)))}}class ir{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}get rotateX(){return this.rotate.x}set rotateX(e){this.rotate.x=e}get rotateY(){return this.rotate.y}set rotateY(e){this.rotate.y=e}load(e){var t,n,i,r;if(!e)return;void 0!==e.distance&&(this.distance=gn(e.distance)),void 0!==e.enable&&(this.enable=e.enable);const o=null!==(t=null===(n=e.rotate)||void 0===n?void 0:n.x)&&void 0!==t?t:e.rotateX;void 0!==o&&(this.rotate.x=o);const s=null!==(i=null===(r=e.rotate)||void 0===r?void 0:r.y)&&void 0!==i?i:e.rotateY;void 0!==s&&(this.rotate.y=s)}}class rr{constructor(){this.x=50,this.y=50,this.mode="percent",this.radius=0}load(e){e&&(void 0!==e.x&&(this.x=e.x),void 0!==e.y&&(this.y=e.y),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.radius&&(this.radius=e.radius))}}class or{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(e){e&&(void 0!==e.acceleration&&(this.acceleration=gn(e.acceleration)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.inverse&&(this.inverse=e.inverse),void 0!==e.maxSpeed&&(this.maxSpeed=gn(e.maxSpeed)))}}class sr{constructor(){this.clamp=!0,this.delay=new Qi,this.enable=!1,this.options={}}load(e){e&&(void 0!==e.clamp&&(this.clamp=e.clamp),this.delay.load(e.delay),void 0!==e.enable&&(this.enable=e.enable),this.generator=e.generator,e.options&&(this.options=Nn(this.options,e.options)))}}class ar{load(e){e&&(void 0!==e.color&&(this.color=Ti.create(this.color,e.color)),void 0!==e.image&&(this.image=e.image))}}class cr{constructor(){this.enable=!1,this.length=10,this.fill=new ar}get fillColor(){return this.fill.color}set fillColor(e){this.fill.load({color:e})}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0===e.fill&&void 0===e.fillColor||this.fill.load(e.fill||{color:e.fillColor}),void 0!==e.length&&(this.length=e.length))}}class lr{constructor(){this.default="out"}load(e){var t,n,i,r;e&&(void 0!==e.default&&(this.default=e.default),this.bottom=null!==(t=e.bottom)&&void 0!==t?t:e.default,this.left=null!==(n=e.left)&&void 0!==n?n:e.default,this.right=null!==(i=e.right)&&void 0!==i?i:e.default,this.top=null!==(r=e.top)&&void 0!==r?r:e.default)}}class ur{constructor(){this.acceleration=0,this.enable=!1}load(e){e&&(void 0!==e.acceleration&&(this.acceleration=gn(e.acceleration)),void 0!==e.enable&&(this.enable=e.enable),e.position&&(this.position=Nn({},e.position)))}}class dr{constructor(){this.angle=new nr,this.attract=new ir,this.center=new rr,this.decay=0,this.distance={},this.direction="none",this.drift=0,this.enable=!1,this.gravity=new or,this.path=new sr,this.outModes=new lr,this.random=!1,this.size=!1,this.speed=2,this.spin=new ur,this.straight=!1,this.trail=new cr,this.vibrate=!1,this.warp=!1}get bounce(){return this.collisions}set bounce(e){this.collisions=e}get collisions(){return!1}set collisions(e){}get noise(){return this.path}set noise(e){this.path=e}get outMode(){return this.outModes.default}set outMode(e){this.outModes.default=e}get out_mode(){return this.outMode}set out_mode(e){this.outMode=e}load(e){var t,n,i;if(!e)return;this.angle.load($n(e.angle)?{value:e.angle}:e.angle),this.attract.load(e.attract),this.center.load(e.center),void 0!==e.decay&&(this.decay=gn(e.decay)),void 0!==e.direction&&(this.direction=e.direction),void 0!==e.distance&&(this.distance=$n(e.distance)?{horizontal:e.distance,vertical:e.distance}:{...e.distance}),void 0!==e.drift&&(this.drift=gn(e.drift)),void 0!==e.enable&&(this.enable=e.enable),this.gravity.load(e.gravity);const r=null!==(t=null!==(n=e.outModes)&&void 0!==n?n:e.outMode)&&void 0!==t?t:e.out_mode;void 0!==r&&(Zn(r)?this.outModes.load(r):this.outModes.load({default:r})),this.path.load(null!==(i=e.path)&&void 0!==i?i:e.noise),void 0!==e.random&&(this.random=e.random),void 0!==e.size&&(this.size=e.size),void 0!==e.speed&&(this.speed=gn(e.speed)),this.spin.load(e.spin),void 0!==e.straight&&(this.straight=e.straight),this.trail.load(e.trail),void 0!==e.vibrate&&(this.vibrate=e.vibrate),void 0!==e.warp&&(this.warp=e.warp)}}class hr extends Yi{constructor(){super(),this.destroy="none",this.speed=2}get opacity_min(){return this.minimumValue}set opacity_min(e){this.minimumValue=e}load(e){void 0!==(null===e||void 0===e?void 0:e.opacity_min)&&void 0===e.minimumValue&&(e.minimumValue=e.opacity_min),super.load(e),e&&void 0!==e.destroy&&(this.destroy=e.destroy)}}class pr extends Qi{constructor(){super(),this.animation=new hr,this.random.minimumValue=.1,this.value=1}get anim(){return this.animation}set anim(e){this.animation=e}load(e){var t;if(!e)return;super.load(e);const n=null!==(t=e.animation)&&void 0!==t?t:e.anim;void 0!==n&&(this.animation.load(n),this.value=gn(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class fr{constructor(){this.enable=!1,this.width=1920,this.height=1080}get area(){return this.width}set area(e){this.width=e}get factor(){return this.height}set factor(e){this.height=e}get value_area(){return this.area}set value_area(e){this.area=e}load(e){var t,n,i;if(!e)return;void 0!==e.enable&&(this.enable=e.enable);const r=null!==(t=null!==(n=e.width)&&void 0!==n?n:e.area)&&void 0!==t?t:e.value_area;void 0!==r&&(this.width=r);const o=null!==(i=e.height)&&void 0!==i?i:e.factor;void 0!==o&&(this.height=o)}}class vr{constructor(){this.density=new fr,this.limit=0,this.value=0}get max(){return this.limit}set max(e){this.limit=e}load(e){var t;if(!e)return;this.density.load(e.density);const n=null!==(t=e.limit)&&void 0!==t?t:e.max;void 0!==n&&(this.limit=n),void 0!==e.value&&(this.value=e.value)}}class mr{constructor(){this.blur=0,this.color=new Ti,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(e){e&&(void 0!==e.blur&&(this.blur=e.blur),this.color=Ti.create(this.color,e.color),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.offset&&(void 0!==e.offset.x&&(this.offset.x=e.offset.x),void 0!==e.offset.y&&(this.offset.y=e.offset.y)))}}const gr="character",yr="char",Sr="image",br="images",_r="polygon",wr="star";class xr{constructor(){this.loadShape=(e,t,n,i)=>{var r;if(!e)return;const o=ei(e),s=o?[]:{},a=o!==ei(this.options[t]),c=o!==ei(this.options[n]);var l;(a&&(this.options[t]=s),c&&i&&(this.options[n]=s),this.options[t]=Nn(null!==(r=this.options[t])&&void 0!==r?r:s,e),!this.options[n]||i)&&(this.options[n]=Nn(null!==(l=this.options[n])&&void 0!==l?l:s,e))},this.close=!0,this.fill=!0,this.options={},this.type="circle"}get character(){var e;return null!==(e=this.options[gr])&&void 0!==e?e:this.options[yr]}set character(e){this.options[yr]=this.options[gr]=e}get custom(){return this.options}set custom(e){this.options=e}get image(){var e;return null!==(e=this.options[Sr])&&void 0!==e?e:this.options[br]}set image(e){this.options[br]=this.options[Sr]=e}get images(){return this.image}set images(e){this.image=e}get polygon(){var e;return null!==(e=this.options[_r])&&void 0!==e?e:this.options[wr]}set polygon(e){this.options[wr]=this.options[_r]=e}get stroke(){return[]}set stroke(e){}load(e){var t,n;if(!e)return;const i=null!==(t=e.options)&&void 0!==t?t:e.custom;if(void 0!==i)for(const o in i){const e=i[o];var r;if(e)this.options[o]=Nn(null!==(r=this.options[o])&&void 0!==r?r:{},e)}this.loadShape(e.character,gr,yr,!0),this.loadShape(e.polygon,_r,wr,!1),this.loadShape(null!==(n=e.image)&&void 0!==n?n:e.images,Sr,br,!0),void 0!==e.close&&(this.close=e.close),void 0!==e.fill&&(this.fill=e.fill),void 0!==e.type&&(this.type=e.type)}}class Cr extends Yi{constructor(){super(),this.destroy="none",this.speed=5}get size_min(){return this.minimumValue}set size_min(e){this.minimumValue=e}load(e){void 0!==(null===e||void 0===e?void 0:e.size_min)&&void 0===e.minimumValue&&(e.minimumValue=e.size_min),super.load(e),e&&void 0!==e.destroy&&(this.destroy=e.destroy)}}class Er extends Qi{constructor(){super(),this.animation=new Cr,this.random.minimumValue=1,this.value=3}get anim(){return this.animation}set anim(e){this.animation=e}load(e){var t;if(super.load(e),!e)return;const n=null!==(t=e.animation)&&void 0!==t?t:e.anim;void 0!==n&&(this.animation.load(n),this.value=gn(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class Pr{constructor(){this.width=0}load(e){e&&(void 0!==e.color&&(this.color=qi.create(this.color,e.color)),void 0!==e.width&&(this.width=gn(e.width)),void 0!==e.opacity&&(this.opacity=gn(e.opacity)))}}class Tr extends Qi{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(e){super.load(e),e&&(void 0!==e.opacityRate&&(this.opacityRate=e.opacityRate),void 0!==e.sizeRate&&(this.sizeRate=e.sizeRate),void 0!==e.velocityRate&&(this.velocityRate=e.velocityRate))}}class Rr{constructor(e,t){this._engine=e,this._container=t,this.bounce=new er,this.collisions=new tr,this.color=new qi,this.color.value="#fff",this.groups={},this.move=new dr,this.number=new vr,this.opacity=new pr,this.reduceDuplicates=!1,this.shadow=new mr,this.shape=new xr,this.size=new Er,this.stroke=new Pr,this.zIndex=new Tr}load(e){var t,n,i,r,o;if(!e)return;if(this.bounce.load(e.bounce),this.color.load(qi.create(this.color,e.color)),void 0!==e.groups)for(const l in e.groups){const t=e.groups[l];var s;if(void 0!==t)this.groups[l]=Nn(null!==(s=this.groups[l])&&void 0!==s?s:{},t)}this.move.load(e.move),this.number.load(e.number),this.opacity.load(e.opacity),void 0!==e.reduceDuplicates&&(this.reduceDuplicates=e.reduceDuplicates),this.shape.load(e.shape),this.size.load(e.size),this.shadow.load(e.shadow),this.zIndex.load(e.zIndex);const a=null!==(t=null===(n=e.move)||void 0===n?void 0:n.collisions)&&void 0!==t?t:null===(i=e.move)||void 0===i?void 0:i.bounce;void 0!==a&&(this.collisions.enable=a),this.collisions.load(e.collisions),void 0!==e.interactivity&&(this.interactivity=Nn({},e.interactivity));const c=null!==(r=e.stroke)&&void 0!==r?r:null===(o=e.shape)||void 0===o?void 0:o.stroke;if(c&&(this.stroke=Hn(c,(e=>{const t=new Pr;return t.load(e),t}))),this._container){const t=this._engine.plugins.updaters.get(this._container);if(t)for(const i of t)i.loadOptions&&i.loadOptions(this,e);const n=this._engine.plugins.interactors.get(this._container);if(n)for(const i of n)i.loadParticlesOptions&&i.loadParticlesOptions(this,e)}}}function Mr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.load(r)}function Ar(e,t){const n=new Rr(e,t);for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return Mr(n,...r),n}class Ir{constructor(e,t){this._findDefaultTheme=e=>{var t;return null!==(t=this.themes.find((t=>t.default.value&&t.default.mode===e)))&&void 0!==t?t:this.themes.find((e=>e.default.value&&"any"===e.default.mode))},this._importPreset=e=>{this.load(this._engine.plugins.getPreset(e))},this._engine=e,this._container=t,this.autoPlay=!0,this.background=new Ri,this.backgroundMask=new Ai,this.defaultThemes={},this.delay=0,this.fullScreen=new Ii,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new Ui(e,t),this.manualParticles=[],this.particles=Ar(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}get backgroundMode(){return this.fullScreen}set backgroundMode(e){this.fullScreen.load(e)}get fps_limit(){return this.fpsLimit}set fps_limit(e){this.fpsLimit=e}get retina_detect(){return this.detectRetina}set retina_detect(e){this.detectRetina=e}load(e){var t,n,i,r,o;if(!e)return;void 0!==e.preset&&Hn(e.preset,(e=>this._importPreset(e))),void 0!==e.autoPlay&&(this.autoPlay=e.autoPlay),void 0!==e.delay&&(this.delay=gn(e.delay));const s=null!==(t=e.detectRetina)&&void 0!==t?t:e.retina_detect;void 0!==s&&(this.detectRetina=s),void 0!==e.duration&&(this.duration=gn(e.duration));const a=null!==(n=e.fpsLimit)&&void 0!==n?n:e.fps_limit;void 0!==a&&(this.fpsLimit=a),void 0!==e.pauseOnBlur&&(this.pauseOnBlur=e.pauseOnBlur),void 0!==e.pauseOnOutsideViewport&&(this.pauseOnOutsideViewport=e.pauseOnOutsideViewport),void 0!==e.zLayers&&(this.zLayers=e.zLayers),this.background.load(e.background);const c=null!==(i=e.fullScreen)&&void 0!==i?i:e.backgroundMode;Jn(c)?this.fullScreen.enable=c:this.fullScreen.load(c),this.backgroundMask.load(e.backgroundMask),this.interactivity.load(e.interactivity),e.manualParticles&&(this.manualParticles=e.manualParticles.map((e=>{const t=new Bi;return t.load(e),t}))),this.particles.load(e.particles),this.style=Nn(this.style,e.style),this._engine.plugins.loadOptions(this,e),void 0!==e.smooth&&(this.smooth=e.smooth);const l=this._engine.plugins.interactors.get(this._container);if(l)for(const u of l)u.loadOptions&&u.loadOptions(this,e);if(void 0!==e.responsive)for(const u of e.responsive){const e=new ji;e.load(u),this.responsive.push(e)}if(this.responsive.sort(((e,t)=>e.maxWidth-t.maxWidth)),void 0!==e.themes)for(const u of e.themes){const e=this.themes.find((e=>e.name===u.name));if(e)e.load(u);else{const e=new Hi;e.load(u),this.themes.push(e)}}this.defaultThemes.dark=null===(r=this._findDefaultTheme("dark"))||void 0===r?void 0:r.name,this.defaultThemes.light=null===(o=this._findDefaultTheme("light"))||void 0===o?void 0:o.name}setResponsive(e,t,n){this.load(n);const i=this.responsive.find((n=>"screen"===n.mode&&screen?n.maxWidth>screen.availWidth:n.maxWidth*t>e));return this.load(null===i||void 0===i?void 0:i.options),null===i||void 0===i?void 0:i.maxWidth}setTheme(e){if(e){const t=this.themes.find((t=>t.name===e));t&&this.load(t.options)}else{const e=An("(prefers-color-scheme: dark)"),t=e&&e.matches,n=this._findDefaultTheme(t?"dark":"light");n&&this.load(n.options)}}}class kr{constructor(e,t){this.container=t,this._engine=e,this._interactors=e.plugins.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[]}async externalInteract(e){for(const t of this._externalInteractors)t.isEnabled()&&await t.interact(e)}handleClickMode(e){for(const t of this._externalInteractors)t.handleClickMode&&t.handleClickMode(e)}init(){this._externalInteractors=[],this._particleInteractors=[];for(const e of this._interactors){switch(e.type){case"external":this._externalInteractors.push(e);break;case"particles":this._particleInteractors.push(e)}e.init()}}async particlesInteract(e,t){for(const n of this._externalInteractors)n.clear(e,t);for(const n of this._particleInteractors)n.isEnabled(e)&&await n.interact(e,t)}async reset(e){for(const t of this._externalInteractors)t.isEnabled()&&t.reset(e);for(const t of this._particleInteractors)t.isEnabled(e)&&t.reset(e)}}const Or=e=>{if(!In(e.outMode,e.checkModes))return;const t=2*e.radius;e.coord>e.maxCoord-t?e.setCb(-e.radius):e.coord<t&&e.setCb(e.radius)};class Dr{constructor(e,t,n,i,r,o){var s=this;this.container=n,this._calcPosition=function(e,t,n){var i,r,o,a;let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;for(const[,v]of e.plugins){const e=void 0!==v.particlePosition?v.particlePosition(t,s):void 0;if(e)return rn.create(e.x,e.y,n)}const l=Cn({size:e.canvas.size,position:t}),u=rn.create(l.x,l.y,n),d=s.getRadius(),h=s.options.move.outModes,p=t=>{Or({outMode:t,checkModes:["bounce","bounce-horizontal"],coord:u.x,maxCoord:e.canvas.size.width,setCb:e=>u.x+=e,radius:d})},f=t=>{Or({outMode:t,checkModes:["bounce","bounce-vertical"],coord:u.y,maxCoord:e.canvas.size.height,setCb:e=>u.y+=e,radius:d})};return p(null!==(i=h.left)&&void 0!==i?i:h.default),p(null!==(r=h.right)&&void 0!==r?r:h.default),f(null!==(o=h.top)&&void 0!==o?o:h.default),f(null!==(a=h.bottom)&&void 0!==a?a:h.default),s._checkOverlap(u,c)?s._calcPosition(e,void 0,n,c+1):u},this._calculateVelocity=()=>{const e=function(e){const t=on.origin;return t.length=1,t.angle=e,t}(this.direction),t=e.copy(),n=this.options.move;if("inside"===n.direction||"outside"===n.direction)return t;const i=Math.PI/180*fn(n.angle.value),r=Math.PI/180*fn(n.angle.offset),o={left:r-i/2,right:r+i/2};return n.straight||(t.angle+=pn(gn(o.left,o.right))),n.random&&"number"===typeof n.speed&&(t.length*=un()),t},this._checkOverlap=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=s.options.collisions,i=s.getRadius();if(!n.enable)return!1;const r=n.overlap;if(r.enable)return!1;const o=r.retries;if(o>=0&&t>o)throw new Error("".concat(nn," particle is overlapping and can't be placed"));return!!s.container.particles.find((t=>bn(e,t.position)<i+t.getRadius()))},this._getRollColor=e=>{var t;if(!e||!this.roll||!this.backColor&&!this.roll.alter)return e;const n=this.roll.horizontal&&this.roll.vertical?2:1,i=this.roll.horizontal?Math.PI/2:0;return Math.floor(((null!==(t=this.roll.angle)&&void 0!==t?t:0)+i)/(Math.PI/n))%2?this.backColor?this.backColor:this.roll.alter?function(e,t,n){return{h:e.h,s:e.s,l:e.l+("darken"===t?-1:1)*n}}(e,this.roll.alter.type,this.roll.alter.value):e:e},this._initPosition=e=>{var t,n;const i=this.container,r=fn(this.options.zIndex.value);this.position=this._calcPosition(i,e,dn(r,0,i.zLayers)),this.initialPosition=this.position.copy();const o=i.canvas.size;switch(this.moveCenter={...Kn(this.options.move.center,o),radius:null!==(t=this.options.move.center.radius)&&void 0!==t?t:0,mode:null!==(n=this.options.move.center.mode)&&void 0!==n?n:"percent"},this.direction=function(e,t,n){if($n(e))return e*Math.PI/180;switch(e){case"top":return-Math.PI/2;case"top-right":return-Math.PI/4;case"right":return 0;case"bottom-right":return Math.PI/4;case"bottom":return Math.PI/2;case"bottom-left":return 3*Math.PI/4;case"left":return Math.PI;case"top-left":return-3*Math.PI/4;case"inside":return Math.atan2(n.y-t.y,n.x-t.x);case"outside":return Math.atan2(t.y-n.y,t.x-n.x);default:return un()*Math.PI*2}}(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case"inside":this.outType="inside";break;case"outside":this.outType="outside"}this.offset=on.origin},this._loadShapeData=(e,t)=>{const n=e.options[this.shape];if(n)return Nn({close:e.close,fill:e.fill},Wn(n,this.id,t))},this._engine=e,this.init(t,i,r,o)}destroy(e){if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const t=this.container,n=this.pathGenerator;for(const[,i]of t.plugins)i.particleDestroyed&&i.particleDestroyed(this,e);for(const i of t.particles.updaters)i.particleDestroyed&&i.particleDestroyed(this,e);n&&n.reset(this)}draw(e){const t=this.container;for(const[,n]of t.plugins)t.canvas.drawParticlePlugin(n,this,e);t.canvas.drawParticle(this,e)}getFillColor(){var e;return this._getRollColor(null!==(e=this.bubble.color)&&void 0!==e?e:yi(this.color))}getMass(){return this.getRadius()**2*Math.PI/2}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){var e;return null!==(e=this.bubble.radius)&&void 0!==e?e:this.size.value}getStrokeColor(){var e;return this._getRollColor(null!==(e=this.bubble.color)&&void 0!==e?e:yi(this.strokeColor))}init(e,t,n,i){var r,o,s;const a=this.container,c=this._engine;this.id=e,this.group=i,this.fill=!0,this.pathRotation=!1,this.close=!0,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType="normal",this.ignoresResizeRatio=!0;const l=a.retina.pixelRatio,u=a.actualOptions,d=Ar(this._engine,a,u.particles),h=d.shape.type,{reduceDuplicates:p}=d;this.shape=Wn(h,this.id,p);const f=d.shape;if(n&&n.shape&&n.shape.type){const e=Wn(n.shape.type,this.id,p);e&&(this.shape=e,f.load(n.shape))}this.shapeData=this._loadShapeData(f,p),d.load(n);const v=this.shapeData;v&&d.load(v.particles);const m=new Ui(c,a);m.load(a.actualOptions.interactivity),m.load(d.interactivity),this.interactivity=m,this.fill=null!==(r=null===v||void 0===v?void 0:v.fill)&&void 0!==r?r:d.shape.fill,this.close=null!==(o=null===v||void 0===v?void 0:v.close)&&void 0!==o?o:d.shape.close,this.options=d;const g=this.options.move.path;this.pathDelay=1e3*yn(g.delay),g.generator&&(this.pathGenerator=this._engine.plugins.getPathGenerator(g.generator),this.pathGenerator&&a.addPath(g.generator,this.pathGenerator)&&this.pathGenerator.init(a)),a.retina.initParticle(this),this.size=qn(this.options.size,l),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(t),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=1-fn(this.options.move.decay);const y=a.particles;y.needsSort=y.needsSort||y.lastZIndex<this.position.z,y.lastZIndex=this.position.z,this.zIndexFactor=this.position.z/a.zLayers,this.sides=24;let S=a.drawers.get(this.shape);S||(S=this._engine.plugins.getShapeDrawer(this.shape),S&&a.drawers.set(this.shape,S)),S&&S.loadShape&&S.loadShape(this);const b=null===(s=S)||void 0===s?void 0:s.getSidesCount;b&&(this.sides=b(this)),this.spawning=!1,this.shadowColor=ai(this.options.shadow.color);for(const _ of a.particles.updaters)_.init(this);for(const _ of a.particles.movers)_.init&&_.init(this);S&&S.particleInit&&S.particleInit(a,this);for(const[,_]of a.plugins)_.particleCreated&&_.particleCreated(this)}isInsideCanvas(){const e=this.getRadius(),t=this.container.canvas.size,n=this.position;return n.x>=-e&&n.y>=-e&&n.y<=t.height+e&&n.x<=t.width+e}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){for(const e of this.container.particles.updaters)e.reset&&e.reset(this)}}class Lr{constructor(e,t){this.position=e,this.particle=t}}class Nr{constructor(e,t){this.position={x:e,y:t}}}class zr extends Nr{constructor(e,t,n,i){super(e,t),this.size={height:i,width:n}}contains(e){const t=this.size.width,n=this.size.height,i=this.position;return e.x>=i.x&&e.x<=i.x+t&&e.y>=i.y&&e.y<=i.y+n}intersects(e){e instanceof Fr&&e.intersects(this);const t=this.size.width,n=this.size.height,i=this.position,r=e.position,o=e instanceof zr?e.size:{width:0,height:0},s=o.width,a=o.height;return r.x<i.x+t&&r.x+s>i.x&&r.y<i.y+n&&r.y+a>i.y}}class Fr extends Nr{constructor(e,t,n){super(e,t),this.radius=n}contains(e){return bn(e,this.position)<=this.radius}intersects(e){const t=this.position,n=e.position,i=Math.abs(n.x-t.x),r=Math.abs(n.y-t.y),o=this.radius;if(e instanceof Fr){return o+e.radius>Math.sqrt(i**2+r**2)}if(e instanceof zr){const{width:t,height:n}=e.size;return Math.pow(i-t,2)+Math.pow(r-n,2)<=o**2||i<=o+t&&r<=o+n||i<=t||r<=n}return!1}}class Ur{constructor(e,t){this.rectangle=e,this.capacity=t,this._subdivide=()=>{const{x:e,y:t}=this.rectangle.position,{width:n,height:i}=this.rectangle.size,{capacity:r}=this;for(let o=0;o<4;o++)this._subs.push(new Ur(new zr(e+n/2*(o%2),t+i/2*(Math.round(o/2)-o%2),n/2,i/2),r));this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(e){return!!this.rectangle.contains(e.position)&&(this._points.length<this.capacity?(this._points.push(e),!0):(this._divided||this._subdivide(),this._subs.some((t=>t.insert(e)))))}query(e,t,n){const i=n||[];if(!e.intersects(this.rectangle))return[];for(const r of this._points)!e.contains(r.position)&&bn(e.position,r.position)>r.particle.getRadius()&&(!t||t(r.particle))||i.push(r.particle);if(this._divided)for(const r of this._subs)r.query(e,t,i);return i}queryCircle(e,t,n){return this.query(new Fr(e.x,e.y,t),n)}queryRectangle(e,t,n){return this.query(new zr(e.x,e.y,t.width,t.height),n)}}const Br=e=>new zr(-e.width/4,-e.height/4,3*e.width/2,3*e.height/2);class jr{constructor(e,t){this._applyDensity=(e,t,n)=>{var i;if(null===(i=e.number.density)||void 0===i||!i.enable)return;const r=e.number,o=this._initDensityFactor(r.density),s=r.value,a=r.limit>0?r.limit:s,c=Math.min(s,a)*o+t,l=Math.min(this.count,this.filter((e=>e.group===n)).length);this.limit=r.limit*o,l<c?this.push(Math.abs(c-l),void 0,e,n):l>c&&this.removeQuantity(l-c,n)},this._initDensityFactor=e=>{const t=this._container;if(!t.canvas.element||!e.enable)return 1;const n=t.canvas.element,i=t.retina.pixelRatio;return n.width*n.height/(e.factor*i**2*e.area)},this._pushParticle=(e,t,n,i)=>{try{let r=this.pool.pop();r?r.init(this._nextId,e,t,n):r=new Dr(this._engine,this._nextId,this._container,e,t,n);let o=!0;if(i&&(o=i(r)),!o)return;return this._array.push(r),this._zArray.push(r),this._nextId++,this._engine.dispatchEvent("particleAdded",{container:this._container,data:{particle:r}}),r}catch(r){return void Tn().warning("".concat(nn," adding particle: ").concat(r))}},this._removeParticle=(e,t,n)=>{const i=this._array[e];if(!i||i.group!==t)return!1;i.destroy(n);const r=this._zArray.indexOf(i);return this._array.splice(e,1),this._zArray.splice(r,1),this.pool.push(i),this._engine.dispatchEvent("particleRemoved",{container:this._container,data:{particle:i}}),!0},this._engine=e,this._container=t,this._nextId=0,this._array=[],this._zArray=[],this.pool=[],this.limit=0,this.needsSort=!1,this.lastZIndex=0,this._interactionManager=new kr(e,t);const n=t.canvas.size;this.quadTree=new Ur(Br(n),4),this.movers=this._engine.plugins.getMovers(t,!0),this.updaters=this._engine.plugins.getUpdaters(t,!0)}get count(){return this._array.length}addManualParticles(){const e=this._container,t=e.actualOptions;for(const n of t.manualParticles)this.addParticle(n.position?Kn(n.position,e.canvas.size):void 0,n.options)}addParticle(e,t,n,i){const r=this._container.actualOptions.particles.number.limit;if(r>0){const e=this.count+1-r;e>0&&this.removeQuantity(e)}return this._pushParticle(e,t,n,i)}clear(){this._array=[],this._zArray=[]}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}async draw(e){const t=this._container;t.canvas.clear(),await this.update(e);for(const[,n]of t.plugins)t.canvas.drawPlugin(n,e);for(const n of this._zArray)n.draw(e)}filter(e){return this._array.filter(e)}find(e){return this._array.find(e)}handleClickMode(e){this._interactionManager.handleClickMode(e)}init(){const e=this._container,t=e.actualOptions;this.lastZIndex=0,this.needsSort=!1;let n=!1;this.updaters=this._engine.plugins.getUpdaters(e,!0),this._interactionManager.init();for(const[,r]of e.plugins)if(void 0!==r.particlesInitialization&&(n=r.particlesInitialization()),n)break;this._interactionManager.init();for(const[,r]of e.pathGenerators)r.init(e);if(this.addManualParticles(),!n){for(const e in t.particles.groups){const n=t.particles.groups[e];for(let r=this.count,o=0;o<(null===(i=n.number)||void 0===i?void 0:i.value)&&r<t.particles.number.value;r++,o++){var i;this.addParticle(void 0,n,e)}}for(let e=this.count;e<t.particles.number.value;e++)this.addParticle()}}push(e,t,n,i){this.pushing=!0;for(let r=0;r<e;r++)this.addParticle(null===t||void 0===t?void 0:t.position,n,i);this.pushing=!1}async redraw(){this.clear(),this.init(),await this.draw({value:0,factor:0})}remove(e,t,n){this.removeAt(this._array.indexOf(e),void 0,t,n)}removeAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(e<0||e>this.count)return;let r=0;for(let o=e;r<t&&o<this.count;o++)this._removeParticle(o--,n,i)&&r++}removeQuantity(e,t){this.removeAt(0,e,t)}setDensity(){const e=this._container.actualOptions,t=e.particles.groups;for(const n in t)this._applyDensity(t[n],0,n);this._applyDensity(e.particles,e.manualParticles.length)}async update(e){const t=this._container,n=new Set;this.quadTree=new Ur(Br(t.canvas.size),4);for(const[,i]of t.pathGenerators)i.update();for(const[,i]of t.plugins)i.update&&i.update(e);for(const i of this._array){const r=t.canvas.resizeFactor;r&&!i.ignoresResizeRatio&&(i.position.x*=r.width,i.position.y*=r.height,i.initialPosition.x*=r.width,i.initialPosition.y*=r.height),i.ignoresResizeRatio=!1,await this._interactionManager.reset(i);for(const[,t]of this._container.plugins){if(i.destroyed)break;t.particleUpdate&&t.particleUpdate(i,e)}for(const t of this.movers)t.isEnabled(i)&&t.move(i,e);i.destroyed?n.add(i):this.quadTree.insert(new Lr(i.getPosition(),i))}if(n.size){const e=e=>!n.has(e);this._array=this.filter(e),this._zArray=this._zArray.filter(e),this.pool.push(...n)}await this._interactionManager.externalInteract(e);for(const i of this._array){for(const t of this.updaters)t.update(i,e);i.destroyed||i.spawning||await this._interactionManager.particlesInteract(i,e)}if(delete t.canvas.resizeFactor,this.needsSort){const e=this._zArray;e.sort(((e,t)=>t.position.z-e.position.z||e.id-t.id)),this.lastZIndex=e[e.length-1].position.z,this.needsSort=!1}}}class Vr{constructor(e){this.container=e,this.pixelRatio=1,this.reduceFactor=1}init(){const e=this.container,t=e.actualOptions;this.pixelRatio=!t.detectRetina||Mn()?1:window.devicePixelRatio,this.reduceFactor=1;const n=this.pixelRatio;if(e.canvas.element){const t=e.canvas.element;e.canvas.size.width=t.offsetWidth*n,e.canvas.size.height=t.offsetHeight*n}const i=t.particles,r=i.move;this.attractDistance=fn(r.attract.distance)*n,this.maxSpeed=fn(r.gravity.maxSpeed)*n,this.sizeAnimationSpeed=fn(i.size.animation.speed)*n}initParticle(e){const t=e.options,n=this.pixelRatio,i=t.move,r=i.distance,o=e.retina;o.attractDistance=fn(i.attract.distance)*n,o.moveDrift=fn(i.drift)*n,o.moveSpeed=fn(i.speed)*n,o.sizeAnimationSpeed=fn(t.size.animation.speed)*n;const s=o.maxDistance;s.horizontal=void 0!==r.horizontal?r.horizontal*n:void 0,s.vertical=void 0!==r.vertical?r.vertical*n:void 0,o.maxSpeed=fn(i.gravity.maxSpeed)*n}}function Hr(e){return e&&!e.destroyed}function Wr(e,t){const n=new Ir(e,t);for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return Mr(n,...r),n}const Gr={generate:e=>e.velocity,init:()=>{},update:()=>{},reset:()=>{}};class qr{constructor(e,t,n){this.id=t,this._intersectionManager=e=>{if(Hr(this)&&this.actualOptions.pauseOnOutsideViewport)for(const t of e)t.target===this.interactivity.element&&(t.isIntersecting?this.play:this.pause)()},this._nextFrame=async e=>{try{var t;if(!this.smooth&&void 0!==this.lastFrameTime&&e<this.lastFrameTime+1e3/this.fpsLimit)return void this.draw(!1);null!==(t=this.lastFrameTime)&&void 0!==t||(this.lastFrameTime=e);const n=function(e){return{value:e,factor:arguments.length>2&&void 0!==arguments[2]&&arguments[2]?60/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:60):60*e/1e3}}(e-this.lastFrameTime,this.fpsLimit,this.smooth);if(this.addLifeTime(n.value),this.lastFrameTime=e,n.value>1e3)return void this.draw(!1);if(await this.particles.draw(n),!this.alive())return void this.destroy();this.getAnimationStatus()&&this.draw(!1)}catch(n){Tn().error("".concat(nn," in animation loop"),n)}},this._engine=e,this.fpsLimit=120,this.smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this.lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._sourceOptions=n,this._initialSourceOptions=n,this.retina=new Vr(this),this.canvas=new Ci(this),this.particles=new jr(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.drawers=new Map,this._options=Wr(this._engine,this),this.actualOptions=Wr(this._engine,this),this._eventListeners=new Pi(this),"undefined"!==typeof IntersectionObserver&&IntersectionObserver&&(this._intersectionObserver=new IntersectionObserver((e=>this._intersectionManager(e)))),this._engine.dispatchEvent("containerBuilt",{container:this})}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(e){if(!Hr(this))return;const t=this.interactivity.element;if(!t)return;const n=(t,n,i)=>{if(!Hr(this))return;const r=this.retina.pixelRatio,o={x:n.x*r,y:n.y*r},s=this.particles.quadTree.queryCircle(o,i*r);e(t,s)};let i=!1,r=!1;t.addEventListener("click",(e=>{if(!Hr(this))return;const t=e,i={x:t.offsetX||t.clientX,y:t.offsetY||t.clientY};n(e,i,1)})),t.addEventListener("touchstart",(()=>{Hr(this)&&(i=!0,r=!1)})),t.addEventListener("touchmove",(()=>{Hr(this)&&(r=!0)})),t.addEventListener("touchend",(e=>{if(Hr(this)){if(i&&!r){const t=e;let i=t.touches[t.touches.length-1];if(!i&&(i=t.changedTouches[t.changedTouches.length-1],!i))return;const r=this.canvas.element,o=r?r.getBoundingClientRect():void 0,s={x:i.clientX-(o?o.left:0),y:i.clientY-(o?o.top:0)};n(e,s,Math.max(i.radiusX,i.radiusY))}i=!1,r=!1}})),t.addEventListener("touchcancel",(()=>{Hr(this)&&(i=!1,r=!1)}))}addLifeTime(e){this._lifeTime+=e}addPath(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!(!Hr(this)||!n&&this.pathGenerators.has(e))&&(this.pathGenerators.set(e,null!==t&&void 0!==t?t:Gr),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}destroy(){if(!Hr(this))return;this.stop(),this.particles.destroy(),this.canvas.destroy();for(const[,n]of this.drawers)n.destroy&&n.destroy(this);for(const n of this.drawers.keys())this.drawers.delete(n);this._engine.plugins.destroy(this),this.destroyed=!0;const e=this._engine.dom(),t=e.findIndex((e=>e===this));t>=0&&e.splice(t,1),this._engine.dispatchEvent("containerDestroyed",{container:this})}draw(e){if(!Hr(this))return;let t=e;this._drawAnimationFrame=requestAnimationFrame((async e=>{t&&(this.lastFrameTime=void 0,t=!1),await this._nextFrame(e)}))}async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const[,n]of this.plugins){if(!n.export)continue;const i=await n.export(e,t);if(i.supported)return i.blob}Tn().error("".concat(nn," - Export plugin with type ").concat(e," not found"))}getAnimationStatus(){return!this._paused&&!this.pageHidden&&Hr(this)}handleClickMode(e){if(Hr(this)){this.particles.handleClickMode(e);for(const[,t]of this.plugins)t.handleClickMode&&t.handleClickMode(e)}}async init(){if(!Hr(this))return;const e=this._engine.plugins.getSupportedShapes();for(const n of e){const e=this._engine.plugins.getShapeDrawer(n);e&&this.drawers.set(n,e)}this._options=Wr(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=Wr(this._engine,this,this._options);const t=this._engine.plugins.getAvailablePlugins(this);for(const[n,i]of t)this.plugins.set(n,i);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize(),this.zLayers=this.actualOptions.zLayers,this._duration=1e3*fn(this.actualOptions.duration),this._delay=1e3*fn(this.actualOptions.delay),this._lifeTime=0,this.fpsLimit=this.actualOptions.fpsLimit>0?this.actualOptions.fpsLimit:120,this.smooth=this.actualOptions.smooth;for(const[,n]of this.drawers)n.init&&await n.init(this);for(const[,n]of this.plugins)n.init&&await n.init();this._engine.dispatchEvent("containerInit",{container:this}),this.particles.init(),this.particles.setDensity();for(const[,n]of this.plugins)n.particlesSetup&&n.particlesSetup();this._engine.dispatchEvent("particlesSetup",{container:this})}async loadTheme(e){Hr(this)&&(this._currentTheme=e,await this.refresh())}pause(){if(Hr(this)&&(void 0!==this._drawAnimationFrame&&(cancelAnimationFrame(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const[,e]of this.plugins)e.pause&&e.pause();this.pageHidden||(this._paused=!0),this._engine.dispatchEvent("containerPaused",{container:this})}}play(e){if(!Hr(this))return;const t=this._paused||e;if(!this._firstStart||this.actualOptions.autoPlay){if(this._paused&&(this._paused=!1),t)for(const[,e]of this.plugins)e.play&&e.play();this._engine.dispatchEvent("containerPlay",{container:this}),this.draw(t||!1)}else this._firstStart=!1}async refresh(){if(Hr(this))return this.stop(),this.start()}async reset(){if(Hr(this))return this._initialSourceOptions=void 0,this._options=Wr(this._engine,this),this.actualOptions=Wr(this._engine,this,this._options),this.refresh()}setNoise(e,t,n){Hr(this)&&this.setPath(e,t,n)}setPath(e,t,n){if(!e||!Hr(this))return;const i={...Gr};if(Qn(e))i.generate=e,t&&(i.init=t),n&&(i.update=n);else{const t=i;i.generate=e.generate||t.generate,i.init=e.init||t.init,i.update=e.update||t.update}this.addPath("default",i,!0)}async start(){Hr(this)&&!this.started&&(await this.init(),this.started=!0,await new Promise((e=>{this._delayTimeout=setTimeout((async()=>{this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const[,e]of this.plugins)e.start&&await e.start();this._engine.dispatchEvent("containerStarted",{container:this}),this.play(),e()}),this._delay)})))}stop(){if(Hr(this)&&this.started){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const[,e]of this.plugins)e.stop&&e.stop();for(const e of this.plugins.keys())this.plugins.delete(e);this._sourceOptions=this._options,this._engine.dispatchEvent("containerStopped",{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const e=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this.responsiveMaxWidth!==e&&(this.responsiveMaxWidth=e,!0)}}class Xr{constructor(){this._listeners=new Map}addEventListener(e,t){this.removeEventListener(e,t);let n=this._listeners.get(e);n||(n=[],this._listeners.set(e,n)),n.push(t)}dispatchEvent(e,t){const n=this._listeners.get(e);n&&n.forEach((e=>e(t)))}hasEventListener(e){return!!this._listeners.get(e)}removeAllEventListeners(e){e?this._listeners.delete(e):this._listeners=new Map}removeEventListener(e,t){const n=this._listeners.get(e);if(!n)return;const i=n.length,r=n.indexOf(t);r<0||(1===i?this._listeners.delete(e):n.splice(r,1))}}function Kr(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=t.get(e);return r&&!i||(r=[...n.values()].map((t=>t(e))),t.set(e,r)),r}class Jr{constructor(e){this._engine=e,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.drawers=new Map,this.pathGenerators=new Map}addInteractor(e,t){this._initializers.interactors.set(e,t)}addParticleMover(e,t){this._initializers.movers.set(e,t)}addParticleUpdater(e,t){this._initializers.updaters.set(e,t)}addPathGenerator(e,t){!this.getPathGenerator(e)&&this.pathGenerators.set(e,t)}addPlugin(e){!this.getPlugin(e.id)&&this.plugins.push(e)}addPreset(e,t){(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||!this.getPreset(e))&&this.presets.set(e,t)}addShapeDrawer(e,t){Hn(e,(e=>{!this.getShapeDrawer(e)&&this.drawers.set(e,t)}))}destroy(e){this.updaters.delete(e),this.movers.delete(e),this.interactors.delete(e)}getAvailablePlugins(e){const t=new Map;for(const n of this.plugins)n.needsPlugin(e.actualOptions)&&t.set(n.id,n.getPlugin(e));return t}getInteractors(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Kr(e,this.interactors,this._initializers.interactors,t)}getMovers(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Kr(e,this.movers,this._initializers.movers,t)}getPathGenerator(e){return this.pathGenerators.get(e)}getPlugin(e){return this.plugins.find((t=>t.id===e))}getPreset(e){return this.presets.get(e)}getShapeDrawer(e){return this.drawers.get(e)}getSupportedShapes(){return this.drawers.keys()}getUpdaters(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Kr(e,this.updaters,this._initializers.updaters,t)}loadOptions(e,t){for(const n of this.plugins)n.loadOptions(e,t)}loadParticlesOptions(e,t){const n=this.updaters.get(e);if(n){for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];for(const e of n)e.loadOptions&&e.loadOptions(t,...r)}}}class Yr{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new Xr,this._initialized=!1,this.plugins=new Jr(this)}get configs(){const e={};for(const[t,n]of this._configs)e[t]=n;return e}get version(){return"2.12.0"}addConfig(e,t){var n;Yn(e)?t&&(t.name=e,this._configs.set(e,t)):this._configs.set(null!==(n=e.name)&&void 0!==n?n:"default",e)}addEventListener(e,t){this._eventDispatcher.addEventListener(e,t)}async addInteractor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.plugins.addInteractor(e,t),await this.refresh(n)}async addMover(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.plugins.addParticleMover(e,t),await this.refresh(n)}async addParticleUpdater(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.plugins.addParticleUpdater(e,t),await this.refresh(n)}async addPathGenerator(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.plugins.addPathGenerator(e,t),await this.refresh(n)}async addPlugin(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.plugins.addPlugin(e),await this.refresh(t)}async addPreset(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.plugins.addPreset(e,t,n),await this.refresh(i)}async addShape(e,t,n,i,r){let o,s,a,c,l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];Jn(n)?(l=n,s=void 0):s=n,Jn(i)?(l=i,a=void 0):a=i,Jn(r)?(l=r,c=void 0):c=r,o=Qn(t)?{afterEffect:a,destroy:c,draw:t,init:s}:t,this.plugins.addShapeDrawer(e,o),await this.refresh(l)}dispatchEvent(e,t){this._eventDispatcher.dispatchEvent(e,t)}dom(){return this._domArray}domItem(e){const t=this.dom(),n=t[e];if(n&&!n.destroyed)return n;t.splice(e,1)}init(){this._initialized||(this._initialized=!0)}async load(e,t){return this.loadFromArray(e,t)}async loadFromArray(e,t,n){let i;return!function(e){return!(!(t=e).id&&!t.element&&!t.url&&!t.options);var t}(e)?(i={},Yn(e)?i.id=e:i.options=e,$n(t)?i.index=t:i.options=null!==t&&void 0!==t?t:i.options,i.index=null!==n&&void 0!==n?n:i.index):i=e,this._loadParams(i)}async loadJSON(e,t,n){let i,r;return $n(t)||void 0===t?i=e:(r=e,i=t),this._loadParams({id:r,url:i,index:n})}async refresh(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.dom().forEach((e=>e.refresh()))}removeEventListener(e,t){this._eventDispatcher.removeEventListener(e,t)}async set(e,t,n,i){const r={index:i};return Yn(e)?r.id=e:r.element=e,t instanceof HTMLElement?r.element=t:r.options=t,$n(n)?r.index=n:r.options=null!==n&&void 0!==n?n:r.options,this._loadParams(r)}async setJSON(e,t,n,i){const r={};return e instanceof HTMLElement?(r.element=e,r.url=t,r.index=n):(r.id=e,r.element=t,r.url=n,r.index=i),this._loadParams(r)}setOnClickHandler(e){const t=this.dom();if(!t.length)throw new Error("".concat(nn," can only set click handlers after calling tsParticles.load()"));for(const n of t)n.addClickHandler(e)}async _loadParams(e){var t,n;const i=null!==(t=e.id)&&void 0!==t?t:"tsparticles".concat(Math.floor(1e4*un())),{index:r,url:o}=e,s=o?await async function(e){const t=Wn(e.url,e.index);if(!t)return e.fallback;const n=await fetch(t);return n.ok?n.json():(Tn().error("".concat(nn," ").concat(n.status," while retrieving config file")),e.fallback)}({fallback:e.options,url:o,index:r}):e.options;let a=null!==(n=e.element)&&void 0!==n?n:document.getElementById(i);a||(a=document.createElement("div"),a.id=i,document.body.append(a));const c=Wn(s,r),l=this.dom(),u=l.findIndex((e=>e.id===i));if(u>=0){const e=this.domItem(u);e&&!e.destroyed&&(e.destroy(),l.splice(u,1))}let d;if("canvas"===a.tagName.toLowerCase())d=a,d.dataset[Qt]="false";else{const e=a.getElementsByTagName("canvas");e.length?(d=e[0],d.dataset[Qt]="false"):(d=document.createElement("canvas"),d.dataset[Qt]="true",a.appendChild(d))}d.style.width||(d.style.width="100%"),d.style.height||(d.style.height="100%");const h=new qr(this,i,c);return u>=0?l.splice(u,0,h):l.push(h),h.canvas.loadCanvas(d),await h.start(),h}}class $r{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(e){var t;const n=null!==(t=e.value.hsl)&&void 0!==t?t:e.value;if(void 0!==n.h&&void 0!==n.s&&void 0!==n.l)return di(n)}handleRangeColor(e){var t;const n=null!==(t=e.value.hsl)&&void 0!==t?t:e.value;if(void 0!==n.h&&void 0!==n.l)return di({h:fn(n.h),l:fn(n.l),s:fn(n.s)})}parseString(e){if(!e.startsWith("hsl"))return;const t=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i.exec(e);return t?function(e){const t=di(e);return{a:e.a,b:t.b,g:t.g,r:t.r}}({a:t.length>4?En(t[5]):1,h:parseInt(t[1],10),l:parseInt(t[3],10),s:parseInt(t[2],10)}):void 0}}class Qr{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(e){var t;const n=null!==(t=e.value.rgb)&&void 0!==t?t:e.value;if(void 0!==n.r)return n}handleRangeColor(e){var t;const n=null!==(t=e.value.rgb)&&void 0!==t?t:e.value;if(void 0!==n.r)return{r:fn(n.r),g:fn(n.g),b:fn(n.b)}}parseString(e){if(!e.startsWith(this.stringPrefix))return;const t=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i.exec(e);return t?{a:t.length>4?En(t[5]):1,b:parseInt(t[3],10),g:parseInt(t[2],10),r:parseInt(t[1],10)}:void 0}}const Zr=function(){const e=new Qr,t=new $r;ri(e),ri(t);const n=new Yr;return n.init(),n}();Mn()||(window.tsParticles=Zr);const eo=e=>"object"===typeof e&&null!==e;function to(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!1;if(!eo(e)||!eo(t))return e===t;const i=Object.keys(e).filter((e=>!n(e))),r=Object.keys(t).filter((e=>!n(e)));if(i.length!==r.length)return!1;for(const o of i){const i=e[o],r=t[o];if(eo(i)&&eo(r)){if(i===t&&r===e)continue;if(!to(i,r,n))return!1}else if(Array.isArray(i)&&Array.isArray(r)){if(!no(i,r,n))return!1}else if(i!==r)return!1}return!0}function no(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){const r=e[i],o=t[i];if(Array.isArray(r)&&Array.isArray(o)){if(!no(r,o,n))return!1}else if(eo(r)&&eo(o)){if(!to(r,o,n))return!1}else if(r!==o)return!1}return!0}const io="tsparticles";class ro extends t.Component{constructor(e){super(e),this.state={init:!1,library:void 0}}destroy(){this.state.library&&(this.state.library.destroy(),this.setState({library:void 0}))}shouldComponentUpdate(e){var t,n;const i=null!==(t=e.options)&&void 0!==t?t:e.params,r=null!==(n=this.props.options)&&void 0!==n?n:this.props.params;return e.url!==this.props.url||e.id!==this.props.id||e.canvasClassName!==this.props.canvasClassName||e.className!==this.props.className||e.height!==this.props.height||e.width!==this.props.width||!to(e.style,this.props.style)||e.init!==this.props.init||e.loaded!==this.props.loaded||!to(i,r,(e=>e.startsWith("_")))}componentDidUpdate(){this.refresh()}forceUpdate(){this.refresh().then((()=>{super.forceUpdate()}))}componentDidMount(){(async()=>{this.props.init&&await this.props.init(Zr),this.setState({init:!0},(async()=>{await this.loadParticles()}))})()}componentWillUnmount(){this.destroy()}render(){const{width:e,height:n,className:i,canvasClassName:r,id:o}=this.props;return t.createElement("div",{className:i,id:o},t.createElement("canvas",{className:r,style:{...this.props.style,width:e,height:n}}))}async refresh(){this.destroy(),await this.loadParticles()}async loadParticles(){var e,t,n;if(!this.state.init)return;const i=null!==(e=null!==(t=this.props.id)&&void 0!==t?t:ro.defaultProps.id)&&void 0!==e?e:io,r=await Zr.load({url:this.props.url,id:i,options:null!==(n=this.props.options)&&void 0!==n?n:this.props.params});this.props.container&&(this.props.container.current=r),this.setState({library:r}),this.props.loaded&&await this.props.loaded(r)}}ro.defaultProps={width:"100%",height:"100%",options:{},style:{},url:void 0,id:io};const oo=ro;class so{constructor(){this.radius=0,this.mass=0}load(e){e&&(void 0!==e.mass&&(this.mass=e.mass),void 0!==e.radius&&(this.radius=e.radius))}}class ao extends Qi{constructor(){super(),this.density=5,this.value=50,this.limit=new so}load(e){e&&(super.load(e),void 0!==e.density&&(this.density=e.density),$n(e.limit)?this.limit.radius=e.limit:this.limit.load(e.limit))}}class co{constructor(){this.color=new Ti,this.color.value="#000000",this.draggable=!1,this.opacity=1,this.destroy=!0,this.orbits=!1,this.size=new ao}load(e){void 0!==e&&(void 0!==e.color&&(this.color=Ti.create(this.color,e.color)),void 0!==e.draggable&&(this.draggable=e.draggable),this.name=e.name,void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.position&&(this.position={},void 0!==e.position.x&&(this.position.x=gn(e.position.x)),void 0!==e.position.y&&(this.position.y=gn(e.position.y))),void 0!==e.size&&this.size.load(e.size),void 0!==e.destroy&&(this.destroy=e.destroy),void 0!==e.orbits&&(this.orbits=e.orbits))}}class lo{constructor(e,t,n,i){var r,o,s;this.absorbers=e,this.container=t,this._calcPosition=()=>{const e=xn({size:this.container.canvas.size,position:this.options.position});return on.create(e.x,e.y)},this._updateParticlePosition=(e,t)=>{if(e.destroyed)return;const n=this.container,i=n.canvas.size;if(e.needsNewPosition){const t=wn({size:i});e.position.setTo(t),e.velocity.setTo(e.initialVelocity),e.absorberOrbit=void 0,e.needsNewPosition=!1}if(this.options.orbits){var r;if(void 0===e.absorberOrbit&&(e.absorberOrbit=on.create(0,0),e.absorberOrbit.length=bn(e.getPosition(),this.position),e.absorberOrbit.angle=un()*Math.PI*2),e.absorberOrbit.length<=this.size&&!this.options.destroy){const t=Math.min(i.width,i.height);e.absorberOrbit.length=t*(.2*un()-.1+1)}void 0===e.absorberOrbitDirection&&(e.absorberOrbitDirection=e.velocity.x>=0?"clockwise":"counter-clockwise");const o=e.absorberOrbit.length,s=e.absorberOrbit.angle,a=e.absorberOrbitDirection;e.velocity.setTo(on.origin);const c={x:"clockwise"===a?Math.cos:Math.sin,y:"clockwise"===a?Math.sin:Math.cos};e.position.x=this.position.x+o*c.x(s),e.position.y=this.position.y+o*c.y(s),e.absorberOrbit.length-=t.length,e.absorberOrbit.angle+=(null!==(r=e.retina.moveSpeed)&&void 0!==r?r:0)*n.retina.pixelRatio/100*n.retina.reduceFactor}else{const n=on.origin;n.length=t.length,n.angle=t.angle,e.velocity.addTo(n)}},this.initialPosition=i?on.create(i.x,i.y):void 0,n instanceof co?this.options=n:(this.options=new co,this.options.load(n)),this.dragging=!1,this.name=this.options.name,this.opacity=this.options.opacity,this.size=fn(this.options.size.value)*t.retina.pixelRatio,this.mass=this.size*this.options.size.density*t.retina.reduceFactor;const a=this.options.size.limit;this.limit={radius:a.radius*t.retina.pixelRatio*t.retina.reduceFactor,mass:a.mass},this.color=null!==(r=ai(this.options.color))&&void 0!==r?r:{b:0,g:0,r:0},this.position=null!==(o=null===(s=this.initialPosition)||void 0===s?void 0:s.copy())&&void 0!==o?o:this._calcPosition()}attract(e){const t=this.container,n=this.options;if(n.draggable){const e=t.interactivity.mouse;if(e.clicking&&e.downPosition){bn(this.position,e.downPosition)<=this.size&&(this.dragging=!0)}else this.dragging=!1;this.dragging&&e.position&&(this.position.x=e.position.x,this.position.y=e.position.y)}const i=e.getPosition(),{dx:r,dy:o,distance:s}=Sn(this.position,i),a=on.create(r,o);if(a.length=this.mass/Math.pow(s,2)*t.retina.reduceFactor,s<this.size+e.getRadius()){const i=.033*e.getRadius()*t.retina.pixelRatio;this.size>e.getRadius()&&s<this.size-e.getRadius()||void 0!==e.absorberOrbit&&e.absorberOrbit.length<0?n.destroy?e.destroy():(e.needsNewPosition=!0,this._updateParticlePosition(e,a)):(n.destroy&&(e.size.value-=i),this._updateParticlePosition(e,a)),(this.limit.radius<=0||this.size<this.limit.radius)&&(this.size+=i),(this.limit.mass<=0||this.mass<this.limit.mass)&&(this.mass+=i*this.options.size.density*t.retina.reduceFactor)}else this._updateParticlePosition(e,a)}draw(e){e.translate(this.position.x,this.position.y),e.beginPath(),e.arc(0,0,this.size,0,2*Math.PI,!1),e.closePath(),e.fillStyle=pi(this.color,this.opacity),e.fill()}resize(){const e=this.initialPosition;this.position=e&&Dn(e,this.container.canvas.size,on.origin)?e:this._calcPosition()}}class uo{constructor(e){this.container=e,this.array=[],this.absorbers=[],this.interactivityAbsorbers=[],e.getAbsorber=e=>void 0===e||$n(e)?this.array[e||0]:this.array.find((t=>t.name===e)),e.addAbsorber=(e,t)=>this.addAbsorber(e,t)}addAbsorber(e,t){const n=new lo(this,this.container,e,t);return this.array.push(n),n}draw(e){for(const t of this.array)t.draw(e)}handleClickMode(e){const t=this.absorbers,n=this.interactivityAbsorbers;if("absorber"===e){const e=Wn(n),i=null!==e&&void 0!==e?e:Wn(t),r=this.container.interactivity.mouse.clickPosition;this.addAbsorber(i,r)}}async init(){this.absorbers=this.container.actualOptions.absorbers,this.interactivityAbsorbers=this.container.actualOptions.interactivity.modes.absorbers,Hn(this.absorbers,(e=>{this.addAbsorber(e)}))}particleUpdate(e){for(const t of this.array)if(t.attract(e),e.destroyed)break}removeAbsorber(e){const t=this.array.indexOf(e);t>=0&&this.array.splice(t,1)}resize(){for(const e of this.array)e.resize()}stop(){this.array=[]}}class ho{constructor(){this.id="absorbers"}getPlugin(e){return new uo(e)}loadOptions(e,t){var n;(this.needsPlugin(e)||this.needsPlugin(t))&&(null!==t&&void 0!==t&&t.absorbers&&(e.absorbers=Hn(t.absorbers,(e=>{const t=new co;return t.load(e),t}))),e.interactivity.modes.absorbers=Hn(null===t||void 0===t||null===(n=t.interactivity)||void 0===n||null===(n=n.modes)||void 0===n?void 0:n.absorbers,(e=>{const t=new co;return t.load(e),t})))}needsPlugin(e){var t;if(!e)return!1;const n=e.absorbers;return ei(n)?!!n.length:!!n||!(null===(t=e.interactivity)||void 0===t||null===(t=t.events)||void 0===t||null===(t=t.onClick)||void 0===t||!t.mode||!In("absorber",e.interactivity.events.onClick.mode))}}class po{load(e){e&&(void 0!==e.bottom&&(this.bottom=gn(e.bottom)),void 0!==e.left&&(this.left=gn(e.left)),void 0!==e.right&&(this.right=gn(e.right)),void 0!==e.top&&(this.top=gn(e.top)))}}class fo extends Qi{constructor(){super(),this.value=3}}class vo extends Qi{constructor(){super(),this.value={min:4,max:9}}}class mo{constructor(){this.count=1,this.factor=new fo,this.rate=new vo,this.sizeOffset=!0}load(e){var t;e&&(void 0!==e.color&&(this.color=Ti.create(this.color,e.color)),void 0!==e.count&&(this.count=e.count),this.factor.load(e.factor),this.rate.load(e.rate),this.particles=Hn(e.particles,(e=>Nn({},e))),void 0!==e.sizeOffset&&(this.sizeOffset=e.sizeOffset),e.colorOffset&&(this.colorOffset=null!==(t=this.colorOffset)&&void 0!==t?t:{},void 0!==e.colorOffset.h&&(this.colorOffset.h=e.colorOffset.h),void 0!==e.colorOffset.s&&(this.colorOffset.s=e.colorOffset.s),void 0!==e.colorOffset.l&&(this.colorOffset.l=e.colorOffset.l)))}}class go{constructor(){this.bounds=new po,this.mode="none",this.split=new mo}load(e){e&&(e.mode&&(this.mode=e.mode),e.bounds&&this.bounds.load(e.bounds),this.split.load(e.split))}}function yo(e,t,n,i){const r=n.options.destroy;if(!r)return;const o=r.split,s=Ar(e,t,n.options),a=yn(o.factor),c=n.getFillColor();if(o.color)s.color.load(o.color);else if(o.colorOffset&&c){var l,u,d;s.color.load({value:{hsl:{h:c.h+fn(null!==(l=o.colorOffset.h)&&void 0!==l?l:0),s:c.s+fn(null!==(u=o.colorOffset.s)&&void 0!==u?u:0),l:c.l+fn(null!==(d=o.colorOffset.l)&&void 0!==d?d:0)}}})}else s.color.load({value:{hsl:n.getFillColor()}});s.move.load({center:{x:n.position.x,y:n.position.y,mode:"precise"}}),$n(s.size.value)?s.size.value/=a:(s.size.value.min/=a,s.size.value.max/=a),s.load(i);const h=o.sizeOffset?gn(-n.size.value,n.size.value):0,p={x:n.position.x+pn(h),y:n.position.y+pn(h)};return t.particles.addParticle(p,s,n.group,(e=>{var t;return!(e.size.value<.5)&&(e.velocity.length=pn(gn(n.velocity.length,e.velocity.length)),e.splitCount=(null!==(t=n.splitCount)&&void 0!==t?t:0)+1,e.unbreakable=!0,setTimeout((()=>{e.unbreakable=!1}),500),!0)}))}class So{constructor(e,t){this.engine=e,this.container=t}init(e){const t=this.container,n=e.options.destroy;if(!n)return;e.splitCount=0;const i=n.bounds;e.destroyBounds||(e.destroyBounds={});const{bottom:r,left:o,right:s,top:a}=i,{destroyBounds:c}=e,l=t.canvas.size;r&&(c.bottom=fn(r)*l.height/100),o&&(c.left=fn(o)*l.width/100),s&&(c.right=fn(s)*l.width/100),a&&(c.top=fn(a)*l.height/100)}isEnabled(e){return!e.destroyed}loadOptions(e){e.destroy||(e.destroy=new go);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.destroy.load(null===r||void 0===r?void 0:r.destroy)}particleDestroyed(e,t){if(t)return;const n=e.options.destroy;n&&"split"===n.mode&&function(e,t,n){const i=n.options.destroy;if(!i)return;const r=i.split;if(r.count>=0&&(void 0===n.splitCount||n.splitCount++>r.count))return;const o=yn(r.rate),s=Wn(r.particles);for(let a=0;a<o;a++)yo(e,t,n,s)}(this.engine,this.container,e)}update(e){if(!this.isEnabled(e))return;const t=e.getPosition(),n=e.destroyBounds;n&&(void 0!==n.bottom&&t.y>=n.bottom||void 0!==n.left&&t.x<=n.left||void 0!==n.right&&t.x>=n.right||void 0!==n.top&&t.y<=n.top)&&e.destroy()}}class bo{randomPosition(e,t,n){const[i,r]=[t.width/2,t.height/2],o=((e,t)=>{const n=un()/4,i=Math.atan(t/e*Math.tan(2*Math.PI*n)),r=un();return r<.25?i:r<.5?Math.PI-i:r<.75?Math.PI+i:-i})(i,r),s=((e,t,n)=>e*t/Math.sqrt((t*Math.cos(n))**2+(e*Math.sin(n))**2))(i,r,o),a=n?s*Math.sqrt(un()):s;return{x:e.x+a*Math.cos(o),y:e.y+a*Math.sin(o)}}}class _o{constructor(){this.wait=!1}load(e){e&&(void 0!==e.count&&(this.count=e.count),void 0!==e.delay&&(this.delay=gn(e.delay)),void 0!==e.duration&&(this.duration=gn(e.duration)),void 0!==e.wait&&(this.wait=e.wait))}}class wo{constructor(){this.quantity=1,this.delay=.1}load(e){void 0!==e&&(void 0!==e.quantity&&(this.quantity=gn(e.quantity)),void 0!==e.delay&&(this.delay=gn(e.delay)))}}class xo{constructor(){this.mode="percent",this.height=0,this.width=0}load(e){void 0!==e&&(void 0!==e.mode&&(this.mode=e.mode),void 0!==e.height&&(this.height=e.height),void 0!==e.width&&(this.width=e.width))}}class Co{constructor(){this.autoPlay=!0,this.fill=!0,this.life=new _o,this.rate=new wo,this.shape="square",this.startCount=0}load(e){e&&(void 0!==e.autoPlay&&(this.autoPlay=e.autoPlay),void 0!==e.size&&(this.size||(this.size=new xo),this.size.load(e.size)),void 0!==e.direction&&(this.direction=e.direction),this.domId=e.domId,void 0!==e.fill&&(this.fill=e.fill),this.life.load(e.life),this.name=e.name,this.particles=Hn(e.particles,(e=>Nn({},e))),this.rate.load(e.rate),void 0!==e.shape&&(this.shape=e.shape),void 0!==e.position&&(this.position={},void 0!==e.position.x&&(this.position.x=gn(e.position.x)),void 0!==e.position.y&&(this.position.y=gn(e.position.y))),void 0!==e.spawnColor&&(void 0===this.spawnColor&&(this.spawnColor=new qi),this.spawnColor.load(e.spawnColor)),void 0!==e.startCount&&(this.startCount=e.startCount))}}class Eo{constructor(e,t,n,i,r){var o,s,a,c,l,u,d,h,p,f;this.emitters=t,this.container=n,this._calcPosition=()=>xn({size:this.container.canvas.size,position:this.options.position}),this._destroy=()=>{this.emitters.removeEmitter(this),this._engine.dispatchEvent("emitterDestroyed",{container:this.container,data:{emitter:this}})},this._emit=()=>{if(this._paused)return;const e=fn(this.options.rate.quantity);this._emitParticles(e)},this._emitParticles=e=>{const t=this.getPosition(),n=this.getSize(),i=Wn(this._particlesOptions);for(let a=0;a<e;a++){var r,o;const e=Nn({},i);if(this.spawnColor){var s;const t=null===(s=this.options.spawnColor)||void 0===s?void 0:s.animation;t&&(this.spawnColor.h=this._setColorAnimation(t.h,this.spawnColor.h,360),this.spawnColor.s=this._setColorAnimation(t.s,this.spawnColor.s,100),this.spawnColor.l=this._setColorAnimation(t.l,this.spawnColor.l,100)),e.color?e.color.value=this.spawnColor:e.color={value:this.spawnColor}}if(!t)return;const a=null!==(r=null===(o=this._shape)||void 0===o?void 0:o.randomPosition(t,n,this.fill))&&void 0!==r?r:t;this.container.particles.addParticle(a,e)}},this._prepareToDie=()=>{var e;if(this._paused)return;const t=void 0!==(null===(e=this.options.life)||void 0===e?void 0:e.duration)?fn(this.options.life.duration):void 0;this.container.retina.reduceFactor&&(this._lifeCount>0||this._immortal)&&void 0!==t&&t>0&&(this._duration=1e3*t)},this._setColorAnimation=(e,t,n)=>{var i;const r=this.container;if(!e.enable)return t;const o=pn(e.offset),s=1e3*fn(this.options.rate.delay)/r.retina.reduceFactor;return(t+fn(null!==(i=e.speed)&&void 0!==i?i:0)*r.fpsLimit/s+3.6*o)%n},this._engine=e,this._currentDuration=0,this._currentEmitDelay=0,this._currentSpawnDelay=0,this._initialPosition=r,i instanceof Co?this.options=i:(this.options=new Co,this.options.load(i)),this._spawnDelay=1e3*fn(null!==(o=this.options.life.delay)&&void 0!==o?o:0)/this.container.retina.reduceFactor,this.position=null!==(s=this._initialPosition)&&void 0!==s?s:this._calcPosition(),this.name=this.options.name,this._shape=null===(a=this._engine.emitterShapeManager)||void 0===a?void 0:a.getShape(this.options.shape),this.fill=this.options.fill,this._firstSpawn=!this.options.life.wait,this._startParticlesAdded=!1;let v=Nn({},this.options.particles);null!==(c=v)&&void 0!==c||(v={}),null!==(u=(l=v).move)&&void 0!==u||(l.move={}),null!==(h=(d=v.move).direction)&&void 0!==h||(d.direction=this.options.direction),this.options.spawnColor&&(this.spawnColor=li(this.options.spawnColor)),this._paused=!this.options.autoPlay,this._particlesOptions=v,this.size=null!==(p=this.options.size)&&void 0!==p?p:(()=>{const e=new xo;return e.load({height:0,mode:"percent",width:0}),e})(),this._lifeCount=null!==(f=this.options.life.count)&&void 0!==f?f:-1,this._immortal=this._lifeCount<=0,this._engine.dispatchEvent("emitterCreated",{container:n,data:{emitter:this}}),this.play()}externalPause(){this._paused=!0,this.pause()}externalPlay(){this._paused=!1,this.play()}getPosition(){if(this.options.domId){const e=this.container,t=document.getElementById(this.options.domId);if(t){const n=t.getBoundingClientRect();return{x:(n.x+n.width/2)*e.retina.pixelRatio,y:(n.y+n.height/2)*e.retina.pixelRatio}}}return this.position}getSize(){const e=this.container;if(this.options.domId){const t=document.getElementById(this.options.domId);if(t){const n=t.getBoundingClientRect();return{width:n.width*e.retina.pixelRatio,height:n.height*e.retina.pixelRatio}}}return function(e,t){return Xn(e,t)}(this.size,e.canvas.size)}pause(){this._paused||delete this._emitDelay}play(){var e;if(!this._paused&&this.container.retina.reduceFactor&&(this._lifeCount>0||this._immortal||!this.options.life.count)&&(this._firstSpawn||this._currentSpawnDelay>=(null!==(e=this._spawnDelay)&&void 0!==e?e:0))){if(void 0===this._emitDelay){const e=fn(this.options.rate.delay);this._emitDelay=1e3*e/this.container.retina.reduceFactor}(this._lifeCount>0||this._immortal)&&this._prepareToDie()}}resize(){const e=this._initialPosition;this.position=e&&Dn(e,this.container.canvas.size,on.origin)?e:this._calcPosition()}update(e){if(!this._paused){var t,n;if(this._firstSpawn)this._firstSpawn=!1,this._currentSpawnDelay=null!==(t=this._spawnDelay)&&void 0!==t?t:0,this._currentEmitDelay=null!==(n=this._emitDelay)&&void 0!==n?n:0;if(this._startParticlesAdded||(this._startParticlesAdded=!0,this._emitParticles(this.options.startCount)),void 0!==this._duration&&(this._currentDuration+=e.value,this._currentDuration>=this._duration)){var i;if(this.pause(),void 0!==this._spawnDelay&&delete this._spawnDelay,this._immortal||this._lifeCount--,this._lifeCount>0||this._immortal)this.position=this._calcPosition(),this._spawnDelay=1e3*fn(null!==(i=this.options.life.delay)&&void 0!==i?i:0)/this.container.retina.reduceFactor;else this._destroy();this._currentDuration-=this._duration,delete this._duration}void 0!==this._spawnDelay&&(this._currentSpawnDelay+=e.value,this._currentSpawnDelay>=this._spawnDelay&&(this._engine.dispatchEvent("emitterPlay",{container:this.container}),this.play(),this._currentSpawnDelay-=this._currentSpawnDelay,delete this._spawnDelay)),void 0!==this._emitDelay&&(this._currentEmitDelay+=e.value,this._currentEmitDelay>=this._emitDelay&&(this._emit(),this._currentEmitDelay-=this._emitDelay))}}}class Po{constructor(e,t){this.container=t,this._engine=e,this.array=[],this.emitters=[],this.interactivityEmitters={random:{count:1,enable:!1},value:[]},t.getEmitter=e=>void 0===e||$n(e)?this.array[e||0]:this.array.find((t=>t.name===e)),t.addEmitter=(e,t)=>this.addEmitter(e,t),t.removeEmitter=e=>{const n=t.getEmitter(e);n&&this.removeEmitter(n)},t.playEmitter=e=>{const n=t.getEmitter(e);n&&n.externalPlay()},t.pauseEmitter=e=>{const n=t.getEmitter(e);n&&n.externalPause()}}addEmitter(e,t){const n=new Co;n.load(e);const i=new Eo(this._engine,this,this.container,n,t);return this.array.push(i),i}handleClickMode(e){var t;const n=this.emitters,i=this.interactivityEmitters;if("emitter"!==e)return;let r;if(i&&ei(i.value))if(i.value.length>0&&i.random.enable){r=[];const e=[];for(let t=0;t<i.random.count;t++){const n=kn(i.value);e.includes(n)&&e.length<i.value.length?t--:(e.push(n),r.push(On(i.value,n)))}}else r=i.value;else r=null===i||void 0===i?void 0:i.value;const o=null!==(t=r)&&void 0!==t?t:n,s=this.container.interactivity.mouse.clickPosition;Hn(o,(e=>{this.addEmitter(e,s)}))}async init(){if(this.emitters=this.container.actualOptions.emitters,this.interactivityEmitters=this.container.actualOptions.interactivity.modes.emitters,this.emitters)if(ei(this.emitters))for(const e of this.emitters)this.addEmitter(e);else this.addEmitter(this.emitters)}pause(){for(const e of this.array)e.pause()}play(){for(const e of this.array)e.play()}removeEmitter(e){const t=this.array.indexOf(e);t>=0&&this.array.splice(t,1)}resize(){for(const e of this.array)e.resize()}stop(){this.array=[]}update(e){for(const t of this.array)t.update(e)}}const To=new Map;class Ro{constructor(e){this._engine=e}addShape(e,t){this.getShape(e)||To.set(e,t)}getShape(e){return To.get(e)}getSupportedShapes(){return To.keys()}}function Mo(e,t){return e+t*(un()-.5)}class Ao{randomPosition(e,t,n){if(n)return{x:Mo(e.x,t.width),y:Mo(e.y,t.height)};{const n=t.width/2,i=t.height/2,r=Math.floor(4*un()),o=2*(un()-.5);switch(r){case 0:return{x:e.x+o*n,y:e.y-i};case 1:return{x:e.x-n,y:e.y+o*i};case 2:return{x:e.x+o*n,y:e.y+i};default:return{x:e.x+n,y:e.y+o*i}}}}}class Io{constructor(e){this._engine=e,this.id="emitters"}getPlugin(e){return new Po(this._engine,e)}loadOptions(e,t){var n;if(!this.needsPlugin(e)&&!this.needsPlugin(t))return;null!==t&&void 0!==t&&t.emitters&&(e.emitters=Hn(t.emitters,(e=>{const t=new Co;return t.load(e),t})));const i=null===t||void 0===t||null===(n=t.interactivity)||void 0===n||null===(n=n.modes)||void 0===n?void 0:n.emitters;if(i)if(ei(i))e.interactivity.modes.emitters={random:{count:1,enable:!0},value:i.map((e=>{const t=new Co;return t.load(e),t}))};else{const t=i;if(void 0!==t.value)if(ei(t.value)){var r,o;e.interactivity.modes.emitters={random:{count:null!==(r=t.random.count)&&void 0!==r?r:1,enable:null!==(o=t.random.enable)&&void 0!==o&&o},value:t.value.map((e=>{const t=new Co;return t.load(e),t}))}}else{var s,a;const n=new Co;n.load(t.value),e.interactivity.modes.emitters={random:{count:null!==(s=t.random.count)&&void 0!==s?s:1,enable:null!==(a=t.random.enable)&&void 0!==a&&a},value:n}}else{(e.interactivity.modes.emitters={random:{count:1,enable:!1},value:new Co}).value.load(i)}}}needsPlugin(e){var t;if(!e)return!1;const n=e.emitters;return ei(n)&&!!n.length||void 0!==n||!(null===(t=e.interactivity)||void 0===t||null===(t=t.events)||void 0===t||null===(t=t.onClick)||void 0===t||!t.mode)&&In("emitter",e.interactivity.events.onClick.mode)}}class ko{constructor(e){this.container=e,this.type="external"}}class Oo{constructor(){this.delay=1,this.pauseOnStop=!1,this.quantity=1}load(e){e&&(void 0!==e.delay&&(this.delay=e.delay),void 0!==e.quantity&&(this.quantity=e.quantity),void 0!==e.particles&&(this.particles=Nn({},e.particles)),void 0!==e.pauseOnStop&&(this.pauseOnStop=e.pauseOnStop))}}class Do extends ko{constructor(e){super(e),this._delay=0}clear(){}init(){}async interact(e){var t,n,i,r;const o=this.container,{interactivity:s}=o;if(!o.retina.reduceFactor)return;const a=o.actualOptions.interactivity.modes.trail;if(!a)return;const c=1e3*a.delay/this.container.retina.reduceFactor;if(this._delay<c&&(this._delay+=e.value),this._delay<c)return;const l=!(a.pauseOnStop&&(s.mouse.position===this._lastPosition||(null===(t=s.mouse.position)||void 0===t?void 0:t.x)===(null===(n=this._lastPosition)||void 0===n?void 0:n.x)&&(null===(i=s.mouse.position)||void 0===i?void 0:i.y)===(null===(r=this._lastPosition)||void 0===r?void 0:r.y))),u=o.interactivity.mouse.position;u?this._lastPosition={...u}:delete this._lastPosition,l&&o.particles.push(a.quantity,o.interactivity.mouse,a.particles),this._delay-=c}isEnabled(e){var t;const n=this.container,i=n.actualOptions,r=n.interactivity.mouse,o=(null!==(t=null===e||void 0===e?void 0:e.interactivity)&&void 0!==t?t:i.interactivity).events;return r.clicking&&r.inside&&!!r.position&&In("trail",o.onClick.mode)||r.inside&&!!r.position&&In("trail",o.onHover.mode)}loadModeOptions(e){e.trail||(e.trail=new Oo);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.trail.load(null===r||void 0===r?void 0:r.trail)}reset(){}}class Lo{constructor(){this.enable=!1,this.value=0}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.value&&(this.value=gn(e.value)))}}class No{constructor(){this.darken=new Lo,this.enable=!1,this.enlighten=new Lo,this.mode="vertical",this.speed=25}load(e){e&&(void 0!==e.backColor&&(this.backColor=Ti.create(this.backColor,e.backColor)),this.darken.load(e.darken),void 0!==e.enable&&(this.enable=e.enable),this.enlighten.load(e.enlighten),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.speed&&(this.speed=gn(e.speed)))}}class zo{getTransformValues(e){var t;const n=(null===(t=e.roll)||void 0===t?void 0:t.enable)&&e.roll,i=n&&n.horizontal,r=n&&n.vertical;return{a:i?Math.cos(n.angle):void 0,d:r?Math.sin(n.angle):void 0}}init(e){!function(e){const t=e.options.roll;if(null!==t&&void 0!==t&&t.enable)if(e.roll={enable:t.enable,horizontal:"horizontal"===t.mode||"both"===t.mode,vertical:"vertical"===t.mode||"both"===t.mode,angle:un()*Math.PI*2,speed:fn(t.speed)/360},t.backColor)e.backColor=li(t.backColor);else if(t.darken.enable&&t.enlighten.enable){const n=un()>=.5?"darken":"enlighten";e.roll.alter={type:n,value:fn("darken"===n?t.darken.value:t.enlighten.value)}}else t.darken.enable?e.roll.alter={type:"darken",value:fn(t.darken.value)}:t.enlighten.enable&&(e.roll.alter={type:"enlighten",value:fn(t.enlighten.value)});else e.roll={enable:!1,horizontal:!1,vertical:!1,angle:0,speed:0}}(e)}isEnabled(e){const t=e.options.roll;return!e.destroyed&&!e.spawning&&!(null===t||void 0===t||!t.enable)}loadOptions(e){e.roll||(e.roll=new No);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.roll.load(null===r||void 0===r?void 0:r.roll)}update(e,t){this.isEnabled(e)&&function(e,t){const n=e.options.roll,i=e.roll;if(!i||null===n||void 0===n||!n.enable)return;const r=i.speed*t.factor,o=2*Math.PI;i.angle+=r,i.angle>o&&(i.angle-=o)}(e,t)}}class Fo{static init(e){var t,n,i,r,o,s,a;const c=new Fo,l=e.selector;if(!l)throw new Error("No selector provided");const u=document.querySelector(l);if(!u)throw new Error("No element found for selector");return Zr.set(l.replace(".","").replace("!",""),u,{fullScreen:{enable:!1},particles:{color:{value:null!==(t=e.color)&&void 0!==t?t:"!000000"},links:{color:"random",distance:null!==(n=e.minDistance)&&void 0!==n?n:120,enable:null!==(i=e.connectParticles)&&void 0!==i&&i},move:{enable:!0,speed:null!==(r=e.speed)&&void 0!==r?r:.5},number:{value:null!==(o=e.maxParticles)&&void 0!==o?o:100},size:{value:{min:1,max:null!==(s=e.sizeVariations)&&void 0!==s?s:3}}},responsive:null===(a=e.responsive)||void 0===a?void 0:a.map((t=>{var n,i,r,o,s;return{maxWidth:t.breakpoint,options:{particles:{color:{value:null===(n=t.options)||void 0===n?void 0:n.color},links:{distance:null===(i=t.options)||void 0===i?void 0:i.minDistance,enable:null===(r=t.options)||void 0===r?void 0:r.connectParticles},number:{value:e.maxParticles},move:{enable:!0,speed:null===(o=t.options)||void 0===o?void 0:o.speed},size:{value:null===(s=t.options)||void 0===s?void 0:s.sizeVariations}}}}}))}).then((e=>{c._container=e})),c}destroy(){const e=this._container;e&&e.destroy()}pauseAnimation(){const e=this._container;e&&e.pause()}resumeAnimation(){const e=this._container;e&&e.play()}}const Uo=e=>{const{particlesJS:t,pJSDom:n}=(e=>{const t=(t,n)=>e.load(t,n);return t.load=(t,n,i)=>{e.loadJSON(t,n).then((e=>{e&&i(e)})).catch((()=>{i(void 0)}))},t.setOnClickHandler=t=>{e.setOnClickHandler(t)},{particlesJS:t,pJSDom:e.dom()}})(e);return window.particlesJS=t,window.pJSDom=n,window.Particles=Fo,{particlesJS:t,pJSDom:n,Particles:Fo}};function Bo(e,t,n,i,r,o){!function(e,t){var n;const i=e.options,r=i.move.path;if(!r.enable)return;if(e.lastPathTime<=e.pathDelay)return void(e.lastPathTime+=t.value);const o=null===(n=e.pathGenerator)||void 0===n?void 0:n.generate(e,t);o&&e.velocity.addTo(o);r.clamp&&(e.velocity.x=dn(e.velocity.x,-1,1),e.velocity.y=dn(e.velocity.y,-1,1));e.lastPathTime-=e.pathDelay}(e,o);const s=e.gravity,a=null!==s&&void 0!==s&&s.enable&&s.inverse?-1:1;r&&n&&(e.velocity.x+=r*o.factor/(60*n)),null!==s&&void 0!==s&&s.enable&&n&&(e.velocity.y+=a*(s.acceleration*o.factor)/(60*n));const c=e.moveDecay;e.velocity.multTo(c);const l=e.velocity.mult(n);null!==s&&void 0!==s&&s.enable&&i>0&&(!s.inverse&&l.y>=0&&l.y>=i||s.inverse&&l.y<=0&&l.y<=-i)&&(l.y=a*i,n&&(e.velocity.y=l.y/n));const u=e.options.zIndex,d=(1-e.zIndexFactor)**u.velocityRate;l.multTo(d);const{position:h}=e;h.addTo(l),t.vibrate&&(h.x+=Math.sin(h.x*Math.cos(h.y)),h.y+=Math.cos(h.y*Math.sin(h.x)))}class jo{constructor(){this._initSpin=e=>{var t;const n=e.container,i=e.options.move.spin;if(!i.enable)return;const r=null!==(t=i.position)&&void 0!==t?t:{x:50,y:50},o={x:r.x/100*n.canvas.size.width,y:r.y/100*n.canvas.size.height},s=bn(e.getPosition(),o),a=fn(i.acceleration);e.retina.spinAcceleration=a*n.retina.pixelRatio,e.spin={center:o,direction:e.velocity.x>=0?"clockwise":"counter-clockwise",angle:e.velocity.angle,radius:s,acceleration:e.retina.spinAcceleration}}}init(e){const t=e.options.move.gravity;e.gravity={enable:t.enable,acceleration:fn(t.acceleration),inverse:t.inverse},this._initSpin(e)}isEnabled(e){return!e.destroyed&&e.options.move.enable}move(e,t){var n,i,r,o,s;const a=e.options,c=a.move;if(!c.enable)return;const l=e.container,u=l.retina.pixelRatio,d=function(e){return e.slow.inRange?e.slow.factor:1}(e),h=(null!==(i=(n=e.retina).moveSpeed)&&void 0!==i?i:n.moveSpeed=fn(c.speed)*u)*l.retina.reduceFactor,p=null!==(o=(r=e.retina).moveDrift)&&void 0!==o?o:r.moveDrift=fn(e.options.move.drift)*u,f=mn(a.size.value)*u,v=h*(c.size?e.getRadius()/f:1)*d*(t.factor||1)/2,m=null!==(s=e.retina.maxSpeed)&&void 0!==s?s:l.retina.maxSpeed;c.spin.enable?function(e,t){const n=e.container;if(!e.spin)return;const i={x:"clockwise"===e.spin.direction?Math.cos:Math.sin,y:"clockwise"===e.spin.direction?Math.sin:Math.cos};e.position.x=e.spin.center.x+e.spin.radius*i.x(e.spin.angle),e.position.y=e.spin.center.y+e.spin.radius*i.y(e.spin.angle),e.spin.radius+=e.spin.acceleration;const r=Math.max(n.canvas.size.width,n.canvas.size.height);e.spin.radius>r/2?(e.spin.radius=r/2,e.spin.acceleration*=-1):e.spin.radius<0&&(e.spin.radius=0,e.spin.acceleration*=-1),e.spin.angle+=t/100*(1-e.spin.radius/r)}(e,v):Bo(e,c,v,m,p,t),function(e){const t=e.initialPosition,{dx:n,dy:i}=Sn(t,e.position),r=Math.abs(n),o=Math.abs(i),{maxDistance:s}=e.retina,a=s.horizontal,c=s.vertical;if(a||c)if((a&&r>=a||c&&o>=c)&&!e.misplaced)e.misplaced=!!a&&r>a||!!c&&o>c,a&&(e.velocity.x=e.velocity.y/2-e.velocity.x),c&&(e.velocity.y=e.velocity.x/2-e.velocity.y);else if((!a||r<a)&&(!c||o<c)&&e.misplaced)e.misplaced=!1;else if(e.misplaced){const n=e.position,i=e.velocity;a&&(n.x<t.x&&i.x<0||n.x>t.x&&i.x>0)&&(i.x*=-un()),c&&(n.y<t.y&&i.y<0||n.y>t.y&&i.y>0)&&(i.y*=-un())}}(e)}}class Vo{draw(e,t,n){t.circleRange||(t.circleRange={min:0,max:2*Math.PI});const i=t.circleRange;e.arc(0,0,n,i.min,i.max,!1)}getSidesCount(){return 12}particleInit(e,t){var n;const i=t.shapeData,r=null!==(n=null===i||void 0===i?void 0:i.angle)&&void 0!==n?n:{max:360,min:0};t.circleRange=Zn(r)?{min:r.min*Math.PI/180,max:r.max*Math.PI/180}:{min:0,max:r*Math.PI/180}}}function Ho(e,t,n,i,r){var o,s,a,c,l,u,d,h,p;if(!t||!n.enable||(null!==(o=t.maxLoops)&&void 0!==o?o:0)>0&&(null!==(s=t.loops)&&void 0!==s?s:0)>(null!==(a=t.maxLoops)&&void 0!==a?a:0))return;if(t.time||(t.time=0),(null!==(c=t.delayTime)&&void 0!==c?c:0)>0&&t.time<(null!==(l=t.delayTime)&&void 0!==l?l:0)&&(t.time+=e.value),(null!==(u=t.delayTime)&&void 0!==u?u:0)>0&&t.time<(null!==(d=t.delayTime)&&void 0!==d?d:0))return;const f=pn(n.offset),v=(null!==(h=t.velocity)&&void 0!==h?h:0)*e.factor+3.6*f,m=null!==(p=t.decay)&&void 0!==p?p:1;r&&"increasing"!==t.status?(t.value-=v,t.value<0&&(t.loops||(t.loops=0),t.loops++,t.status="increasing",t.value+=t.value)):(t.value+=v,t.value>i&&(t.loops||(t.loops=0),t.loops++,r&&(t.status="decreasing",t.value-=t.value%i))),t.velocity&&1!==m&&(t.velocity*=m),t.value>i&&(t.value%=i)}class Wo{constructor(e){this.container=e}init(e){const t=li(e.options.color,e.id,e.options.reduceDuplicates);t&&(e.color=Si(t,e.options.color.animation,this.container.retina.reduceFactor))}isEnabled(e){const{h:t,s:n,l:i}=e.options.color.animation,{color:r}=e;return!e.destroyed&&!e.spawning&&(void 0!==(null===r||void 0===r?void 0:r.h.value)&&t.enable||void 0!==(null===r||void 0===r?void 0:r.s.value)&&n.enable||void 0!==(null===r||void 0===r?void 0:r.l.value)&&i.enable)}update(e,t){!function(e,t){const{h:n,s:i,l:r}=e.options.color.animation,{color:o}=e;if(!o)return;const{h:s,s:a,l:c}=o;s&&Ho(t,s,n,360,!1),a&&Ho(t,a,i,100,!0),c&&Ho(t,c,r,100,!0)}(e,t)}}class Go{constructor(e){this.container=e}init(e){const t=e.options.opacity;e.opacity=qn(t,1);const n=t.animation;n.enable&&(e.opacity.velocity=fn(n.speed)/100*this.container.retina.reduceFactor,n.sync||(e.opacity.velocity*=un()))}isEnabled(e){var t,n,i,r;return!e.destroyed&&!e.spawning&&!!e.opacity&&e.opacity.enable&&((null!==(t=e.opacity.maxLoops)&&void 0!==t?t:0)<=0||(null!==(n=e.opacity.maxLoops)&&void 0!==n?n:0)>0&&(null!==(i=e.opacity.loops)&&void 0!==i?i:0)<(null!==(r=e.opacity.maxLoops)&&void 0!==r?r:0))}reset(e){e.opacity&&(e.opacity.time=0,e.opacity.loops=0)}update(e,t){this.isEnabled(e)&&function(e,t){var n,i,r,o,s,a,c,l;const u=e.opacity;if(e.destroyed||null===u||void 0===u||!u.enable||(null!==(n=u.maxLoops)&&void 0!==n?n:0)>0&&(null!==(i=u.loops)&&void 0!==i?i:0)>(null!==(r=u.maxLoops)&&void 0!==r?r:0))return;const d=u.min,h=u.max,p=null!==(o=u.decay)&&void 0!==o?o:1;if(u.time||(u.time=0),(null!==(s=u.delayTime)&&void 0!==s?s:0)>0&&u.time<(null!==(a=u.delayTime)&&void 0!==a?a:0)&&(u.time+=t.value),!((null!==(c=u.delayTime)&&void 0!==c?c:0)>0&&u.time<(null!==(l=u.delayTime)&&void 0!==l?l:0))){switch(u.status){case"increasing":var f;u.value>=h?(u.status="decreasing",u.loops||(u.loops=0),u.loops++):u.value+=(null!==(f=u.velocity)&&void 0!==f?f:0)*t.factor;break;case"decreasing":var v;u.value<=d?(u.status="increasing",u.loops||(u.loops=0),u.loops++):u.value-=(null!==(v=u.velocity)&&void 0!==v?v:0)*t.factor}u.velocity&&1!==u.decay&&(u.velocity*=p),function(e,t,n,i){switch(e.options.opacity.animation.destroy){case"max":t>=i&&e.destroy();break;case"min":t<=n&&e.destroy()}}(e,u.value,d,h),e.destroyed||(u.value=dn(u.value,d,h))}}(e,t)}}class qo{constructor(e){this.container=e,this.modes=["bounce","bounce-vertical","bounce-horizontal","bounceVertical","bounceHorizontal","split"]}update(e,t,n,i){if(!this.modes.includes(i))return;const r=this.container;let o=!1;for(const[,d]of r.plugins)if(void 0!==d.particleBounce&&(o=d.particleBounce(e,n,t)),o)break;if(o)return;const s=e.getPosition(),a=e.offset,c=e.getRadius(),l=Ln(s,c),u=r.canvas.size;!function(e){if("bounce"!==e.outMode&&"bounce-horizontal"!==e.outMode&&"bounceHorizontal"!==e.outMode&&"split"!==e.outMode||"left"!==e.direction&&"right"!==e.direction)return;e.bounds.right<0&&"left"===e.direction?e.particle.position.x=e.size+e.offset.x:e.bounds.left>e.canvasSize.width&&"right"===e.direction&&(e.particle.position.x=e.canvasSize.width-e.size-e.offset.x);const t=e.particle.velocity.x;let n=!1;if("right"===e.direction&&e.bounds.right>=e.canvasSize.width&&t>0||"left"===e.direction&&e.bounds.left<=0&&t<0){const t=yn(e.particle.options.bounce.horizontal);e.particle.velocity.x*=-t,n=!0}if(!n)return;const i=e.offset.x+e.size;e.bounds.right>=e.canvasSize.width&&"right"===e.direction?e.particle.position.x=e.canvasSize.width-i:e.bounds.left<=0&&"left"===e.direction&&(e.particle.position.x=i),"split"===e.outMode&&e.particle.destroy()}({particle:e,outMode:i,direction:t,bounds:l,canvasSize:u,offset:a,size:c}),function(e){if("bounce"!==e.outMode&&"bounce-vertical"!==e.outMode&&"bounceVertical"!==e.outMode&&"split"!==e.outMode||"bottom"!==e.direction&&"top"!==e.direction)return;e.bounds.bottom<0&&"top"===e.direction?e.particle.position.y=e.size+e.offset.y:e.bounds.top>e.canvasSize.height&&"bottom"===e.direction&&(e.particle.position.y=e.canvasSize.height-e.size-e.offset.y);const t=e.particle.velocity.y;let n=!1;if("bottom"===e.direction&&e.bounds.bottom>=e.canvasSize.height&&t>0||"top"===e.direction&&e.bounds.top<=0&&t<0){const t=yn(e.particle.options.bounce.vertical);e.particle.velocity.y*=-t,n=!0}if(!n)return;const i=e.offset.y+e.size;e.bounds.bottom>=e.canvasSize.height&&"bottom"===e.direction?e.particle.position.y=e.canvasSize.height-i:e.bounds.top<=0&&"top"===e.direction&&(e.particle.position.y=i),"split"===e.outMode&&e.particle.destroy()}({particle:e,outMode:i,direction:t,bounds:l,canvasSize:u,offset:a,size:c})}}class Xo{constructor(e){this.container=e,this.modes=["destroy"]}update(e,t,n,i){if(!this.modes.includes(i))return;const r=this.container;switch(e.outType){case"normal":case"outside":if(Dn(e.position,r.canvas.size,on.origin,e.getRadius(),t))return;break;case"inside":{const{dx:t,dy:n}=Sn(e.position,e.moveCenter),{x:i,y:r}=e.velocity;if(i<0&&t>e.moveCenter.radius||r<0&&n>e.moveCenter.radius||i>=0&&t<-e.moveCenter.radius||r>=0&&n<-e.moveCenter.radius)return;break}}r.particles.remove(e,void 0,!0)}}class Ko{constructor(e){this.container=e,this.modes=["none"]}update(e,t,n,i){if(!this.modes.includes(i))return;if(e.options.move.distance.horizontal&&("left"===t||"right"===t)||e.options.move.distance.vertical&&("top"===t||"bottom"===t))return;const r=e.options.move.gravity,o=this.container,s=o.canvas.size,a=e.getRadius();if(r.enable){const n=e.position;(!r.inverse&&n.y>s.height+a&&"bottom"===t||r.inverse&&n.y<-a&&"top"===t)&&o.particles.remove(e)}else{if(e.velocity.y>0&&e.position.y<=s.height+a||e.velocity.y<0&&e.position.y>=-a||e.velocity.x>0&&e.position.x<=s.width+a||e.velocity.x<0&&e.position.x>=-a)return;Dn(e.position,o.canvas.size,on.origin,a,t)||o.particles.remove(e)}}}class Jo{constructor(e){this.container=e,this.modes=["out"]}update(e,t,n,i){if(!this.modes.includes(i))return;const r=this.container;switch(e.outType){case"inside":{const{x:t,y:n}=e.velocity,i=on.origin;i.length=e.moveCenter.radius,i.angle=e.velocity.angle+Math.PI,i.addTo(on.create(e.moveCenter));const{dx:o,dy:s}=Sn(e.position,i);if(t<=0&&o>=0||n<=0&&s>=0||t>=0&&o<=0||n>=0&&s<=0)return;e.position.x=Math.floor(pn({min:0,max:r.canvas.size.width})),e.position.y=Math.floor(pn({min:0,max:r.canvas.size.height}));const{dx:a,dy:c}=Sn(e.position,e.moveCenter);e.direction=Math.atan2(-c,-a),e.velocity.angle=e.direction;break}default:if(Dn(e.position,r.canvas.size,on.origin,e.getRadius(),t))return;switch(e.outType){case"outside":{e.position.x=Math.floor(pn({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.x,e.position.y=Math.floor(pn({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.y;const{dx:t,dy:n}=Sn(e.position,e.moveCenter);e.moveCenter.radius&&(e.direction=Math.atan2(n,t),e.velocity.angle=e.direction);break}case"normal":{const n=e.options.move.warp,i=r.canvas.size,o={bottom:i.height+e.getRadius()+e.offset.y,left:-e.getRadius()-e.offset.x,right:i.width+e.getRadius()+e.offset.x,top:-e.getRadius()-e.offset.y},s=e.getRadius(),a=Ln(e.position,s);"right"===t&&a.left>i.width+e.offset.x?(e.position.x=o.left,e.initialPosition.x=e.position.x,n||(e.position.y=un()*i.height,e.initialPosition.y=e.position.y)):"left"===t&&a.right<-e.offset.x&&(e.position.x=o.right,e.initialPosition.x=e.position.x,n||(e.position.y=un()*i.height,e.initialPosition.y=e.position.y)),"bottom"===t&&a.top>i.height+e.offset.y?(n||(e.position.x=un()*i.width,e.initialPosition.x=e.position.x),e.position.y=o.top,e.initialPosition.y=e.position.y):"top"===t&&a.bottom<-e.offset.y&&(n||(e.position.x=un()*i.width,e.initialPosition.x=e.position.x),e.position.y=o.bottom,e.initialPosition.y=e.position.y);break}}}}}class Yo{constructor(e){this.container=e,this._updateOutMode=(e,t,n,i)=>{for(const r of this.updaters)r.update(e,i,t,n)},this.updaters=[new qo(e),new Xo(e),new Jo(e),new Ko(e)]}init(){}isEnabled(e){return!e.destroyed&&!e.spawning}update(e,t){var n,i,r,o;const s=e.options.move.outModes;this._updateOutMode(e,t,null!==(n=s.bottom)&&void 0!==n?n:s.default,"bottom"),this._updateOutMode(e,t,null!==(i=s.left)&&void 0!==i?i:s.default,"left"),this._updateOutMode(e,t,null!==(r=s.right)&&void 0!==r?r:s.default,"right"),this._updateOutMode(e,t,null!==(o=s.top)&&void 0!==o?o:s.default,"top")}}class $o{init(e){const t=e.container,n=e.options.size.animation;var i;n.enable&&(e.size.velocity=(null!==(i=e.retina.sizeAnimationSpeed)&&void 0!==i?i:t.retina.sizeAnimationSpeed)/100*t.retina.reduceFactor,n.sync||(e.size.velocity*=un()))}isEnabled(e){var t,n,i,r;return!e.destroyed&&!e.spawning&&e.size.enable&&((null!==(t=e.size.maxLoops)&&void 0!==t?t:0)<=0||(null!==(n=e.size.maxLoops)&&void 0!==n?n:0)>0&&(null!==(i=e.size.loops)&&void 0!==i?i:0)<(null!==(r=e.size.maxLoops)&&void 0!==r?r:0))}reset(e){e.size.loops=0}update(e,t){this.isEnabled(e)&&function(e,t){var n,i,r,o,s,a,c,l,u;const d=e.size;if(e.destroyed||!d||!d.enable||(null!==(n=d.maxLoops)&&void 0!==n?n:0)>0&&(null!==(i=d.loops)&&void 0!==i?i:0)>(null!==(r=d.maxLoops)&&void 0!==r?r:0))return;const h=(null!==(o=d.velocity)&&void 0!==o?o:0)*t.factor,p=d.min,f=d.max,v=null!==(s=d.decay)&&void 0!==s?s:1;if(d.time||(d.time=0),(null!==(a=d.delayTime)&&void 0!==a?a:0)>0&&d.time<(null!==(c=d.delayTime)&&void 0!==c?c:0)&&(d.time+=t.value),!((null!==(l=d.delayTime)&&void 0!==l?l:0)>0&&d.time<(null!==(u=d.delayTime)&&void 0!==u?u:0))){switch(d.status){case"increasing":d.value>=f?(d.status="decreasing",d.loops||(d.loops=0),d.loops++):d.value+=h;break;case"decreasing":d.value<=p?(d.status="increasing",d.loops||(d.loops=0),d.loops++):d.value-=h}d.velocity&&1!==v&&(d.velocity*=v),function(e,t,n,i){switch(e.options.size.animation.destroy){case"max":t>=i&&e.destroy();break;case"min":t<=n&&e.destroy()}}(e,d.value,p,f),e.destroyed||(d.value=dn(d.value,p,f))}}(e,t)}}async function Qo(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addMover("base",(()=>new jo),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addShape("circle",new Vo,t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("color",(e=>new Wo(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("opacity",(e=>new Go(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("outModes",(e=>new Yo(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("size",(()=>new $o),t)}(e,!1),await e.refresh(t)}class Zo{constructor(){this.distance=200,this.duration=.4,this.easing="ease-out-quad",this.factor=1,this.maxSpeed=50,this.speed=1}load(e){e&&(void 0!==e.distance&&(this.distance=e.distance),void 0!==e.duration&&(this.duration=e.duration),void 0!==e.easing&&(this.easing=e.easing),void 0!==e.factor&&(this.factor=e.factor),void 0!==e.maxSpeed&&(this.maxSpeed=e.maxSpeed),void 0!==e.speed&&(this.speed=e.speed))}}class es extends ko{constructor(e,t){super(t),this._clickAttract=()=>{const e=this.container;e.attract||(e.attract={particles:[]});const{attract:t}=e;if(t.finish||(t.count||(t.count=0),t.count++,t.count===e.particles.count&&(t.finish=!0)),t.clicking){const t=e.interactivity.mouse.clickPosition,n=e.retina.attractModeDistance;if(!n||n<0||!t)return;this._processAttract(t,n,new Fr(t.x,t.y,n))}else!1===t.clicking&&(t.particles=[])},this._hoverAttract=()=>{const e=this.container,t=e.interactivity.mouse.position,n=e.retina.attractModeDistance;!n||n<0||!t||this._processAttract(t,n,new Fr(t.x,t.y,n))},this._processAttract=(e,t,n)=>{const i=this.container,r=i.actualOptions.interactivity.modes.attract;if(!r)return;const o=i.particles.quadTree.query(n,(e=>this.isEnabled(e)));for(const s of o){const{dx:n,dy:i,distance:o}=Sn(s.position,e),a=r.speed*r.factor,c=dn(ln(r.easing)(1-o/t)*a,0,r.maxSpeed),l=on.create(0===o?a:n/o*c,0===o?a:i/o*c);s.position.subFrom(l)}},this._engine=e,t.attract||(t.attract={particles:[]}),this.handleClickMode=e=>{const n=this.container.actualOptions.interactivity.modes.attract;if(n&&"attract"===e){t.attract||(t.attract={particles:[]}),t.attract.clicking=!0,t.attract.count=0;for(const e of t.attract.particles)this.isEnabled(e)&&e.velocity.setTo(e.initialVelocity);t.attract.particles=[],t.attract.finish=!1,setTimeout((()=>{t.destroyed||(t.attract||(t.attract={particles:[]}),t.attract.clicking=!1)}),1e3*n.duration)}}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.attract;t&&(e.retina.attractModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions,n=e.interactivity.status===en,i=t.interactivity.events,r=i.onHover.enable,o=i.onHover.mode,s=i.onClick.enable,a=i.onClick.mode;n&&r&&In("attract",o)?this._hoverAttract():s&&In("attract",a)&&this._clickAttract()}isEnabled(e){var t;const n=this.container,i=n.actualOptions,r=n.interactivity.mouse,o=(null!==(t=null===e||void 0===e?void 0:e.interactivity)&&void 0!==t?t:i.interactivity).events;if((!r.position||!o.onHover.enable)&&(!r.clickPosition||!o.onClick.enable))return!1;const s=o.onHover.mode,a=o.onClick.mode;return In("attract",s)||In("attract",a)}loadModeOptions(e){e.attract||(e.attract=new Zo);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.attract.load(null===r||void 0===r?void 0:r.attract)}reset(){}}class ts{constructor(){this.distance=200}load(e){e&&void 0!==e.distance&&(this.distance=e.distance)}}class ns extends ko{constructor(e){super(e),this._processBounce=(e,t,n)=>{const i=this.container.particles.quadTree.query(n,(e=>this.isEnabled(e)));for(const r of i)n instanceof Fr?jn(Bn(r),{position:e,radius:t,mass:t**2*Math.PI/2,velocity:on.origin,factor:on.origin}):n instanceof zr&&Vn(r,Ln(e,t))},this._processMouseBounce=()=>{const e=this.container,t=10*e.retina.pixelRatio,n=e.interactivity.mouse.position,i=e.retina.bounceModeDistance;!i||i<0||!n||this._processBounce(n,i,new Fr(n.x,n.y,i+t))},this._singleSelectorBounce=(e,t)=>{const n=this.container,i=document.querySelectorAll(e);i.length&&i.forEach((e=>{const i=e,r=n.retina.pixelRatio,o={x:(i.offsetLeft+i.offsetWidth/2)*r,y:(i.offsetTop+i.offsetHeight/2)*r},s=i.offsetWidth/2*r,a=10*r,c="circle"===t.type?new Fr(o.x,o.y,s+a):new zr(i.offsetLeft*r-a,i.offsetTop*r-a,i.offsetWidth*r+2*a,i.offsetHeight*r+2*a);this._processBounce(o,s,c)}))}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bounce;t&&(e.retina.bounceModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions.interactivity.events,n=e.interactivity.status===en,i=t.onHover.enable,r=t.onHover.mode,o=t.onDiv;n&&i&&In("bounce",r)?this._processMouseBounce():Fn("bounce",o,((e,t)=>this._singleSelectorBounce(e,t)))}isEnabled(e){var t;const n=this.container,i=n.actualOptions,r=n.interactivity.mouse,o=(null!==(t=null===e||void 0===e?void 0:e.interactivity)&&void 0!==t?t:i.interactivity).events,s=o.onDiv;return r.position&&o.onHover.enable&&In("bounce",o.onHover.mode)||zn("bounce",s)}loadModeOptions(e){e.bounce||(e.bounce=new ts);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.bounce.load(null===r||void 0===r?void 0:r.bounce)}reset(){}}class is{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(e){if(e){if(void 0!==e.distance&&(this.distance=e.distance),void 0!==e.duration&&(this.duration=e.duration),void 0!==e.mix&&(this.mix=e.mix),void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.color){const t=ei(this.color)?void 0:this.color;this.color=Hn(e.color,(e=>Ti.create(t,e)))}void 0!==e.size&&(this.size=e.size)}}}class rs extends is{constructor(){super(),this.selectors=[]}get ids(){return Hn(this.selectors,(e=>e.replace("#","")))}set ids(e){this.selectors=Hn(e,(e=>"#".concat(e)))}load(e){super.load(e),e&&(void 0!==e.ids&&(this.ids=e.ids),void 0!==e.selectors&&(this.selectors=e.selectors))}}class os extends is{load(e){super.load(e),e&&(this.divs=Hn(e.divs,(e=>{const t=new rs;return t.load(e),t})))}}function ss(e,t,n,i){if(t>=n){return dn(e+(t-n)*i,e,t)}if(t<n){return dn(e-(n-t)*i,t,e)}}class as extends ko{constructor(e){super(e),this._clickBubble=()=>{const e=this.container,t=e.actualOptions,n=e.interactivity.mouse.clickPosition,i=t.interactivity.modes.bubble;if(!i||!n)return;e.bubble||(e.bubble={});const r=e.retina.bubbleModeDistance;if(!r||r<0)return;const o=e.particles.quadTree.queryCircle(n,r,(e=>this.isEnabled(e))),{bubble:s}=e;for(const l of o){var a,c;if(!s.clicking)continue;l.bubble.inRange=!s.durationEnd;const t=bn(l.getPosition(),n),o=((new Date).getTime()-(e.interactivity.mouse.clickTime||0))/1e3;o>i.duration&&(s.durationEnd=!0),o>2*i.duration&&(s.clicking=!1,s.durationEnd=!1);const u={bubbleObj:{optValue:e.retina.bubbleModeSize,value:l.bubble.radius},particlesObj:{optValue:mn(l.options.size.value)*e.retina.pixelRatio,value:l.size.value},type:"size"};this._process(l,t,o,u);const d={bubbleObj:{optValue:i.opacity,value:l.bubble.opacity},particlesObj:{optValue:mn(l.options.opacity.value),value:null!==(a=null===(c=l.opacity)||void 0===c?void 0:c.value)&&void 0!==a?a:1},type:"opacity"};this._process(l,t,o,d),!s.durationEnd&&t<=r?this._hoverBubbleColor(l,t):delete l.bubble.color}},this._hoverBubble=()=>{const e=this.container,t=e.interactivity.mouse.position,n=e.retina.bubbleModeDistance;if(!n||n<0||void 0===t)return;const i=e.particles.quadTree.queryCircle(t,n,(e=>this.isEnabled(e)));for(const r of i){r.bubble.inRange=!0;const i=bn(r.getPosition(),t),o=1-i/n;i<=n?o>=0&&e.interactivity.status===en&&(this._hoverBubbleSize(r,o),this._hoverBubbleOpacity(r,o),this._hoverBubbleColor(r,o)):this.reset(r),e.interactivity.status===Zt&&this.reset(r)}},this._hoverBubbleColor=(e,t,n)=>{const i=this.container.actualOptions,r=null!==n&&void 0!==n?n:i.interactivity.modes.bubble;if(r){if(!e.bubble.finalColor){const t=r.color;if(!t)return;const n=Wn(t);e.bubble.finalColor=li(n)}if(e.bubble.finalColor)if(r.mix){e.bubble.color=void 0;const n=e.getFillColor();e.bubble.color=n?ui(vi(n,e.bubble.finalColor,1-t,t)):e.bubble.finalColor}else e.bubble.color=e.bubble.finalColor}},this._hoverBubbleOpacity=(e,t,n)=>{var i,r,o,s;const a=this.container.actualOptions,c=null!==(i=null===n||void 0===n?void 0:n.opacity)&&void 0!==i?i:null===(r=a.interactivity.modes.bubble)||void 0===r?void 0:r.opacity;if(!c)return;const l=e.options.opacity.value,u=ss(null!==(o=null===(s=e.opacity)||void 0===s?void 0:s.value)&&void 0!==o?o:1,c,mn(l),t);void 0!==u&&(e.bubble.opacity=u)},this._hoverBubbleSize=(e,t,n)=>{const i=this.container,r=null!==n&&void 0!==n&&n.size?n.size*i.retina.pixelRatio:i.retina.bubbleModeSize;if(void 0===r)return;const o=mn(e.options.size.value)*i.retina.pixelRatio,s=ss(e.size.value,r,o,t);void 0!==s&&(e.bubble.radius=s)},this._process=(e,t,n,i)=>{const r=this.container,o=i.bubbleObj.optValue,s=r.actualOptions.interactivity.modes.bubble;if(!s||void 0===o)return;const a=s.duration,c=r.retina.bubbleModeDistance,l=i.particlesObj.optValue,u=i.bubbleObj.value,d=i.particlesObj.value||0,h=i.type;if(c&&!(c<0)&&o!==l)if(r.bubble||(r.bubble={}),r.bubble.durationEnd)u&&("size"===h&&delete e.bubble.radius,"opacity"===h&&delete e.bubble.opacity);else if(t<=c){if((null!==u&&void 0!==u?u:d)!==o){const t=d-n*(d-o)/a;"size"===h&&(e.bubble.radius=t),"opacity"===h&&(e.bubble.opacity=t)}}else"size"===h&&delete e.bubble.radius,"opacity"===h&&delete e.bubble.opacity},this._singleSelectorHover=(e,t,n)=>{const i=this.container,r=document.querySelectorAll(t),o=i.actualOptions.interactivity.modes.bubble;o&&r.length&&r.forEach((t=>{const r=t,s=i.retina.pixelRatio,a={x:(r.offsetLeft+r.offsetWidth/2)*s,y:(r.offsetTop+r.offsetHeight/2)*s},c=r.offsetWidth/2*s,l="circle"===n.type?new Fr(a.x,a.y,c):new zr(r.offsetLeft*s,r.offsetTop*s,r.offsetWidth*s,r.offsetHeight*s),u=i.particles.quadTree.query(l,(e=>this.isEnabled(e)));for(const n of u){if(!l.contains(n.getPosition()))continue;n.bubble.inRange=!0;const t=Un(o.divs,r);n.bubble.div&&n.bubble.div===r||(this.clear(n,e,!0),n.bubble.div=r),this._hoverBubbleSize(n,1,t),this._hoverBubbleOpacity(n,1,t),this._hoverBubbleColor(n,1,t)}}))},e.bubble||(e.bubble={}),this.handleClickMode=t=>{"bubble"===t&&(e.bubble||(e.bubble={}),e.bubble.clicking=!0)}}clear(e,t,n){e.bubble.inRange&&!n||(delete e.bubble.div,delete e.bubble.opacity,delete e.bubble.radius,delete e.bubble.color)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bubble;t&&(e.retina.bubbleModeDistance=t.distance*e.retina.pixelRatio,void 0!==t.size&&(e.retina.bubbleModeSize=t.size*e.retina.pixelRatio))}async interact(e){const t=this.container.actualOptions.interactivity.events,n=t.onHover,i=t.onClick,r=n.enable,o=n.mode,s=i.enable,a=i.mode,c=t.onDiv;r&&In("bubble",o)?this._hoverBubble():s&&In("bubble",a)?this._clickBubble():Fn("bubble",c,((t,n)=>this._singleSelectorHover(e,t,n)))}isEnabled(e){var t;const n=this.container,i=n.actualOptions,r=n.interactivity.mouse,o=(null!==(t=null===e||void 0===e?void 0:e.interactivity)&&void 0!==t?t:i.interactivity).events,{onClick:s,onDiv:a,onHover:c}=o,l=zn("bubble",a);return!!(l||c.enable&&r.position||s.enable&&r.clickPosition)&&(In("bubble",c.mode)||In("bubble",s.mode)||l)}loadModeOptions(e){e.bubble||(e.bubble=new os);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.bubble.load(null===r||void 0===r?void 0:r.bubble)}reset(e){e.bubble.inRange=!1}}class cs{constructor(){this.opacity=.5}load(e){e&&void 0!==e.opacity&&(this.opacity=e.opacity)}}class ls{constructor(){this.distance=80,this.links=new cs,this.radius=60}get lineLinked(){return this.links}set lineLinked(e){this.links=e}get line_linked(){return this.links}set line_linked(e){this.links=e}load(e){var t,n;e&&(void 0!==e.distance&&(this.distance=e.distance),this.links.load(null!==(t=null!==(n=e.links)&&void 0!==n?n:e.lineLinked)&&void 0!==t?t:e.line_linked),void 0!==e.radius&&(this.radius=e.radius))}}function us(e,t,n,i){const r=e.actualOptions.interactivity.modes.connect;if(r)return function(e,t,n,i){const r=Math.floor(n.getRadius()/t.getRadius()),o=t.getFillColor(),s=n.getFillColor();if(!o||!s)return;const a=t.getPosition(),c=n.getPosition(),l=vi(o,s,t.getRadius(),n.getRadius()),u=e.createLinearGradient(a.x,a.y,c.x,c.y);return u.addColorStop(0,fi(o,i)),u.addColorStop(r>1?1:r,pi(l,i)),u.addColorStop(1,fi(s,i)),u}(t,n,i,r.links.opacity)}function ds(e,t,n){e.canvas.draw((i=>{var r;const o=us(e,i,t,n);if(!o)return;const s=t.getPosition(),a=n.getPosition();!function(e,t,n,i,r){_i(e,i,r),e.lineWidth=t,e.strokeStyle=n,e.stroke()}(i,null!==(r=t.retina.linksWidth)&&void 0!==r?r:0,o,s,a)}))}class hs extends ko{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.connect;t&&(e.retina.connectModeDistance=t.distance*e.retina.pixelRatio,e.retina.connectModeRadius=t.radius*e.retina.pixelRatio)}async interact(){const e=this.container;if(e.actualOptions.interactivity.events.onHover.enable&&"pointermove"===e.interactivity.status){const t=e.interactivity.mouse.position;if(!e.retina.connectModeDistance||e.retina.connectModeDistance<0||!e.retina.connectModeRadius||e.retina.connectModeRadius<0||!t)return;const n=Math.abs(e.retina.connectModeRadius),i=e.particles.quadTree.queryCircle(t,n,(e=>this.isEnabled(e)));let r=0;for(const o of i){const t=o.getPosition();for(const n of i.slice(r+1)){const i=n.getPosition(),r=Math.abs(e.retina.connectModeDistance),s=Math.abs(t.x-i.x),a=Math.abs(t.y-i.y);s<r&&a<r&&ds(e,o,n)}++r}}}isEnabled(e){var t;const n=this.container,i=n.interactivity.mouse,r=(null!==(t=null===e||void 0===e?void 0:e.interactivity)&&void 0!==t?t:n.actualOptions.interactivity).events;return!(!r.onHover.enable||!i.position)&&In("connect",r.onHover.mode)}loadModeOptions(e){e.connect||(e.connect=new ls);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.connect.load(null===r||void 0===r?void 0:r.connect)}reset(){}}class ps{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(e){e&&(void 0!==e.blink&&(this.blink=e.blink),void 0!==e.color&&(this.color=Ti.create(this.color,e.color)),void 0!==e.consent&&(this.consent=e.consent),void 0!==e.opacity&&(this.opacity=e.opacity))}}class fs{constructor(){this.distance=100,this.links=new ps}get lineLinked(){return this.links}set lineLinked(e){this.links=e}get line_linked(){return this.links}set line_linked(e){this.links=e}load(e){var t,n;e&&(void 0!==e.distance&&(this.distance=e.distance),this.links.load(null!==(t=null!==(n=e.links)&&void 0!==n?n:e.lineLinked)&&void 0!==t?t:e.line_linked))}}function vs(e,t,n,i,r){e.canvas.draw((e=>{var o;const s=t.getPosition();!function(e,t,n,i,r,o){_i(e,n,i),e.strokeStyle=pi(r,o),e.lineWidth=t,e.stroke()}(e,null!==(o=t.retina.linksWidth)&&void 0!==o?o:0,s,r,n,i)}))}class ms extends ko{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.grab;t&&(e.retina.grabModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions.interactivity;if(!t.modes.grab||!t.events.onHover.enable||e.interactivity.status!==en)return;const n=e.interactivity.mouse.position;if(!n)return;const i=e.retina.grabModeDistance;if(!i||i<0)return;const r=e.particles.quadTree.queryCircle(n,i,(e=>this.isEnabled(e)));for(const a of r){var o,s;const r=bn(a.getPosition(),n);if(r>i)continue;const c=t.modes.grab.links,l=c.opacity,u=l-r*l/i;if(u<=0)continue;const d=null!==(o=c.color)&&void 0!==o?o:null===(s=a.options.links)||void 0===s?void 0:s.color;if(!e.particles.grabLineColor&&d){const n=t.modes.grab.links;e.particles.grabLineColor=gi(d,n.blink,n.consent)}const h=mi(a,void 0,e.particles.grabLineColor);h&&vs(e,a,h,u,n)}}isEnabled(e){var t;const n=this.container,i=n.interactivity.mouse,r=(null!==(t=null===e||void 0===e?void 0:e.interactivity)&&void 0!==t?t:n.actualOptions.interactivity).events;return r.onHover.enable&&!!i.position&&In("grab",r.onHover.mode)}loadModeOptions(e){e.grab||(e.grab=new fs);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.grab.load(null===r||void 0===r?void 0:r.grab)}reset(){}}class gs extends ko{constructor(e){super(e),this.handleClickMode=e=>{if("pause"!==e)return;const t=this.container;t.getAnimationStatus()?t.pause():t.play()}}clear(){}init(){}async interact(){}isEnabled(){return!0}reset(){}}class ys{constructor(){this.default=!0,this.groups=[],this.quantity=4}get particles_nb(){return this.quantity}set particles_nb(e){this.quantity=gn(e)}load(e){var t;if(!e)return;void 0!==e.default&&(this.default=e.default),void 0!==e.groups&&(this.groups=e.groups.map((e=>e))),this.groups.length||(this.default=!0);const n=null!==(t=e.quantity)&&void 0!==t?t:e.particles_nb;void 0!==n&&(this.quantity=gn(n))}}class Ss extends ko{constructor(e){super(e),this.handleClickMode=e=>{if("push"!==e)return;const t=this.container,n=t.actualOptions.interactivity.modes.push;if(!n)return;const i=fn(n.quantity);if(i<=0)return;const r=On([void 0,...n.groups]),o=void 0!==r?t.actualOptions.particles.groups[r]:void 0;t.particles.push(i,t.interactivity.mouse,o,r)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(e){e.push||(e.push=new ys);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.push.load(null===r||void 0===r?void 0:r.push)}reset(){}}class bs{constructor(){this.quantity=2}get particles_nb(){return this.quantity}set particles_nb(e){this.quantity=gn(e)}load(e){var t;if(!e)return;const n=null!==(t=e.quantity)&&void 0!==t?t:e.particles_nb;void 0!==n&&(this.quantity=gn(n))}}class _s extends ko{constructor(e){super(e),this.handleClickMode=e=>{const t=this.container,n=t.actualOptions;if(!n.interactivity.modes.remove||"remove"!==e)return;const i=fn(n.interactivity.modes.remove.quantity);t.particles.removeQuantity(i)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(e){e.remove||(e.remove=new bs);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.remove.load(null===r||void 0===r?void 0:r.remove)}reset(){}}class ws{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing="ease-out-quad"}load(e){e&&(void 0!==e.distance&&(this.distance=e.distance),void 0!==e.duration&&(this.duration=e.duration),void 0!==e.easing&&(this.easing=e.easing),void 0!==e.factor&&(this.factor=e.factor),void 0!==e.speed&&(this.speed=e.speed),void 0!==e.maxSpeed&&(this.maxSpeed=e.maxSpeed))}}class xs extends ws{constructor(){super(),this.selectors=[]}get ids(){return Hn(this.selectors,(e=>e.replace("#","")))}set ids(e){this.selectors=Hn(e,(e=>"#".concat(e)))}load(e){super.load(e),e&&(void 0!==e.ids&&(this.ids=e.ids),void 0!==e.selectors&&(this.selectors=e.selectors))}}class Cs extends ws{load(e){super.load(e),e&&(this.divs=Hn(e.divs,(e=>{const t=new xs;return t.load(e),t})))}}class Es extends ko{constructor(e,t){super(t),this._clickRepulse=()=>{const e=this.container,t=e.actualOptions.interactivity.modes.repulse;if(!t)return;const n=e.repulse||{particles:[]};if(n.finish||(n.count||(n.count=0),n.count++,n.count===e.particles.count&&(n.finish=!0)),n.clicking){const i=e.retina.repulseModeDistance;if(!i||i<0)return;const r=Math.pow(i/6,3),o=e.interactivity.mouse.clickPosition;if(void 0===o)return;const s=new Fr(o.x,o.y,r),a=e.particles.quadTree.query(s,(e=>this.isEnabled(e)));for(const e of a){const{dx:i,dy:s,distance:a}=Sn(o,e.position),c=a**2,l=-r*t.speed/c;if(c<=r){n.particles.push(e);const t=on.create(i,s);t.length=l,e.velocity.setTo(t)}}}else if(!1===n.clicking){for(const e of n.particles)e.velocity.setTo(e.initialVelocity);n.particles=[]}},this._hoverRepulse=()=>{const e=this.container,t=e.interactivity.mouse.position,n=e.retina.repulseModeDistance;!n||n<0||!t||this._processRepulse(t,n,new Fr(t.x,t.y,n))},this._processRepulse=(e,t,n,i)=>{const r=this.container,o=r.particles.quadTree.query(n,(e=>this.isEnabled(e))),s=r.actualOptions.interactivity.modes.repulse;if(s)for(const c of o){var a;const{dx:n,dy:r,distance:o}=Sn(c.position,e),l=(null!==(a=null===i||void 0===i?void 0:i.speed)&&void 0!==a?a:s.speed)*s.factor,u=dn(ln(s.easing)(1-o/t)*l,0,s.maxSpeed),d=on.create(0===o?l:n/o*u,0===o?l:r/o*u);c.position.addTo(d)}},this._singleSelectorRepulse=(e,t)=>{const n=this.container,i=n.actualOptions.interactivity.modes.repulse;if(!i)return;const r=document.querySelectorAll(e);r.length&&r.forEach((e=>{const r=e,o=n.retina.pixelRatio,s={x:(r.offsetLeft+r.offsetWidth/2)*o,y:(r.offsetTop+r.offsetHeight/2)*o},a=r.offsetWidth/2*o,c="circle"===t.type?new Fr(s.x,s.y,a):new zr(r.offsetLeft*o,r.offsetTop*o,r.offsetWidth*o,r.offsetHeight*o),l=Un(i.divs,r);this._processRepulse(s,a,c,l)}))},this._engine=e,t.repulse||(t.repulse={particles:[]}),this.handleClickMode=e=>{const n=this.container.actualOptions.interactivity.modes.repulse;if(!n||"repulse"!==e)return;t.repulse||(t.repulse={particles:[]});const i=t.repulse;i.clicking=!0,i.count=0;for(const r of t.repulse.particles)this.isEnabled(r)&&r.velocity.setTo(r.initialVelocity);i.particles=[],i.finish=!1,setTimeout((()=>{t.destroyed||(i.clicking=!1)}),1e3*n.duration)}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.repulse;t&&(e.retina.repulseModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions,n=e.interactivity.status===en,i=t.interactivity.events,r=i.onHover,o=r.enable,s=r.mode,a=i.onClick,c=a.enable,l=a.mode,u=i.onDiv;n&&o&&In("repulse",s)?this._hoverRepulse():c&&In("repulse",l)?this._clickRepulse():Fn("repulse",u,((e,t)=>this._singleSelectorRepulse(e,t)))}isEnabled(e){var t;const n=this.container,i=n.actualOptions,r=n.interactivity.mouse,o=(null!==(t=null===e||void 0===e?void 0:e.interactivity)&&void 0!==t?t:i.interactivity).events,s=o.onDiv,a=o.onHover,c=o.onClick,l=zn("repulse",s);if(!(l||a.enable&&r.position||c.enable&&r.clickPosition))return!1;const u=a.mode,d=c.mode;return In("repulse",u)||In("repulse",d)||l}loadModeOptions(e){e.repulse||(e.repulse=new Cs);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.repulse.load(null===r||void 0===r?void 0:r.repulse)}reset(){}}class Ps{constructor(){this.factor=3,this.radius=200}load(e){e&&(void 0!==e.factor&&(this.factor=e.factor),void 0!==e.radius&&(this.radius=e.radius))}}class Ts extends ko{constructor(e){super(e)}clear(e,t,n){e.slow.inRange&&!n||(e.slow.factor=1)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.slow;t&&(e.retina.slowModeRadius=t.radius*e.retina.pixelRatio)}async interact(){}isEnabled(e){var t;const n=this.container,i=n.interactivity.mouse,r=(null!==(t=null===e||void 0===e?void 0:e.interactivity)&&void 0!==t?t:n.actualOptions.interactivity).events;return r.onHover.enable&&!!i.position&&In("slow",r.onHover.mode)}loadModeOptions(e){e.slow||(e.slow=new Ps);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.slow.load(null===r||void 0===r?void 0:r.slow)}reset(e){e.slow.inRange=!1;const t=this.container,n=t.actualOptions,i=t.interactivity.mouse.position,r=t.retina.slowModeRadius,o=n.interactivity.modes.slow;if(!o||!r||r<0||!i)return;const s=bn(i,e.getPosition()),a=s/r,c=o.factor,{slow:l}=e;s>r||(l.inRange=!0,l.factor=a/c)}}const Rs=[0,4,2,1],Ms=[8,8,4,2];class As{constructor(e){this.pos=0,this.data=new Uint8ClampedArray(e)}getString(e){const t=this.data.slice(this.pos,this.pos+e);return this.pos+=t.length,t.reduce(((e,t)=>e+String.fromCharCode(t)),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let e="",t=0;do{t=this.data[this.pos++];for(let n=t;--n>=0;e+=String.fromCharCode(this.data[this.pos++]));}while(0!==t);return e}readSubBlocksBin(){let e=0,t=0;for(let i=0;0!==(e=this.data[this.pos+i]);i+=e+1)t+=e;const n=new Uint8Array(t);for(let i=0;0!==(e=this.data[this.pos++]);)for(let t=e;--t>=0;n[i++]=this.data[this.pos++]);return n}skipSubBlocks(){for(;0!==this.data[this.pos];this.pos+=this.data[this.pos]+1);this.pos++}}function Is(e,t){const n=[];for(let i=0;i<t;i++)n.push({r:e.data[e.pos],g:e.data[e.pos+1],b:e.data[e.pos+2]}),e.pos+=3;return n}async function ks(e,t,n,i,r,o){switch(e.nextByte()){case 59:return!0;case 44:await async function(e,t,n,i,r,o){const s=t.frames[i(!0)];s.left=e.nextTwoBytes(),s.top=e.nextTwoBytes(),s.width=e.nextTwoBytes(),s.height=e.nextTwoBytes();const a=e.nextByte(),c=128===(128&a),l=64===(64&a);s.sortFlag=32===(32&a),s.reserved=(24&a)>>>3;const u=1<<1+(7&a);c&&(s.localColorTable=Is(e,u));const d=e=>{const{r:i,g:o,b:a}=(c?s.localColorTable:t.globalColorTable)[e];return{r:i,g:o,b:a,a:e===r(null)?n?~~((i+o+a)/3):0:255}},h=(()=>{try{return new ImageData(s.width,s.height,{colorSpace:"srgb"})}catch(e){if(e instanceof DOMException&&"IndexSizeError"===e.name)return null;throw e}})();if(null==h)throw new EvalError("GIF frame size is to large");const p=e.nextByte(),f=e.readSubBlocksBin(),v=1<<p,m=(e,t)=>{const n=e>>>3,i=7&e;return(f[n]+(f[n+1]<<8)+(f[n+2]<<16)&(1<<t)-1<<i)>>>i};if(l){for(let n=0,r=p+1,a=0,c=[[0]],l=0;l<4;l++){if(Rs[l]<s.height)for(let e=0,t=0;;){const i=n;if(n=m(a,r),a+=r+1,n===v){r=p+1,c.length=v+2;for(let e=0;e<c.length;e++)c[e]=e<v?[e]:[]}else{n>=c.length?c.push(c[i].concat(c[i][0])):i!==v&&c.push(c[i].concat(c[n][0]));for(let i=0;i<c[n].length;i++){const{r:r,g:o,b:a,a:u}=d(c[n][i]);h.data.set([r,o,a,u],Rs[l]*s.width+Ms[l]*t+e%(4*s.width)),e+=4}c.length===1<<r&&r<12&&r++}if(e===4*s.width*(t+1)&&(t++,Rs[l]+Ms[l]*t>=s.height))break}null===o||void 0===o||o(e.pos/(e.data.length-1),i(!1)+1,h,{x:s.left,y:s.top},{width:t.width,height:t.height})}s.image=h,s.bitmap=await createImageBitmap(h)}else{for(let e=0,t=p+1,n=0,i=[[0]],r=-4;;){const o=e;if(e=m(n,t),n+=t,e===v){t=p+1,i.length=v+2;for(let e=0;e<i.length;e++)i[e]=e<v?[e]:[]}else{if(e===v+1)break;e>=i.length?i.push(i[o].concat(i[o][0])):o!==v&&i.push(i[o].concat(i[e][0]));for(let t=0;t<i[e].length;t++){const{r:n,g:o,b:s,a:a}=d(i[e][t]);h.data.set([n,o,s,a],r+=4)}i.length>=1<<t&&t<12&&t++}}s.image=h,s.bitmap=await createImageBitmap(h),null===o||void 0===o||o((e.pos+1)/e.data.length,i(!1)+1,s.image,{x:s.left,y:s.top},{width:t.width,height:t.height})}}(e,t,n,i,r,o);break;case 33:await async function(e,t,n,i){switch(e.nextByte()){case 249:{const r=t.frames[n(!1)];e.pos++;const o=e.nextByte();r.GCreserved=(224&o)>>>5,r.disposalMethod=(28&o)>>>2,r.userInputDelayFlag=2===(2&o);const s=1===(1&o);r.delayTime=10*e.nextTwoBytes();const a=e.nextByte();s&&i(a),e.pos++;break}case 255:{e.pos++;const n={identifier:e.getString(8),authenticationCode:e.getString(3),data:e.readSubBlocksBin()};t.applicationExtensions.push(n);break}case 254:t.comments.push([n(!1),e.readSubBlocks()]);break;case 1:if(0===t.globalColorTable.length)throw new EvalError("plain text extension without global color table");e.pos++,t.frames[n(!1)].plainTextData={left:e.nextTwoBytes(),top:e.nextTwoBytes(),width:e.nextTwoBytes(),height:e.nextTwoBytes(),charSize:{width:e.nextTwoBytes(),height:e.nextTwoBytes()},foregroundColor:e.nextByte(),backgroundColor:e.nextByte(),text:e.readSubBlocks()};break;default:e.skipSubBlocks()}}(e,t,i,r);break;default:throw new EvalError("undefined block found")}return!1}const Os=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;async function Ds(e){return new Promise((t=>{e.loading=!0;const n=new Image;e.element=n,n.addEventListener("load",(()=>{e.loading=!1,t()})),n.addEventListener("error",(()=>{e.element=void 0,e.error=!0,e.loading=!1,Tn().error("".concat(nn," loading image: ").concat(e.source)),t()})),n.src=e.source}))}async function Ls(e){if("gif"===e.type){e.loading=!0;try{var t;e.gifData=await async function(e,t,n){n||(n=!1);const i=await fetch(e);if(!i.ok&&404===i.status)throw new EvalError("file not found");const r=await i.arrayBuffer(),o={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},s=new As(new Uint8ClampedArray(r));if("GIF89a"!==s.getString(6))throw new Error("not a supported GIF file");o.width=s.nextTwoBytes(),o.height=s.nextTwoBytes();const a=s.nextByte(),c=128===(128&a);o.colorRes=(112&a)>>>4,o.sortFlag=8===(8&a);const l=1<<1+(7&a),u=s.nextByte();o.pixelAspectRatio=s.nextByte(),0!==o.pixelAspectRatio&&(o.pixelAspectRatio=(o.pixelAspectRatio+15)/64),c&&(o.globalColorTable=Is(s,l));const d=(()=>{try{return new ImageData(o.width,o.height,{colorSpace:"srgb"})}catch(e){if(e instanceof DOMException&&"IndexSizeError"===e.name)return null;throw e}})();if(null==d)throw new Error("GIF frame size is to large");const{r:h,g:p,b:f}=o.globalColorTable[u];d.data.set(c?[h,p,f,255]:[0,0,0,0]);for(let _=4;_<d.data.length;_*=2)d.data.copyWithin(_,0,_);o.backgroundImage=d;let v=-1,m=!0,g=-1;const y=e=>(e&&(m=!0),v),S=e=>(null!=e&&(g=e),g);try{do{m&&(o.frames.push({left:0,top:0,width:0,height:0,disposalMethod:0,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),v++,g=-1,m=!1)}while(!await ks(s,o,n,y,S,t));o.frames.length--;for(const e of o.frames){if(e.userInputDelayFlag&&0===e.delayTime){o.totalTime=1/0;break}o.totalTime+=e.delayTime}return o}catch(b){if(b instanceof EvalError)throw new Error("error while parsing frame ".concat(v,' "').concat(b.message,'"'));throw b}}(e.source),e.gifLoopCount=null!==(t=function(e){for(const t of e.applicationExtensions)if(t.identifier+t.authenticationCode==="NETSCAPE2.0")return t.data[1]+(t.data[2]<<8);return NaN}(e.gifData))&&void 0!==t?t:0,0===e.gifLoopCount&&(e.gifLoopCount=1/0)}catch{e.error=!0}e.loading=!1}else await Ds(e)}async function Ns(e){if("svg"!==e.type)return void await Ds(e);e.loading=!0;const t=await fetch(e.source);t.ok?e.svgData=await t.text():(Tn().error("".concat(nn," Image not found")),e.error=!0),e.loading=!1}function zs(e,t,n,i){var r,o,s;const a=function(e,t,n){const{svgData:i}=e;if(!i)return"";const r=fi(t,n);if(i.includes("fill"))return i.replace(Os,(()=>r));const o=i.indexOf(">");return"".concat(i.substring(0,o),' fill="').concat(r,'"').concat(i.substring(o))}(e,n,null!==(r=null===(o=i.opacity)||void 0===o?void 0:o.value)&&void 0!==r?r:1),c={color:n,gif:t.gif,data:{...e,svgData:a},loaded:!1,ratio:t.width/t.height,replaceColor:null!==(s=t.replaceColor)&&void 0!==s?s:t.replace_color,source:t.src};return new Promise((t=>{const n=new Blob([a],{type:"image/svg+xml"}),i=URL||window.URL||window.webkitURL||window,r=i.createObjectURL(n),o=new Image;o.addEventListener("load",(()=>{c.loaded=!0,c.element=o,t(c),i.revokeObjectURL(r)})),o.addEventListener("error",(async()=>{i.revokeObjectURL(r);const n={...e,error:!1,loading:!0};await Ds(n),c.loaded=!0,c.element=n.element,t(c)})),o.src=r}))}class Fs{constructor(e){this.loadImageShape=async e=>{var t,n;if(!this._engine.loadImage)throw new Error("".concat(nn," image shape not initialized"));await this._engine.loadImage({gif:e.gif,name:e.name,replaceColor:null!==(t=null!==(n=e.replaceColor)&&void 0!==n?n:e.replace_color)&&void 0!==t&&t,src:e.src})},this._engine=e}addImage(e){this._engine.images||(this._engine.images=[]),this._engine.images.push(e)}draw(e,t,n,i,r){const o=t.image,s=null===o||void 0===o?void 0:o.element;if(o){if(e.globalAlpha=i,o.gif&&o.gifData){var a;const i=new OffscreenCanvas(o.gifData.width,o.gifData.height),s=i.getContext("2d");if(!s)throw new Error("could not create offscreen canvas context");var c;if(s.imageSmoothingQuality="low",s.imageSmoothingEnabled=!1,s.clearRect(0,0,i.width,i.height),void 0===t.gifLoopCount)t.gifLoopCount=null!==(c=o.gifLoopCount)&&void 0!==c?c:0;let l=null!==(a=t.gifFrame)&&void 0!==a?a:0;const u={x:.5*-o.gifData.width,y:.5*-o.gifData.height},d=o.gifData.frames[l];if(void 0===t.gifTime&&(t.gifTime=0),!d.bitmap)return;switch(e.scale(n/o.gifData.width,n/o.gifData.height),d.disposalMethod){case 4:case 5:case 6:case 7:case 0:s.drawImage(d.bitmap,d.left,d.top),e.drawImage(i,u.x,u.y),s.clearRect(0,0,i.width,i.height);break;case 1:s.drawImage(d.bitmap,d.left,d.top),e.drawImage(i,u.x,u.y);break;case 2:s.drawImage(d.bitmap,d.left,d.top),e.drawImage(i,u.x,u.y),s.clearRect(0,0,i.width,i.height),0===o.gifData.globalColorTable.length?s.putImageData(o.gifData.frames[0].image,u.x+d.left,u.y+d.top):s.putImageData(o.gifData.backgroundImage,u.x,u.y);break;case 3:{const t=s.getImageData(0,0,i.width,i.height);s.drawImage(d.bitmap,d.left,d.top),e.drawImage(i,u.x,u.y),s.clearRect(0,0,i.width,i.height),s.putImageData(t,0,0)}}if(t.gifTime+=r.value,t.gifTime>d.delayTime){if(t.gifTime-=d.delayTime,++l>=o.gifData.frames.length){if(--t.gifLoopCount<=0)return;l=0,s.clearRect(0,0,i.width,i.height)}t.gifFrame=l}e.scale(o.gifData.width/n,o.gifData.height/n)}else if(s){const t=o.ratio,i={x:-n,y:-n};e.drawImage(s,i.x,i.y,2*n,2*n/t)}e.globalAlpha=1}}getSidesCount(){return 12}async init(e){const t=e.actualOptions;if(t.preload&&this._engine.loadImage)for(const n of t.preload)await this._engine.loadImage(n)}loadShape(e){if("image"!==e.shape&&"images"!==e.shape)return;this._engine.images||(this._engine.images=[]);const t=e.shapeData;this._engine.images.find((e=>e.name===t.name||e.source===t.src))||this.loadImageShape(t).then((()=>{this.loadShape(e)}))}particleInit(e,t){var n,i;if("image"!==t.shape&&"images"!==t.shape)return;this._engine.images||(this._engine.images=[]);const r=this._engine.images,o=t.shapeData,s=t.getFillColor(),a=r.find((e=>e.name===o.name||e.source===o.src));if(!a)return;const c=null!==(n=null!==(i=o.replaceColor)&&void 0!==i?i:o.replace_color)&&void 0!==n?n:a.replaceColor;a.loading?setTimeout((()=>{this.particleInit(e,t)})):(async(e,n)=>{let i;var r;a.svgData&&s?i=await zs(a,o,s,t):i={color:s,data:a,element:a.element,gif:a.gif,gifData:a.gifData,gifLoopCount:a.gifLoopCount,loaded:!0,ratio:o.width&&o.height?o.width/o.height:null!==(r=a.ratio)&&void 0!==r?r:1,replaceColor:c,source:o.src};i.ratio||(i.ratio=1);const l={image:i,fill:null!==(e=o.fill)&&void 0!==e?e:t.fill,close:null!==(n=o.close)&&void 0!==n?n:t.close};t.image=l.image,t.fill=l.fill,t.close=l.close})()}}class Us{constructor(){this.src="",this.gif=!1}load(e){e&&(void 0!==e.gif&&(this.gif=e.gif),void 0!==e.height&&(this.height=e.height),void 0!==e.name&&(this.name=e.name),void 0!==e.replaceColor&&(this.replaceColor=e.replaceColor),void 0!==e.src&&(this.src=e.src),void 0!==e.width&&(this.width=e.width))}}class Bs{constructor(e){this.id="imagePreloader",this._engine=e}getPlugin(){return{}}loadOptions(e,t){if(!t||!t.preload)return;e.preload||(e.preload=[]);const n=e.preload;for(const i of t.preload){const e=n.find((e=>e.name===i.name||e.src===i.src));if(e)e.load(i);else{const e=new Us;e.load(i),n.push(e)}}}needsPlugin(){return!0}}async function js(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){e.loadImage||(e.loadImage=async t=>{if(!t.name&&!t.src)throw new Error("".concat(nn," no image source provided"));if(e.images||(e.images=[]),!e.images.find((e=>e.name===t.name||e.source===t.src)))try{var n,i;const r={gif:null!==(n=t.gif)&&void 0!==n&&n,name:null!==(i=t.name)&&void 0!==i?i:t.src,source:t.src,type:t.src.substring(t.src.length-3),error:!1,loading:!0,replaceColor:t.replaceColor,ratio:t.width&&t.height?t.width/t.height:void 0};e.images.push(r);const o=t.gif?Ls:t.replaceColor?Ns:Ds;await o(r)}catch{var r;throw new Error("".concat(nn," ").concat(null!==(r=t.name)&&void 0!==r?r:t.src," not found"))}})}(e);const n=new Bs(e);await e.addPlugin(n,t),await e.addShape(["image","images"],new Fs(e),t)}class Vs extends Qi{constructor(){super(),this.sync=!1}load(e){e&&(super.load(e),void 0!==e.sync&&(this.sync=e.sync))}}class Hs extends Qi{constructor(){super(),this.random.minimumValue=1e-4,this.sync=!1}load(e){e&&(super.load(e),void 0!==e.sync&&(this.sync=e.sync))}}class Ws{constructor(){this.count=0,this.delay=new Vs,this.duration=new Hs}load(e){e&&(void 0!==e.count&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}}class Gs{constructor(e){this.container=e}init(e){const t=this.container,n=e.options.life;n&&(e.life={delay:t.retina.reduceFactor?fn(n.delay.value)*(n.delay.sync?1:un())/t.retina.reduceFactor*1e3:0,delayTime:0,duration:t.retina.reduceFactor?fn(n.duration.value)*(n.duration.sync?1:un())/t.retina.reduceFactor*1e3:0,time:0,count:n.count},e.life.duration<=0&&(e.life.duration=-1),e.life.count<=0&&(e.life.count=-1),e.life&&(e.spawning=e.life.delay>0))}isEnabled(e){return!e.destroyed}loadOptions(e){e.life||(e.life=new Ws);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.life.load(null===r||void 0===r?void 0:r.life)}update(e,t){if(!this.isEnabled(e)||!e.life)return;const n=e.life;let i=!1;if(e.spawning){if(n.delayTime+=t.value,!(n.delayTime>=e.life.delay))return;i=!0,e.spawning=!1,n.delayTime=0,n.time=0}if(-1===n.duration)return;if(e.spawning)return;if(i?n.time=0:n.time+=t.value,n.time<n.duration)return;if(n.time=0,e.life.count>0&&e.life.count--,0===e.life.count)return void e.destroy();const r=this.container.canvas.size,o=gn(0,r.width),s=gn(0,r.width);e.position.x=pn(o),e.position.y=pn(s),e.spawning=!0,n.delayTime=0,n.time=0,e.reset();const a=e.options.life;a&&(n.delay=1e3*fn(a.delay.value),n.duration=1e3*fn(a.duration.value))}}class qs{draw(e,t,n){var i;const r=t.shapeData;e.moveTo(-n/2,0),e.lineTo(n/2,0),e.lineCap=null!==(i=null===r||void 0===r?void 0:r.cap)&&void 0!==i?i:"butt"}getSidesCount(){return 1}}class Xs{init(){}isEnabled(e){return!Mn()&&!e.destroyed&&e.container.actualOptions.interactivity.events.onHover.parallax.enable}move(e){const t=e.container,n=t.actualOptions.interactivity.events.onHover.parallax;if(Mn()||!n.enable)return;const i=n.force,r=t.interactivity.mouse.position;if(!r)return;const o=t.canvas.size,s=o.width/2,a=o.height/2,c=n.smooth,l=e.getRadius()/i,u=(r.x-s)*l,d=(r.y-a)*l,{offset:h}=e;h.x+=(u-h.x)/c,h.y+=(d-h.y)/c}}class Ks{constructor(e){this.container=e,this.type="particles"}}class Js extends Ks{constructor(e){super(e)}clear(){}init(){}async interact(e){var t;const n=this.container,i=null!==(t=e.retina.attractDistance)&&void 0!==t?t:n.retina.attractDistance,r=e.getPosition(),o=n.particles.quadTree.queryCircle(r,i);for(const s of o){if(e===s||!s.options.move.attract.enable||s.destroyed||s.spawning)continue;const t=s.getPosition(),{dx:n,dy:i}=Sn(r,t),o=e.options.move.attract.rotate,a=n/(1e3*o.x),c=i/(1e3*o.y),l=s.size.value/e.size.value,u=1/l;e.velocity.x-=a*l,e.velocity.y-=c*l,s.velocity.x+=a*u,s.velocity.y+=c*u}}isEnabled(e){return e.options.move.attract.enable}reset(){}}function Ys(e,t,n,i,r,o){const s=dn(e.options.collisions.absorb.speed*r.factor/10,0,i);e.size.value+=s/2,n.size.value-=s,i<=o&&(n.size.value=0,n.destroy())}const $s=e=>{void 0===e.collisionMaxSpeed&&(e.collisionMaxSpeed=fn(e.options.collisions.maxSpeed)),e.velocity.length>e.collisionMaxSpeed&&(e.velocity.length=e.collisionMaxSpeed)};function Qs(e,t){jn(Bn(e),Bn(t)),$s(e),$s(t)}function Zs(e,t,n,i){switch(e.options.collisions.mode){case"absorb":!function(e,t,n,i){const r=e.getRadius(),o=t.getRadius();void 0===r&&void 0!==o?e.destroy():void 0!==r&&void 0===o?t.destroy():void 0!==r&&void 0!==o&&(r>=o?Ys(e,0,t,o,n,i):Ys(t,0,e,r,n,i))}(e,t,n,i);break;case"bounce":Qs(e,t);break;case"destroy":!function(e,t){e.unbreakable||t.unbreakable||Qs(e,t),void 0===e.getRadius()&&void 0!==t.getRadius()?e.destroy():void 0!==e.getRadius()&&void 0===t.getRadius()?t.destroy():void 0!==e.getRadius()&&void 0!==t.getRadius()&&(e.getRadius()>=t.getRadius()?t:e).destroy()}(e,t)}}class ea extends Ks{constructor(e){super(e)}clear(){}init(){}async interact(e,t){if(e.destroyed||e.spawning)return;const n=this.container,i=e.getPosition(),r=e.getRadius(),o=n.particles.quadTree.queryCircle(i,2*r);for(const s of o){if(e===s||!s.options.collisions.enable||e.options.collisions.mode!==s.options.collisions.mode||s.destroyed||s.spawning)continue;const o=s.getPosition(),a=s.getRadius();if(Math.abs(Math.round(i.z)-Math.round(o.z))>r+a)continue;bn(i,o)>r+a||Zs(e,s,t,n.retina.pixelRatio)}}isEnabled(e){return e.options.collisions.enable}reset(){}}class ta extends Fr{constructor(e,t,n,i){super(e,t,n),this.canvasSize=i,this.canvasSize={...i}}contains(e){const{width:t,height:n}=this.canvasSize,{x:i,y:r}=e;return super.contains(e)||super.contains({x:i-t,y:r})||super.contains({x:i-t,y:r-n})||super.contains({x:i,y:r-n})}intersects(e){if(super.intersects(e))return!0;const t=e,n=e,i={x:e.position.x-this.canvasSize.width,y:e.position.y-this.canvasSize.height};if(void 0!==n.radius){const e=new Fr(i.x,i.y,2*n.radius);return super.intersects(e)}if(void 0!==t.size){const e=new zr(i.x,i.y,2*t.size.width,2*t.size.height);return super.intersects(e)}return!1}}class na{constructor(){this.blur=5,this.color=new Ti,this.color.value="#000",this.enable=!1}load(e){e&&(void 0!==e.blur&&(this.blur=e.blur),this.color=Ti.create(this.color,e.color),void 0!==e.enable&&(this.enable=e.enable))}}class ia{constructor(){this.enable=!1,this.frequency=1}load(e){e&&(void 0!==e.color&&(this.color=Ti.create(this.color,e.color)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.frequency&&(this.frequency=e.frequency),void 0!==e.opacity&&(this.opacity=e.opacity))}}class ra{constructor(){this.blink=!1,this.color=new Ti,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new na,this.triangles=new ia,this.width=1,this.warp=!1}load(e){e&&(void 0!==e.id&&(this.id=e.id),void 0!==e.blink&&(this.blink=e.blink),this.color=Ti.create(this.color,e.color),void 0!==e.consent&&(this.consent=e.consent),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.frequency&&(this.frequency=e.frequency),void 0!==e.opacity&&(this.opacity=e.opacity),this.shadow.load(e.shadow),this.triangles.load(e.triangles),void 0!==e.width&&(this.width=e.width),void 0!==e.warp&&(this.warp=e.warp))}}function oa(e,t,n,i,r){const{dx:o,dy:s,distance:a}=Sn(e,t);if(!r||a<=n)return a;const c={x:Math.abs(o),y:Math.abs(s)},l=Math.min(c.x,i.width-c.x),u=Math.min(c.y,i.height-c.y);return Math.sqrt(l**2+u**2)}class sa extends Ks{constructor(e){super(e),this._setColor=e=>{if(!e.options.links)return;const t=this.linkContainer,n=e.options.links;let i=void 0===n.id?t.particles.linksColor:t.particles.linksColors.get(n.id);if(i)return;i=gi(n.color,n.blink,n.consent),void 0===n.id?t.particles.linksColor=i:t.particles.linksColors.set(n.id,i)},this.linkContainer=e}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}async interact(e){var t;if(!e.options.links)return;e.links=[];const n=e.getPosition(),i=this.container,r=i.canvas.size;if(n.x<0||n.y<0||n.x>r.width||n.y>r.height)return;const o=e.options.links,s=o.opacity,a=null!==(t=e.retina.linksDistance)&&void 0!==t?t:0,c=o.warp,l=c?new ta(n.x,n.y,a,r):new Fr(n.x,n.y,a),u=i.particles.quadTree.query(l);for(const d of u){const t=d.options.links;if(e===d||null===t||void 0===t||!t.enable||o.id!==t.id||d.spawning||d.destroyed||!d.links||e.links.some((e=>e.destination===d))||d.links.some((t=>t.destination===e)))continue;const i=d.getPosition();if(i.x<0||i.y<0||i.x>r.width||i.y>r.height)continue;const l=oa(n,i,a,r,c&&t.warp);if(l>a)continue;const u=(1-l/a)*s;this._setColor(e),e.links.push({destination:d,opacity:u})}}isEnabled(e){var t;return!(null===(t=e.options.links)||void 0===t||!t.enable)}loadParticlesOptions(e){e.links||(e.links=new ra);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const s of n){var r,o;e.links.load(null!==(r=null!==(o=null===s||void 0===s?void 0:s.links)&&void 0!==o?o:null===s||void 0===s?void 0:s.lineLinked)&&void 0!==r?r:null===s||void 0===s?void 0:s.line_linked)}}reset(){}}function aa(e,t){const n=((i=e.map((e=>e.id))).sort(((e,t)=>e-t)),i.join("_"));var i;let r=t.get(n);return void 0===r&&(r=un(),t.set(n,r)),r}class ca{constructor(e){this.container=e,this._drawLinkLine=(e,t)=>{const n=e.options.links;if(null===n||void 0===n||!n.enable)return;const i=this.container,r=i.actualOptions,o=t.destination,s=e.getPosition(),a=o.getPosition();let c=t.opacity;i.canvas.draw((t=>{var l,u,d;let h;const p=null===(l=e.options.twinkle)||void 0===l?void 0:l.lines;if(null!==p&&void 0!==p&&p.enable){const e=p.frequency,t=ai(p.color);un()<e&&t&&(h=t,c=fn(p.opacity))}if(!h){const t=void 0!==n.id?i.particles.linksColors.get(n.id):i.particles.linksColor;h=mi(e,o,t)}if(!h)return;const f=null!==(u=e.retina.linksWidth)&&void 0!==u?u:0,v=null!==(d=e.retina.linksDistance)&&void 0!==d?d:0,{backgroundMask:m}=r;!function(e){let t=!1;const{begin:n,end:i,maxDistance:r,context:o,canvasSize:s,width:a,backgroundMask:c,colorLine:l,opacity:u,links:d}=e;if(bn(n,i)<=r)_i(o,n,i),t=!0;else if(d.warp){let e,a;const c=Sn(n,{x:i.x-s.width,y:i.y});if(c.distance<=r){const t=n.y-c.dy/c.dx*n.x;e={x:0,y:t},a={x:s.width,y:t}}else{const t=Sn(n,{x:i.x,y:i.y-s.height});if(t.distance<=r){const i=-(n.y-t.dy/t.dx*n.x)/(t.dy/t.dx);e={x:i,y:0},a={x:i,y:s.height}}else{const t=Sn(n,{x:i.x-s.width,y:i.y-s.height});if(t.distance<=r){const i=n.y-t.dy/t.dx*n.x;e={x:-i/(t.dy/t.dx),y:i},a={x:e.x+s.width,y:e.y+s.height}}}}e&&a&&(_i(o,n,e),_i(o,i,a),t=!0)}if(!t)return;o.lineWidth=a,c.enable&&(o.globalCompositeOperation=c.composite),o.strokeStyle=pi(l,u);const{shadow:h}=d;if(h.enable){const e=ai(h.color);e&&(o.shadowBlur=h.blur,o.shadowColor=pi(e))}o.stroke()}({context:t,width:f,begin:s,end:a,maxDistance:v,canvasSize:i.canvas.size,links:n,backgroundMask:m,colorLine:h,opacity:c})}))},this._drawLinkTriangle=(e,t,n)=>{var i;const r=e.options.links;if(null===r||void 0===r||!r.enable)return;const o=r.triangles;if(!o.enable)return;const s=this.container,a=s.actualOptions,c=t.destination,l=n.destination,u=null!==(i=o.opacity)&&void 0!==i?i:(t.opacity+n.opacity)/2;u<=0||s.canvas.draw((t=>{var n;const i=e.getPosition(),d=c.getPosition(),h=l.getPosition(),p=null!==(n=e.retina.linksDistance)&&void 0!==n?n:0;if(bn(i,d)>p||bn(h,d)>p||bn(h,i)>p)return;let f=ai(o.color);if(!f){const t=void 0!==r.id?s.particles.linksColors.get(r.id):s.particles.linksColor;f=mi(e,c,t)}f&&function(e){const{context:t,pos1:n,pos2:i,pos3:r,backgroundMask:o,colorTriangle:s,opacityTriangle:a}=e;!function(e,t,n,i){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.lineTo(i.x,i.y),e.closePath()}(t,n,i,r),o.enable&&(t.globalCompositeOperation=o.composite),t.fillStyle=pi(s,a),t.fill()}({context:t,pos1:i,pos2:d,pos3:h,backgroundMask:a.backgroundMask,colorTriangle:f,opacityTriangle:u})}))},this._drawTriangles=(e,t,n,i)=>{var r,o,s;const a=n.destination;if(null===(r=e.links)||void 0===r||!r.triangles.enable||null===(o=a.options.links)||void 0===o||!o.triangles.enable)return;const c=null===(s=a.links)||void 0===s?void 0:s.filter((e=>{const t=this._getLinkFrequency(a,e.destination);return a.options.links&&t<=a.options.links.frequency&&i.findIndex((t=>t.destination===e.destination))>=0}));if(null!==c&&void 0!==c&&c.length)for(const l of c){const i=l.destination;this._getTriangleFrequency(t,a,i)>e.links.triangles.frequency||this._drawLinkTriangle(t,n,l)}},this._getLinkFrequency=(e,t)=>aa([e,t],this._freqs.links),this._getTriangleFrequency=(e,t,n)=>aa([e,t,n],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(e,t){const{links:n,options:i}=t;if(!n||n.length<=0)return;const r=n.filter((e=>i.links&&this._getLinkFrequency(t,e.destination)<=i.links.frequency));for(const s of r){var o;this._drawTriangles(i,t,s,r),s.opacity>0&&(null!==(o=t.retina.linksWidth)&&void 0!==o?o:0)>0&&this._drawLinkLine(t,s)}}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map}particleCreated(e){if(e.links=[],!e.options.links)return;const t=this.container.retina.pixelRatio,{retina:n}=e,{distance:i,width:r}=e.options.links;n.linksDistance=i*t,n.linksWidth=r*t}particleDestroyed(e){e.links=[]}}class la{constructor(){this.id="links"}getPlugin(e){return new ca(e)}loadOptions(){}needsPlugin(){return!0}}async function ua(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("particlesLinks",(e=>new sa(e)),t)}(e,t),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=new la;await e.addPlugin(n,t)}(e,t)}class da{draw(e,t,n){const i=this.getCenter(t,n),r=this.getSidesData(t,n),o=r.count.numerator*r.count.denominator,s=r.count.numerator/r.count.denominator,a=180*(s-2)/s,c=Math.PI-Math.PI*a/180;if(e){e.beginPath(),e.translate(i.x,i.y),e.moveTo(0,0);for(let t=0;t<o;t++)e.lineTo(r.length,0),e.translate(r.length,0),e.rotate(c)}}getSidesCount(e){var t,n;const i=e.shapeData;return Math.round(fn(null!==(t=null!==(n=null===i||void 0===i?void 0:i.sides)&&void 0!==n?n:null===i||void 0===i?void 0:i.nb_sides)&&void 0!==t?t:5))}}class ha extends da{getCenter(e,t){return{x:-t/(e.sides/3.5),y:-t/.76}}getSidesData(e,t){const n=e.sides;return{count:{denominator:1,numerator:n},length:2.66*t/(n/3)}}}class pa extends da{getCenter(e,t){return{x:-t,y:t/1.66}}getSidesCount(){return 3}getSidesData(e,t){return{count:{denominator:2,numerator:3},length:2*t}}}async function fa(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addShape("polygon",new ha,t)}(e,t),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addShape("triangle",new pa,t)}(e,t)}class va{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.speed&&(this.speed=gn(e.speed)),void 0!==e.decay&&(this.decay=gn(e.decay)),void 0!==e.sync&&(this.sync=e.sync))}}class ma extends Qi{constructor(){super(),this.animation=new va,this.direction="clockwise",this.path=!1,this.value=0}load(e){e&&(super.load(e),void 0!==e.direction&&(this.direction=e.direction),this.animation.load(e.animation),void 0!==e.path&&(this.path=e.path))}}class ga{constructor(e){this.container=e}init(e){const t=e.options.rotate;if(!t)return;e.rotate={enable:t.animation.enable,value:fn(t.value)*Math.PI/180},e.pathRotation=t.path;let n=t.direction;if("random"===n){n=Math.floor(2*un())>0?"counter-clockwise":"clockwise"}switch(n){case"counter-clockwise":case"counterClockwise":e.rotate.status="decreasing";break;case"clockwise":e.rotate.status="increasing"}const i=t.animation;i.enable&&(e.rotate.decay=1-fn(i.decay),e.rotate.velocity=fn(i.speed)/360*this.container.retina.reduceFactor,i.sync||(e.rotate.velocity*=un())),e.rotation=e.rotate.value}isEnabled(e){const t=e.options.rotate;return!!t&&(!e.destroyed&&!e.spawning&&t.animation.enable&&!t.path)}loadOptions(e){e.rotate||(e.rotate=new ma);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.rotate.load(null===r||void 0===r?void 0:r.rotate)}update(e,t){var n,i;this.isEnabled(e)&&(!function(e,t){var n,i;const r=e.rotate,o=e.options.rotate;if(!r||!o)return;const s=o.animation,a=(null!==(n=r.velocity)&&void 0!==n?n:0)*t.factor,c=2*Math.PI,l=null!==(i=r.decay)&&void 0!==i?i:1;s.enable&&("increasing"===r.status?(r.value+=a,r.value>c&&(r.value-=c)):(r.value-=a,r.value<0&&(r.value+=c)),r.velocity&&1!==l&&(r.velocity*=l))}(e,t),e.rotation=null!==(n=null===(i=e.rotate)||void 0===i?void 0:i.value)&&void 0!==n?n:0)}}const ya=Math.sqrt(2);class Sa{draw(e,t,n){const i=n/ya,r=2*i;e.rect(-i,-i,r,r)}getSidesCount(){return 4}}class ba{draw(e,t,n){var i;const r=t.sides,o=null!==(i=t.starInset)&&void 0!==i?i:2;e.moveTo(0,0-n);for(let s=0;s<r;s++)e.rotate(Math.PI/r),e.lineTo(0,0-n*o),e.rotate(Math.PI/r),e.lineTo(0,0-n)}getSidesCount(e){var t,n;const i=e.shapeData;return Math.round(fn(null!==(t=null!==(n=null===i||void 0===i?void 0:i.sides)&&void 0!==n?n:null===i||void 0===i?void 0:i.nb_sides)&&void 0!==t?t:5))}particleInit(e,t){var n;const i=t.shapeData,r=fn(null!==(n=null===i||void 0===i?void 0:i.inset)&&void 0!==n?n:2);t.starInset=r}}function _a(e,t,n,i,r){var o,s,a,c,l,u,d,h,p;if(!t||!n.enable||(null!==(o=t.maxLoops)&&void 0!==o?o:0)>0&&(null!==(s=t.loops)&&void 0!==s?s:0)>(null!==(a=t.maxLoops)&&void 0!==a?a:0))return;if(t.time||(t.time=0),(null!==(c=t.delayTime)&&void 0!==c?c:0)>0&&t.time<(null!==(l=t.delayTime)&&void 0!==l?l:0)&&(t.time+=e.value),(null!==(u=t.delayTime)&&void 0!==u?u:0)>0&&t.time<(null!==(d=t.delayTime)&&void 0!==d?d:0))return;const f=pn(n.offset),v=(null!==(h=t.velocity)&&void 0!==h?h:0)*e.factor+3.6*f,m=null!==(p=t.decay)&&void 0!==p?p:1;r&&"increasing"!==t.status?(t.value-=v,t.value<0&&(t.loops||(t.loops=0),t.loops++,t.status="increasing",t.value+=t.value)):(t.value+=v,t.value>i&&(t.loops||(t.loops=0),t.loops++,r&&(t.status="decreasing",t.value-=t.value%i))),t.velocity&&1!==m&&(t.velocity*=m),t.value>i&&(t.value%=i)}class wa{constructor(e){this.container=e}init(e){var t,n,i;const r=this.container,o=e.options,s=Wn(o.stroke,e.id,o.reduceDuplicates);e.strokeWidth=fn(s.width)*r.retina.pixelRatio,e.strokeOpacity=fn(null!==(t=s.opacity)&&void 0!==t?t:1),e.strokeAnimation=null===(n=s.color)||void 0===n?void 0:n.animation;const a=null!==(i=li(s.color))&&void 0!==i?i:e.getFillColor();a&&(e.strokeColor=Si(a,e.strokeAnimation,r.retina.reduceFactor))}isEnabled(e){const t=e.strokeAnimation,{strokeColor:n}=e;return!e.destroyed&&!e.spawning&&!!t&&(void 0!==(null===n||void 0===n?void 0:n.h.value)&&n.h.enable||void 0!==(null===n||void 0===n?void 0:n.s.value)&&n.s.enable||void 0!==(null===n||void 0===n?void 0:n.l.value)&&n.l.enable)}update(e,t){this.isEnabled(e)&&function(e,t){if(!e.strokeColor||!e.strokeAnimation)return;const{h:n,s:i,l:r}=e.strokeColor,{h:o,s:s,l:a}=e.strokeAnimation;n&&_a(t,n,o,360,!1),i&&_a(t,i,s,100,!0),r&&_a(t,r,a,100,!0)}(e,t)}}const xa=["text","character","char"];class Ca{draw(e,t,n,i){var r,o,s;const a=t.shapeData;if(void 0===a)return;const c=a.value;if(void 0===c)return;void 0===t.text&&(t.text=Wn(c,t.randomIndexData));const l=t.text,u=null!==(r=a.style)&&void 0!==r?r:"",d=null!==(o=a.weight)&&void 0!==o?o:"400",h=2*Math.round(n),p=null!==(s=a.font)&&void 0!==s?s:"Verdana",f=t.fill,v=l.length*n/2;e.font="".concat(u," ").concat(d," ").concat(h,'px "').concat(p,'"');const m={x:-v,y:n/2};e.globalAlpha=i,f?e.fillText(l,m.x,m.y):e.strokeText(l,m.x,m.y),e.globalAlpha=1}getSidesCount(){return 12}async init(e){const t=e.actualOptions;if(xa.find((e=>In(e,t.particles.shape.type)))){const e=xa.map((e=>t.particles.shape.options[e])).find((e=>!!e)),n=[];Hn(e,(e=>{n.push(async function(e,t){try{await document.fonts.load("".concat(null!==t&&void 0!==t?t:"400"," 36px '").concat(null!==e&&void 0!==e?e:"Verdana","'"))}catch{}}(e.font,e.weight))})),await Promise.all(n)}}particleInit(e,t){if(!t.shape||!xa.includes(t.shape))return;const n=t.shapeData;if(void 0===n)return;const i=n.value;void 0!==i&&(t.text=Wn(i,t.randomIndexData))}}async function Ea(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Uo(e),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addMover("parallax",(()=>new Xs),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalAttract",(t=>new es(e,t)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalBounce",(e=>new ns(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalBubble",(e=>new as(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalConnect",(e=>new hs(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalGrab",(e=>new ms(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalPause",(e=>new gs(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalPush",(e=>new Ss(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalRemove",(e=>new _s(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalRepulse",(t=>new Es(e,t)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalSlow",(e=>new Ts(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("particlesAttract",(e=>new Js(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("particlesCollisions",(e=>new ea(e)),t)}(e,!1),await ua(e,!1),await async function(){cn("ease-in-quad",(e=>e**2)),cn("ease-out-quad",(e=>1-(1-e)**2)),cn("ease-in-out-quad",(e=>e<.5?2*e**2:1-(-2*e+2)**2/2))}(),await js(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addShape("line",new qs,t)}(e,!1),await fa(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addShape(["edge","square"],new Sa,t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addShape("star",new ba,t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addShape(xa,new Ca,t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("life",(e=>new Gs(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("rotate",(e=>new ga(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("strokeColor",(e=>new wa(e)),t)}(e,!1),await Qo(e,t)}class Pa{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.speed&&(this.speed=gn(e.speed)),void 0!==e.decay&&(this.decay=gn(e.decay)),void 0!==e.sync&&(this.sync=e.sync))}}class Ta extends Qi{constructor(){super(),this.animation=new Pa,this.direction="clockwise",this.enable=!1,this.value=0}load(e){super.load(e),e&&(this.animation.load(e.animation),void 0!==e.direction&&(this.direction=e.direction),void 0!==e.enable&&(this.enable=e.enable))}}class Ra{constructor(e){this.container=e}getTransformValues(e){var t;const n=(null===(t=e.tilt)||void 0===t?void 0:t.enable)&&e.tilt;return{b:n?Math.cos(n.value)*n.cosDirection:void 0,c:n?Math.sin(n.value)*n.sinDirection:void 0}}init(e){var t;const n=e.options.tilt;if(!n)return;e.tilt={enable:n.enable,value:fn(n.value)*Math.PI/180,sinDirection:un()>=.5?1:-1,cosDirection:un()>=.5?1:-1};let i=n.direction;if("random"===i){i=Math.floor(2*un())>0?"counter-clockwise":"clockwise"}switch(i){case"counter-clockwise":case"counterClockwise":e.tilt.status="decreasing";break;case"clockwise":e.tilt.status="increasing"}const r=null===(t=e.options.tilt)||void 0===t?void 0:t.animation;null!==r&&void 0!==r&&r.enable&&(e.tilt.decay=1-fn(r.decay),e.tilt.velocity=fn(r.speed)/360*this.container.retina.reduceFactor,r.sync||(e.tilt.velocity*=un()))}isEnabled(e){var t;const n=null===(t=e.options.tilt)||void 0===t?void 0:t.animation;return!e.destroyed&&!e.spawning&&!(null===n||void 0===n||!n.enable)}loadOptions(e){e.tilt||(e.tilt=new Ta);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.tilt.load(null===r||void 0===r?void 0:r.tilt)}update(e,t){this.isEnabled(e)&&function(e,t){var n,i;if(!e.tilt||!e.options.tilt)return;const r=e.options.tilt.animation,o=(null!==(n=e.tilt.velocity)&&void 0!==n?n:0)*t.factor,s=2*Math.PI,a=null!==(i=e.tilt.decay)&&void 0!==i?i:1;r.enable&&("increasing"===e.tilt.status?(e.tilt.value+=o,e.tilt.value>s&&(e.tilt.value-=s)):(e.tilt.value-=o,e.tilt.value<0&&(e.tilt.value+=s)),e.tilt.velocity&&1!==a&&(e.tilt.velocity*=a))}(e,t)}}class Ma{constructor(){this.enable=!1,this.frequency=.05,this.opacity=1}load(e){e&&(void 0!==e.color&&(this.color=Ti.create(this.color,e.color)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.frequency&&(this.frequency=e.frequency),void 0!==e.opacity&&(this.opacity=gn(e.opacity)))}}class Aa{constructor(){this.lines=new Ma,this.particles=new Ma}load(e){e&&(this.lines.load(e.lines),this.particles.load(e.particles))}}class Ia{getColorStyles(e,t,n,i){const r=e.options.twinkle;if(!r)return{};const o=r.particles,s=o.enable&&un()<o.frequency,a=e.options.zIndex,c=(1-e.zIndexFactor)**a.opacityRate,l=s?fn(o.opacity)*c:i,u=li(o.color),d=u?fi(u,l):void 0,h={},p=s&&d;return h.fill=p?d:void 0,h.stroke=p?d:void 0,h}init(){}isEnabled(e){const t=e.options.twinkle;return!!t&&t.particles.enable}loadOptions(e){e.twinkle||(e.twinkle=new Aa);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.twinkle.load(null===r||void 0===r?void 0:r.twinkle)}update(){}}class ka{constructor(){this.angle=50,this.move=10}load(e){e&&(void 0!==e.angle&&(this.angle=gn(e.angle)),void 0!==e.move&&(this.move=gn(e.move)))}}class Oa{constructor(){this.distance=5,this.enable=!1,this.speed=new ka}load(e){if(e&&(void 0!==e.distance&&(this.distance=gn(e.distance)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.speed))if($n(e.speed))this.speed.load({angle:e.speed});else{const t=e.speed;void 0!==t.min?this.speed.load({angle:t}):this.speed.load(e.speed)}}}class Da{constructor(e){this.container=e}init(e){var t;const n=e.options.wobble;null!==n&&void 0!==n&&n.enable?e.wobble={angle:un()*Math.PI*2,angleSpeed:fn(n.speed.angle)/360,moveSpeed:fn(n.speed.move)/10}:e.wobble={angle:0,angleSpeed:0,moveSpeed:0},e.retina.wobbleDistance=fn(null!==(t=null===n||void 0===n?void 0:n.distance)&&void 0!==t?t:0)*this.container.retina.pixelRatio}isEnabled(e){var t;return!e.destroyed&&!e.spawning&&!(null===(t=e.options.wobble)||void 0===t||!t.enable)}loadOptions(e){e.wobble||(e.wobble=new Oa);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.wobble.load(null===r||void 0===r?void 0:r.wobble)}update(e,t){this.isEnabled(e)&&function(e,t){var n;const{wobble:i}=e.options,{wobble:r}=e;if(null===i||void 0===i||!i.enable||!r)return;const o=r.angleSpeed*t.factor,s=r.moveSpeed*t.factor*((null!==(n=e.retina.wobbleDistance)&&void 0!==n?n:0)*t.factor)/(1e3/60),a=2*Math.PI,{position:c}=e;r.angle+=o,r.angle>a&&(r.angle-=a),c.x+=s*Math.cos(r.angle),c.y+=s*Math.abs(Math.sin(r.angle))}(e,t)}}async function La(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("destroy",(t=>new So(e,t)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("roll",(()=>new zo),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("tilt",(e=>new Ra(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("twinkle",(()=>new Ia),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("wobble",(e=>new Da(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalTrail",(e=>new Do(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addPlugin(new ho,t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.emitterShapeManager||(e.emitterShapeManager=new Ro(e)),e.addEmitterShape||(e.addEmitterShape=(t,n)=>{var i;null===(i=e.emitterShapeManager)||void 0===i||i.addShape(t,n)});const n=new Io(e);await e.addPlugin(n,t),e.addEmitterShape("circle",new bo),e.addEmitterShape("square",new Ao)}(e,!1),await Ea(e,t)}var Na=n(5173),za=n.n(Na),Fa=n(122),Ua=n.n(Fa),Ba=n(7282),ja=n.n(Ba),Va=Object.defineProperty,Ha=Object.defineProperties,Wa=Object.getOwnPropertyDescriptors,Ga=Object.getOwnPropertySymbols,qa=Object.prototype.hasOwnProperty,Xa=Object.prototype.propertyIsEnumerable,Ka=(e,t,n)=>t in e?Va(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ja=(e,t)=>{for(var n in t||(t={}))qa.call(t,n)&&Ka(e,n,t[n]);if(Ga)for(var n of Ga(t))Xa.call(t,n)&&Ka(e,n,t[n]);return e},Ya=(e,t)=>Ha(e,Wa(t));function $a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ya(Ja({},e),{height:0,width:0,playerVars:Ya(Ja({},e.playerVars),{autoplay:0,start:0,end:0})})}var Qa={videoId:za().string,id:za().string,className:za().string,iframeClassName:za().string,style:za().object,title:za().string,loading:za().oneOf(["lazy","eager"]),opts:za().objectOf(za().any),onReady:za().func,onError:za().func,onPlay:za().func,onPause:za().func,onEnd:za().func,onStateChange:za().func,onPlaybackRateChange:za().func,onPlaybackQualityChange:za().func},Za=class extends t.Component{constructor(e){super(e),this.destroyPlayerPromise=void 0,this.onPlayerReady=e=>{var t,n;return null==(n=(t=this.props).onReady)?void 0:n.call(t,e)},this.onPlayerError=e=>{var t,n;return null==(n=(t=this.props).onError)?void 0:n.call(t,e)},this.onPlayerStateChange=e=>{var t,n,i,r,o,s,a,c;switch(null==(n=(t=this.props).onStateChange)||n.call(t,e),e.data){case Za.PlayerState.ENDED:null==(r=(i=this.props).onEnd)||r.call(i,e);break;case Za.PlayerState.PLAYING:null==(s=(o=this.props).onPlay)||s.call(o,e);break;case Za.PlayerState.PAUSED:null==(c=(a=this.props).onPause)||c.call(a,e)}},this.onPlayerPlaybackRateChange=e=>{var t,n;return null==(n=(t=this.props).onPlaybackRateChange)?void 0:n.call(t,e)},this.onPlayerPlaybackQualityChange=e=>{var t,n;return null==(n=(t=this.props).onPlaybackQualityChange)?void 0:n.call(t,e)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then((()=>this.destroyPlayerPromise=void 0)),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if("undefined"===typeof document)return;if(this.destroyPlayerPromise)return void this.destroyPlayerPromise.then(this.createPlayer);const e=Ya(Ja({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=ja()(this.container,e),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then((e=>{this.props.title&&e.setAttribute("title",this.props.title),this.props.loading&&e.setAttribute("loading",this.props.loading)}))},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var e;null==(e=this.internalPlayer)||e.getIframe().then((e=>{this.props.id?e.setAttribute("id",this.props.id):e.removeAttribute("id"),this.props.iframeClassName?e.setAttribute("class",this.props.iframeClassName):e.removeAttribute("class"),this.props.opts&&this.props.opts.width?e.setAttribute("width",this.props.opts.width.toString()):e.removeAttribute("width"),this.props.opts&&this.props.opts.height?e.setAttribute("height",this.props.opts.height.toString()):e.removeAttribute("height"),this.props.title?e.setAttribute("title",this.props.title):e.setAttribute("title","YouTube video player"),this.props.loading?e.setAttribute("loading",this.props.loading):e.removeAttribute("loading")}))},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var e,t,n,i;if("undefined"===typeof this.props.videoId||null===this.props.videoId)return void(null==(e=this.internalPlayer)||e.stopVideo());let r=!1;const o={videoId:this.props.videoId};(null==(t=this.props.opts)?void 0:t.playerVars)&&(r=1===this.props.opts.playerVars.autoplay,"start"in this.props.opts.playerVars&&(o.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(o.endSeconds=this.props.opts.playerVars.end)),r?null==(n=this.internalPlayer)||n.loadVideoById(o):null==(i=this.internalPlayer)||i.cueVideoById(o)},this.refContainer=e=>{this.container=e},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(e){return t=this,n=null,i=function*(){(function(e,t){var n,i,r,o;return e.id!==t.id||e.className!==t.className||(null==(n=e.opts)?void 0:n.width)!==(null==(i=t.opts)?void 0:i.width)||(null==(r=e.opts)?void 0:r.height)!==(null==(o=t.opts)?void 0:o.height)||e.iframeClassName!==t.iframeClassName||e.title!==t.title})(e,this.props)&&this.updatePlayer(),function(e,t){return e.videoId!==t.videoId||!Ua()($a(e.opts),$a(t.opts))}(e,this.props)&&(yield this.resetPlayer()),function(e,t){var n,i;if(e.videoId!==t.videoId)return!0;const r=(null==(n=e.opts)?void 0:n.playerVars)||{},o=(null==(i=t.opts)?void 0:i.playerVars)||{};return r.start!==o.start||r.end!==o.end}(e,this.props)&&this.updateVideo()},new Promise(((e,r)=>{var o=e=>{try{a(i.next(e))}catch(t){r(t)}},s=e=>{try{a(i.throw(e))}catch(t){r(t)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,s);a((i=i.apply(t,n)).next())}));var t,n,i}componentWillUnmount(){this.destroyPlayer()}render(){return t.createElement("div",{className:this.props.className,style:this.props.style},t.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}},ec=Za;ec.propTypes=Qa,ec.defaultProps={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},ec.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var tc=ec;const nc="162",ic=1,rc=2,oc=3,sc=0,ac=1,cc=100,lc=0,uc=1,dc=2,hc=0,pc=1,fc=2,vc=3,mc=4,gc=5,yc=6,Sc=7,bc=301,_c=302,wc=303,xc=304,Cc=306,Ec=1e3,Pc=1001,Tc=1002,Rc=1003,Mc=1004,Ac=1005,Ic=1006,kc=1007,Oc=1008,Dc=1009,Lc=1012,Nc=1013,zc=1014,Fc=1015,Uc=1016,Bc=1020,jc=1023,Vc=1026,Hc=1027,Wc=1028,Gc=33776,qc=33777,Xc=33778,Kc=33779,Jc=36492,Yc=2300,$c=2301,Qc=2302,Zc=2400,el=2401,tl=2402,nl="",il="srgb",rl="srgb-linear",ol="display-p3",sl="display-p3-linear",al="linear",cl="srgb",ll="rec709",ul="p3",dl=7680,hl=35044,pl="300 es",fl=1035,vl=2e3,ml=2001;class gl{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}const yl=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Sl=1234567;const bl=Math.PI/180,_l=180/Math.PI;function wl(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(yl[255&e]+yl[e>>8&255]+yl[e>>16&255]+yl[e>>24&255]+"-"+yl[255&t]+yl[t>>8&255]+"-"+yl[t>>16&15|64]+yl[t>>24&255]+"-"+yl[63&n|128]+yl[n>>8&255]+"-"+yl[n>>16&255]+yl[n>>24&255]+yl[255&i]+yl[i>>8&255]+yl[i>>16&255]+yl[i>>24&255]).toLowerCase()}function xl(e,t,n){return Math.max(t,Math.min(n,e))}function Cl(e,t){return(e%t+t)%t}function El(e,t,n){return(1-n)*e+n*t}function Pl(e){return 0===(e&e-1)&&0!==e}function Tl(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Rl(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Ml(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const Al={DEG2RAD:bl,RAD2DEG:_l,generateUUID:wl,clamp:xl,euclideanModulo:Cl,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:El,damp:function(e,t,n,i){return El(e,t,1-Math.exp(-n*i))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Cl(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Sl=e);let t=Sl+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*bl},radToDeg:function(e){return e*_l},isPowerOfTwo:Pl,ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:Tl,setQuaternionFromProperEuler:function(e,t,n,i,r){const o=Math.cos,s=Math.sin,a=o(n/2),c=s(n/2),l=o((t+i)/2),u=s((t+i)/2),d=o((t-i)/2),h=s((t-i)/2),p=o((i-t)/2),f=s((i-t)/2);switch(r){case"XYX":e.set(a*u,c*d,c*h,a*l);break;case"YZY":e.set(c*h,a*u,c*d,a*l);break;case"ZXZ":e.set(c*d,c*h,a*u,a*l);break;case"XZX":e.set(a*u,c*f,c*p,a*l);break;case"YXY":e.set(c*p,a*u,c*f,a*l);break;case"ZYZ":e.set(c*f,c*p,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:Ml,denormalize:Rl};class Il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Il.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(xl(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*i+e.x,this.y=r*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class kl{constructor(e,t,n,i,r,o,s,a,c){kl.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,o,s,a,c)}set(e,t,n,i,r,o,s,a,c){const l=this.elements;return l[0]=e,l[1]=i,l[2]=s,l[3]=t,l[4]=r,l[5]=a,l[6]=n,l[7]=o,l[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[3],a=n[6],c=n[1],l=n[4],u=n[7],d=n[2],h=n[5],p=n[8],f=i[0],v=i[3],m=i[6],g=i[1],y=i[4],S=i[7],b=i[2],_=i[5],w=i[8];return r[0]=o*f+s*g+a*b,r[3]=o*v+s*y+a*_,r[6]=o*m+s*S+a*w,r[1]=c*f+l*g+u*b,r[4]=c*v+l*y+u*_,r[7]=c*m+l*S+u*w,r[2]=d*f+h*g+p*b,r[5]=d*v+h*y+p*_,r[8]=d*m+h*S+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],c=e[7],l=e[8];return t*o*l-t*s*c-n*r*l+n*s*a+i*r*c-i*o*a}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],c=e[7],l=e[8],u=l*o-s*c,d=s*a-l*r,h=c*r-o*a,p=t*u+n*d+i*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(i*c-l*n)*f,e[2]=(s*n-i*o)*f,e[3]=d*f,e[4]=(l*t-i*a)*f,e[5]=(i*r-s*t)*f,e[6]=h*f,e[7]=(n*a-c*t)*f,e[8]=(o*t-n*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,o,s){const a=Math.cos(r),c=Math.sin(r);return this.set(n*a,n*c,-n*(a*o+c*s)+o+e,-i*c,i*a,-i*(-c*o+a*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(Ol.makeScale(e,t)),this}rotate(e){return this.premultiply(Ol.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ol.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Ol=new kl;function Dl(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function Ll(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Nl(){const e=Ll("canvas");return e.style.display="block",e}const zl={};function Fl(e){e in zl||(zl[e]=!0,console.warn(e))}const Ul=(new kl).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Bl=(new kl).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),jl={[rl]:{transfer:al,primaries:ll,toReference:e=>e,fromReference:e=>e},[il]:{transfer:cl,primaries:ll,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[sl]:{transfer:al,primaries:ul,toReference:e=>e.applyMatrix3(Bl),fromReference:e=>e.applyMatrix3(Ul)},[ol]:{transfer:cl,primaries:ul,toReference:e=>e.convertSRGBToLinear().applyMatrix3(Bl),fromReference:e=>e.applyMatrix3(Ul).convertLinearToSRGB()}},Vl=new Set([rl,sl]),Hl={enabled:!0,_workingColorSpace:rl,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!Vl.has(e))throw new Error('Unsupported working color space, "'.concat(e,'".'));this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const i=jl[t].toReference;return(0,jl[n].fromReference)(i(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return jl[e].primaries},getTransfer:function(e){return e===nl?al:jl[e].transfer}};function Wl(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Gl(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let ql;class Xl{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===ql&&(ql=Ll("canvas")),ql.width=e.width,ql.height=e.height;const n=ql.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ql}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=Ll("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*Wl(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Wl(t[e]/255)):t[e]=Wl(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Kl=0;class Jl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:Kl++}),this.uuid=wl(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(Yl(i[t].image)):e.push(Yl(i[t]))}else e=Yl(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function Yl(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Xl.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let $l=0;class Ql extends gl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ql.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ql.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pc,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Pc,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ic,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Oc,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:jc,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Dc,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Ql.DEFAULT_ANISOTROPY,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:nl;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:$l++}),this.uuid=wl(),this.name="",this.source=new Jl(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=o,this.anisotropy=c,this.format=s,this.internalFormat=null,this.type=a,this.offset=new Il(0,0),this.repeat=new Il(1,1),this.center=new Il(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new kl,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=l,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ec:e.x=e.x-Math.floor(e.x);break;case Pc:e.x=e.x<0?0:1;break;case Tc:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ec:e.y=e.y-Math.floor(e.y);break;case Pc:e.y=e.y<0?0:1;break;case Tc:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}Ql.DEFAULT_IMAGE=null,Ql.DEFAULT_MAPPING=300,Ql.DEFAULT_ANISOTROPY=1;class Zl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Zl.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const o=.01,s=.1,a=e.elements,c=a[0],l=a[4],u=a[8],d=a[1],h=a[5],p=a[9],f=a[2],v=a[6],m=a[10];if(Math.abs(l-d)<o&&Math.abs(u-f)<o&&Math.abs(p-v)<o){if(Math.abs(l+d)<s&&Math.abs(u+f)<s&&Math.abs(p+v)<s&&Math.abs(c+h+m-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(c+1)/2,a=(h+1)/2,g=(m+1)/2,y=(l+d)/4,S=(u+f)/4,b=(p+v)/4;return e>a&&e>g?e<o?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=y/n,r=S/n):a>g?a<o?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(a),n=y/i,r=b/i):g<o?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(g),n=S/r,i=b/r),this.set(n,i,r,t),this}let g=Math.sqrt((v-p)*(v-p)+(u-f)*(u-f)+(d-l)*(d-l));return Math.abs(g)<.001&&(g=1),this.x=(v-p)/g,this.y=(u-f)/g,this.z=(d-l)/g,this.w=Math.acos((c+h+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class eu extends gl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Zl(0,0,e,t),this.scissorTest=!1,this.viewport=new Zl(0,0,e,t);const i={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ic,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},n);const r=new Ql(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let s=0;s<o;s++)this.textures[s]=r.clone(),this.textures[s].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Jl(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class tu extends eu{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class nu extends Ql{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Rc,this.minFilter=Rc,this.wrapR=Pc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class iu extends Ql{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Rc,this.minFilter=Rc,this.wrapR=Pc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ru{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,o,s){let a=n[i+0],c=n[i+1],l=n[i+2],u=n[i+3];const d=r[o+0],h=r[o+1],p=r[o+2],f=r[o+3];if(0===s)return e[t+0]=a,e[t+1]=c,e[t+2]=l,void(e[t+3]=u);if(1===s)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=f);if(u!==f||a!==d||c!==h||l!==p){let e=1-s;const t=a*d+c*h+l*p+u*f,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),o=Math.atan2(r,t*n);e=Math.sin(e*o)/r,s=Math.sin(s*o)/r}const r=s*n;if(a=a*e+d*r,c=c*e+h*r,l=l*e+p*r,u=u*e+f*r,e===1-s){const e=1/Math.sqrt(a*a+c*c+l*l+u*u);a*=e,c*=e,l*=e,u*=e}}e[t]=a,e[t+1]=c,e[t+2]=l,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,o){const s=n[i],a=n[i+1],c=n[i+2],l=n[i+3],u=r[o],d=r[o+1],h=r[o+2],p=r[o+3];return e[t]=s*p+l*u+a*h-c*d,e[t+1]=a*p+l*d+c*u-s*h,e[t+2]=c*p+l*h+s*d-a*u,e[t+3]=l*p-s*u-a*d-c*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._x,i=e._y,r=e._z,o=e._order,s=Math.cos,a=Math.sin,c=s(n/2),l=s(i/2),u=s(r/2),d=a(n/2),h=a(i/2),p=a(r/2);switch(o){case"XYZ":this._x=d*l*u+c*h*p,this._y=c*h*u-d*l*p,this._z=c*l*p+d*h*u,this._w=c*l*u-d*h*p;break;case"YXZ":this._x=d*l*u+c*h*p,this._y=c*h*u-d*l*p,this._z=c*l*p-d*h*u,this._w=c*l*u+d*h*p;break;case"ZXY":this._x=d*l*u-c*h*p,this._y=c*h*u+d*l*p,this._z=c*l*p+d*h*u,this._w=c*l*u-d*h*p;break;case"ZYX":this._x=d*l*u-c*h*p,this._y=c*h*u+d*l*p,this._z=c*l*p-d*h*u,this._w=c*l*u+d*h*p;break;case"YZX":this._x=d*l*u+c*h*p,this._y=c*h*u+d*l*p,this._z=c*l*p-d*h*u,this._w=c*l*u-d*h*p;break;case"XZY":this._x=d*l*u-c*h*p,this._y=c*h*u-d*l*p,this._z=c*l*p+d*h*u,this._w=c*l*u+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],o=t[1],s=t[5],a=t[9],c=t[2],l=t[6],u=t[10],d=n+s+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(l-a)*e,this._y=(r-c)*e,this._z=(o-i)*e}else if(n>s&&n>u){const e=2*Math.sqrt(1+n-s-u);this._w=(l-a)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(r+c)/e}else if(s>u){const e=2*Math.sqrt(1+s-n-u);this._w=(r-c)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(a+l)/e}else{const e=2*Math.sqrt(1+u-n-s);this._w=(o-i)/e,this._x=(r+c)/e,this._y=(a+l)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(xl(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,o=e._w,s=t._x,a=t._y,c=t._z,l=t._w;return this._x=n*l+o*s+i*c-r*a,this._y=i*l+o*a+r*s-n*c,this._z=r*l+o*c+n*a-i*s,this._w=o*l-n*s-i*a-r*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,o=this._w;let s=o*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;const a=1-s*s;if(a<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this}const c=Math.sqrt(a),l=Math.atan2(c,s),u=Math.sin((1-t)*l)/c,d=Math.sin(t*l)/c;return this._w=o*u+this._w*d,this._x=n*u+this._x*d,this._y=i*u+this._y*d,this._z=r*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ou{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;ou.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(au.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(au.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,s=e.z,a=e.w,c=2*(o*i-s*n),l=2*(s*t-r*i),u=2*(r*n-o*t);return this.x=t+a*c+o*u-s*l,this.y=n+a*l+s*c-r*u,this.z=i+a*u+r*l-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,o=t.x,s=t.y,a=t.z;return this.x=i*a-r*s,this.y=r*o-n*a,this.z=n*s-i*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return su.copy(this).projectOnVector(e),this.sub(su)}reflect(e){return this.sub(su.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(xl(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const su=new ou,au=new ru;class cu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ou(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ou(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(uu.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(uu.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=uu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===t&&void 0!==i&&!0!==e.isInstancedMesh)for(let t=0,n=i.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,uu):uu.fromBufferAttribute(i,t),uu.applyMatrix4(e.matrixWorld),this.expandByPoint(uu);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),du.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),du.copy(n.boundingBox)),du.applyMatrix4(e.matrixWorld),this.union(du)}const i=e.children;for(let r=0,o=i.length;r<o;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,uu),uu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(yu),Su.subVectors(this.max,yu),hu.subVectors(e.a,yu),pu.subVectors(e.b,yu),fu.subVectors(e.c,yu),vu.subVectors(pu,hu),mu.subVectors(fu,pu),gu.subVectors(hu,fu);let t=[0,-vu.z,vu.y,0,-mu.z,mu.y,0,-gu.z,gu.y,vu.z,0,-vu.x,mu.z,0,-mu.x,gu.z,0,-gu.x,-vu.y,vu.x,0,-mu.y,mu.x,0,-gu.y,gu.x,0];return!!wu(t,hu,pu,fu,Su)&&(t=[1,0,0,0,1,0,0,0,1],!!wu(t,hu,pu,fu,Su)&&(bu.crossVectors(vu,mu),t=[bu.x,bu.y,bu.z],wu(t,hu,pu,fu,Su)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,uu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(uu).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(lu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),lu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),lu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),lu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),lu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),lu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),lu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),lu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(lu)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const lu=[new ou,new ou,new ou,new ou,new ou,new ou,new ou,new ou],uu=new ou,du=new cu,hu=new ou,pu=new ou,fu=new ou,vu=new ou,mu=new ou,gu=new ou,yu=new ou,Su=new ou,bu=new ou,_u=new ou;function wu(e,t,n,i,r){for(let o=0,s=e.length-3;o<=s;o+=3){_u.fromArray(e,o);const s=r.x*Math.abs(_u.x)+r.y*Math.abs(_u.y)+r.z*Math.abs(_u.z),a=t.dot(_u),c=n.dot(_u),l=i.dot(_u);if(Math.max(-Math.max(a,c,l),Math.min(a,c,l))>s)return!1}return!0}const xu=new cu,Cu=new ou,Eu=new ou;class Pu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ou,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):xu.setFromPoints(e).getCenter(n);let i=0;for(let r=0,o=e.length;r<o;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Cu.subVectors(e,this.center);const t=Cu.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(Cu,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Eu.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Cu.copy(e.center).add(Eu)),this.expandByPoint(Cu.copy(e.center).sub(Eu))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Tu=new ou,Ru=new ou,Mu=new ou,Au=new ou,Iu=new ou,ku=new ou,Ou=new ou;class Du{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ou,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ou(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Tu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Tu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Tu.copy(this.origin).addScaledVector(this.direction,t),Tu.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){Ru.copy(e).add(t).multiplyScalar(.5),Mu.copy(t).sub(e).normalize(),Au.copy(this.origin).sub(Ru);const r=.5*e.distanceTo(t),o=-this.direction.dot(Mu),s=Au.dot(this.direction),a=-Au.dot(Mu),c=Au.lengthSq(),l=Math.abs(1-o*o);let u,d,h,p;if(l>0)if(u=o*a-s,d=o*s-a,p=r*l,u>=0)if(d>=-p)if(d<=p){const e=1/l;u*=e,d*=e,h=u*(u+o*d+2*s)+d*(o*u+d+2*a)+c}else d=r,u=Math.max(0,-(o*d+s)),h=-u*u+d*(d+2*a)+c;else d=-r,u=Math.max(0,-(o*d+s)),h=-u*u+d*(d+2*a)+c;else d<=-p?(u=Math.max(0,-(-o*r+s)),d=u>0?-r:Math.min(Math.max(-r,-a),r),h=-u*u+d*(d+2*a)+c):d<=p?(u=0,d=Math.min(Math.max(-r,-a),r),h=d*(d+2*a)+c):(u=Math.max(0,-(o*r+s)),d=u>0?r:Math.min(Math.max(-r,-a),r),h=-u*u+d*(d+2*a)+c);else d=o>0?-r:r,u=Math.max(0,-(o*d+s)),h=-u*u+d*(d+2*a)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(Ru).addScaledVector(Mu,d),h}intersectSphere(e,t){Tu.subVectors(e.center,this.origin);const n=Tu.dot(this.direction),i=Tu.dot(Tu)-n*n,r=e.radius*e.radius;if(i>r)return null;const o=Math.sqrt(r-i),s=n-o,a=n+o;return a<0?null:s<0?this.at(a,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,o,s,a;const c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,d=this.origin;return c>=0?(n=(e.min.x-d.x)*c,i=(e.max.x-d.x)*c):(n=(e.max.x-d.x)*c,i=(e.min.x-d.x)*c),l>=0?(r=(e.min.y-d.y)*l,o=(e.max.y-d.y)*l):(r=(e.max.y-d.y)*l,o=(e.min.y-d.y)*l),n>o||r>i?null:((r>n||isNaN(n))&&(n=r),(o<i||isNaN(i))&&(i=o),u>=0?(s=(e.min.z-d.z)*u,a=(e.max.z-d.z)*u):(s=(e.max.z-d.z)*u,a=(e.min.z-d.z)*u),n>a||s>i?null:((s>n||n!==n)&&(n=s),(a<i||i!==i)&&(i=a),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,Tu)}intersectTriangle(e,t,n,i,r){Iu.subVectors(t,e),ku.subVectors(n,e),Ou.crossVectors(Iu,ku);let o,s=this.direction.dot(Ou);if(s>0){if(i)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}Au.subVectors(this.origin,e);const a=o*this.direction.dot(ku.crossVectors(Au,ku));if(a<0)return null;const c=o*this.direction.dot(Iu.cross(Au));if(c<0)return null;if(a+c>s)return null;const l=-o*Au.dot(Ou);return l<0?null:this.at(l/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Lu{constructor(e,t,n,i,r,o,s,a,c,l,u,d,h,p,f,v){Lu.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,o,s,a,c,l,u,d,h,p,f,v)}set(e,t,n,i,r,o,s,a,c,l,u,d,h,p,f,v){const m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=i,m[1]=r,m[5]=o,m[9]=s,m[13]=a,m[2]=c,m[6]=l,m[10]=u,m[14]=d,m[3]=h,m[7]=p,m[11]=f,m[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Lu).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Nu.setFromMatrixColumn(e,0).length(),r=1/Nu.setFromMatrixColumn(e,1).length(),o=1/Nu.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(i),c=Math.sin(i),l=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=o*l,n=o*u,i=s*l,r=s*u;t[0]=a*l,t[4]=-a*u,t[8]=c,t[1]=n+i*c,t[5]=e-r*c,t[9]=-s*a,t[2]=r-e*c,t[6]=i+n*c,t[10]=o*a}else if("YXZ"===e.order){const e=a*l,n=a*u,i=c*l,r=c*u;t[0]=e+r*s,t[4]=i*s-n,t[8]=o*c,t[1]=o*u,t[5]=o*l,t[9]=-s,t[2]=n*s-i,t[6]=r+e*s,t[10]=o*a}else if("ZXY"===e.order){const e=a*l,n=a*u,i=c*l,r=c*u;t[0]=e-r*s,t[4]=-o*u,t[8]=i+n*s,t[1]=n+i*s,t[5]=o*l,t[9]=r-e*s,t[2]=-o*c,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){const e=o*l,n=o*u,i=s*l,r=s*u;t[0]=a*l,t[4]=i*c-n,t[8]=e*c+r,t[1]=a*u,t[5]=r*c+e,t[9]=n*c-i,t[2]=-c,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){const e=o*a,n=o*c,i=s*a,r=s*c;t[0]=a*l,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=o*l,t[9]=-s*l,t[2]=-c*l,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=o*a,n=o*c,i=s*a,r=s*c;t[0]=a*l,t[4]=-u,t[8]=c*l,t[1]=e*u+r,t[5]=o*l,t[9]=n*u-i,t[2]=i*u-n,t[6]=s*l,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Fu,e,Uu)}lookAt(e,t,n){const i=this.elements;return Vu.subVectors(e,t),0===Vu.lengthSq()&&(Vu.z=1),Vu.normalize(),Bu.crossVectors(n,Vu),0===Bu.lengthSq()&&(1===Math.abs(n.z)?Vu.x+=1e-4:Vu.z+=1e-4,Vu.normalize(),Bu.crossVectors(n,Vu)),Bu.normalize(),ju.crossVectors(Vu,Bu),i[0]=Bu.x,i[4]=ju.x,i[8]=Vu.x,i[1]=Bu.y,i[5]=ju.y,i[9]=Vu.y,i[2]=Bu.z,i[6]=ju.z,i[10]=Vu.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[4],a=n[8],c=n[12],l=n[1],u=n[5],d=n[9],h=n[13],p=n[2],f=n[6],v=n[10],m=n[14],g=n[3],y=n[7],S=n[11],b=n[15],_=i[0],w=i[4],x=i[8],C=i[12],E=i[1],P=i[5],T=i[9],R=i[13],M=i[2],A=i[6],I=i[10],k=i[14],O=i[3],D=i[7],L=i[11],N=i[15];return r[0]=o*_+s*E+a*M+c*O,r[4]=o*w+s*P+a*A+c*D,r[8]=o*x+s*T+a*I+c*L,r[12]=o*C+s*R+a*k+c*N,r[1]=l*_+u*E+d*M+h*O,r[5]=l*w+u*P+d*A+h*D,r[9]=l*x+u*T+d*I+h*L,r[13]=l*C+u*R+d*k+h*N,r[2]=p*_+f*E+v*M+m*O,r[6]=p*w+f*P+v*A+m*D,r[10]=p*x+f*T+v*I+m*L,r[14]=p*C+f*R+v*k+m*N,r[3]=g*_+y*E+S*M+b*O,r[7]=g*w+y*P+S*A+b*D,r[11]=g*x+y*T+S*I+b*L,r[15]=g*C+y*R+S*k+b*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],s=e[5],a=e[9],c=e[13],l=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+r*a*u-i*c*u-r*s*d+n*c*d+i*s*h-n*a*h)+e[7]*(+t*a*h-t*c*d+r*o*d-i*o*h+i*c*l-r*a*l)+e[11]*(+t*c*u-t*s*h-r*o*u+n*o*h+r*s*l-n*c*l)+e[15]*(-i*s*l-t*a*u+t*s*d+i*o*u-n*o*d+n*a*l)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],c=e[7],l=e[8],u=e[9],d=e[10],h=e[11],p=e[12],f=e[13],v=e[14],m=e[15],g=u*v*c-f*d*c+f*a*h-s*v*h-u*a*m+s*d*m,y=p*d*c-l*v*c-p*a*h+o*v*h+l*a*m-o*d*m,S=l*f*c-p*u*c+p*s*h-o*f*h-l*s*m+o*u*m,b=p*u*a-l*f*a-p*s*d+o*f*d+l*s*v-o*u*v,_=t*g+n*y+i*S+r*b;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=g*w,e[1]=(f*d*r-u*v*r-f*i*h+n*v*h+u*i*m-n*d*m)*w,e[2]=(s*v*r-f*a*r+f*i*c-n*v*c-s*i*m+n*a*m)*w,e[3]=(u*a*r-s*d*r-u*i*c+n*d*c+s*i*h-n*a*h)*w,e[4]=y*w,e[5]=(l*v*r-p*d*r+p*i*h-t*v*h-l*i*m+t*d*m)*w,e[6]=(p*a*r-o*v*r-p*i*c+t*v*c+o*i*m-t*a*m)*w,e[7]=(o*d*r-l*a*r+l*i*c-t*d*c-o*i*h+t*a*h)*w,e[8]=S*w,e[9]=(p*u*r-l*f*r-p*n*h+t*f*h+l*n*m-t*u*m)*w,e[10]=(o*f*r-p*s*r+p*n*c-t*f*c-o*n*m+t*s*m)*w,e[11]=(l*s*r-o*u*r-l*n*c+t*u*c+o*n*h-t*s*h)*w,e[12]=b*w,e[13]=(l*f*i-p*u*i+p*n*d-t*f*d-l*n*v+t*u*v)*w,e[14]=(p*s*i-o*f*i-p*n*a+t*f*a+o*n*v-t*s*v)*w,e[15]=(o*u*i-l*s*i+l*n*a-t*u*a-o*n*d+t*s*d)*w,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,s=e.y,a=e.z,c=r*o,l=r*s;return this.set(c*o+n,c*s-i*a,c*a+i*s,0,c*s+i*a,l*s+n,l*a-i*o,0,c*a-i*s,l*a+i*o,r*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,o){return this.set(1,n,r,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,o=t._y,s=t._z,a=t._w,c=r+r,l=o+o,u=s+s,d=r*c,h=r*l,p=r*u,f=o*l,v=o*u,m=s*u,g=a*c,y=a*l,S=a*u,b=n.x,_=n.y,w=n.z;return i[0]=(1-(f+m))*b,i[1]=(h+S)*b,i[2]=(p-y)*b,i[3]=0,i[4]=(h-S)*_,i[5]=(1-(d+m))*_,i[6]=(v+g)*_,i[7]=0,i[8]=(p+y)*w,i[9]=(v-g)*w,i[10]=(1-(d+f))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=Nu.set(i[0],i[1],i[2]).length();const o=Nu.set(i[4],i[5],i[6]).length(),s=Nu.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],zu.copy(this);const a=1/r,c=1/o,l=1/s;return zu.elements[0]*=a,zu.elements[1]*=a,zu.elements[2]*=a,zu.elements[4]*=c,zu.elements[5]*=c,zu.elements[6]*=c,zu.elements[8]*=l,zu.elements[9]*=l,zu.elements[10]*=l,t.setFromRotationMatrix(zu),n.x=r,n.y=o,n.z=s,this}makePerspective(e,t,n,i,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vl;const a=this.elements,c=2*r/(t-e),l=2*r/(n-i),u=(t+e)/(t-e),d=(n+i)/(n-i);let h,p;if(s===vl)h=-(o+r)/(o-r),p=-2*o*r/(o-r);else{if(s!==ml)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);h=-o/(o-r),p=-o*r/(o-r)}return a[0]=c,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,i,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vl;const a=this.elements,c=1/(t-e),l=1/(n-i),u=1/(o-r),d=(t+e)*c,h=(n+i)*l;let p,f;if(s===vl)p=(o+r)*u,f=-2*u;else{if(s!==ml)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);p=r*u,f=-1*u}return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=f,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Nu=new ou,zu=new Lu,Fu=new ou(0,0,0),Uu=new ou(1,1,1),Bu=new ou,ju=new ou,Vu=new ou,Hu=new Lu,Wu=new ru;class Gu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gu.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=e.elements,r=i[0],o=i[4],s=i[8],a=i[1],c=i[5],l=i[9],u=i[2],d=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(xl(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,h),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-xl(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(a,c)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(xl(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-xl(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(xl(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-xl(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-l,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Hu.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Hu,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return Wu.setFromEuler(this),this.setFromQuaternion(Wu,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Gu.DEFAULT_ORDER="XYZ";class qu{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let Xu=0;const Ku=new ou,Ju=new ru,Yu=new Lu,$u=new ou,Qu=new ou,Zu=new ou,ed=new ru,td=new ou(1,0,0),nd=new ou(0,1,0),id=new ou(0,0,1),rd={type:"added"},od={type:"removed"},sd={type:"childadded",child:null},ad={type:"childremoved",child:null};class cd extends gl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Xu++}),this.uuid=wl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=cd.DEFAULT_UP.clone();const e=new ou,t=new Gu,n=new ru,i=new ou(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Lu},normalMatrix:{value:new kl}}),this.matrix=new Lu,this.matrixWorld=new Lu,this.matrixAutoUpdate=cd.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=cd.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new qu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ju.setFromAxisAngle(e,t),this.quaternion.multiply(Ju),this}rotateOnWorldAxis(e,t){return Ju.setFromAxisAngle(e,t),this.quaternion.premultiply(Ju),this}rotateX(e){return this.rotateOnAxis(td,e)}rotateY(e){return this.rotateOnAxis(nd,e)}rotateZ(e){return this.rotateOnAxis(id,e)}translateOnAxis(e,t){return Ku.copy(e).applyQuaternion(this.quaternion),this.position.add(Ku.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(td,e)}translateY(e){return this.translateOnAxis(nd,e)}translateZ(e){return this.translateOnAxis(id,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Yu.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?$u.copy(e):$u.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Qu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Yu.lookAt(Qu,$u,this.up):Yu.lookAt($u,Qu,this.up),this.quaternion.setFromRotationMatrix(Yu),i&&(Yu.extractRotation(i.matrixWorld),Ju.setFromRotationMatrix(Yu),this.quaternion.premultiply(Ju.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(rd),sd.child=e,this.dispatchEvent(sd),sd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(od),ad.child=e,this.dispatchEvent(ad),ad.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Yu.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Yu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Yu),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qu,e,Zu),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qu,ed,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map((e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}))),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),null!==this.boundingSphere&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),null!==this.boundingBox&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=o(e.geometries),i=o(e.materials),r=o(e.textures),s=o(e.images),a=o(e.shapes),c=o(e.skeletons),l=o(e.animations),u=o(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),s.length>0&&(n.images=s),a.length>0&&(n.shapes=a),c.length>0&&(n.skeletons=c),l.length>0&&(n.animations=l),u.length>0&&(n.nodes=u)}return n.object=i,n;function o(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}cd.DEFAULT_UP=new ou(0,1,0),cd.DEFAULT_MATRIX_AUTO_UPDATE=!0,cd.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ld=new ou,ud=new ou,dd=new ou,hd=new ou,pd=new ou,fd=new ou,vd=new ou,md=new ou,gd=new ou,yd=new ou;class Sd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ou,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ou,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ou;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),ld.subVectors(e,t),i.cross(ld);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){ld.subVectors(i,t),ud.subVectors(n,t),dd.subVectors(e,t);const o=ld.dot(ld),s=ld.dot(ud),a=ld.dot(dd),c=ud.dot(ud),l=ud.dot(dd),u=o*c-s*s;if(0===u)return r.set(0,0,0),null;const d=1/u,h=(c*a-s*l)*d,p=(o*l-s*a)*d;return r.set(1-h-p,p,h)}static containsPoint(e,t,n,i){return null!==this.getBarycoord(e,t,n,i,hd)&&(hd.x>=0&&hd.y>=0&&hd.x+hd.y<=1)}static getInterpolation(e,t,n,i,r,o,s,a){return null===this.getBarycoord(e,t,n,i,hd)?(a.x=0,a.y=0,"z"in a&&(a.z=0),"w"in a&&(a.w=0),null):(a.setScalar(0),a.addScaledVector(r,hd.x),a.addScaledVector(o,hd.y),a.addScaledVector(s,hd.z),a)}static isFrontFacing(e,t,n,i){return ld.subVectors(n,t),ud.subVectors(e,t),ld.cross(ud).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ld.subVectors(this.c,this.b),ud.subVectors(this.a,this.b),.5*ld.cross(ud).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Sd.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Sd.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,r){return Sd.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return Sd.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Sd.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let o,s;pd.subVectors(i,n),fd.subVectors(r,n),md.subVectors(e,n);const a=pd.dot(md),c=fd.dot(md);if(a<=0&&c<=0)return t.copy(n);gd.subVectors(e,i);const l=pd.dot(gd),u=fd.dot(gd);if(l>=0&&u<=l)return t.copy(i);const d=a*u-l*c;if(d<=0&&a>=0&&l<=0)return o=a/(a-l),t.copy(n).addScaledVector(pd,o);yd.subVectors(e,r);const h=pd.dot(yd),p=fd.dot(yd);if(p>=0&&h<=p)return t.copy(r);const f=h*c-a*p;if(f<=0&&c>=0&&p<=0)return s=c/(c-p),t.copy(n).addScaledVector(fd,s);const v=l*p-h*u;if(v<=0&&u-l>=0&&h-p>=0)return vd.subVectors(r,i),s=(u-l)/(u-l+(h-p)),t.copy(i).addScaledVector(vd,s);const m=1/(v+f+d);return o=f*m,s=d*m,t.copy(n).addScaledVector(pd,o).addScaledVector(fd,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const bd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_d={h:0,s:0,l:0},wd={h:0,s:0,l:0};function xd(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class Cd{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:il;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Hl.toWorkingColorSpace(this,t),this}setRGB(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hl.workingColorSpace;return this.r=e,this.g=t,this.b=n,Hl.toWorkingColorSpace(this,i),this}setHSL(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hl.workingColorSpace;if(e=Cl(e,1),t=xl(t,0,1),n=xl(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=xd(r,i,e+1/3),this.g=xd(r,i,e),this.b=xd(r,i,e-1/3)}return Hl.toWorkingColorSpace(this,i),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:il;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=t[1],s=t[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,n);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,n);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=t[1],r=i.length;if(3===r)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,n);if(6===r)return this.setHex(parseInt(i,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:il;const n=bd[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Wl(e.r),this.g=Wl(e.g),this.b=Wl(e.b),this}copyLinearToSRGB(e){return this.r=Gl(e.r),this.g=Gl(e.g),this.b=Gl(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:il;return Hl.fromWorkingColorSpace(Ed.copy(this),e),65536*Math.round(xl(255*Ed.r,0,255))+256*Math.round(xl(255*Ed.g,0,255))+Math.round(xl(255*Ed.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:il;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hl.workingColorSpace;Hl.fromWorkingColorSpace(Ed.copy(this),t);const n=Ed.r,i=Ed.g,r=Ed.b,o=Math.max(n,i,r),s=Math.min(n,i,r);let a,c;const l=(s+o)/2;if(s===o)a=0,c=0;else{const e=o-s;switch(c=l<=.5?e/(o+s):e/(2-o-s),o){case n:a=(i-r)/e+(i<r?6:0);break;case i:a=(r-n)/e+2;break;case r:a=(n-i)/e+4}a/=6}return e.h=a,e.s=c,e.l=l,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hl.workingColorSpace;return Hl.fromWorkingColorSpace(Ed.copy(this),t),e.r=Ed.r,e.g=Ed.g,e.b=Ed.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:il;Hl.fromWorkingColorSpace(Ed.copy(this),e);const t=Ed.r,n=Ed.g,i=Ed.b;return e!==il?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(i.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*i),")")}offsetHSL(e,t,n){return this.getHSL(_d),this.setHSL(_d.h+e,_d.s+t,_d.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(_d),e.getHSL(wd);const n=El(_d.h,wd.h,t),i=El(_d.s,wd.s,t),r=El(_d.l,wd.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ed=new Cd;Cd.NAMES=bd;let Pd=0;class Td extends gl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Pd++}),this.uuid=wl(),this.name="",this.type="Material",this.blending=1,this.side=sc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=cc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Cd(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=dl,this.stencilZFail=dl,this.stencilZPass=dl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."));continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),this.side!==sc&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),this.blendEquation!==cc&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==dl&&(n.stencilFail=this.stencilFail),this.stencilZFail!==dl&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==dl&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Rd extends Td{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Cd(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Gu,this.combine=lc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Md=new ou,Ad=new Il;class Id{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=hl,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Fc,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return Fl("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Ad.fromBufferAttribute(this,t),Ad.applyMatrix3(e),this.setXY(t,Ad.x,Ad.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Md.fromBufferAttribute(this,t),Md.applyMatrix3(e),this.setXYZ(t,Md.x,Md.y,Md.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Md.fromBufferAttribute(this,t),Md.applyMatrix4(e),this.setXYZ(t,Md.x,Md.y,Md.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Md.fromBufferAttribute(this,t),Md.applyNormalMatrix(e),this.setXYZ(t,Md.x,Md.y,Md.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Md.fromBufferAttribute(this,t),Md.transformDirection(e),this.setXYZ(t,Md.x,Md.y,Md.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Rl(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Ml(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Rl(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ml(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Rl(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ml(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Rl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ml(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Rl(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ml(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Ml(t,this.array),n=Ml(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Ml(t,this.array),n=Ml(n,this.array),i=Ml(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=Ml(t,this.array),n=Ml(n,this.array),i=Ml(i,this.array),r=Ml(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==hl&&(e.usage=this.usage),e}}class kd extends Id{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Od extends Id{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Dd extends Id{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Ld=0;const Nd=new Lu,zd=new cd,Fd=new ou,Ud=new cu,Bd=new cu,jd=new ou;class Vd extends gl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ld++}),this.uuid=wl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Dl(e)?Od:kd)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new kl).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Nd.makeRotationFromQuaternion(e),this.applyMatrix4(Nd),this}rotateX(e){return Nd.makeRotationX(e),this.applyMatrix4(Nd),this}rotateY(e){return Nd.makeRotationY(e),this.applyMatrix4(Nd),this}rotateZ(e){return Nd.makeRotationZ(e),this.applyMatrix4(Nd),this}translate(e,t,n){return Nd.makeTranslation(e,t,n),this.applyMatrix4(Nd),this}scale(e,t,n){return Nd.makeScale(e,t,n),this.applyMatrix4(Nd),this}lookAt(e){return zd.lookAt(e),zd.updateMatrix(),this.applyMatrix4(zd.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Fd).negate(),this.translate(Fd.x,Fd.y,Fd.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Dd(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new cu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new ou(-1/0,-1/0,-1/0),new ou(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const e=t[n];Ud.setFromBufferAttribute(e),this.morphTargetsRelative?(jd.addVectors(this.boundingBox.min,Ud.min),this.boundingBox.expandByPoint(jd),jd.addVectors(this.boundingBox.max,Ud.max),this.boundingBox.expandByPoint(jd)):(this.boundingBox.expandByPoint(Ud.min),this.boundingBox.expandByPoint(Ud.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Pu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new ou,1/0);if(e){const n=this.boundingSphere.center;if(Ud.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){const n=t[e];Bd.setFromBufferAttribute(n),this.morphTargetsRelative?(jd.addVectors(Ud.min,Bd.min),Ud.expandByPoint(jd),jd.addVectors(Ud.max,Bd.max),Ud.expandByPoint(jd)):(Ud.expandByPoint(Bd.min),Ud.expandByPoint(Bd.max))}Ud.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)jd.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(jd));if(t)for(let r=0,o=t.length;r<o;r++){const o=t[r],s=this.morphTargetsRelative;for(let t=0,r=o.count;t<r;t++)jd.fromBufferAttribute(o,t),s&&(Fd.fromBufferAttribute(e,t),jd.add(Fd)),i=Math.max(i,n.distanceToSquared(jd))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,i=t.normal,r=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Id(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),s=[],a=[];for(let x=0;x<n.count;x++)s[x]=new ou,a[x]=new ou;const c=new ou,l=new ou,u=new ou,d=new Il,h=new Il,p=new Il,f=new ou,v=new ou;function m(e,t,i){c.fromBufferAttribute(n,e),l.fromBufferAttribute(n,t),u.fromBufferAttribute(n,i),d.fromBufferAttribute(r,e),h.fromBufferAttribute(r,t),p.fromBufferAttribute(r,i),l.sub(c),u.sub(c),h.sub(d),p.sub(d);const o=1/(h.x*p.y-p.x*h.y);isFinite(o)&&(f.copy(l).multiplyScalar(p.y).addScaledVector(u,-h.y).multiplyScalar(o),v.copy(u).multiplyScalar(h.x).addScaledVector(l,-p.x).multiplyScalar(o),s[e].add(f),s[t].add(f),s[i].add(f),a[e].add(v),a[t].add(v),a[i].add(v))}let g=this.groups;0===g.length&&(g=[{start:0,count:e.count}]);for(let x=0,C=g.length;x<C;++x){const t=g[x],n=t.start;for(let i=n,r=n+t.count;i<r;i+=3)m(e.getX(i+0),e.getX(i+1),e.getX(i+2))}const y=new ou,S=new ou,b=new ou,_=new ou;function w(e){b.fromBufferAttribute(i,e),_.copy(b);const t=s[e];y.copy(t),y.sub(b.multiplyScalar(b.dot(t))).normalize(),S.crossVectors(_,t);const n=S.dot(a[e])<0?-1:1;o.setXYZW(e,y.x,y.y,y.z,n)}for(let x=0,C=g.length;x<C;++x){const t=g[x],n=t.start;for(let i=n,r=n+t.count;i<r;i+=3)w(e.getX(i+0)),w(e.getX(i+1)),w(e.getX(i+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Id(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new ou,r=new ou,o=new ou,s=new ou,a=new ou,c=new ou,l=new ou,u=new ou;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),p=e.getX(d+1),f=e.getX(d+2);i.fromBufferAttribute(t,h),r.fromBufferAttribute(t,p),o.fromBufferAttribute(t,f),l.subVectors(o,r),u.subVectors(i,r),l.cross(u),s.fromBufferAttribute(n,h),a.fromBufferAttribute(n,p),c.fromBufferAttribute(n,f),s.add(l),a.add(l),c.add(l),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(f,c.x,c.y,c.z)}else for(let e=0,d=t.count;e<d;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),l.subVectors(o,r),u.subVectors(i,r),l.cross(u),n.setXYZ(e+0,l.x,l.y,l.z),n.setXYZ(e+1,l.x,l.y,l.z),n.setXYZ(e+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)jd.fromBufferAttribute(e,t),jd.normalize(),e.setXYZ(t,jd.x,jd.y,jd.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,o=new n.constructor(t.length*i);let s=0,a=0;for(let c=0,l=t.length;c<l;c++){s=e.isInterleavedBufferAttribute?t[c]*e.data.stride+e.offset:t[c]*i;for(let e=0;e<i;e++)o[a++]=n[s++]}return new Id(o,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Vd,n=this.index.array,i=this.attributes;for(const s in i){const r=e(i[s],n);t.setAttribute(s,r)}const r=this.morphAttributes;for(const s in r){const i=[],o=r[s];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],n);i.push(r)}t.morphAttributes[s]=i}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,a=o.length;s<a;s++){const e=o[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const a in n){const t=n[a];e.data.attributes[a]=t.toJSON(e.data)}const i={};let r=!1;for(const a in this.morphAttributes){const t=this.morphAttributes[a],n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];n.push(r.toJSON(e.data))}n.length>0&&(i[a]=n,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const c in i){const e=i[c];this.setAttribute(c,e.clone(t))}const r=e.morphAttributes;for(const c in r){const e=[],n=r[c];for(let i=0,r=n.length;i<r;i++)e.push(n[i].clone(t));this.morphAttributes[c]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,l=o.length;c<l;c++){const e=o[c];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Hd=new Lu,Wd=new Du,Gd=new Pu,qd=new ou,Xd=new ou,Kd=new ou,Jd=new ou,Yd=new ou,$d=new ou,Qd=new Il,Zd=new Il,eh=new Il,th=new ou,nh=new ou,ih=new ou,rh=new ou,oh=new ou;class sh extends cd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vd,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rd;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(r&&s){$d.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=s[n],a=r[n];0!==i&&(Yd.fromBufferAttribute(a,e),o?$d.addScaledVector(Yd,i):$d.addScaledVector(Yd.sub(t),i))}t.add($d)}return t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),Gd.copy(n.boundingSphere),Gd.applyMatrix4(r),Wd.copy(e.ray).recast(e.near),!1===Gd.containsPoint(Wd.origin)){if(null===Wd.intersectSphere(Gd,qd))return;if(Wd.origin.distanceToSquared(qd)>(e.far-e.near)**2)return}Hd.copy(r).invert(),Wd.copy(e.ray).applyMatrix4(Hd),null!==n.boundingBox&&!1===Wd.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,Wd)}}_computeIntersections(e,t,n){let i;const r=this.geometry,o=this.material,s=r.index,a=r.attributes.position,c=r.attributes.uv,l=r.attributes.uv1,u=r.attributes.normal,d=r.groups,h=r.drawRange;if(null!==s)if(Array.isArray(o))for(let p=0,f=d.length;p<f;p++){const r=d[p],a=o[r.materialIndex];for(let o=Math.max(r.start,h.start),d=Math.min(s.count,Math.min(r.start+r.count,h.start+h.count));o<d;o+=3){i=ah(this,a,e,n,c,l,u,s.getX(o),s.getX(o+1),s.getX(o+2)),i&&(i.faceIndex=Math.floor(o/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,h.start),a=Math.min(s.count,h.start+h.count);r<a;r+=3){i=ah(this,o,e,n,c,l,u,s.getX(r),s.getX(r+1),s.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}else if(void 0!==a)if(Array.isArray(o))for(let p=0,f=d.length;p<f;p++){const r=d[p],s=o[r.materialIndex];for(let o=Math.max(r.start,h.start),d=Math.min(a.count,Math.min(r.start+r.count,h.start+h.count));o<d;o+=3){i=ah(this,s,e,n,c,l,u,o,o+1,o+2),i&&(i.faceIndex=Math.floor(o/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,h.start),s=Math.min(a.count,h.start+h.count);r<s;r+=3){i=ah(this,o,e,n,c,l,u,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}}}function ah(e,t,n,i,r,o,s,a,c,l){e.getVertexPosition(a,Xd),e.getVertexPosition(c,Kd),e.getVertexPosition(l,Jd);const u=function(e,t,n,i,r,o,s,a){let c;if(c=t.side===ac?i.intersectTriangle(s,o,r,!0,a):i.intersectTriangle(r,o,s,t.side===sc,a),null===c)return null;oh.copy(a),oh.applyMatrix4(e.matrixWorld);const l=n.ray.origin.distanceTo(oh);return l<n.near||l>n.far?null:{distance:l,point:oh.clone(),object:e}}(e,t,n,i,Xd,Kd,Jd,rh);if(u){r&&(Qd.fromBufferAttribute(r,a),Zd.fromBufferAttribute(r,c),eh.fromBufferAttribute(r,l),u.uv=Sd.getInterpolation(rh,Xd,Kd,Jd,Qd,Zd,eh,new Il)),o&&(Qd.fromBufferAttribute(o,a),Zd.fromBufferAttribute(o,c),eh.fromBufferAttribute(o,l),u.uv1=Sd.getInterpolation(rh,Xd,Kd,Jd,Qd,Zd,eh,new Il)),s&&(th.fromBufferAttribute(s,a),nh.fromBufferAttribute(s,c),ih.fromBufferAttribute(s,l),u.normal=Sd.getInterpolation(rh,Xd,Kd,Jd,th,nh,ih,new ou),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const e={a:a,b:c,c:l,normal:new ou,materialIndex:0};Sd.getNormal(Xd,Kd,Jd,e.normal),u.face=e}return u}class ch extends Vd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};const s=this;i=Math.floor(i),r=Math.floor(r),o=Math.floor(o);const a=[],c=[],l=[],u=[];let d=0,h=0;function p(e,t,n,i,r,o,p,f,v,m,g){const y=o/v,S=p/m,b=o/2,_=p/2,w=f/2,x=v+1,C=m+1;let E=0,P=0;const T=new ou;for(let s=0;s<C;s++){const o=s*S-_;for(let a=0;a<x;a++){const d=a*y-b;T[e]=d*i,T[t]=o*r,T[n]=w,c.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=f>0?1:-1,l.push(T.x,T.y,T.z),u.push(a/v),u.push(1-s/m),E+=1}}for(let s=0;s<m;s++)for(let e=0;e<v;e++){const t=d+e+x*s,n=d+e+x*(s+1),i=d+(e+1)+x*(s+1),r=d+(e+1)+x*s;a.push(t,n,r),a.push(n,i,r),P+=6}s.addGroup(h,P,g),h+=P,d+=E}p("z","y","x",-1,-1,n,t,e,o,r,0),p("z","y","x",1,-1,n,t,-e,o,r,1),p("x","z","y",1,1,e,n,t,i,o,2),p("x","z","y",1,-1,e,n,-t,i,o,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(a),this.setAttribute("position",new Dd(c,3)),this.setAttribute("normal",new Dd(l,3)),this.setAttribute("uv",new Dd(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ch(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function lh(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function uh(e){const t={};for(let n=0;n<e.length;n++){const i=lh(e[n]);for(const e in i)t[e]=i[e]}return t}function dh(e){return null===e.getRenderTarget()?e.outputColorSpace:Hl.workingColorSpace}const hh={clone:lh,merge:uh};class ph extends Td{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=lh(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class fh extends cd{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Lu,this.projectionMatrix=new Lu,this.projectionMatrixInverse=new Lu,this.coordinateSystem=vl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const vh=new ou,mh=new Il,gh=new Il;class yh extends fh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*_l*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*bl*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*_l*Math.atan(Math.tan(.5*bl*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){vh.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(vh.x,vh.y).multiplyScalar(-e/vh.z),vh.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(vh.x,vh.y).multiplyScalar(-e/vh.z)}getViewSize(e,t){return this.getViewBounds(e,mh,gh),t.subVectors(gh,mh)}setViewOffset(e,t,n,i,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*bl*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,s=o.fullHeight;r+=o.offsetX*i/e,t-=o.offsetY*n/s,i*=o.width/e,n*=o.height/s}const s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Sh=-90;class bh extends cd{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new yh(Sh,1,e,t);i.layers=this.layers,this.add(i);const r=new yh(Sh,1,e,t);r.layers=this.layers,this.add(r);const o=new yh(Sh,1,e,t);o.layers=this.layers,this.add(o);const s=new yh(Sh,1,e,t);s.layers=this.layers,this.add(s);const a=new yh(Sh,1,e,t);a.layers=this.layers,this.add(a);const c=new yh(Sh,1,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,r,o,s,a]=t;for(const c of t)this.remove(c);if(e===vl)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(e!==ml)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,s,a,c,l]=this.children,u=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,o),e.setRenderTarget(n,2,i),e.render(t,s),e.setRenderTarget(n,3,i),e.render(t,a),e.setRenderTarget(n,4,i),e.render(t,c),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,i),e.render(t,l),e.setRenderTarget(u,d,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class _h extends Ql{constructor(e,t,n,i,r,o,s,a,c,l){super(e=void 0!==e?e:[],t=void 0!==t?t:bc,n,i,r,o,s,a,c,l),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class wh extends tu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new _h(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Ic}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new ch(5,5,5),s=new ph({name:"CubemapFromEquirect",uniforms:lh(n),vertexShader:i,fragmentShader:r,side:ac,blending:0});s.uniforms.tEquirect.value=t;const a=new sh(o,s),c=t.minFilter;t.minFilter===Oc&&(t.minFilter=Ic);return new bh(1,10,this).update(e,a),t.minFilter=c,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(r)}}const xh=new ou,Ch=new ou,Eh=new kl;class Ph{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ou(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=xh.subVectors(n,t).cross(Ch.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(xh),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Eh.getNormalMatrix(e),i=this.coplanarPoint(xh).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Th=new Pu,Rh=new ou;class Mh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ph,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ph,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ph,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ph,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Ph,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Ph;this.planes=[e,t,n,i,r,o]}set(e,t,n,i,r,o){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vl;const n=this.planes,i=e.elements,r=i[0],o=i[1],s=i[2],a=i[3],c=i[4],l=i[5],u=i[6],d=i[7],h=i[8],p=i[9],f=i[10],v=i[11],m=i[12],g=i[13],y=i[14],S=i[15];if(n[0].setComponents(a-r,d-c,v-h,S-m).normalize(),n[1].setComponents(a+r,d+c,v+h,S+m).normalize(),n[2].setComponents(a+o,d+l,v+p,S+g).normalize(),n[3].setComponents(a-o,d-l,v-p,S-g).normalize(),n[4].setComponents(a-s,d-u,v-f,S-y).normalize(),t===vl)n[5].setComponents(a+s,d+u,v+f,S+y).normalize();else{if(t!==ml)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(s,u,f,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Th.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Th.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Th)}intersectsSprite(e){return Th.center.set(0,0,0),Th.radius=.7071067811865476,Th.applyMatrix4(e.matrixWorld),this.intersectsSphere(Th)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Rh.x=i.normal.x>0?e.max.x:e.min.x,Rh.y=i.normal.y>0?e.max.y:e.min.y,Rh.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Rh)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Ah(){let e=null,t=!1,n=null,i=null;function r(t,o){n(t,o),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Ih(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){const e=i.get(t);return void((!e||e.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=i.get(t);if(void 0===o)i.set(t,function(t,i){const r=t.array,o=t.usage,s=r.byteLength,a=e.createBuffer();let c;if(e.bindBuffer(i,a),e.bufferData(i,r,o),t.onUploadCallback(),r instanceof Float32Array)c=e.FLOAT;else if(r instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");c=e.HALF_FLOAT}else c=e.UNSIGNED_SHORT;else if(r instanceof Int16Array)c=e.SHORT;else if(r instanceof Uint32Array)c=e.UNSIGNED_INT;else if(r instanceof Int32Array)c=e.INT;else if(r instanceof Int8Array)c=e.BYTE;else if(r instanceof Uint8Array)c=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);c=e.UNSIGNED_BYTE}return{buffer:a,type:c,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version,size:s}}(t,r));else if(o.version<t.version){if(o.size!==t.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,i,r){const o=i.array,s=i._updateRange,a=i.updateRanges;if(e.bindBuffer(r,t),-1===s.count&&0===a.length&&e.bufferSubData(r,0,o),0!==a.length){for(let t=0,i=a.length;t<i;t++){const i=a[t];n?e.bufferSubData(r,i.start*o.BYTES_PER_ELEMENT,o,i.start,i.count):e.bufferSubData(r,i.start*o.BYTES_PER_ELEMENT,o.subarray(i.start,i.start+i.count))}i.clearUpdateRanges()}-1!==s.count&&(n?e.bufferSubData(r,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):e.bufferSubData(r,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1),i.onUploadCallback()}(o.buffer,t,r),o.version=t.version}}}}class kh extends Vd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,o=t/2,s=Math.floor(n),a=Math.floor(i),c=s+1,l=a+1,u=e/s,d=t/a,h=[],p=[],f=[],v=[];for(let m=0;m<l;m++){const e=m*d-o;for(let t=0;t<c;t++){const n=t*u-r;p.push(n,-e,0),f.push(0,0,1),v.push(t/s),v.push(1-m/a)}}for(let m=0;m<a;m++)for(let e=0;e<s;e++){const t=e+c*m,n=e+c*(m+1),i=e+1+c*(m+1),r=e+1+c*m;h.push(t,n,r),h.push(n,i,r)}this.setIndex(h),this.setAttribute("position",new Dd(p,3)),this.setAttribute("normal",new Dd(f,3)),this.setAttribute("uv",new Dd(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kh(e.width,e.height,e.widthSegments,e.heightSegments)}}const Oh={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[MORPHTARGETS_COUNT];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t#endif\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\t#ifndef USE_INSTANCING_MORPH\n\t\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\t#endif\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tfloat startCompression = 0.8 - 0.04;\n\tfloat desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min(color.r, min(color.g, color.b));\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max(color.r, max(color.g, color.b));\n\tif (peak < startCompression) return color;\n\tfloat d = 1. - startCompression;\n\tfloat newPeak = 1. - d * d / (peak + d - startCompression);\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);\n\treturn mix(color, vec3(1, 1, 1), g);\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Dh={common:{diffuse:{value:new Cd(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new kl},alphaMap:{value:null},alphaMapTransform:{value:new kl},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new kl}},envmap:{envMap:{value:null},envMapRotation:{value:new kl},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new kl}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new kl}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new kl},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new kl},normalScale:{value:new Il(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new kl},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new kl}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new kl}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new kl}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Cd(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Cd(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new kl},alphaTest:{value:0},uvTransform:{value:new kl}},sprite:{diffuse:{value:new Cd(16777215)},opacity:{value:1},center:{value:new Il(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new kl},alphaMap:{value:null},alphaMapTransform:{value:new kl},alphaTest:{value:0}}},Lh={basic:{uniforms:uh([Dh.common,Dh.specularmap,Dh.envmap,Dh.aomap,Dh.lightmap,Dh.fog]),vertexShader:Oh.meshbasic_vert,fragmentShader:Oh.meshbasic_frag},lambert:{uniforms:uh([Dh.common,Dh.specularmap,Dh.envmap,Dh.aomap,Dh.lightmap,Dh.emissivemap,Dh.bumpmap,Dh.normalmap,Dh.displacementmap,Dh.fog,Dh.lights,{emissive:{value:new Cd(0)}}]),vertexShader:Oh.meshlambert_vert,fragmentShader:Oh.meshlambert_frag},phong:{uniforms:uh([Dh.common,Dh.specularmap,Dh.envmap,Dh.aomap,Dh.lightmap,Dh.emissivemap,Dh.bumpmap,Dh.normalmap,Dh.displacementmap,Dh.fog,Dh.lights,{emissive:{value:new Cd(0)},specular:{value:new Cd(1118481)},shininess:{value:30}}]),vertexShader:Oh.meshphong_vert,fragmentShader:Oh.meshphong_frag},standard:{uniforms:uh([Dh.common,Dh.envmap,Dh.aomap,Dh.lightmap,Dh.emissivemap,Dh.bumpmap,Dh.normalmap,Dh.displacementmap,Dh.roughnessmap,Dh.metalnessmap,Dh.fog,Dh.lights,{emissive:{value:new Cd(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Oh.meshphysical_vert,fragmentShader:Oh.meshphysical_frag},toon:{uniforms:uh([Dh.common,Dh.aomap,Dh.lightmap,Dh.emissivemap,Dh.bumpmap,Dh.normalmap,Dh.displacementmap,Dh.gradientmap,Dh.fog,Dh.lights,{emissive:{value:new Cd(0)}}]),vertexShader:Oh.meshtoon_vert,fragmentShader:Oh.meshtoon_frag},matcap:{uniforms:uh([Dh.common,Dh.bumpmap,Dh.normalmap,Dh.displacementmap,Dh.fog,{matcap:{value:null}}]),vertexShader:Oh.meshmatcap_vert,fragmentShader:Oh.meshmatcap_frag},points:{uniforms:uh([Dh.points,Dh.fog]),vertexShader:Oh.points_vert,fragmentShader:Oh.points_frag},dashed:{uniforms:uh([Dh.common,Dh.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Oh.linedashed_vert,fragmentShader:Oh.linedashed_frag},depth:{uniforms:uh([Dh.common,Dh.displacementmap]),vertexShader:Oh.depth_vert,fragmentShader:Oh.depth_frag},normal:{uniforms:uh([Dh.common,Dh.bumpmap,Dh.normalmap,Dh.displacementmap,{opacity:{value:1}}]),vertexShader:Oh.meshnormal_vert,fragmentShader:Oh.meshnormal_frag},sprite:{uniforms:uh([Dh.sprite,Dh.fog]),vertexShader:Oh.sprite_vert,fragmentShader:Oh.sprite_frag},background:{uniforms:{uvTransform:{value:new kl},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Oh.background_vert,fragmentShader:Oh.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new kl}},vertexShader:Oh.backgroundCube_vert,fragmentShader:Oh.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Oh.cube_vert,fragmentShader:Oh.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Oh.equirect_vert,fragmentShader:Oh.equirect_frag},distanceRGBA:{uniforms:uh([Dh.common,Dh.displacementmap,{referencePosition:{value:new ou},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Oh.distanceRGBA_vert,fragmentShader:Oh.distanceRGBA_frag},shadow:{uniforms:uh([Dh.lights,Dh.fog,{color:{value:new Cd(0)},opacity:{value:1}}]),vertexShader:Oh.shadow_vert,fragmentShader:Oh.shadow_frag}};Lh.physical={uniforms:uh([Lh.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new kl},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new kl},clearcoatNormalScale:{value:new Il(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new kl},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new kl},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new kl},sheen:{value:0},sheenColor:{value:new Cd(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new kl},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new kl},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new kl},transmissionSamplerSize:{value:new Il},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new kl},attenuationDistance:{value:0},attenuationColor:{value:new Cd(0)},specularColor:{value:new Cd(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new kl},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new kl},anisotropyVector:{value:new Il},anisotropyMap:{value:null},anisotropyMapTransform:{value:new kl}}]),vertexShader:Oh.meshphysical_vert,fragmentShader:Oh.meshphysical_frag};const Nh={r:0,b:0,g:0},zh=new Gu,Fh=new Lu;function Uh(e,t,n,i,r,o,s){const a=new Cd(0);let c,l,u=!0===o?0:1,d=null,h=0,p=null;function f(t,n){t.getRGB(Nh,dh(e)),i.buffers.color.setClear(Nh.r,Nh.g,Nh.b,n,s)}return{getClearColor:function(){return a},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a.set(e),u=t,f(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,f(a,u)},render:function(o,v){let m=!1,g=!0===v.isScene?v.background:null;if(g&&g.isTexture){g=(v.backgroundBlurriness>0?n:t).get(g)}null===g?f(a,u):g&&g.isColor&&(f(g,1),m=!0);const y=e.xr.getEnvironmentBlendMode();"additive"===y?i.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===y&&i.buffers.color.setClear(0,0,0,0,s),(e.autoClear||m)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),g&&(g.isCubeTexture||g.mapping===Cc)?(void 0===l&&(l=new sh(new ch(1,1,1),new ph({name:"BackgroundCubeMaterial",uniforms:lh(Lh.backgroundCube.uniforms),vertexShader:Lh.backgroundCube.vertexShader,fragmentShader:Lh.backgroundCube.fragmentShader,side:ac,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),zh.copy(v.backgroundRotation),zh.x*=-1,zh.y*=-1,zh.z*=-1,g.isCubeTexture&&!1===g.isRenderTargetTexture&&(zh.y*=-1,zh.z*=-1),l.material.uniforms.envMap.value=g,l.material.uniforms.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,l.material.uniforms.backgroundRotation.value.setFromMatrix4(Fh.makeRotationFromEuler(zh)),l.material.toneMapped=Hl.getTransfer(g.colorSpace)!==cl,d===g&&h===g.version&&p===e.toneMapping||(l.material.needsUpdate=!0,d=g,h=g.version,p=e.toneMapping),l.layers.enableAll(),o.unshift(l,l.geometry,l.material,0,0,null)):g&&g.isTexture&&(void 0===c&&(c=new sh(new kh(2,2),new ph({name:"BackgroundMaterial",uniforms:lh(Lh.background.uniforms),vertexShader:Lh.background.vertexShader,fragmentShader:Lh.background.fragmentShader,side:sc,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=g,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=Hl.getTransfer(g.colorSpace)!==cl,!0===g.matrixAutoUpdate&&g.updateMatrix(),c.material.uniforms.uvTransform.value.copy(g.matrix),d===g&&h===g.version&&p===e.toneMapping||(c.material.needsUpdate=!0,d=g,h=g.version,p=e.toneMapping),c.layers.enableAll(),o.unshift(c,c.geometry,c.material,0,0,null))}}}function Bh(e,t,n,i){const r=e.getParameter(e.MAX_VERTEX_ATTRIBS),o=i.isWebGL2?null:t.get("OES_vertex_array_object"),s=i.isWebGL2||null!==o,a={},c=p(null);let l=c,u=!1;function d(t){return i.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return i.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],i=[];for(let o=0;o<r;o++)t[o]=0,n[o]=0,i[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function f(){const e=l.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function v(e){m(e,0)}function m(n,r){const o=l.newAttributes,s=l.enabledAttributes,a=l.attributeDivisors;if(o[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),a[n]!==r){(i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),a[n]=r}}function g(){const t=l.newAttributes,n=l.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function y(t,n,i,r,o,s,a){!0===a?e.vertexAttribIPointer(t,n,i,o,s):e.vertexAttribPointer(t,n,i,r,o,s)}function S(){b(),u=!0,l!==c&&(l=c,d(l.object))}function b(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function(r,c,h,S,b){let _=!1;if(s){const t=function(t,n,r){const s=!0===r.wireframe;let c=a[t.id];void 0===c&&(c={},a[t.id]=c);let l=c[n.id];void 0===l&&(l={},c[n.id]=l);let u=l[s];void 0===u&&(u=p(i.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),l[s]=u);return u}(S,h,c);l!==t&&(l=t,d(l.object)),_=function(e,t,n,i){const r=l.attributes,o=t.attributes;let s=0;const a=n.getAttributes();for(const c in a){if(a[c].location>=0){const t=r[c];let n=o[c];if(void 0===n&&("instanceMatrix"===c&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===c&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;s++}}return l.attributesNum!==s||l.index!==i}(r,S,h,b),_&&function(e,t,n,i){const r={},o=t.attributes;let s=0;const a=n.getAttributes();for(const c in a){if(a[c].location>=0){let t=o[c];void 0===t&&("instanceMatrix"===c&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===c&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),r[c]=n,s++}}l.attributes=r,l.attributesNum=s,l.index=i}(r,S,h,b)}else{const e=!0===c.wireframe;l.geometry===S.id&&l.program===h.id&&l.wireframe===e||(l.geometry=S.id,l.program=h.id,l.wireframe=e,_=!0)}null!==b&&n.update(b,e.ELEMENT_ARRAY_BUFFER),(_||u)&&(u=!1,function(r,o,s,a){if(!1===i.isWebGL2&&(r.isInstancedMesh||a.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const c=a.attributes,l=s.getAttributes(),u=o.defaultAttributeValues;for(const t in l){const o=l[t];if(o.location>=0){let s=c[t];if(void 0===s&&("instanceMatrix"===t&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===t&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const t=s.normalized,c=s.itemSize,l=n.get(s);if(void 0===l)continue;const u=l.buffer,d=l.type,h=l.bytesPerElement,p=!0===i.isWebGL2&&(d===e.INT||d===e.UNSIGNED_INT||s.gpuType===Nc);if(s.isInterleavedBufferAttribute){const n=s.data,i=n.stride,l=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<o.locationSize;e++)m(o.location+e,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<o.locationSize;e++)v(o.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<o.locationSize;e++)y(o.location+e,c/o.locationSize,d,t,i*h,(l+c/o.locationSize*e)*h,p)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<o.locationSize;e++)m(o.location+e,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<o.locationSize;e++)v(o.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<o.locationSize;e++)y(o.location+e,c/o.locationSize,d,t,c*h,c/o.locationSize*e*h,p)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(o.location,n);break;case 3:e.vertexAttrib3fv(o.location,n);break;case 4:e.vertexAttrib4fv(o.location,n);break;default:e.vertexAttrib1fv(o.location,n)}}}}g()}(r,c,h,S),null!==b&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(b).buffer))},reset:S,resetDefaultState:b,dispose:function(){S();for(const e in a){const t=a[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete a[e]}},releaseStatesOfGeometry:function(e){if(void 0===a[e.id])return;const t=a[e.id];for(const n in t){const e=t[n];for(const t in e)h(e[t].object),delete e[t];delete t[n]}delete a[e.id]},releaseStatesOfProgram:function(e){for(const t in a){const n=a[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)h(i[e].object),delete i[e];delete n[e.id]}},initAttributes:f,enableAttribute:v,disableUnusedAttributes:g}}function jh(e,t,n,i){const r=i.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,i){e.drawArrays(o,t,i),n.update(i,o,1)},this.renderInstances=function(i,s,a){if(0===a)return;let c,l;if(r)c=e,l="drawArraysInstanced";else if(c=t.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===c)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[l](o,i,s,a),n.update(s,o,a)},this.renderMultiDraw=function(e,i,r){if(0===r)return;const s=t.get("WEBGL_multi_draw");if(null===s)for(let t=0;t<r;t++)this.render(e[t],i[t]);else{s.multiDrawArraysWEBGL(o,e,0,i,0,r);let t=0;for(let e=0;e<r;e++)t+=i[e];n.update(t,o,1)}}}function Vh(e,t,n){let i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let s=void 0!==n.precision?n.precision:"highp";const a=r(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);const c=o||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),v=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),g=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=d>0,S=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:S,floatVertexTextures:y&&S,maxSamples:o?e.getParameter(e.MAX_SAMPLES):0}}function Hh(e){const t=this;let n=null,i=0,r=!1,o=!1;const s=new Ph,a=new kl,c={value:null,needsUpdate:!1};function l(e,n,i,r){const o=null!==e?e.length:0;let l=null;if(0!==o){if(l=c.value,!0!==r||null===l){const t=i+4*o,r=n.matrixWorldInverse;a.getNormalMatrix(r),(null===l||l.length<t)&&(l=new Float32Array(t));for(let n=0,c=i;n!==o;++n,c+=4)s.copy(e[n]).applyMatrix4(r,a),s.normal.toArray(l,c),l[c+3]=s.constant}c.value=l,c.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,l}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){o=!0,l(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){n=l(e,t,0)},this.setState=function(s,a,u){const d=s.clippingPlanes,h=s.clipIntersection,p=s.clipShadows,f=e.get(s);if(!r||null===d||0===d.length||o&&!p)o?l(null):function(){c.value!==n&&(c.value=n,c.needsUpdate=i>0);t.numPlanes=i,t.numIntersection=0}();else{const e=o?0:i,t=4*e;let r=f.clippingState||null;c.value=r,r=l(d,a,t,u);for(let i=0;i!==t;++i)r[i]=n[i];f.clippingState=r,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function Wh(e){let t=new WeakMap;function n(e,t){return t===wc?e.mapping=bc:t===xc&&(e.mapping=_c),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const o=r.mapping;if(o===wc||o===xc){if(t.has(r)){return n(t.get(r).texture,r.mapping)}{const o=r.image;if(o&&o.height>0){const s=new wh(o.height);return s.fromEquirectangularTexture(e,r),t.set(r,s),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}class Gh extends fh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,o=n+e,s=i+t,a=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,o=r+e*this.view.width,s-=t*this.view.offsetY,a=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const qh=[.125,.215,.35,.446,.526,.582],Xh=20,Kh=new Gh,Jh=new Cd;let Yh=null,$h=0,Qh=0;const Zh=(1+Math.sqrt(5))/2,ep=1/Zh,tp=[new ou(1,1,1),new ou(-1,1,1),new ou(1,1,-1),new ou(-1,1,-1),new ou(0,Zh,ep),new ou(0,Zh,-ep),new ou(ep,0,Zh),new ou(-ep,0,Zh),new ou(Zh,ep,0),new ou(-Zh,ep,0)];class np{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Yh=this._renderer.getRenderTarget(),$h=this._renderer.getActiveCubeFace(),Qh=this._renderer.getActiveMipmapLevel(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=sp(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=op(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Yh,$h,Qh),e.scissorTest=!1,rp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===bc||e.mapping===_c?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Yh=this._renderer.getRenderTarget(),$h=this._renderer.getActiveCubeFace(),Qh=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ic,minFilter:Ic,generateMipmaps:!1,type:Uc,format:jc,colorSpace:rl,depthBuffer:!1},i=ip(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=ip(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],i=[];let r=e;const o=e-4+1+qh.length;for(let s=0;s<o;s++){const o=Math.pow(2,r);n.push(o);let a=1/o;s>e-4?a=qh[s-e+4-1]:0===s&&(a=0),i.push(a);const c=1/(o-2),l=-c,u=1+c,d=[l,l,u,l,u,u,l,l,u,u,l,u],h=6,p=6,f=3,v=2,m=1,g=new Float32Array(f*p*h),y=new Float32Array(v*p*h),S=new Float32Array(m*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(i,f*p*e),y.set(d,v*p*e);const r=[e,e,e,e,e,e];S.set(r,m*p*e)}const b=new Vd;b.setAttribute("position",new Id(g,f)),b.setAttribute("uv",new Id(y,v)),b.setAttribute("faceIndex",new Id(S,m)),t.push(b),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(e,t,n){const i=new Float32Array(Xh),r=new ou(0,1,0),o=new ph({name:"SphericalGaussianBlur",defines:{n:Xh,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return o}(i,e,t)}return i}_compileMaterial(e){const t=new sh(this._lodPlanes[0],e);this._renderer.compile(t,Kh)}_sceneToCubeUV(e,t,n,i){const r=new yh(90,1,t,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],a=this._renderer,c=a.autoClear,l=a.toneMapping;a.getClearColor(Jh),a.toneMapping=hc,a.autoClear=!1;const u=new Rd({name:"PMREM.Background",side:ac,depthWrite:!1,depthTest:!1}),d=new sh(new ch,u);let h=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,h=!0):(u.color.copy(Jh),h=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(r.up.set(0,o[f],0),r.lookAt(s[f],0,0)):1===t?(r.up.set(0,0,o[f]),r.lookAt(0,s[f],0)):(r.up.set(0,o[f],0),r.lookAt(0,0,s[f]));const n=this._cubeSize;rp(i,t*n,f>2?n:0,n,n),a.setRenderTarget(i),h&&a.render(d,r),a.render(e,r)}d.geometry.dispose(),d.material.dispose(),a.toneMapping=l,a.autoClear=c,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===bc||e.mapping===_c;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=sp()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=op());const r=i?this._cubemapMaterial:this._equirectMaterial,o=new sh(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const s=this._cubeSize;rp(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(o,Kh)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const t=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=tp[(i-1)%tp.length];this._blur(e,i-1,i,t,n)}t.autoClear=n}_blur(e,t,n,i,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",r),this._halfBlur(o,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,o,s){const a=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const l=new sh(this._lodPlanes[i],c),u=c.uniforms,d=this._sizeLods[n]-1,h=isFinite(r)?Math.PI/(2*d):2*Math.PI/39,p=r/h,f=isFinite(r)?1+Math.floor(3*p):Xh;f>Xh&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(Xh));const v=[];let m=0;for(let S=0;S<Xh;++S){const e=S/p,t=Math.exp(-e*e/2);v.push(t),0===S?m+=t:S<f&&(m+=2*t)}for(let S=0;S<v.length;S++)v[S]=v[S]/m;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=v,u.latitudinal.value="latitudinal"===o,s&&(u.poleAxis.value=s);const{_lodMax:g}=this;u.dTheta.value=h,u.mipInt.value=g-n;const y=this._sizeLods[i];rp(t,3*y*(i>g-4?i-g+4:0),4*(this._cubeSize-y),3*y,2*y),a.setRenderTarget(t),a.render(l,Kh)}}function ip(e,t,n){const i=new tu(e,t,n);return i.texture.mapping=Cc,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function rp(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function op(){return new ph({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function sp(){return new ph({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function ap(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const o=r.mapping,s=o===wc||o===xc,a=o===bc||o===_c;if(s||a){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=t.get(r);return null===n&&(n=new np(e)),i=s?n.fromEquirectangular(r,i):n.fromCubemap(r,i),t.set(r,i),i.texture}if(t.has(r))return t.get(r).texture;{const o=r.image;if(s&&o&&o.height>0||a&&o&&function(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(o)){null===n&&(n=new np(e));const o=s?n.fromEquirectangular(r):n.fromCubemap(r);return t.set(r,o),r.addEventListener("dispose",i),o.texture}return null}}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function cp(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function lp(e,t,n,i){const r={},o=new WeakMap;function s(e){const a=e.target;null!==a.index&&t.remove(a.index);for(const n in a.attributes)t.remove(a.attributes[n]);for(const n in a.morphAttributes){const e=a.morphAttributes[n];for(let n=0,i=e.length;n<i;n++)t.remove(e[n])}a.removeEventListener("dispose",s),delete r[a.id];const c=o.get(a);c&&(t.remove(c),o.delete(a)),i.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(e){const n=[],i=e.index,r=e.attributes.position;let s=0;if(null!==i){const e=i.array;s=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],o=e[t+2];n.push(i,r,r,o,o,i)}}else{if(void 0===r)return;{const e=r.array;s=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}}const a=new(Dl(n)?Od:kd)(n,1);a.version=s;const c=o.get(e);c&&t.remove(c),o.set(e,a)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",s),r[t.id]=!0,n.memory.geometries++),t},update:function(n){const i=n.attributes;for(const o in i)t.update(i[o],e.ARRAY_BUFFER);const r=n.morphAttributes;for(const o in r){const n=r[o];for(let i=0,r=n.length;i<r;i++)t.update(n[i],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return o.get(e)}}}function up(e,t,n,i){const r=i.isWebGL2;let o,s,a;this.setMode=function(e){o=e},this.setIndex=function(e){s=e.type,a=e.bytesPerElement},this.render=function(t,i){e.drawElements(o,i,s,t*a),n.update(i,o,1)},this.renderInstances=function(i,c,l){if(0===l)return;let u,d;if(r)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](o,c,s,i*a,l),n.update(c,o,l)},this.renderMultiDraw=function(e,i,r){if(0===r)return;const c=t.get("WEBGL_multi_draw");if(null===c)for(let t=0;t<r;t++)this.render(e[t]/a,i[t]);else{c.multiDrawElementsWEBGL(o,i,0,s,e,0,r);let t=0;for(let e=0;e<r;e++)t+=i[e];n.update(t,o,1)}}}function dp(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function hp(e,t){return e[0]-t[0]}function pp(e,t){return Math.abs(t[1])-Math.abs(e[1])}function fp(e,t,n){const i={},r=new Float32Array(8),o=new WeakMap,s=new Zl,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function(c,l,u){const d=c.morphTargetInfluences;if(!0===t.isWebGL2){const h=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,p=void 0!==h?h.length:0;let f=o.get(l);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();const v=void 0!==l.morphAttributes.position,m=void 0!==l.morphAttributes.normal,g=void 0!==l.morphAttributes.color,y=l.morphAttributes.position||[],S=l.morphAttributes.normal||[],b=l.morphAttributes.color||[];let _=0;!0===v&&(_=1),!0===m&&(_=2),!0===g&&(_=3);let w=l.attributes.position.count*_,x=1;w>t.maxTextureSize&&(x=Math.ceil(w/t.maxTextureSize),w=t.maxTextureSize);const C=new Float32Array(w*x*4*p),E=new nu(C,w,x,p);E.type=Fc,E.needsUpdate=!0;const P=4*_;for(let R=0;R<p;R++){const M=y[R],A=S[R],I=b[R],k=w*x*4*R;for(let O=0;O<M.count;O++){const D=O*P;!0===v&&(s.fromBufferAttribute(M,O),C[k+D+0]=s.x,C[k+D+1]=s.y,C[k+D+2]=s.z,C[k+D+3]=0),!0===m&&(s.fromBufferAttribute(A,O),C[k+D+4]=s.x,C[k+D+5]=s.y,C[k+D+6]=s.z,C[k+D+7]=0),!0===g&&(s.fromBufferAttribute(I,O),C[k+D+8]=s.x,C[k+D+9]=s.y,C[k+D+10]=s.z,C[k+D+11]=4===I.itemSize?s.w:1)}}function T(){E.dispose(),o.delete(l),l.removeEventListener("dispose",T)}f={count:p,texture:E,size:new Il(w,x)},o.set(l,f),l.addEventListener("dispose",T)}if(!0===c.isInstancedMesh&&null!==c.morphTexture)u.getUniforms().setValue(e,"morphTexture",c.morphTexture,n);else{let L=0;for(let z=0;z<d.length;z++)L+=d[z];const N=l.morphTargetsRelative?1:1-L;u.getUniforms().setValue(e,"morphTargetBaseInfluence",N),u.getUniforms().setValue(e,"morphTargetInfluences",d)}u.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{const F=void 0===d?0:d.length;let U=i[l.id];if(void 0===U||U.length!==F){U=[];for(let W=0;W<F;W++)U[W]=[W,0];i[l.id]=U}for(let G=0;G<F;G++){const q=U[G];q[0]=G,q[1]=d[G]}U.sort(pp);for(let X=0;X<8;X++)X<F&&U[X][1]?(a[X][0]=U[X][0],a[X][1]=U[X][1]):(a[X][0]=Number.MAX_SAFE_INTEGER,a[X][1]=0);a.sort(hp);const B=l.morphAttributes.position,j=l.morphAttributes.normal;let V=0;for(let K=0;K<8;K++){const J=a[K],Y=J[0],$=J[1];Y!==Number.MAX_SAFE_INTEGER&&$?(B&&l.getAttribute("morphTarget"+K)!==B[Y]&&l.setAttribute("morphTarget"+K,B[Y]),j&&l.getAttribute("morphNormal"+K)!==j[Y]&&l.setAttribute("morphNormal"+K,j[Y]),r[K]=$,V+=$):(B&&!0===l.hasAttribute("morphTarget"+K)&&l.deleteAttribute("morphTarget"+K),j&&!0===l.hasAttribute("morphNormal"+K)&&l.deleteAttribute("morphNormal"+K),r[K]=0)}const H=l.morphTargetsRelative?1:1-V;u.getUniforms().setValue(e,"morphTargetBaseInfluence",H),u.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function vp(e,t,n,i){let r=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(s){const a=i.render.frame,c=s.geometry,l=t.get(s,c);if(r.get(l)!==a&&(t.update(l),r.set(l,a)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",o)&&s.addEventListener("dispose",o),r.get(s)!==a&&(n.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,e.ARRAY_BUFFER),r.set(s,a))),s.isSkinnedMesh){const e=s.skeleton;r.get(e)!==a&&(e.update(),r.set(e,a))}return l},dispose:function(){r=new WeakMap}}}class mp extends Ql{constructor(e,t,n,i,r,o,s,a,c,l){if((l=void 0!==l?l:Vc)!==Vc&&l!==Hc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===Vc&&(n=zc),void 0===n&&l===Hc&&(n=Bc),super(null,i,r,o,s,a,l,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:Rc,this.minFilter=void 0!==a?a:Rc,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const gp=new Ql,yp=new mp(1,1);yp.compareFunction=515;const Sp=new nu,bp=new iu,_p=new _h,wp=[],xp=[],Cp=new Float32Array(16),Ep=new Float32Array(9),Pp=new Float32Array(4);function Tp(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let o=wp[r];if(void 0===o&&(o=new Float32Array(r),wp[r]=o),0!==t){i.toArray(o,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(o,r)}return o}function Rp(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Mp(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function Ap(e,t){let n=xp[t];void 0===n&&(n=new Int32Array(t),xp[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function Ip(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function kp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Rp(n,t))return;e.uniform2fv(this.addr,t),Mp(n,t)}}function Op(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Rp(n,t))return;e.uniform3fv(this.addr,t),Mp(n,t)}}function Dp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Rp(n,t))return;e.uniform4fv(this.addr,t),Mp(n,t)}}function Lp(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Rp(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Mp(n,t)}else{if(Rp(n,i))return;Pp.set(i),e.uniformMatrix2fv(this.addr,!1,Pp),Mp(n,i)}}function Np(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Rp(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Mp(n,t)}else{if(Rp(n,i))return;Ep.set(i),e.uniformMatrix3fv(this.addr,!1,Ep),Mp(n,i)}}function zp(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Rp(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Mp(n,t)}else{if(Rp(n,i))return;Cp.set(i),e.uniformMatrix4fv(this.addr,!1,Cp),Mp(n,i)}}function Fp(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Up(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Rp(n,t))return;e.uniform2iv(this.addr,t),Mp(n,t)}}function Bp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Rp(n,t))return;e.uniform3iv(this.addr,t),Mp(n,t)}}function jp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Rp(n,t))return;e.uniform4iv(this.addr,t),Mp(n,t)}}function Vp(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Hp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Rp(n,t))return;e.uniform2uiv(this.addr,t),Mp(n,t)}}function Wp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Rp(n,t))return;e.uniform3uiv(this.addr,t),Mp(n,t)}}function Gp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Rp(n,t))return;e.uniform4uiv(this.addr,t),Mp(n,t)}}function qp(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r);const o=this.type===e.SAMPLER_2D_SHADOW?yp:gp;n.setTexture2D(t||o,r)}function Xp(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||bp,r)}function Kp(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||_p,r)}function Jp(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Sp,r)}function Yp(e,t){e.uniform1fv(this.addr,t)}function $p(e,t){const n=Tp(t,this.size,2);e.uniform2fv(this.addr,n)}function Qp(e,t){const n=Tp(t,this.size,3);e.uniform3fv(this.addr,n)}function Zp(e,t){const n=Tp(t,this.size,4);e.uniform4fv(this.addr,n)}function ef(e,t){const n=Tp(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function tf(e,t){const n=Tp(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function nf(e,t){const n=Tp(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function rf(e,t){e.uniform1iv(this.addr,t)}function of(e,t){e.uniform2iv(this.addr,t)}function sf(e,t){e.uniform3iv(this.addr,t)}function af(e,t){e.uniform4iv(this.addr,t)}function cf(e,t){e.uniform1uiv(this.addr,t)}function lf(e,t){e.uniform2uiv(this.addr,t)}function uf(e,t){e.uniform3uiv(this.addr,t)}function df(e,t){e.uniform4uiv(this.addr,t)}function hf(e,t,n){const i=this.cache,r=t.length,o=Ap(n,r);Rp(i,o)||(e.uniform1iv(this.addr,o),Mp(i,o));for(let s=0;s!==r;++s)n.setTexture2D(t[s]||gp,o[s])}function pf(e,t,n){const i=this.cache,r=t.length,o=Ap(n,r);Rp(i,o)||(e.uniform1iv(this.addr,o),Mp(i,o));for(let s=0;s!==r;++s)n.setTexture3D(t[s]||bp,o[s])}function ff(e,t,n){const i=this.cache,r=t.length,o=Ap(n,r);Rp(i,o)||(e.uniform1iv(this.addr,o),Mp(i,o));for(let s=0;s!==r;++s)n.setTextureCube(t[s]||_p,o[s])}function vf(e,t,n){const i=this.cache,r=t.length,o=Ap(n,r);Rp(i,o)||(e.uniform1iv(this.addr,o),Mp(i,o));for(let s=0;s!==r;++s)n.setTexture2DArray(t[s]||Sp,o[s])}class mf{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return Ip;case 35664:return kp;case 35665:return Op;case 35666:return Dp;case 35674:return Lp;case 35675:return Np;case 35676:return zp;case 5124:case 35670:return Fp;case 35667:case 35671:return Up;case 35668:case 35672:return Bp;case 35669:case 35673:return jp;case 5125:return Vp;case 36294:return Hp;case 36295:return Wp;case 36296:return Gp;case 35678:case 36198:case 36298:case 36306:case 35682:return qp;case 35679:case 36299:case 36307:return Xp;case 35680:case 36300:case 36308:case 36293:return Kp;case 36289:case 36303:case 36311:case 36292:return Jp}}(t.type)}}class gf{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Yp;case 35664:return $p;case 35665:return Qp;case 35666:return Zp;case 35674:return ef;case 35675:return tf;case 35676:return nf;case 5124:case 35670:return rf;case 35667:case 35671:return of;case 35668:case 35672:return sf;case 35669:case 35673:return af;case 5125:return cf;case 36294:return lf;case 36295:return uf;case 36296:return df;case 35678:case 36198:case 36298:case 36306:case 35682:return hf;case 35679:case 36299:case 36307:return pf;case 35680:case 36300:case 36308:case 36293:return ff;case 36289:case 36303:case 36311:case 36292:return vf}}(t.type)}}class yf{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,o=i.length;r!==o;++r){const o=i[r];o.setValue(e,t[o.id],n)}}}const Sf=/(\w+)(\])?(\[|\.)?/g;function bf(e,t){e.seq.push(t),e.map[t.id]=t}function _f(e,t,n){const i=e.name,r=i.length;for(Sf.lastIndex=0;;){const o=Sf.exec(i),s=Sf.lastIndex;let a=o[1];const c="]"===o[2],l=o[3];if(c&&(a|=0),void 0===l||"["===l&&s+2===r){bf(n,void 0===l?new mf(a,e,t):new gf(a,e,t));break}{let e=n.map[a];void 0===e&&(e=new yf(a),bf(n,e)),n=e}}}class wf{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);_f(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,o=t.length;r!==o;++r){const o=t[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function xf(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}const Cf=37297;let Ef=0;function Pf(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const i=parseInt(o[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let s=r;s<o;s++){const e=s+1;i.push("".concat(e===t?">":" "," ").concat(e,": ").concat(n[s]))}return i.join("\n")}(e.getShaderSource(t),i)}return r}function Tf(e,t){const n=function(e){const t=Hl.getPrimaries(Hl.workingColorSpace),n=Hl.getPrimaries(e);let i;switch(t===n?i="":t===ul&&n===ll?i="LinearDisplayP3ToLinearSRGB":t===ll&&n===ul&&(i="LinearSRGBToLinearDisplayP3"),e){case rl:case sl:return[i,"LinearTransferOETF"];case il:case ol:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[i,"LinearTransferOETF"]}}(t);return"vec4 ".concat(e,"( vec4 value ) { return ").concat(n[0],"( ").concat(n[1],"( value ) ); }")}function Rf(e,t){let n;switch(t){case pc:n="Linear";break;case fc:n="Reinhard";break;case vc:n="OptimizedCineon";break;case mc:n="ACESFilmic";break;case yc:n="AgX";break;case Sc:n="Neutral";break;case gc:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Mf(e){return""!==e}function Af(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function If(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const kf=/^[ \t]*#include +<([\w\d./]+)>/gm;function Of(e){return e.replace(kf,Lf)}const Df=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Lf(e,t){let n=Oh[t];if(void 0===n){const e=Df.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=Oh[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return Of(n)}const Nf=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function zf(e){return e.replace(Nf,Ff)}function Ff(e,t,n,i){let r="";for(let o=parseInt(t);o<parseInt(n);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function Uf(e){let t="precision ".concat(e.precision," float;\n\tprecision ").concat(e.precision," int;\n\tprecision ").concat(e.precision," sampler2D;\n\tprecision ").concat(e.precision," samplerCube;\n\t");return e.isWebGL2&&(t+="precision ".concat(e.precision," sampler3D;\n\t\tprecision ").concat(e.precision," sampler2DArray;\n\t\tprecision ").concat(e.precision," sampler2DShadow;\n\t\tprecision ").concat(e.precision," samplerCubeShadow;\n\t\tprecision ").concat(e.precision," sampler2DArrayShadow;\n\t\tprecision ").concat(e.precision," isampler2D;\n\t\tprecision ").concat(e.precision," isampler3D;\n\t\tprecision ").concat(e.precision," isamplerCube;\n\t\tprecision ").concat(e.precision," isampler2DArray;\n\t\tprecision ").concat(e.precision," usampler2D;\n\t\tprecision ").concat(e.precision," usampler3D;\n\t\tprecision ").concat(e.precision," usamplerCube;\n\t\tprecision ").concat(e.precision," usampler2DArray;\n\t\t")),"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Bf(e,t,n,i){const r=e.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const c=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===ic?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===rc?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===oc&&(t="SHADOWMAP_TYPE_VSM"),t}(n),l=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case bc:case _c:t="ENVMAP_TYPE_CUBE";break;case Cc:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===_c&&(t="ENVMAP_MODE_REFRACTION");return t}(n),d=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case lc:t="ENVMAP_BLENDING_MULTIPLY";break;case uc:t="ENVMAP_BLENDING_MIX";break;case dc:t="ENVMAP_BLENDING_ADD"}return t}(n),h=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||e.alphaToCoverage||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Mf).join("\n")}(n),f=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Mf).join("\n")}(n),v=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(o),m=r.createProgram();let g,y,S=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(Mf).join("\n"),g.length>0&&(g+="\n"),y=[p,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(Mf).join("\n"),y.length>0&&(y+="\n")):(g=[Uf(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Mf).join("\n"),y=[p,Uf(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==hc?"#define TONE_MAPPING":"",n.toneMapping!==hc?Oh.tonemapping_pars_fragment:"",n.toneMapping!==hc?Rf("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Oh.colorspace_pars_fragment,Tf("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Mf).join("\n")),s=Of(s),s=Af(s,n),s=If(s,n),a=Of(a),a=Af(a,n),a=If(a,n),s=zf(s),a=zf(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(S="#version 300 es\n",g=[f,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,y=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===pl?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===pl?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const b=S+g+s,_=S+y+a,w=xf(r,r.VERTEX_SHADER,b),x=xf(r,r.FRAGMENT_SHADER,_);function C(t){if(e.debug.checkShaderErrors){const n=r.getProgramInfoLog(m).trim(),i=r.getShaderInfoLog(w).trim(),o=r.getShaderInfoLog(x).trim();let s=!0,a=!0;if(!1===r.getProgramParameter(m,r.LINK_STATUS))if(s=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(r,m,w,x);else{const e=Pf(r,w,"vertex"),i=Pf(r,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+i)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==i&&""!==o||(a=!1);a&&(t.diagnostics={runnable:s,programLog:n,vertexShader:{log:i,prefix:g},fragmentShader:{log:o,prefix:y}})}r.deleteShader(w),r.deleteShader(x),E=new wf(r,m),P=function(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),o=i.name;let s=1;i.type===e.FLOAT_MAT2&&(s=2),i.type===e.FLOAT_MAT3&&(s=3),i.type===e.FLOAT_MAT4&&(s=4),n[o]={type:i.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(r,m)}let E,P;r.attachShader(m,w),r.attachShader(m,x),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),this.getUniforms=function(){return void 0===E&&C(this),E},this.getAttributes=function(){return void 0===P&&C(this),P};let T=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===T&&(T=r.getProgramParameter(m,Cf)),T},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Ef++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=x,this}let jf=0;class Vf{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(i)&&(o.add(i),i.usedTimes++),!1===o.has(r)&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Hf(e),t.set(e,n)),n}}class Hf{constructor(e){this.id=jf++,this.code=e,this.usedTimes=0}}function Wf(e,t,n,i,r,o,s){const a=new qu,c=new Vf,l=new Set,u=[],d=r.isWebGL2,h=r.logarithmicDepthBuffer,p=r.vertexTextures;let f=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return l.add(e),0===e?"uv":"uv".concat(e)}return{getParameters:function(o,a,u,g,y){const S=g.fog,b=y.geometry,_=o.isMeshStandardMaterial?g.environment:null,w=(o.isMeshStandardMaterial?n:t).get(o.envMap||_),x=w&&w.mapping===Cc?w.image.height:null,C=v[o.type];null!==o.precision&&(f=r.getMaxPrecision(o.precision),f!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",f,"instead."));const E=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,P=void 0!==E?E.length:0;let T,R,M,A,I=0;if(void 0!==b.morphAttributes.position&&(I=1),void 0!==b.morphAttributes.normal&&(I=2),void 0!==b.morphAttributes.color&&(I=3),C){const e=Lh[C];T=e.vertexShader,R=e.fragmentShader}else T=o.vertexShader,R=o.fragmentShader,c.update(o),M=c.getVertexShaderID(o),A=c.getFragmentShaderID(o);const k=e.getRenderTarget(),O=!0===y.isInstancedMesh,D=!0===y.isBatchedMesh,L=!!o.map,N=!!o.matcap,z=!!w,F=!!o.aoMap,U=!!o.lightMap,B=!!o.bumpMap,j=!!o.normalMap,V=!!o.displacementMap,H=!!o.emissiveMap,W=!!o.metalnessMap,G=!!o.roughnessMap,q=o.anisotropy>0,X=o.clearcoat>0,K=o.iridescence>0,J=o.sheen>0,Y=o.transmission>0,$=q&&!!o.anisotropyMap,Q=X&&!!o.clearcoatMap,Z=X&&!!o.clearcoatNormalMap,ee=X&&!!o.clearcoatRoughnessMap,te=K&&!!o.iridescenceMap,ne=K&&!!o.iridescenceThicknessMap,ie=J&&!!o.sheenColorMap,re=J&&!!o.sheenRoughnessMap,oe=!!o.specularMap,se=!!o.specularColorMap,ae=!!o.specularIntensityMap,ce=Y&&!!o.transmissionMap,le=Y&&!!o.thicknessMap,ue=!!o.gradientMap,de=!!o.alphaMap,he=o.alphaTest>0,pe=!!o.alphaHash,fe=!!o.extensions;let ve=hc;o.toneMapped&&(null!==k&&!0!==k.isXRRenderTarget||(ve=e.toneMapping));const me={isWebGL2:d,shaderID:C,shaderType:o.type,shaderName:o.name,vertexShader:T,fragmentShader:R,defines:o.defines,customVertexShaderID:M,customFragmentShaderID:A,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:f,batching:D,instancing:O,instancingColor:O&&null!==y.instanceColor,instancingMorph:O&&null!==y.morphTexture,supportsVertexTextures:p,outputColorSpace:null===k?e.outputColorSpace:!0===k.isXRRenderTarget?k.texture.colorSpace:rl,alphaToCoverage:!!o.alphaToCoverage,map:L,matcap:N,envMap:z,envMapMode:z&&w.mapping,envMapCubeUVHeight:x,aoMap:F,lightMap:U,bumpMap:B,normalMap:j,displacementMap:p&&V,emissiveMap:H,normalMapObjectSpace:j&&1===o.normalMapType,normalMapTangentSpace:j&&0===o.normalMapType,metalnessMap:W,roughnessMap:G,anisotropy:q,anisotropyMap:$,clearcoat:X,clearcoatMap:Q,clearcoatNormalMap:Z,clearcoatRoughnessMap:ee,iridescence:K,iridescenceMap:te,iridescenceThicknessMap:ne,sheen:J,sheenColorMap:ie,sheenRoughnessMap:re,specularMap:oe,specularColorMap:se,specularIntensityMap:ae,transmission:Y,transmissionMap:ce,thicknessMap:le,gradientMap:ue,opaque:!1===o.transparent&&1===o.blending&&!1===o.alphaToCoverage,alphaMap:de,alphaTest:he,alphaHash:pe,combine:o.combine,mapUv:L&&m(o.map.channel),aoMapUv:F&&m(o.aoMap.channel),lightMapUv:U&&m(o.lightMap.channel),bumpMapUv:B&&m(o.bumpMap.channel),normalMapUv:j&&m(o.normalMap.channel),displacementMapUv:V&&m(o.displacementMap.channel),emissiveMapUv:H&&m(o.emissiveMap.channel),metalnessMapUv:W&&m(o.metalnessMap.channel),roughnessMapUv:G&&m(o.roughnessMap.channel),anisotropyMapUv:$&&m(o.anisotropyMap.channel),clearcoatMapUv:Q&&m(o.clearcoatMap.channel),clearcoatNormalMapUv:Z&&m(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ee&&m(o.clearcoatRoughnessMap.channel),iridescenceMapUv:te&&m(o.iridescenceMap.channel),iridescenceThicknessMapUv:ne&&m(o.iridescenceThicknessMap.channel),sheenColorMapUv:ie&&m(o.sheenColorMap.channel),sheenRoughnessMapUv:re&&m(o.sheenRoughnessMap.channel),specularMapUv:oe&&m(o.specularMap.channel),specularColorMapUv:se&&m(o.specularColorMap.channel),specularIntensityMapUv:ae&&m(o.specularIntensityMap.channel),transmissionMapUv:ce&&m(o.transmissionMap.channel),thicknessMapUv:le&&m(o.thicknessMap.channel),alphaMapUv:de&&m(o.alphaMap.channel),vertexTangents:!!b.attributes.tangent&&(j||q),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,pointsUvs:!0===y.isPoints&&!!b.attributes.uv&&(L||de),fog:!!S,useFog:!0===o.fog,fogExp2:!!S&&S.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===y.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:P,morphTextureStride:I,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numLightProbes:a.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:ve,useLegacyLights:e._useLegacyLights,decodeVideoTexture:L&&!0===o.map.isVideoTexture&&Hl.getTransfer(o.map.colorSpace)===cl,premultipliedAlpha:o.premultipliedAlpha,doubleSided:2===o.side,flipSided:o.side===ac,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:fe&&!0===o.extensions.derivatives,extensionFragDepth:fe&&!0===o.extensions.fragDepth,extensionDrawBuffers:fe&&!0===o.extensions.drawBuffers,extensionShaderTextureLOD:fe&&!0===o.extensions.shaderTextureLOD,extensionClipCullDistance:fe&&!0===o.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:fe&&!0===o.extensions.multiDraw&&i.has("WEBGL_multi_draw"),rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:o.customProgramCacheKey()};return me.vertexUv1s=l.has(1),me.vertexUv2s=l.has(2),me.vertexUv3s=l.has(3),l.clear(),me},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){a.disableAll(),t.isWebGL2&&a.enable(0);t.supportsVertexTextures&&a.enable(1);t.instancing&&a.enable(2);t.instancingColor&&a.enable(3);t.instancingMorph&&a.enable(4);t.matcap&&a.enable(5);t.envMap&&a.enable(6);t.normalMapObjectSpace&&a.enable(7);t.normalMapTangentSpace&&a.enable(8);t.clearcoat&&a.enable(9);t.iridescence&&a.enable(10);t.alphaTest&&a.enable(11);t.vertexColors&&a.enable(12);t.vertexAlphas&&a.enable(13);t.vertexUv1s&&a.enable(14);t.vertexUv2s&&a.enable(15);t.vertexUv3s&&a.enable(16);t.vertexTangents&&a.enable(17);t.anisotropy&&a.enable(18);t.alphaHash&&a.enable(19);t.batching&&a.enable(20);e.push(a.mask),a.disableAll(),t.fog&&a.enable(0);t.useFog&&a.enable(1);t.flatShading&&a.enable(2);t.logarithmicDepthBuffer&&a.enable(3);t.skinning&&a.enable(4);t.morphTargets&&a.enable(5);t.morphNormals&&a.enable(6);t.morphColors&&a.enable(7);t.premultipliedAlpha&&a.enable(8);t.shadowMapEnabled&&a.enable(9);t.useLegacyLights&&a.enable(10);t.doubleSided&&a.enable(11);t.flipSided&&a.enable(12);t.useDepthPacking&&a.enable(13);t.dithering&&a.enable(14);t.transmission&&a.enable(15);t.sheen&&a.enable(16);t.opaque&&a.enable(17);t.pointsUvs&&a.enable(18);t.decodeVideoTexture&&a.enable(19);t.alphaToCoverage&&a.enable(20);e.push(a.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=v[e.type];let n;if(t){const e=Lh[t];n=hh.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,r=u.length;e<r;e++){const t=u[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new Bf(e,n,t,o),u.push(i)),i},releaseProgram:function(e){if(0===--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){c.remove(e)},programs:u,dispose:function(){c.dispose()}}}function Gf(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function qf(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Xf(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Kf(){const e=[];let t=0;const n=[],i=[],r=[];function o(n,i,r,o,s,a){let c=e[t];return void 0===c?(c={id:n.id,object:n,geometry:i,material:r,groupOrder:o,renderOrder:n.renderOrder,z:s,group:a},e[t]=c):(c.id=n.id,c.object=n,c.geometry=i,c.material=r,c.groupOrder=o,c.renderOrder=n.renderOrder,c.z=s,c.group=a),t++,c}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,s,a,c,l){const u=o(e,t,s,a,c,l);s.transmission>0?i.push(u):!0===s.transparent?r.push(u):n.push(u)},unshift:function(e,t,s,a,c,l){const u=o(e,t,s,a,c,l);s.transmission>0?i.unshift(u):!0===s.transparent?r.unshift(u):n.unshift(u)},finish:function(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||qf),i.length>1&&i.sort(t||Xf),r.length>1&&r.sort(t||Xf)}}}function Jf(){let e=new WeakMap;return{get:function(t,n){const i=e.get(t);let r;return void 0===i?(r=new Kf,e.set(t,[r])):n>=i.length?(r=new Kf,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function Yf(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new ou,color:new Cd};break;case"SpotLight":n={position:new ou,direction:new ou,color:new Cd,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ou,color:new Cd,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ou,skyColor:new Cd,groundColor:new Cd};break;case"RectAreaLight":n={color:new Cd,position:new ou,halfWidth:new ou,halfHeight:new ou}}return e[t.id]=n,n}}}let $f=0;function Qf(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Zf(e,t){const n=new Yf,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Il};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Il,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new ou);const o=new ou,s=new Lu,a=new Lu;return{setup:function(o,s){let a=0,c=0,l=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let u=0,d=0,h=0,p=0,f=0,v=0,m=0,g=0,y=0,S=0,b=0;o.sort(Qf);const _=!0===s?Math.PI:1;for(let e=0,t=o.length;e<t;e++){const t=o[e],s=t.color,w=t.intensity,x=t.distance,C=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)a+=s.r*w*_,c+=s.g*w*_,l+=s.b*w*_;else if(t.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],w);b++}else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*_),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[u]=n,r.directionalShadowMap[u]=C,r.directionalShadowMatrix[u]=t.shadow.matrix,v++}r.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(w*_),e.distance=x,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,r.spot[h]=e;const o=t.shadow;if(t.map&&(r.spotLightMap[y]=t.map,y++,o.updateMatrices(t),t.castShadow&&S++),r.spotLightMatrix[h]=o.matrix,t.castShadow){const e=i.get(t);e.shadowBias=o.bias,e.shadowNormalBias=o.normalBias,e.shadowRadius=o.radius,e.shadowMapSize=o.mapSize,r.spotShadow[h]=e,r.spotShadowMap[h]=C,g++}h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(s).multiplyScalar(w),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*_),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[d]=n,r.pointShadowMap[d]=C,r.pointShadowMatrix[d]=t.shadow.matrix,m++}r.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(w*_),e.groundColor.copy(t.groundColor).multiplyScalar(w*_),r.hemi[f]=e,f++}}p>0&&(t.isWebGL2?!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Dh.LTC_FLOAT_1,r.rectAreaLTC2=Dh.LTC_FLOAT_2):(r.rectAreaLTC1=Dh.LTC_HALF_1,r.rectAreaLTC2=Dh.LTC_HALF_2):!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Dh.LTC_FLOAT_1,r.rectAreaLTC2=Dh.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Dh.LTC_HALF_1,r.rectAreaLTC2=Dh.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=a,r.ambient[1]=c,r.ambient[2]=l;const w=r.hash;w.directionalLength===u&&w.pointLength===d&&w.spotLength===h&&w.rectAreaLength===p&&w.hemiLength===f&&w.numDirectionalShadows===v&&w.numPointShadows===m&&w.numSpotShadows===g&&w.numSpotMaps===y&&w.numLightProbes===b||(r.directional.length=u,r.spot.length=h,r.rectArea.length=p,r.point.length=d,r.hemi.length=f,r.directionalShadow.length=v,r.directionalShadowMap.length=v,r.pointShadow.length=m,r.pointShadowMap.length=m,r.spotShadow.length=g,r.spotShadowMap.length=g,r.directionalShadowMatrix.length=v,r.pointShadowMatrix.length=m,r.spotLightMatrix.length=g+y-S,r.spotLightMap.length=y,r.numSpotLightShadowsWithMaps=S,r.numLightProbes=b,w.directionalLength=u,w.pointLength=d,w.spotLength=h,w.rectAreaLength=p,w.hemiLength=f,w.numDirectionalShadows=v,w.numPointShadows=m,w.numSpotShadows=g,w.numSpotMaps=y,w.numLightProbes=b,r.version=$f++)},setupView:function(e,t){let n=0,i=0,c=0,l=0,u=0;const d=t.matrixWorldInverse;for(let h=0,p=e.length;h<p;h++){const t=e[h];if(t.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(d),n++}else if(t.isSpotLight){const e=r.spot[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(d),c++}else if(t.isRectAreaLight){const e=r.rectArea[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),a.identity(),s.copy(t.matrixWorld),s.premultiply(d),a.extractRotation(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),l++}else if(t.isPointLight){const e=r.point[i];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),i++}else if(t.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),u++}}},state:r}}function ev(e,t){const n=new Zf(e,t),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)}}}function tv(e,t){let n=new WeakMap;return{get:function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const o=n.get(i);let s;return void 0===o?(s=new ev(e,t),n.set(i,[s])):r>=o.length?(s=new ev(e,t),o.push(s)):s=o[r],s},dispose:function(){n=new WeakMap}}}class nv extends Td{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class iv extends Td{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function rv(e,t,n){let i=new Mh;const r=new Il,o=new Il,s=new Zl,a=new nv({depthPacking:3201}),c=new iv,l={},u=n.maxTextureSize,d={[sc]:ac,[ac]:sc,2:2},h=new ph({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Il},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const f=new Vd;f.setAttribute("position",new Id(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new sh(f,h),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ic;let g=this.type;function y(n,i){const o=t.update(v);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new tu(r.x,r.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,o,h,v,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,o,p,v,null)}function S(t,n,i,r){let o=null;const s=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)o=s;else if(o=!0===i.isPointLight?c:a,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=o.uuid,t=n.uuid;let i=l[e];void 0===i&&(i={},l[e]=i);let r=i[t];void 0===r&&(r=o.clone(),i[t]=r,n.addEventListener("dispose",_)),o=r}if(o.visible=n.visible,o.wireframe=n.wireframe,o.side=r===oc?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===i.isPointLight&&!0===o.isMeshDistanceMaterial){e.properties.get(o).light=i}return o}function b(n,r,o,s,a){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===oc)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const i=t.update(n),c=n.material;if(Array.isArray(c)){const t=i.groups;for(let l=0,u=t.length;l<u;l++){const u=t[l],d=c[u.materialIndex];if(d&&d.visible){const t=S(n,d,s,a);n.onBeforeShadow(e,n,r,o,i,t,u),e.renderBufferDirect(o,null,i,t,n,u),n.onAfterShadow(e,n,r,o,i,t,u)}}}else if(c.visible){const t=S(n,c,s,a);n.onBeforeShadow(e,n,r,o,i,t,null),e.renderBufferDirect(o,null,i,t,n,null),n.onAfterShadow(e,n,r,o,i,t,null)}}const c=n.children;for(let e=0,t=c.length;e<t;e++)b(c[e],r,o,s,a)}function _(e){e.target.removeEventListener("dispose",_);for(const t in l){const n=l[t],i=e.target.uuid;if(i in n){n[i].dispose(),delete n[i]}}}this.render=function(t,n,a){if(!1===m.enabled)return;if(!1===m.autoUpdate&&!1===m.needsUpdate)return;if(0===t.length)return;const c=e.getRenderTarget(),l=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const p=g!==oc&&this.type===oc,f=g===oc&&this.type!==oc;for(let v=0,m=t.length;v<m;v++){const c=t[v],l=c.shadow;if(void 0===l){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===l.autoUpdate&&!1===l.needsUpdate)continue;r.copy(l.mapSize);const d=l.getFrameExtents();if(r.multiply(d),o.copy(l.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(o.x=Math.floor(u/d.x),r.x=o.x*d.x,l.mapSize.x=o.x),r.y>u&&(o.y=Math.floor(u/d.y),r.y=o.y*d.y,l.mapSize.y=o.y)),null===l.map||!0===p||!0===f){const e=this.type!==oc?{minFilter:Rc,magFilter:Rc}:{};null!==l.map&&l.map.dispose(),l.map=new tu(r.x,r.y,e),l.map.texture.name=c.name+".shadowMap",l.camera.updateProjectionMatrix()}e.setRenderTarget(l.map),e.clear();const m=l.getViewportCount();for(let e=0;e<m;e++){const t=l.getViewport(e);s.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),h.viewport(s),l.updateMatrices(c,e),i=l.getFrustum(),b(n,a,l.camera,c,this.type)}!0!==l.isPointLightShadow&&this.type===oc&&y(l,a),l.needsUpdate=!1}g=this.type,m.needsUpdate=!1,e.setRenderTarget(c,l,d)}}function ov(e,t,n){const i=n.isWebGL2;const r=new function(){let t=!1;const n=new Zl;let i=null;const r=new Zl(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,o,s,a){!0===a&&(t*=s,i*=s,o*=s),n.set(t,i,o,s),!1===r.equals(n)&&(e.clearColor(t,i,o,s),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,i=null,r=null;return{setTest:function(t){t?V(e.DEPTH_TEST):H(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},s=new function(){let t=!1,n=null,i=null,r=null,o=null,s=null,a=null,c=null,l=null;return{setTest:function(n){t||(n?V(e.STENCIL_TEST):H(e.STENCIL_TEST))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,s){i===t&&r===n&&o===s||(e.stencilFunc(t,n,s),i=t,r=n,o=s)},setOp:function(t,n,i){s===t&&a===n&&c===i||(e.stencilOp(t,n,i),s=t,a=n,c=i)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,i=null,r=null,o=null,s=null,a=null,c=null,l=null}}},a=new WeakMap,c=new WeakMap;let l={},u={},d=new WeakMap,h=[],p=null,f=!1,v=null,m=null,g=null,y=null,S=null,b=null,_=null,w=new Cd(0,0,0),x=0,C=!1,E=null,P=null,T=null,R=null,M=null;const A=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let I=!1,k=0;const O=e.getParameter(e.VERSION);-1!==O.indexOf("WebGL")?(k=parseFloat(/^WebGL (\d)/.exec(O)[1]),I=k>=1):-1!==O.indexOf("OpenGL ES")&&(k=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),I=k>=2);let D=null,L={};const N=e.getParameter(e.SCISSOR_BOX),z=e.getParameter(e.VIEWPORT),F=(new Zl).fromArray(N),U=(new Zl).fromArray(z);function B(t,n,r,o){const s=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let c=0;c<r;c++)!i||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+c,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s):e.texImage3D(n,0,e.RGBA,1,1,o,0,e.RGBA,e.UNSIGNED_BYTE,s);return a}const j={};function V(t){!0!==l[t]&&(e.enable(t),l[t]=!0)}function H(t){!1!==l[t]&&(e.disable(t),l[t]=!1)}j[e.TEXTURE_2D]=B(e.TEXTURE_2D,e.TEXTURE_2D,1),j[e.TEXTURE_CUBE_MAP]=B(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(j[e.TEXTURE_2D_ARRAY]=B(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),j[e.TEXTURE_3D]=B(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),r.setClear(0,0,0,1),o.setClear(1),s.setClear(0),V(e.DEPTH_TEST),o.setFunc(3),X(!1),K(1),V(e.CULL_FACE),q(0);const W={[cc]:e.FUNC_ADD,101:e.FUNC_SUBTRACT,102:e.FUNC_REVERSE_SUBTRACT};if(i)W[103]=e.MIN,W[104]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(W[103]=e.MIN_EXT,W[104]=e.MAX_EXT)}const G={200:e.ZERO,201:e.ONE,202:e.SRC_COLOR,204:e.SRC_ALPHA,210:e.SRC_ALPHA_SATURATE,208:e.DST_COLOR,206:e.DST_ALPHA,203:e.ONE_MINUS_SRC_COLOR,205:e.ONE_MINUS_SRC_ALPHA,209:e.ONE_MINUS_DST_COLOR,207:e.ONE_MINUS_DST_ALPHA,211:e.CONSTANT_COLOR,212:e.ONE_MINUS_CONSTANT_COLOR,213:e.CONSTANT_ALPHA,214:e.ONE_MINUS_CONSTANT_ALPHA};function q(t,n,i,r,o,s,a,c,l,u){if(0!==t){if(!1===f&&(V(e.BLEND),f=!0),5===t)o=o||n,s=s||i,a=a||r,n===m&&o===S||(e.blendEquationSeparate(W[n],W[o]),m=n,S=o),i===g&&r===y&&s===b&&a===_||(e.blendFuncSeparate(G[i],G[r],G[s],G[a]),g=i,y=r,b=s,_=a),!1!==c.equals(w)&&l===x||(e.blendColor(c.r,c.g,c.b,l),w.copy(c),x=l),v=t,C=!1;else if(t!==v||u!==C){if(m===cc&&S===cc||(e.blendEquation(e.FUNC_ADD),m=cc,S=cc),u)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}g=null,y=null,b=null,_=null,w.set(0,0,0),x=0,v=t,C=u}}else!0===f&&(H(e.BLEND),f=!1)}function X(t){E!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),E=t)}function K(t){0!==t?(V(e.CULL_FACE),t!==P&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):H(e.CULL_FACE),P=t}function J(t,n,i){t?(V(e.POLYGON_OFFSET_FILL),R===n&&M===i||(e.polygonOffset(n,i),R=n,M=i)):H(e.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:o,stencil:s},enable:V,disable:H,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,i&&(t===e.DRAW_FRAMEBUFFER&&(u[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(u[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(i,r){let o=h,s=!1;if(i){o=d.get(r),void 0===o&&(o=[],d.set(r,o));const t=i.textures;if(o.length!==t.length||o[0]!==e.COLOR_ATTACHMENT0){for(let n=0,i=t.length;n<i;n++)o[n]=e.COLOR_ATTACHMENT0+n;o.length=t.length,s=!0}}else o[0]!==e.BACK&&(o[0]=e.BACK,s=!0);if(s)if(n.isWebGL2)e.drawBuffers(o);else{if(!0!==t.has("WEBGL_draw_buffers"))throw new Error("THREE.WebGLState: Usage of gl.drawBuffers() require WebGL2 or WEBGL_draw_buffers extension");t.get("WEBGL_draw_buffers").drawBuffersWEBGL(o)}},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:q,setMaterial:function(t,n){2===t.side?H(e.CULL_FACE):V(e.CULL_FACE);let i=t.side===ac;n&&(i=!i),X(i),1===t.blending&&!1===t.transparent?q(0):q(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),r.setMask(t.colorWrite);const a=t.stencilWrite;s.setTest(a),a&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),J(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?V(e.SAMPLE_ALPHA_TO_COVERAGE):H(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:X,setCullFace:K,setLineWidth:function(t){t!==T&&(I&&e.lineWidth(t),T=t)},setPolygonOffset:J,setScissorTest:function(t){t?V(e.SCISSOR_TEST):H(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+A-1),D!==t&&(e.activeTexture(t),D=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===D?e.TEXTURE0+A-1:D);let r=L[i];void 0===r&&(r={type:void 0,texture:void 0},L[i]=r),r.type===t&&r.texture===n||(D!==i&&(e.activeTexture(i),D=i),e.bindTexture(t,n||j[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=L[D];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){let i=c.get(n);void 0===i&&(i=new WeakMap,c.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){const i=c.get(n).get(t);a.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),a.set(n,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===F.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),F.copy(t))},viewport:function(t){!1===U.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),U.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===i&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),l={},D=null,L={},u={},d=new WeakMap,h=[],p=null,f=!1,v=null,m=null,g=null,y=null,S=null,b=null,_=null,w=new Cd(0,0,0),x=0,C=!1,E=null,P=null,T=null,R=null,M=null,F.set(0,0,e.canvas.width,e.canvas.height),U.set(0,0,e.canvas.width,e.canvas.height),r.reset(),o.reset(),s.reset()}}}function sv(e,t,n,i,r,o,s){const a=r.isWebGL2,c=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),u=new Il,d=new WeakMap;let h;const p=new WeakMap;let f=!1;try{f="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(j){}function v(e,t){return f?new OffscreenCanvas(e,t):Ll("canvas")}function m(e,t,n,i){let r=1;const o=B(e);if((o.width>i||o.height>i)&&(r=i/Math.max(o.width,o.height)),r<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&e instanceof VideoFrame){const i=t?Tl:Math.floor,s=i(r*o.width),a=i(r*o.height);void 0===h&&(h=v(s,a));const c=n?v(s,a):h;c.width=s,c.height=a;return c.getContext("2d").drawImage(e,0,0,s,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+o.width+"x"+o.height+") to ("+s+"x"+a+")."),c}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+o.width+"x"+o.height+")."),e}return e}function g(e){const t=B(e);return Pl(t.width)&&Pl(t.height)}function y(e,t){return e.generateMipmaps&&t&&e.minFilter!==Rc&&e.minFilter!==Ic}function S(t){e.generateMipmap(t)}function b(n,i,r,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===a)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let c=i;if(i===e.RED&&(r===e.FLOAT&&(c=e.R32F),r===e.HALF_FLOAT&&(c=e.R16F),r===e.UNSIGNED_BYTE&&(c=e.R8)),i===e.RED_INTEGER&&(r===e.UNSIGNED_BYTE&&(c=e.R8UI),r===e.UNSIGNED_SHORT&&(c=e.R16UI),r===e.UNSIGNED_INT&&(c=e.R32UI),r===e.BYTE&&(c=e.R8I),r===e.SHORT&&(c=e.R16I),r===e.INT&&(c=e.R32I)),i===e.RG&&(r===e.FLOAT&&(c=e.RG32F),r===e.HALF_FLOAT&&(c=e.RG16F),r===e.UNSIGNED_BYTE&&(c=e.RG8)),i===e.RG_INTEGER&&(r===e.UNSIGNED_BYTE&&(c=e.RG8UI),r===e.UNSIGNED_SHORT&&(c=e.RG16UI),r===e.UNSIGNED_INT&&(c=e.RG32UI),r===e.BYTE&&(c=e.RG8I),r===e.SHORT&&(c=e.RG16I),r===e.INT&&(c=e.RG32I)),i===e.RGBA){const t=s?al:Hl.getTransfer(o);r===e.FLOAT&&(c=e.RGBA32F),r===e.HALF_FLOAT&&(c=e.RGBA16F),r===e.UNSIGNED_BYTE&&(c=t===cl?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(c=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(c=e.RGB5_A1)}return c!==e.R16F&&c!==e.R32F&&c!==e.RG16F&&c!==e.RG32F&&c!==e.RGBA16F&&c!==e.RGBA32F||t.get("EXT_color_buffer_float"),c}function _(e,t,n){return!0===y(e,n)||e.isFramebufferTexture&&e.minFilter!==Rc&&e.minFilter!==Ic?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function w(t){return t===Rc||t===Mc||t===Ac?e.NEAREST:e.LINEAR}function x(e){const t=e.target;t.removeEventListener("dispose",x),function(e){const t=i.get(e);if(void 0===t.__webglInit)return;const n=e.source,r=p.get(n);if(r){const i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&E(e),0===Object.keys(r).length&&p.delete(n)}i.remove(e)}(t),t.isVideoTexture&&d.delete(t)}function C(t){const n=t.target;n.removeEventListener("dispose",C),function(t){const n=i.get(t);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let i=0;i<6;i++){if(Array.isArray(n.__webglFramebuffer[i]))for(let t=0;t<n.__webglFramebuffer[i].length;t++)e.deleteFramebuffer(n.__webglFramebuffer[i][t]);else e.deleteFramebuffer(n.__webglFramebuffer[i]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[i])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const r=t.textures;for(let o=0,a=r.length;o<a;o++){const t=i.get(r[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),s.memory.textures--),i.remove(r[o])}i.remove(t)}(n)}function E(t){const n=i.get(t);e.deleteTexture(n.__webglTexture);const r=t.source;delete p.get(r)[n.__cacheKey],s.memory.textures--}let P=0;function T(t,r){const o=i.get(t);if(t.isVideoTexture&&function(e){const t=s.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&o.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void O(o,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,o.__webglTexture,e.TEXTURE0+r)}const R={[Ec]:e.REPEAT,[Pc]:e.CLAMP_TO_EDGE,[Tc]:e.MIRRORED_REPEAT},M={[Rc]:e.NEAREST,[Mc]:e.NEAREST_MIPMAP_NEAREST,[Ac]:e.NEAREST_MIPMAP_LINEAR,[Ic]:e.LINEAR,[kc]:e.LINEAR_MIPMAP_NEAREST,[Oc]:e.LINEAR_MIPMAP_LINEAR},A={512:e.NEVER,519:e.ALWAYS,513:e.LESS,515:e.LEQUAL,514:e.EQUAL,518:e.GEQUAL,516:e.GREATER,517:e.NOTEQUAL};function I(n,o,s){if(o.type!==Fc||!1!==t.has("OES_texture_float_linear")||o.magFilter!==Ic&&o.magFilter!==kc&&o.magFilter!==Ac&&o.magFilter!==Oc&&o.minFilter!==Ic&&o.minFilter!==kc&&o.minFilter!==Ac&&o.minFilter!==Oc||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),s?(e.texParameteri(n,e.TEXTURE_WRAP_S,R[o.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,R[o.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,R[o.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,M[o.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,M[o.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),o.wrapS===Pc&&o.wrapT===Pc||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,w(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,w(o.minFilter)),o.minFilter!==Rc&&o.minFilter!==Ic&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),o.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,A[o.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(o.magFilter===Rc)return;if(o.minFilter!==Ac&&o.minFilter!==Oc)return;if(o.type===Fc&&!1===t.has("OES_texture_float_linear"))return;if(!1===a&&o.type===Uc&&!1===t.has("OES_texture_half_float_linear"))return;if(o.anisotropy>1||i.get(o).__currentAnisotropy){const s=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy}}}function k(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",x));const r=n.source;let o=p.get(r);void 0===o&&(o={},p.set(r,o));const a=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(a!==t.__cacheKey){void 0===o[a]&&(o[a]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,i=!0),o[a].usedTimes++;const r=o[t.__cacheKey];void 0!==r&&(o[t.__cacheKey].usedTimes--,0===r.usedTimes&&E(n)),t.__cacheKey=a,t.__webglTexture=o[a].texture}return i}function O(t,s,c){let l=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(l=e.TEXTURE_3D);const u=k(t,s),d=s.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+c);const h=i.get(d);if(d.version!==h.__version||!0===u){n.activeTexture(e.TEXTURE0+c);const t=Hl.getPrimaries(Hl.workingColorSpace),i=s.colorSpace===nl?null:Hl.getPrimaries(s.colorSpace),p=s.colorSpace===nl||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);const f=function(e){return!a&&(e.wrapS!==Pc||e.wrapT!==Pc||e.minFilter!==Rc&&e.minFilter!==Ic)}(s)&&!1===g(s.image);let v=m(s.image,f,!1,r.maxTextureSize);v=U(s,v);const w=g(v)||a,x=o.convert(s.format,s.colorSpace);let C,E=o.convert(s.type),P=b(s.internalFormat,x,E,s.colorSpace,s.isVideoTexture);I(l,s,w);const T=s.mipmaps,R=a&&!0!==s.isVideoTexture&&36196!==P,M=void 0===h.__version||!0===u,A=d.dataReady,k=_(s,v,w);if(s.isDepthTexture)P=e.DEPTH_COMPONENT,a?P=s.type===Fc?e.DEPTH_COMPONENT32F:s.type===zc?e.DEPTH_COMPONENT24:s.type===Bc?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:s.type===Fc&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),s.format===Vc&&P===e.DEPTH_COMPONENT&&s.type!==Lc&&s.type!==zc&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),s.type=zc,E=o.convert(s.type)),s.format===Hc&&P===e.DEPTH_COMPONENT&&(P=e.DEPTH_STENCIL,s.type!==Bc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),s.type=Bc,E=o.convert(s.type))),M&&(R?n.texStorage2D(e.TEXTURE_2D,1,P,v.width,v.height):n.texImage2D(e.TEXTURE_2D,0,P,v.width,v.height,0,x,E,null));else if(s.isDataTexture)if(T.length>0&&w){R&&M&&n.texStorage2D(e.TEXTURE_2D,k,P,T[0].width,T[0].height);for(let t=0,i=T.length;t<i;t++)C=T[t],R?A&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,C.width,C.height,x,E,C.data):n.texImage2D(e.TEXTURE_2D,t,P,C.width,C.height,0,x,E,C.data);s.generateMipmaps=!1}else R?(M&&n.texStorage2D(e.TEXTURE_2D,k,P,v.width,v.height),A&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,v.width,v.height,x,E,v.data)):n.texImage2D(e.TEXTURE_2D,0,P,v.width,v.height,0,x,E,v.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){R&&M&&n.texStorage3D(e.TEXTURE_2D_ARRAY,k,P,T[0].width,T[0].height,v.depth);for(let t=0,i=T.length;t<i;t++)C=T[t],s.format!==jc?null!==x?R?A&&n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,C.width,C.height,v.depth,x,C.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,P,C.width,C.height,v.depth,0,C.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):R?A&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,C.width,C.height,v.depth,x,E,C.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,P,C.width,C.height,v.depth,0,x,E,C.data)}else{R&&M&&n.texStorage2D(e.TEXTURE_2D,k,P,T[0].width,T[0].height);for(let t=0,i=T.length;t<i;t++)C=T[t],s.format!==jc?null!==x?R?A&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,C.width,C.height,x,C.data):n.compressedTexImage2D(e.TEXTURE_2D,t,P,C.width,C.height,0,C.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):R?A&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,C.width,C.height,x,E,C.data):n.texImage2D(e.TEXTURE_2D,t,P,C.width,C.height,0,x,E,C.data)}else if(s.isDataArrayTexture)R?(M&&n.texStorage3D(e.TEXTURE_2D_ARRAY,k,P,v.width,v.height,v.depth),A&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,v.width,v.height,v.depth,x,E,v.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,P,v.width,v.height,v.depth,0,x,E,v.data);else if(s.isData3DTexture)R?(M&&n.texStorage3D(e.TEXTURE_3D,k,P,v.width,v.height,v.depth),A&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,v.width,v.height,v.depth,x,E,v.data)):n.texImage3D(e.TEXTURE_3D,0,P,v.width,v.height,v.depth,0,x,E,v.data);else if(s.isFramebufferTexture){if(M)if(R)n.texStorage2D(e.TEXTURE_2D,k,P,v.width,v.height);else{let t=v.width,i=v.height;for(let r=0;r<k;r++)n.texImage2D(e.TEXTURE_2D,r,P,t,i,0,x,E,null),t>>=1,i>>=1}}else if(T.length>0&&w){if(R&&M){const t=B(T[0]);n.texStorage2D(e.TEXTURE_2D,k,P,t.width,t.height)}for(let t=0,i=T.length;t<i;t++)C=T[t],R?A&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,x,E,C):n.texImage2D(e.TEXTURE_2D,t,P,x,E,C);s.generateMipmaps=!1}else if(R){if(M){const t=B(v);n.texStorage2D(e.TEXTURE_2D,k,P,t.width,t.height)}A&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,x,E,v)}else n.texImage2D(e.TEXTURE_2D,0,P,x,E,v);y(s,w)&&S(l),h.__version=d.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function D(t,r,s,a,l,u){const d=o.convert(s.format,s.colorSpace),h=o.convert(s.type),p=b(s.internalFormat,d,h,s.colorSpace);if(!i.get(r).__hasExternalTextures){const t=Math.max(1,r.width>>u),i=Math.max(1,r.height>>u);l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?n.texImage3D(l,u,p,t,i,r.depth,0,d,h,null):n.texImage2D(l,u,p,t,i,0,d,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),F(r)?c.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,a,l,i.get(s).__webglTexture,0,z(r)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,a,l,i.get(s).__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function L(t,n,i){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let r=!0===a?e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT16;if(i||F(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Fc?r=e.DEPTH_COMPONENT32F:t.type===zc&&(r=e.DEPTH_COMPONENT24));const i=z(n);F(n)?c.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,r,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,i,r,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,r,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const r=z(n);i&&!1===F(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,n.width,n.height):F(n)?c.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=n.textures;for(let r=0;r<t.length;r++){const s=t[r],a=o.convert(s.format,s.colorSpace),l=o.convert(s.type),u=b(s.internalFormat,a,l,s.colorSpace),d=z(n);i&&!1===F(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,d,u,n.width,n.height):F(n)?c.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,d,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function N(t){const r=i.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),T(r.depthTexture,0);const o=i.get(r.depthTexture).__webglTexture,s=z(r);if(r.depthTexture.format===Vc)F(r)?c.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(r.depthTexture.format!==Hc)throw new Error("Unknown depthTexture format");F(r)?c.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}(r.__webglFramebuffer,t)}else if(o){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=e.createRenderbuffer(),L(r.__webglDepthbuffer[i],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),L(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function z(e){return Math.min(r.maxSamples,e.samples)}function F(e){const n=i.get(e);return a&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function U(e,n){const i=e.colorSpace,r=e.format,o=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===fl||i!==rl&&i!==nl&&(Hl.getTransfer(i)===cl?!1===a?!0===t.has("EXT_sRGB")&&r===jc?(e.format=fl,e.minFilter=Ic,e.generateMipmaps=!1):n=Xl.sRGBToLinear(n):r===jc&&o===Dc||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),n}function B(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?(u.width=e.naturalWidth||e.width,u.height=e.naturalHeight||e.height):"undefined"!==typeof VideoFrame&&e instanceof VideoFrame?(u.width=e.displayWidth,u.height=e.displayHeight):(u.width=e.width,u.height=e.height),u}this.allocateTextureUnit=function(){const e=P;return e>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+r.maxTextures),P+=1,e},this.resetTextureUnits=function(){P=0},this.setTexture2D=T,this.setTexture2DArray=function(t,r){const o=i.get(t);t.version>0&&o.__version!==t.version?O(o,t,r):n.bindTexture(e.TEXTURE_2D_ARRAY,o.__webglTexture,e.TEXTURE0+r)},this.setTexture3D=function(t,r){const o=i.get(t);t.version>0&&o.__version!==t.version?O(o,t,r):n.bindTexture(e.TEXTURE_3D,o.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,s){const c=i.get(t);t.version>0&&c.__version!==t.version?function(t,s,c){if(6!==s.image.length)return;const l=k(t,s),u=s.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+c);const d=i.get(u);if(u.version!==d.__version||!0===l){n.activeTexture(e.TEXTURE0+c);const t=Hl.getPrimaries(Hl.workingColorSpace),i=s.colorSpace===nl?null:Hl.getPrimaries(s.colorSpace),h=s.colorSpace===nl||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const p=s.isCompressedTexture||s.image[0].isCompressedTexture,f=s.image[0]&&s.image[0].isDataTexture,v=[];for(let e=0;e<6;e++)v[e]=p||f?f?s.image[e].image:s.image[e]:m(s.image[e],!1,!0,r.maxCubemapSize),v[e]=U(s,v[e]);const w=v[0],x=g(w)||a,C=o.convert(s.format,s.colorSpace),E=o.convert(s.type),P=b(s.internalFormat,C,E,s.colorSpace),T=a&&!0!==s.isVideoTexture,R=void 0===d.__version||!0===l,M=u.dataReady;let A,k=_(s,w,x);if(I(e.TEXTURE_CUBE_MAP,s,x),p){T&&R&&n.texStorage2D(e.TEXTURE_CUBE_MAP,k,P,w.width,w.height);for(let t=0;t<6;t++){A=v[t].mipmaps;for(let i=0;i<A.length;i++){const r=A[i];s.format!==jc?null!==C?T?M&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,C,r.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,P,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):T?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,C,E,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,P,r.width,r.height,0,C,E,r.data)}}}else{if(A=s.mipmaps,T&&R){A.length>0&&k++;const t=B(v[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,k,P,t.width,t.height)}for(let t=0;t<6;t++)if(f){T?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,v[t].width,v[t].height,C,E,v[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,P,v[t].width,v[t].height,0,C,E,v[t].data);for(let i=0;i<A.length;i++){const r=A[i].image[t].image;T?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,r.width,r.height,C,E,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,P,r.width,r.height,0,C,E,r.data)}}else{T?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,C,E,v[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,P,C,E,v[t]);for(let i=0;i<A.length;i++){const r=A[i];T?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,C,E,r.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,P,C,E,r.image[t])}}}y(s,x)&&S(e.TEXTURE_CUBE_MAP),d.__version=u.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}(c,t,s):n.bindTexture(e.TEXTURE_CUBE_MAP,c.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,n,r){const o=i.get(t);void 0!==n&&D(o.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&N(t)},this.setupRenderTarget=function(t){const c=t.texture,l=i.get(t),u=i.get(c);t.addEventListener("dispose",C);const d=t.textures,h=!0===t.isWebGLCubeRenderTarget,p=d.length>1,f=g(t)||a;if(p||(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=c.version,s.memory.textures++),h){l.__webglFramebuffer=[];for(let t=0;t<6;t++)if(a&&c.mipmaps&&c.mipmaps.length>0){l.__webglFramebuffer[t]=[];for(let n=0;n<c.mipmaps.length;n++)l.__webglFramebuffer[t][n]=e.createFramebuffer()}else l.__webglFramebuffer[t]=e.createFramebuffer()}else{if(a&&c.mipmaps&&c.mipmaps.length>0){l.__webglFramebuffer=[];for(let t=0;t<c.mipmaps.length;t++)l.__webglFramebuffer[t]=e.createFramebuffer()}else l.__webglFramebuffer=e.createFramebuffer();if(p)if(r.drawBuffers)for(let t=0,n=d.length;t<n;t++){const n=i.get(d[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),s.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&t.samples>0&&!1===F(t)){l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,l.__webglMultisampledFramebuffer);for(let n=0;n<d.length;n++){const i=d[n];l.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,l.__webglColorRenderbuffer[n]);const r=o.convert(i.format,i.colorSpace),s=o.convert(i.type),a=b(i.internalFormat,r,s,i.colorSpace,!0===t.isXRRenderTarget),c=z(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,c,a,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,l.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),L(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(h){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),I(e.TEXTURE_CUBE_MAP,c,f);for(let n=0;n<6;n++)if(a&&c.mipmaps&&c.mipmaps.length>0)for(let i=0;i<c.mipmaps.length;i++)D(l.__webglFramebuffer[n][i],t,c,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else D(l.__webglFramebuffer[n],t,c,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);y(c,f)&&S(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(p){for(let r=0,o=d.length;r<o;r++){const o=d[r],s=i.get(o);n.bindTexture(e.TEXTURE_2D,s.__webglTexture),I(e.TEXTURE_2D,o,f),D(l.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0+r,e.TEXTURE_2D,0),y(o,f)&&S(e.TEXTURE_2D)}n.unbindTexture()}else{let i=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(a?i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(i,u.__webglTexture),I(i,c,f),a&&c.mipmaps&&c.mipmaps.length>0)for(let n=0;n<c.mipmaps.length;n++)D(l.__webglFramebuffer[n],t,c,e.COLOR_ATTACHMENT0,i,n);else D(l.__webglFramebuffer,t,c,e.COLOR_ATTACHMENT0,i,0);y(c,f)&&S(i),n.unbindTexture()}t.depthBuffer&&N(t)},this.updateRenderTargetMipmap=function(t){const r=g(t)||a,o=t.textures;for(let s=0,a=o.length;s<a;s++){const a=o[s];if(y(a,r)){const r=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=i.get(a).__webglTexture;n.bindTexture(r,o),S(r),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(a&&t.samples>0&&!1===F(t)){const r=t.textures,o=t.width,s=t.height;let a=e.COLOR_BUFFER_BIT;const c=[],u=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,d=i.get(t),h=r.length>1;if(h)for(let t=0;t<r.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,d.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglFramebuffer);for(let n=0;n<r.length;n++){c.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&c.push(u);const p=void 0!==d.__ignoreDepthValues&&d.__ignoreDepthValues;if(!1===p&&(t.depthBuffer&&(a|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(a|=e.STENCIL_BUFFER_BIT)),h&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,d.__webglColorRenderbuffer[n]),!0===p&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[u]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[u])),h){const t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,o,s,0,0,o,s,a,e.NEAREST),l&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,c)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<r.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,d.__webglColorRenderbuffer[t]);const o=i.get(r[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,o,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=N,this.setupFrameBufferTexture=D,this.useMultisampledRTT=F}function av(e,t,n){const i=n.isWebGL2;return{convert:function(n){let r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nl;const s=Hl.getTransfer(o);if(n===Dc)return e.UNSIGNED_BYTE;if(1017===n)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return e.UNSIGNED_SHORT_5_5_5_1;if(1010===n)return e.BYTE;if(1011===n)return e.SHORT;if(n===Lc)return e.UNSIGNED_SHORT;if(n===Nc)return e.INT;if(n===zc)return e.UNSIGNED_INT;if(n===Fc)return e.FLOAT;if(n===Uc)return i?e.HALF_FLOAT:(r=t.get("OES_texture_half_float"),null!==r?r.HALF_FLOAT_OES:null);if(1021===n)return e.ALPHA;if(n===jc)return e.RGBA;if(1024===n)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(n===Vc)return e.DEPTH_COMPONENT;if(n===Hc)return e.DEPTH_STENCIL;if(n===fl)return r=t.get("EXT_sRGB"),null!==r?r.SRGB_ALPHA_EXT:null;if(n===Wc)return e.RED;if(1029===n)return e.RED_INTEGER;if(1030===n)return e.RG;if(1031===n)return e.RG_INTEGER;if(1033===n)return e.RGBA_INTEGER;if(n===Gc||n===qc||n===Xc||n===Kc)if(s===cl){if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===Gc)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===qc)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Xc)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Kc)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=t.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===Gc)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===qc)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Xc)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Kc)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(r=t.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(35840===n)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return r=t.get("WEBGL_compressed_texture_etc1"),null!==r?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(r=t.get("WEBGL_compressed_texture_etc"),null===r)return null;if(37492===n)return s===cl?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(37496===n)return s===cl?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(r=t.get("WEBGL_compressed_texture_astc"),null===r)return null;if(37808===n)return s===cl?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return s===cl?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return s===cl?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return s===cl?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return s===cl?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return s===cl?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return s===cl?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return s===cl?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return s===cl?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return s===cl?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return s===cl?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return s===cl?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return s===cl?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return s===cl?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Jc||36494===n||36495===n){if(r=t.get("EXT_texture_compression_bptc"),null===r)return null;if(n===Jc)return s===cl?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===n)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===n)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===n||36284===n||36285===n||36286===n){if(r=t.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===Jc)return r.COMPRESSED_RED_RGTC1_EXT;if(36284===n)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===n)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===n)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Bc?i?e.UNSIGNED_INT_24_8:(r=t.get("WEBGL_depth_texture"),null!==r?r.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class cv extends yh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e}}class lv extends cd{constructor(){super(),this.isGroup=!0,this.type="Group"}}const uv={type:"move"};class dv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new lv,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new lv,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ou,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ou),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new lv,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ou,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ou),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,o=null;const s=this._targetRay,a=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){o=!0;for(const o of e.hand.values()){const e=t.getJointPose(o,n),i=this._getHandJoint(c,o);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const i=c.joints["index-finger-tip"],r=c.joints["thumb-tip"],s=i.position.distanceTo(r.position),a=.02,l=.005;c.inputState.pinching&&s>a+l?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&s<=a-l&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));null!==s&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(uv)))}return null!==s&&(s.visible=null!==i),null!==a&&(a.visible=null!==r),null!==c&&(c.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new lv;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class hv{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){const i=new Ql;e.properties.get(i).__webglTexture=t.texture,t.depthNear==n.depthNear&&t.depthFar==n.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}render(e,t){if(null!==this.texture){if(null===this.mesh){const e=t.cameras[0].viewport,n=new ph({extensions:{fragDepth:!0},vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new sh(new kh(20,20),n)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class pv extends gl{constructor(e,t){super();const n=this;let i=null,r=1,o=null,s="local-floor",a=1,c=null,l=null,u=null,d=null,h=null,p=null;const f=new hv,v=t.getContextAttributes();let m=null,g=null;const y=[],S=[],b=new Il;let _=null;const w=new yh;w.layers.enable(1),w.viewport=new Zl;const x=new yh;x.layers.enable(2),x.viewport=new Zl;const C=[w,x],E=new cv;E.layers.enable(1),E.layers.enable(2);let P=null,T=null;function R(e){const t=S.indexOf(e.inputSource);if(-1===t)return;const n=y[t];void 0!==n&&(n.update(e.inputSource,e.frame,c||o),n.dispatchEvent({type:e.type,data:e.inputSource}))}function M(){i.removeEventListener("select",R),i.removeEventListener("selectstart",R),i.removeEventListener("selectend",R),i.removeEventListener("squeeze",R),i.removeEventListener("squeezestart",R),i.removeEventListener("squeezeend",R),i.removeEventListener("end",M),i.removeEventListener("inputsourceschange",A);for(let e=0;e<y.length;e++){const t=S[e];null!==t&&(S[e]=null,y[e].disconnect(t))}P=null,T=null,f.reset(),e.setRenderTarget(m),h=null,d=null,u=null,i=null,g=null,L.stop(),n.isPresenting=!1,e.setPixelRatio(_),e.setSize(b.width,b.height,!1),n.dispatchEvent({type:"sessionend"})}function A(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=S.indexOf(n);i>=0&&(S[i]=null,y[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=S.indexOf(n);if(-1===i){for(let e=0;e<y.length;e++){if(e>=S.length){S.push(n),i=e;break}if(null===S[e]){S[e]=n,i=e;break}}if(-1===i)break}const r=y[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=y[e];return void 0===t&&(t=new dv,y[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=y[e];return void 0===t&&(t=new dv,y[e]=t),t.getGripSpace()},this.getHand=function(e){let t=y[e];return void 0===t&&(t=new dv,y[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(e){c=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(l){if(i=l,null!==i){if(m=e.getRenderTarget(),i.addEventListener("select",R),i.addEventListener("selectstart",R),i.addEventListener("selectend",R),i.addEventListener("squeeze",R),i.addEventListener("squeezestart",R),i.addEventListener("squeezeend",R),i.addEventListener("end",M),i.addEventListener("inputsourceschange",A),!0!==v.xrCompatible&&await t.makeXRCompatible(),_=e.getPixelRatio(),e.getSize(b),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:r};h=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),g=new tu(h.framebufferWidth,h.framebufferHeight,{format:jc,type:Dc,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let n=null,o=null,s=null;v.depth&&(s=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=v.stencil?Hc:Vc,o=v.stencil?Bc:zc);const a={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:r};u=new XRWebGLBinding(i,t),d=u.createProjectionLayer(a),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),g=new tu(d.textureWidth,d.textureHeight,{format:jc,type:Dc,depthTexture:new mp(d.textureWidth,d.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0});e.properties.get(g).__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(a),c=null,o=await i.requestReferenceSpace(s),L.setContext(i),L.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode};const I=new ou,k=new ou;function O(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;null!==f.texture&&(e.near=f.depthNear,e.far=f.depthFar),E.near=x.near=w.near=e.near,E.far=x.far=w.far=e.far,P===E.near&&T===E.far||(i.updateRenderState({depthNear:E.near,depthFar:E.far}),P=E.near,T=E.far,w.near=P,w.far=T,x.near=P,x.far=T,w.updateProjectionMatrix(),x.updateProjectionMatrix(),e.updateProjectionMatrix());const t=e.parent,n=E.cameras;O(E,t);for(let i=0;i<n.length;i++)O(n[i],t);2===n.length?function(e,t,n){I.setFromMatrixPosition(t.matrixWorld),k.setFromMatrixPosition(n.matrixWorld);const i=I.distanceTo(k),r=t.projectionMatrix.elements,o=n.projectionMatrix.elements,s=r[14]/(r[10]-1),a=r[14]/(r[10]+1),c=(r[9]+1)/r[5],l=(r[9]-1)/r[5],u=(r[8]-1)/r[0],d=(o[8]+1)/o[0],h=s*u,p=s*d,f=i/(-u+d),v=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const m=s+f,g=a+f,y=h-v,S=p+(i-v),b=c*a/g*m,_=l*a/g*m;e.projectionMatrix.makePerspective(y,S,b,_,m,g),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(E,w,x):E.projectionMatrix.copy(w.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*_l*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,E,t)},this.getCamera=function(){return E},this.getFoveation=function(){if(null!==d||null!==h)return a},this.setFoveation=function(e){a=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==f.texture};let D=null;const L=new Ah;L.setAnimationLoop((function(t,r){if(l=r.getViewerPose(c||o),p=r,null!==l){const t=l.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==E.cameras.length&&(E.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){const r=t[i];let o=null;if(null!==h)o=h.getViewport(r);else{const t=u.getViewSubImage(d,r);o=t.viewport,0===i&&(e.setRenderTargetTextures(g,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let s=C[i];void 0===s&&(s=new yh,s.layers.enable(i),s.viewport=new Zl,C[i]=s),s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(r.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(o.x,o.y,o.width,o.height),0===i&&(E.matrix.copy(s.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),!0===n&&E.cameras.push(s)}const r=i.enabledFeatures;if(r&&r.includes("depth-sensing")){const n=u.getDepthInformation(t[0]);n&&n.isValid&&n.texture&&f.init(e,n,i.renderState)}}for(let e=0;e<y.length;e++){const t=S[e],n=y[e];null!==t&&void 0!==n&&n.update(t,r,c||o)}f.render(e,E),D&&D(t,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),p=null})),this.setAnimationLoop=function(e){D=e},this.dispose=function(){}}}const fv=new Gu,vv=new Lu;function mv(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(i,r){i.opacity.value=r.opacity,r.color&&i.diffuse.value.copy(r.color),r.emissive&&i.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(i.map.value=r.map,n(r.map,i.mapTransform)),r.alphaMap&&(i.alphaMap.value=r.alphaMap,n(r.alphaMap,i.alphaMapTransform)),r.bumpMap&&(i.bumpMap.value=r.bumpMap,n(r.bumpMap,i.bumpMapTransform),i.bumpScale.value=r.bumpScale,r.side===ac&&(i.bumpScale.value*=-1)),r.normalMap&&(i.normalMap.value=r.normalMap,n(r.normalMap,i.normalMapTransform),i.normalScale.value.copy(r.normalScale),r.side===ac&&i.normalScale.value.negate()),r.displacementMap&&(i.displacementMap.value=r.displacementMap,n(r.displacementMap,i.displacementMapTransform),i.displacementScale.value=r.displacementScale,i.displacementBias.value=r.displacementBias),r.emissiveMap&&(i.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,i.emissiveMapTransform)),r.specularMap&&(i.specularMap.value=r.specularMap,n(r.specularMap,i.specularMapTransform)),r.alphaTest>0&&(i.alphaTest.value=r.alphaTest);const o=t.get(r),s=o.envMap,a=o.envMapRotation;if(s&&(i.envMap.value=s,fv.copy(a),fv.x*=-1,fv.y*=-1,fv.z*=-1,s.isCubeTexture&&!1===s.isRenderTargetTexture&&(fv.y*=-1,fv.z*=-1),i.envMapRotation.value.setFromMatrix4(vv.makeRotationFromEuler(fv)),i.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,i.reflectivity.value=r.reflectivity,i.ior.value=r.ior,i.refractionRatio.value=r.refractionRatio),r.lightMap){i.lightMap.value=r.lightMap;const t=!0===e._useLegacyLights?Math.PI:1;i.lightMapIntensity.value=r.lightMapIntensity*t,n(r.lightMap,i.lightMapTransform)}r.aoMap&&(i.aoMap.value=r.aoMap,i.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,i.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,dh(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,o,s,a){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(e,r):r.isMeshToonMaterial?(i(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(i(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(i(e,r),function(e,i){e.metalness.value=i.metalness,i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap,n(i.metalnessMap,e.metalnessMapTransform));e.roughness.value=i.roughness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap,n(i.roughnessMap,e.roughnessMapTransform));const r=t.get(i).envMap;r&&(e.envMapIntensity.value=i.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===ac&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,r,a)):r.isMeshMatcapMaterial?(i(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?i(e,r):r.isMeshDistanceMaterial?(i(e,r),function(e,n){const i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}(e,r)):r.isMeshNormalMaterial?i(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,i,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r,o,s):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function gv(e,t,n,i){let r={},o={},s=[];const a=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function c(e,t,n,i){const r=e.value,o=t+"_"+n;if(void 0===i[o])return i[o]="number"===typeof r||"boolean"===typeof r?r:r.clone(),!0;{const e=i[o];if("number"===typeof r||"boolean"===typeof r){if(e!==r)return i[o]=r,!0}else if(!1===e.equals(r))return e.copy(r),!0}return!1}function l(e){const t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const i=s.indexOf(n.__bindingPointIndex);s.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete o[n.id]}return{bind:function(e,t){const n=t.program;i.uniformBlockBinding(e,n)},update:function(n,d){let h=r[n.id];void 0===h&&(!function(e){const t=e.uniforms;let n=0;const i=16;for(let o=0,s=t.length;o<s;o++){const e=Array.isArray(t[o])?t[o]:[t[o]];for(let t=0,r=e.length;t<r;t++){const r=e[t],o=Array.isArray(r.value)?r.value:[r.value];for(let e=0,t=o.length;e<t;e++){const t=l(o[e]),s=n%i;0!==s&&i-s<t.boundary&&(n+=i-s),r.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=n,n+=t.storage}}}const r=n%i;r>0&&(n+=i-r);e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<a;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,o=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,i),e.bufferData(e.UNIFORM_BUFFER,r,o),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=h,n.addEventListener("dispose",u));const p=d.program;i.updateUBOMapping(n,p);const f=t.render.frame;o[n.id]!==f&&(!function(t){const n=r[t.id],i=t.uniforms,o=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let r=0,s=i.length;r<s;r++){const t=Array.isArray(i[r])?i[r]:[i[r]];for(let n=0,i=t.length;n<i;n++){const i=t[n];if(!0===c(i,r,n,o)){const t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let o=0;o<n.length;o++){const s=n[o],a=l(s);"number"===typeof s||"boolean"===typeof s?(i.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+r,i.__data)):s.isMatrix3?(i.__data[0]=s.elements[0],i.__data[1]=s.elements[1],i.__data[2]=s.elements[2],i.__data[3]=0,i.__data[4]=s.elements[3],i.__data[5]=s.elements[4],i.__data[6]=s.elements[5],i.__data[7]=0,i.__data[8]=s.elements[6],i.__data[9]=s.elements[7],i.__data[10]=s.elements[8],i.__data[11]=0):(s.toArray(i.__data,r),r+=a.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),o[n.id]=f)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);s=[],r={},o={}}}}class yv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=Nl(),context:n=null,depth:i=!0,stencil:r=!0,alpha:o=!1,antialias:s=!1,premultipliedAlpha:a=!0,preserveDrawingBuffer:c=!1,powerPreference:l="default",failIfMajorPerformanceCaveat:u=!1}=e;let d;this.isWebGLRenderer=!0,d=null!==n?n.getContextAttributes().alpha:o;const h=new Uint32Array(4),p=new Int32Array(4);let f=null,v=null;const m=[],g=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=il,this._useLegacyLights=!1,this.toneMapping=hc,this.toneMappingExposure=1;const y=this;let S=!1,b=0,_=0,w=null,x=-1,C=null;const E=new Zl,P=new Zl;let T=null;const R=new Cd(0);let M=0,A=t.width,I=t.height,k=1,O=null,D=null;const L=new Zl(0,0,A,I),N=new Zl(0,0,A,I);let z=!1;const F=new Mh;let U=!1,B=!1,j=null;const V=new Lu,H=new Il,W=new ou,G={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function q(){return null===w?k:1}let X,K,J,Y,$,Q,Z,ee,te,ne,ie,re,oe,se,ae,ce,le,ue,de,he,pe,fe,ve,me,ge=n;function ye(e,n){for(let i=0;i<e.length;i++){const r=e[i],o=t.getContext(r,n);if(null!==o)return o}return null}try{const e={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:c,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(nc)),t.addEventListener("webglcontextlost",_e,!1),t.addEventListener("webglcontextrestored",we,!1),t.addEventListener("webglcontextcreationerror",xe,!1),null===ge){const t=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&t.shift(),ge=ye(t,e),null===ge)throw ye(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!==typeof WebGLRenderingContext&&ge instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===ge.getShaderPrecisionFormat&&(ge.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ze){throw console.error("THREE.WebGLRenderer: "+ze.message),ze}function Se(){X=new cp(ge),K=new Vh(ge,X,e),X.init(K),fe=new av(ge,X,K),J=new ov(ge,X,K),Y=new dp(ge),$=new Gf,Q=new sv(ge,X,J,$,K,fe,Y),Z=new Wh(y),ee=new ap(y),te=new Ih(ge,K),ve=new Bh(ge,X,te,K),ne=new lp(ge,te,Y,ve),ie=new vp(ge,ne,te,Y),de=new fp(ge,K,Q),ce=new Hh($),re=new Wf(y,Z,ee,X,K,ve,ce),oe=new mv(y,$),se=new Jf,ae=new tv(X,K),ue=new Uh(y,Z,ee,J,ie,d,a),le=new rv(y,ie,K),me=new gv(ge,Y,K,J),he=new jh(ge,X,Y,K),pe=new up(ge,X,Y,K),Y.programs=re.programs,y.capabilities=K,y.extensions=X,y.properties=$,y.renderLists=se,y.shadowMap=le,y.state=J,y.info=Y}Se();const be=new pv(y,ge);function _e(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function we(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const e=Y.autoReset,t=le.enabled,n=le.autoUpdate,i=le.needsUpdate,r=le.type;Se(),Y.autoReset=e,le.enabled=t,le.autoUpdate=n,le.needsUpdate=i,le.type=r}function xe(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ce(e){const t=e.target;t.removeEventListener("dispose",Ce),function(e){(function(e){const t=$.get(e).programs;void 0!==t&&(t.forEach((function(e){re.releaseProgram(e)})),e.isShaderMaterial&&re.releaseShaderCache(e))})(e),$.remove(e)}(t)}function Ee(e,t,n){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=ac,e.needsUpdate=!0,De(e,t,n),e.side=sc,e.needsUpdate=!0,De(e,t,n),e.side=2):De(e,t,n)}this.xr=be,this.getContext=function(){return ge},this.getContextAttributes=function(){return ge.getContextAttributes()},this.forceContextLoss=function(){const e=X.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=X.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(e){void 0!==e&&(k=e,this.setSize(A,I,!1))},this.getSize=function(e){return e.set(A,I)},this.setSize=function(e,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];be.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(A=e,I=n,t.width=Math.floor(e*k),t.height=Math.floor(n*k),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(A*k,I*k).floor()},this.setDrawingBufferSize=function(e,n,i){A=e,I=n,k=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(E)},this.getViewport=function(e){return e.copy(L)},this.setViewport=function(e,t,n,i){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,i),J.viewport(E.copy(L).multiplyScalar(k).round())},this.getScissor=function(e){return e.copy(N)},this.setScissor=function(e,t,n,i){e.isVector4?N.set(e.x,e.y,e.z,e.w):N.set(e,t,n,i),J.scissor(P.copy(N).multiplyScalar(k).round())},this.getScissorTest=function(){return z},this.setScissorTest=function(e){J.setScissorTest(z=e)},this.setOpaqueSort=function(e){O=e},this.setTransparentSort=function(e){D=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==w){const t=w.texture.format;e=1033===t||1031===t||1029===t}if(e){const e=w.texture.type,t=e===Dc||e===zc||e===Lc||e===Bc||1017===e||1018===e,n=ue.getClearColor(),i=ue.getClearAlpha(),r=n.r,o=n.g,s=n.b;t?(h[0]=r,h[1]=o,h[2]=s,h[3]=i,ge.clearBufferuiv(ge.COLOR,0,h)):(p[0]=r,p[1]=o,p[2]=s,p[3]=i,ge.clearBufferiv(ge.COLOR,0,p))}else n|=ge.COLOR_BUFFER_BIT}e&&(n|=ge.DEPTH_BUFFER_BIT),t&&(n|=ge.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ge.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",_e,!1),t.removeEventListener("webglcontextrestored",we,!1),t.removeEventListener("webglcontextcreationerror",xe,!1),se.dispose(),ae.dispose(),$.dispose(),Z.dispose(),ee.dispose(),ie.dispose(),ve.dispose(),me.dispose(),re.dispose(),be.dispose(),be.removeEventListener("sessionstart",Te),be.removeEventListener("sessionend",Re),j&&(j.dispose(),j=null),Me.stop()},this.renderBufferDirect=function(e,t,n,i,r,o){null===t&&(t=G);const s=r.isMesh&&r.matrixWorld.determinant()<0,a=function(e,t,n,i,r){!0!==t.isScene&&(t=G);Q.resetTextureUnits();const o=t.fog,s=i.isMeshStandardMaterial?t.environment:null,a=null===w?y.outputColorSpace:!0===w.isXRRenderTarget?w.texture.colorSpace:rl,c=(i.isMeshStandardMaterial?ee:Z).get(i.envMap||s),l=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=hc;i.toneMapped&&(null!==w&&!0!==w.isXRRenderTarget||(f=y.toneMapping));const m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,g=void 0!==m?m.length:0,S=$.get(i),b=v.state.lights;if(!0===U&&(!0===B||e!==C)){const t=e===C&&i.id===x;ce.setState(i,e,t)}let _=!1;i.version===S.__version?S.needsLights&&S.lightsStateVersion!==b.state.version||S.outputColorSpace!==a||r.isBatchedMesh&&!1===S.batching?_=!0:r.isBatchedMesh||!0!==S.batching?r.isInstancedMesh&&!1===S.instancing?_=!0:r.isInstancedMesh||!0!==S.instancing?r.isSkinnedMesh&&!1===S.skinning?_=!0:r.isSkinnedMesh||!0!==S.skinning?r.isInstancedMesh&&!0===S.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===S.instancingColor&&null!==r.instanceColor||r.isInstancedMesh&&!0===S.instancingMorph&&null===r.morphTexture||r.isInstancedMesh&&!1===S.instancingMorph&&null!==r.morphTexture||S.envMap!==c||!0===i.fog&&S.fog!==o?_=!0:void 0===S.numClippingPlanes||S.numClippingPlanes===ce.numPlanes&&S.numIntersection===ce.numIntersection?(S.vertexAlphas!==l||S.vertexTangents!==u||S.morphTargets!==d||S.morphNormals!==h||S.morphColors!==p||S.toneMapping!==f||!0===K.isWebGL2&&S.morphTargetsCount!==g)&&(_=!0):_=!0:_=!0:_=!0:_=!0:(_=!0,S.__version=i.version);let E=S.currentProgram;!0===_&&(E=De(i,t,r));let P=!1,T=!1,R=!1;const M=E.getUniforms(),A=S.uniforms;J.useProgram(E.program)&&(P=!0,T=!0,R=!0);i.id!==x&&(x=i.id,T=!0);if(P||C!==e){M.setValue(ge,"projectionMatrix",e.projectionMatrix),M.setValue(ge,"viewMatrix",e.matrixWorldInverse);const t=M.map.cameraPosition;void 0!==t&&t.setValue(ge,W.setFromMatrixPosition(e.matrixWorld)),K.logarithmicDepthBuffer&&M.setValue(ge,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&M.setValue(ge,"isOrthographic",!0===e.isOrthographicCamera),C!==e&&(C=e,T=!0,R=!0)}if(r.isSkinnedMesh){M.setOptional(ge,r,"bindMatrix"),M.setOptional(ge,r,"bindMatrixInverse");const e=r.skeleton;e&&(K.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),M.setValue(ge,"boneTexture",e.boneTexture,Q)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}r.isBatchedMesh&&(M.setOptional(ge,r,"batchingTexture"),M.setValue(ge,"batchingTexture",r._matricesTexture,Q));const O=n.morphAttributes;(void 0!==O.position||void 0!==O.normal||void 0!==O.color&&!0===K.isWebGL2)&&de.update(r,n,E);(T||S.receiveShadow!==r.receiveShadow)&&(S.receiveShadow=r.receiveShadow,M.setValue(ge,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(A.envMap.value=c,A.flipEnvMap.value=c.isCubeTexture&&!1===c.isRenderTargetTexture?-1:1);T&&(M.setValue(ge,"toneMappingExposure",y.toneMappingExposure),S.needsLights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(A,R),o&&!0===i.fog&&oe.refreshFogUniforms(A,o),oe.refreshMaterialUniforms(A,i,k,I,j),wf.upload(ge,Le(S),A,Q));i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(wf.upload(ge,Le(S),A,Q),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&M.setValue(ge,"center",r.center);if(M.setValue(ge,"modelViewMatrix",r.modelViewMatrix),M.setValue(ge,"normalMatrix",r.normalMatrix),M.setValue(ge,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(K.isWebGL2){const n=e[t];me.update(n,E),me.bind(n,E)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return E}(e,t,n,i,r);J.setMaterial(i,s);let c=n.index,l=1;if(!0===i.wireframe){if(c=ne.getWireframeAttribute(n),void 0===c)return;l=2}const u=n.drawRange,d=n.attributes.position;let h=u.start*l,p=(u.start+u.count)*l;null!==o&&(h=Math.max(h,o.start*l),p=Math.min(p,(o.start+o.count)*l)),null!==c?(h=Math.max(h,0),p=Math.min(p,c.count)):void 0!==d&&null!==d&&(h=Math.max(h,0),p=Math.min(p,d.count));const f=p-h;if(f<0||f===1/0)return;let m;ve.setup(r,i,a,n,c);let g=he;if(null!==c&&(m=te.get(c),g=pe,g.setIndex(m)),r.isMesh)!0===i.wireframe?(J.setLineWidth(i.wireframeLinewidth*q()),g.setMode(ge.LINES)):g.setMode(ge.TRIANGLES);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),J.setLineWidth(e*q()),r.isLineSegments?g.setMode(ge.LINES):r.isLineLoop?g.setMode(ge.LINE_LOOP):g.setMode(ge.LINE_STRIP)}else r.isPoints?g.setMode(ge.POINTS):r.isSprite&&g.setMode(ge.TRIANGLES);if(r.isBatchedMesh)g.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount);else if(r.isInstancedMesh)g.renderInstances(h,f,r.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);g.renderInstances(h,f,t)}else g.render(h,f)},this.compile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),v=ae.get(n),v.init(),g.push(v),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(v.pushLight(e),e.castShadow&&v.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(v.pushLight(e),e.castShadow&&v.pushShadow(e))})),v.setupLights(y._useLegacyLights);const i=new Set;return e.traverse((function(e){const t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){const o=t[r];Ee(o,n,e),i.add(o)}else Ee(t,n,e),i.add(t)})),g.pop(),v=null,i},this.compileAsync=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=this.compile(e,t,n);return new Promise((t=>{function n(){i.forEach((function(e){$.get(e).currentProgram.isReady()&&i.delete(e)})),0!==i.size?setTimeout(n,10):t(e)}null!==X.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let Pe=null;function Te(){Me.stop()}function Re(){Me.start()}const Me=new Ah;function Ae(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)v.pushLight(e),e.castShadow&&v.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||F.intersectsSprite(e)){i&&W.setFromMatrixPosition(e.matrixWorld).applyMatrix4(V);const t=ie.update(e),r=e.material;r.visible&&f.push(e,t,r,n,W.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||F.intersectsObject(e))){const t=ie.update(e),r=e.material;if(i&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),W.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),W.copy(t.boundingSphere.center)),W.applyMatrix4(e.matrixWorld).applyMatrix4(V)),Array.isArray(r)){const i=t.groups;for(let o=0,s=i.length;o<s;o++){const s=i[o],a=r[s.materialIndex];a&&a.visible&&f.push(e,t,a,n,W.z,s)}}else r.visible&&f.push(e,t,r,n,W.z,null)}const r=e.children;for(let o=0,s=r.length;o<s;o++)Ae(r[o],t,n,i)}function Ie(e,t,n,i){const r=e.opaque,o=e.transmissive,s=e.transparent;v.setupLightsView(n),!0===U&&ce.setGlobalState(y.clippingPlanes,n),o.length>0&&function(e,t,n,i){const r=!0===n.isScene?n.overrideMaterial:null;if(null!==r)return;const o=K.isWebGL2;null===j&&(j=new tu(1,1,{generateMipmaps:!0,type:X.has("EXT_color_buffer_half_float")?Uc:Dc,minFilter:Oc,samples:o?4:0}));y.getDrawingBufferSize(H),o?j.setSize(H.x,H.y):j.setSize(Tl(H.x),Tl(H.y));const s=y.getRenderTarget();y.setRenderTarget(j),y.getClearColor(R),M=y.getClearAlpha(),M<1&&y.setClearColor(16777215,.5);y.clear();const a=y.toneMapping;y.toneMapping=hc,ke(e,n,i),Q.updateMultisampleRenderTarget(j),Q.updateRenderTargetMipmap(j);let c=!1;for(let l=0,u=t.length;l<u;l++){const e=t[l],r=e.object,o=e.geometry,s=e.material,a=e.group;if(2===s.side&&r.layers.test(i.layers)){const e=s.side;s.side=ac,s.needsUpdate=!0,Oe(r,n,i,o,s,a),s.side=e,s.needsUpdate=!0,c=!0}}!0===c&&(Q.updateMultisampleRenderTarget(j),Q.updateRenderTargetMipmap(j));y.setRenderTarget(s),y.setClearColor(R,M),y.toneMapping=a}(r,o,t,n),i&&J.viewport(E.copy(i)),r.length>0&&ke(r,t,n),o.length>0&&ke(o,t,n),s.length>0&&ke(s,t,n),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1)}function ke(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,o=e.length;r<o;r++){const o=e[r],s=o.object,a=o.geometry,c=null===i?o.material:i,l=o.group;s.layers.test(n.layers)&&Oe(s,t,n,a,c,l)}}function Oe(e,t,n,i,r,o){e.onBeforeRender(y,t,n,i,r,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(y,t,n,i,e,o),!0===r.transparent&&2===r.side&&!1===r.forceSinglePass?(r.side=ac,r.needsUpdate=!0,y.renderBufferDirect(n,t,i,r,e,o),r.side=sc,r.needsUpdate=!0,y.renderBufferDirect(n,t,i,r,e,o),r.side=2):y.renderBufferDirect(n,t,i,r,e,o),e.onAfterRender(y,t,n,i,r,o)}function De(e,t,n){!0!==t.isScene&&(t=G);const i=$.get(e),r=v.state.lights,o=v.state.shadowsArray,s=r.state.version,a=re.getParameters(e,r.state,o,t,n),c=re.getProgramCacheKey(a);let l=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?ee:Z).get(e.envMap||i.environment),i.envMapRotation=null!==i.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===l&&(e.addEventListener("dispose",Ce),l=new Map,i.programs=l);let u=l.get(c);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===s)return Ne(e,a),u}else a.uniforms=re.getUniforms(e),e.onBuild(n,a,y),e.onBeforeCompile(a,y),u=re.acquireProgram(a,c),l.set(c,u),i.uniforms=a.uniforms;const d=i.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=ce.uniform),Ne(e,a),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=s,i.needsLights&&(d.ambientLightColor.value=r.state.ambient,d.lightProbe.value=r.state.probe,d.directionalLights.value=r.state.directional,d.directionalLightShadows.value=r.state.directionalShadow,d.spotLights.value=r.state.spot,d.spotLightShadows.value=r.state.spotShadow,d.rectAreaLights.value=r.state.rectArea,d.ltc_1.value=r.state.rectAreaLTC1,d.ltc_2.value=r.state.rectAreaLTC2,d.pointLights.value=r.state.point,d.pointLightShadows.value=r.state.pointShadow,d.hemisphereLights.value=r.state.hemi,d.directionalShadowMap.value=r.state.directionalShadowMap,d.directionalShadowMatrix.value=r.state.directionalShadowMatrix,d.spotShadowMap.value=r.state.spotShadowMap,d.spotLightMatrix.value=r.state.spotLightMatrix,d.spotLightMap.value=r.state.spotLightMap,d.pointShadowMap.value=r.state.pointShadowMap,d.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=u,i.uniformsList=null,u}function Le(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=wf.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Ne(e,t){const n=$.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Me.setAnimationLoop((function(e){Pe&&Pe(e)})),"undefined"!==typeof self&&Me.setContext(self),this.setAnimationLoop=function(e){Pe=e,be.setAnimationLoop(e),null===e?Me.stop():Me.start()},be.addEventListener("sessionstart",Te),be.addEventListener("sessionend",Re),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===S)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===be.enabled&&!0===be.isPresenting&&(!0===be.cameraAutoUpdate&&be.updateCamera(t),t=be.getCamera()),!0===e.isScene&&e.onBeforeRender(y,e,t,w),v=ae.get(e,g.length),v.init(),g.push(v),V.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),F.setFromProjectionMatrix(V),B=this.localClippingEnabled,U=ce.init(this.clippingPlanes,B),f=se.get(e,m.length),f.init(),m.push(f),Ae(e,t,0,y.sortObjects),f.finish(),!0===y.sortObjects&&f.sort(O,D),this.info.render.frame++,!0===U&&ce.beginShadows();const n=v.state.shadowsArray;if(le.render(n,e,t),!0===U&&ce.endShadows(),!0===this.info.autoReset&&this.info.reset(),!1!==be.enabled&&!1!==be.isPresenting&&!1!==be.hasDepthSensing()||ue.render(f,e),v.setupLights(y._useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,i=n.length;t<i;t++){const i=n[t];Ie(f,e,i,i.viewport)}}else Ie(f,e,t);null!==w&&(Q.updateMultisampleRenderTarget(w),Q.updateRenderTargetMipmap(w)),!0===e.isScene&&e.onAfterRender(y,e,t),ve.resetDefaultState(),x=-1,C=null,g.pop(),v=g.length>0?g[g.length-1]:null,m.pop(),f=m.length>0?m[m.length-1]:null},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(e,t,n){$.get(e.texture).__webglTexture=t,$.get(e.depthTexture).__webglTexture=n;const i=$.get(e);i.__hasExternalTextures=!0,i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===X.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){const n=$.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;w=e,b=t,_=n;let i=!0,r=null,o=!1,s=!1;if(e){const a=$.get(e);void 0!==a.__useDefaultFramebuffer?(J.bindFramebuffer(ge.FRAMEBUFFER,null),i=!1):void 0===a.__webglFramebuffer?Q.setupRenderTarget(e):a.__hasExternalTextures&&Q.rebindTextures(e,$.get(e.texture).__webglTexture,$.get(e.depthTexture).__webglTexture);const c=e.texture;(c.isData3DTexture||c.isDataArrayTexture||c.isCompressedArrayTexture)&&(s=!0);const l=$.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=Array.isArray(l[t])?l[t][n]:l[t],o=!0):r=K.isWebGL2&&e.samples>0&&!1===Q.useMultisampledRTT(e)?$.get(e).__webglMultisampledFramebuffer:Array.isArray(l)?l[n]:l,E.copy(e.viewport),P.copy(e.scissor),T=e.scissorTest}else E.copy(L).multiplyScalar(k).floor(),P.copy(N).multiplyScalar(k).floor(),T=z;if(J.bindFramebuffer(ge.FRAMEBUFFER,r)&&K.drawBuffers&&i&&J.drawBuffers(e,r),J.viewport(E),J.scissor(P),J.setScissorTest(T),o){const i=$.get(e.texture);ge.framebufferTexture2D(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,ge.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,n)}else if(s){const i=$.get(e.texture),r=t||0;ge.framebufferTextureLayer(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,i.__webglTexture,n||0,r)}x=-1},this.readRenderTargetPixels=function(e,t,n,i,r,o,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=$.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){J.bindFramebuffer(ge.FRAMEBUFFER,a);try{const s=e.texture,a=s.format,c=s.type;if(a!==jc&&fe.convert(a)!==ge.getParameter(ge.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const l=c===Uc&&(X.has("EXT_color_buffer_half_float")||K.isWebGL2&&X.has("EXT_color_buffer_float"));if(c!==Dc&&fe.convert(c)!==ge.getParameter(ge.IMPLEMENTATION_COLOR_READ_TYPE)&&(c!==Fc||!(K.isWebGL2||X.has("OES_texture_float")||X.has("WEBGL_color_buffer_float")))&&!l)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&ge.readPixels(t,n,i,r,fe.convert(a),fe.convert(c),o)}finally{const e=null!==w?$.get(w).__webglFramebuffer:null;J.bindFramebuffer(ge.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),o=Math.floor(t.image.height*i);Q.setTexture2D(t,0),ge.copyTexSubImage2D(ge.TEXTURE_2D,n,0,0,e.x,e.y,r,o),J.unbindTexture()},this.copyTextureToTexture=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=t.image.width,o=t.image.height,s=fe.convert(n.format),a=fe.convert(n.type);Q.setTexture2D(n,0),ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,n.flipY),ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),ge.pixelStorei(ge.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?ge.texSubImage2D(ge.TEXTURE_2D,i,e.x,e.y,r,o,s,a,t.image.data):t.isCompressedTexture?ge.compressedTexSubImage2D(ge.TEXTURE_2D,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):ge.texSubImage2D(ge.TEXTURE_2D,i,e.x,e.y,s,a,t.image),0===i&&n.generateMipmaps&&ge.generateMipmap(ge.TEXTURE_2D),J.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=Math.round(e.max.x-e.min.x),s=Math.round(e.max.y-e.min.y),a=e.max.z-e.min.z+1,c=fe.convert(i.format),l=fe.convert(i.type);let u;if(i.isData3DTexture)Q.setTexture3D(i,0),u=ge.TEXTURE_3D;else{if(!i.isDataArrayTexture&&!i.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Q.setTexture2DArray(i,0),u=ge.TEXTURE_2D_ARRAY}ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,i.flipY),ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),ge.pixelStorei(ge.UNPACK_ALIGNMENT,i.unpackAlignment);const d=ge.getParameter(ge.UNPACK_ROW_LENGTH),h=ge.getParameter(ge.UNPACK_IMAGE_HEIGHT),p=ge.getParameter(ge.UNPACK_SKIP_PIXELS),f=ge.getParameter(ge.UNPACK_SKIP_ROWS),v=ge.getParameter(ge.UNPACK_SKIP_IMAGES),m=n.isCompressedTexture?n.mipmaps[r]:n.image;ge.pixelStorei(ge.UNPACK_ROW_LENGTH,m.width),ge.pixelStorei(ge.UNPACK_IMAGE_HEIGHT,m.height),ge.pixelStorei(ge.UNPACK_SKIP_PIXELS,e.min.x),ge.pixelStorei(ge.UNPACK_SKIP_ROWS,e.min.y),ge.pixelStorei(ge.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?ge.texSubImage3D(u,r,t.x,t.y,t.z,o,s,a,c,l,m.data):i.isCompressedArrayTexture?ge.compressedTexSubImage3D(u,r,t.x,t.y,t.z,o,s,a,c,m.data):ge.texSubImage3D(u,r,t.x,t.y,t.z,o,s,a,c,l,m),ge.pixelStorei(ge.UNPACK_ROW_LENGTH,d),ge.pixelStorei(ge.UNPACK_IMAGE_HEIGHT,h),ge.pixelStorei(ge.UNPACK_SKIP_PIXELS,p),ge.pixelStorei(ge.UNPACK_SKIP_ROWS,f),ge.pixelStorei(ge.UNPACK_SKIP_IMAGES,v),0===r&&i.generateMipmaps&&ge.generateMipmap(u),J.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?Q.setTextureCube(e,0):e.isData3DTexture?Q.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Q.setTexture2DArray(e,0):Q.setTexture2D(e,0),J.unbindTexture()},this.resetState=function(){b=0,_=0,w=null,J.reset(),ve.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return vl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===ol?"display-p3":"srgb",t.unpackColorSpace=Hl.workingColorSpace===sl?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}(class extends yv{}).prototype.isWebGL1Renderer=!0;class Sv extends cd{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Gu,this.environmentRotation=new Gu,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class bv extends Ql{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:Rc,arguments.length>9&&void 0!==arguments[9]?arguments[9]:Rc,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class _v{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const r=n.length;let o;o=t||e*n[r-1];let s,a=0,c=r-1;for(;a<=c;)if(i=Math.floor(a+(c-a)/2),s=n[i]-o,s<0)a=i+1;else{if(!(s>0)){c=i;break}c=i-1}if(i=c,n[i]===o)return i/(r-1);const l=n[i];return(i+(o-l)/(n[i+1]-l))/(r-1)}getTangent(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const o=this.getPoint(i),s=this.getPoint(r),a=t||(o.isVector2?new Il:new ou);return a.copy(s).sub(o).normalize(),a}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new ou,i=[],r=[],o=[],s=new ou,a=new Lu;for(let h=0;h<=e;h++){const t=h/e;i[h]=this.getTangentAt(t,new ou)}r[0]=new ou,o[0]=new ou;let c=Number.MAX_VALUE;const l=Math.abs(i[0].x),u=Math.abs(i[0].y),d=Math.abs(i[0].z);l<=c&&(c=l,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),d<=c&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],s),o[0].crossVectors(i[0],r[0]);for(let h=1;h<=e;h++){if(r[h]=r[h-1].clone(),o[h]=o[h-1].clone(),s.crossVectors(i[h-1],i[h]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(xl(i[h-1].dot(i[h]),-1,1));r[h].applyMatrix4(a.makeRotationAxis(s,e))}o[h].crossVectors(i[h],r[h])}if(!0===t){let t=Math.acos(xl(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(s.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(a.makeRotationAxis(i[n],t*n)),o[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class wv extends _v{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Il,n=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const r=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=r?0:n),!0!==this.aClockwise||r||(i===n?i=-n:i-=n);const o=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(o),a=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,i=a-this.aY;s=n*e-i*t+this.aX,a=n*t+i*e+this.aY}return t.set(s,a)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function xv(){let e=0,t=0,n=0,i=0;function r(r,o,s,a){e=r,t=s,n=-3*r+3*o-2*s-a,i=2*r-2*o+s+a}return{initCatmullRom:function(e,t,n,i,o){r(t,n,o*(n-e),o*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,o,s,a){let c=(t-e)/o-(n-e)/(o+s)+(n-t)/s,l=(n-t)/s-(i-t)/(s+a)+(i-n)/a;c*=s,l*=s,r(t,n,c,l)},calc:function(r){const o=r*r;return e+t*r+n*o+i*(o*r)}}}const Cv=new ou,Ev=new xv,Pv=new xv,Tv=new xv;function Rv(e,t,n,i,r){const o=.5*(i-t),s=.5*(r-n),a=e*e;return(2*n-2*i+o+s)*(e*a)+(-3*n+3*i-2*o-s)*a+o*e+n}function Mv(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function Av(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}class Iv extends _v{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Il,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Il,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Il,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Il;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Il,n=this.v0,i=this.v1,r=this.v2,o=this.v3;return t.set(Av(e,n.x,i.x,r.x,o.x),Av(e,n.y,i.y,r.y,o.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class kv extends _v{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Il,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Il;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Il;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Il).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ov extends _v{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Il,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Il,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Il;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Il,n=this.v0,i=this.v1,r=this.v2;return t.set(Mv(e,n.x,i.x,r.x),Mv(e,n.y,i.y,r.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Dv extends _v{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ou,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ou,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ou;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ou,n=this.v0,i=this.v1,r=this.v2;return t.set(Mv(e,n.x,i.x,r.x),Mv(e,n.y,i.y,r.y),Mv(e,n.z,i.z,r.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Lv extends _v{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Il,n=this.points,i=(n.length-1)*e,r=Math.floor(i),o=i-r,s=n[0===r?r:r-1],a=n[r],c=n[r>n.length-2?n.length-1:r+1],l=n[r>n.length-3?n.length-1:r+2];return t.set(Rv(o,s.x,a.x,c.x,l.x),Rv(o,s.y,a.y,c.y,l.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Il).fromArray(n))}return this}}var Nv=Object.freeze({__proto__:null,ArcCurve:class extends wv{constructor(e,t,n,i,r,o){super(e,t,n,n,i,r,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends _v{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ou,n=this.points,i=n.length,r=(i-(this.closed?0:1))*e;let o,s,a=Math.floor(r),c=r-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/i)+1)*i:0===c&&a===i-1&&(a=i-2,c=1),this.closed||a>0?o=n[(a-1)%i]:(Cv.subVectors(n[0],n[1]).add(n[0]),o=Cv);const l=n[a%i],u=n[(a+1)%i];if(this.closed||a+2<i?s=n[(a+2)%i]:(Cv.subVectors(n[i-1],n[i-2]).add(n[i-1]),s=Cv),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(l),e),n=Math.pow(l.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),Ev.initNonuniformCatmullRom(o.x,l.x,u.x,s.x,t,n,i),Pv.initNonuniformCatmullRom(o.y,l.y,u.y,s.y,t,n,i),Tv.initNonuniformCatmullRom(o.z,l.z,u.z,s.z,t,n,i)}else"catmullrom"===this.curveType&&(Ev.initCatmullRom(o.x,l.x,u.x,s.x,this.tension),Pv.initCatmullRom(o.y,l.y,u.y,s.y,this.tension),Tv.initCatmullRom(o.z,l.z,u.z,s.z,this.tension));return t.set(Ev.calc(c),Pv.calc(c),Tv.calc(c)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new ou).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:Iv,CubicBezierCurve3:class extends _v{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ou,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ou,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ou,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ou;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ou,n=this.v0,i=this.v1,r=this.v2,o=this.v3;return t.set(Av(e,n.x,i.x,r.x,o.x),Av(e,n.y,i.y,r.y,o.y),Av(e,n.z,i.z,r.z,o.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:wv,LineCurve:kv,LineCurve3:class extends _v{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ou,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ou;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ou;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ou).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Ov,QuadraticBezierCurve3:Dv,SplineCurve:Lv});class zv extends _v{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new Nv[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const e=i[r]-n,o=this.curves[r],s=o.getLength(),a=0===s?0:1-e/s;return o.getPointAt(a,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const o=r[i],s=o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,a=o.getPoints(s);for(let e=0;e<a.length;e++){const i=a[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Nv[n.type]).fromJSON(n))}return this}}class Fv extends zv{constructor(e){super(),this.type="Path",this.currentPoint=new Il,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new kv(this.currentPoint.clone(),new Il(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new Ov(this.currentPoint.clone(),new Il(e,t),new Il(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,o){const s=new Iv(this.currentPoint.clone(),new Il(e,t),new Il(n,i),new Il(r,o));return this.curves.push(s),this.currentPoint.set(r,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Lv(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,o){const s=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+s,t+a,n,i,r,o),this}absarc(e,t,n,i,r,o){return this.absellipse(e,t,n,n,i,r,o),this}ellipse(e,t,n,i,r,o,s,a){const c=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+c,t+l,n,i,r,o,s,a),this}absellipse(e,t,n,i,r,o,s,a){const c=new wv(e,t,n,i,r,o,s,a);if(this.curves.length>0){const e=c.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(c);const l=c.getPoint(1);return this.currentPoint.copy(l),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Uv extends Fv{constructor(e){super(e),this.uuid=wl(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Fv).fromJSON(n))}return this}}const Bv=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=t&&t.length,r=i?t[0]*n:e.length;let o=jv(e,0,r,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,c,l,u,d,h,p;if(i&&(o=function(e,t,n,i){const r=[];let o,s,a,c,l;for(o=0,s=t.length;o<s;o++)a=t[o]*i,c=o<s-1?t[o+1]*i:e.length,l=jv(e,a,c,i,!1),l===l.next&&(l.steiner=!0),r.push(Qv(l));for(r.sort(Kv),o=0;o<r.length;o++)n=Jv(r[o],n);return n}(e,t,o,n)),e.length>80*n){a=l=e[0],c=u=e[1];for(let t=n;t<r;t+=n)d=e[t],h=e[t+1],d<a&&(a=d),h<c&&(c=h),d>l&&(l=d),h>u&&(u=h);p=Math.max(l-a,u-c),p=0!==p?32767/p:0}return Hv(o,s,n,a,c,p,0),s};function jv(e,t,n,i,r){let o,s;if(r===function(e,t,n,i){let r=0;for(let o=t,s=n-i;o<n;o+=i)r+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return r}(e,t,n,i)>0)for(o=t;o<n;o+=i)s=cm(o,e[o],e[o+1],s);else for(o=n-i;o>=t;o-=i)s=cm(o,e[o],e[o+1],s);return s&&nm(s,s.next)&&(lm(s),s=s.next),s}function Vv(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!nm(i,i.next)&&0!==tm(i.prev,i,i.next))i=i.next;else{if(lm(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function Hv(e,t,n,i,r,o,s){if(!e)return;!s&&o&&function(e,t,n,i){let r=e;do{0===r.z&&(r.z=$v(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n,i,r,o,s,a,c,l=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,i=n,a=0,t=0;t<l&&(a++,i=i.nextZ,i);t++);for(c=l;a>0||c>0&&i;)0!==a&&(0===c||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,c--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(s>1)}(r)}(e,i,r,o);let a,c,l=e;for(;e.prev!==e.next;)if(a=e.prev,c=e.next,o?Gv(e,i,r,o):Wv(e))t.push(a.i/n|0),t.push(e.i/n|0),t.push(c.i/n|0),lm(e),e=c.next,l=c.next;else if((e=c)===l){s?1===s?Hv(e=qv(Vv(e),t,n),t,n,i,r,o,2):2===s&&Xv(e,t,n,i,r,o):Hv(Vv(e),t,n,i,r,o,1);break}}function Wv(e){const t=e.prev,n=e,i=e.next;if(tm(t,n,i)>=0)return!1;const r=t.x,o=n.x,s=i.x,a=t.y,c=n.y,l=i.y,u=r<o?r<s?r:s:o<s?o:s,d=a<c?a<l?a:l:c<l?c:l,h=r>o?r>s?r:s:o>s?o:s,p=a>c?a>l?a:l:c>l?c:l;let f=i.next;for(;f!==t;){if(f.x>=u&&f.x<=h&&f.y>=d&&f.y<=p&&Zv(r,a,o,c,s,l,f.x,f.y)&&tm(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Gv(e,t,n,i){const r=e.prev,o=e,s=e.next;if(tm(r,o,s)>=0)return!1;const a=r.x,c=o.x,l=s.x,u=r.y,d=o.y,h=s.y,p=a<c?a<l?a:l:c<l?c:l,f=u<d?u<h?u:h:d<h?d:h,v=a>c?a>l?a:l:c>l?c:l,m=u>d?u>h?u:h:d>h?d:h,g=$v(p,f,t,n,i),y=$v(v,m,t,n,i);let S=e.prevZ,b=e.nextZ;for(;S&&S.z>=g&&b&&b.z<=y;){if(S.x>=p&&S.x<=v&&S.y>=f&&S.y<=m&&S!==r&&S!==s&&Zv(a,u,c,d,l,h,S.x,S.y)&&tm(S.prev,S,S.next)>=0)return!1;if(S=S.prevZ,b.x>=p&&b.x<=v&&b.y>=f&&b.y<=m&&b!==r&&b!==s&&Zv(a,u,c,d,l,h,b.x,b.y)&&tm(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;S&&S.z>=g;){if(S.x>=p&&S.x<=v&&S.y>=f&&S.y<=m&&S!==r&&S!==s&&Zv(a,u,c,d,l,h,S.x,S.y)&&tm(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;b&&b.z<=y;){if(b.x>=p&&b.x<=v&&b.y>=f&&b.y<=m&&b!==r&&b!==s&&Zv(a,u,c,d,l,h,b.x,b.y)&&tm(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function qv(e,t,n){let i=e;do{const r=i.prev,o=i.next.next;!nm(r,o)&&im(r,i,i.next,o)&&sm(r,o)&&sm(o,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(o.i/n|0),lm(i),lm(i.next),i=e=o),i=i.next}while(i!==e);return Vv(i)}function Xv(e,t,n,i,r,o){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&em(s,e)){let a=am(s,e);return s=Vv(s,s.next),a=Vv(a,a.next),Hv(s,t,n,i,r,o,0),void Hv(a,t,n,i,r,o,0)}e=e.next}s=s.next}while(s!==e)}function Kv(e,t){return e.x-t.x}function Jv(e,t){const n=function(e,t){let n,i=t,r=-1/0;const o=e.x,s=e.y;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){const e=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(e<=o&&e>r&&(r=e,n=i.x<i.next.x?i:i.next,e===o))return n}i=i.next}while(i!==t);if(!n)return null;const a=n,c=n.x,l=n.y;let u,d=1/0;i=n;do{o>=i.x&&i.x>=c&&o!==i.x&&Zv(s<l?o:r,s,c,l,s<l?r:o,s,i.x,i.y)&&(u=Math.abs(s-i.y)/(o-i.x),sm(i,e)&&(u<d||u===d&&(i.x>n.x||i.x===n.x&&Yv(n,i)))&&(n=i,d=u)),i=i.next}while(i!==a);return n}(e,t);if(!n)return t;const i=am(n,e);return Vv(i,i.next),Vv(n,n.next)}function Yv(e,t){return tm(e.prev,e,t.prev)<0&&tm(t.next,e,e.next)<0}function $v(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Qv(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Zv(e,t,n,i,r,o,s,a){return(r-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(i-a)>=(n-s)*(t-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function em(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&im(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(sm(e,t)&&sm(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(tm(e.prev,e,t.prev)||tm(e,t.prev,t))||nm(e,t)&&tm(e.prev,e,e.next)>0&&tm(t.prev,t,t.next)>0)}function tm(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function nm(e,t){return e.x===t.x&&e.y===t.y}function im(e,t,n,i){const r=om(tm(e,t,n)),o=om(tm(e,t,i)),s=om(tm(n,i,e)),a=om(tm(n,i,t));return r!==o&&s!==a||(!(0!==r||!rm(e,n,t))||(!(0!==o||!rm(e,i,t))||(!(0!==s||!rm(n,e,i))||!(0!==a||!rm(n,t,i)))))}function rm(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function om(e){return e>0?1:e<0?-1:0}function sm(e,t){return tm(e.prev,e,e.next)<0?tm(e,t,e.next)>=0&&tm(e,e.prev,t)>=0:tm(e,t,e.prev)<0||tm(e,e.next,t)<0}function am(e,t){const n=new um(e.i,e.x,e.y),i=new um(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function cm(e,t,n,i){const r=new um(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function lm(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function um(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class dm{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}static isClockWise(e){return dm.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];hm(e),pm(n,e);let o=e.length;t.forEach(hm);for(let a=0;a<t.length;a++)i.push(o),o+=t[a].length,pm(n,t[a]);const s=Bv(n,i);for(let a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}}function hm(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function pm(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class fm extends Vd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uv([new Il(.5,.5),new Il(-.5,.5),new Il(-.5,-.5),new Il(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let s=0,a=e.length;s<a;s++){o(e[s])}function o(e){const o=[],s=void 0!==t.curveSegments?t.curveSegments:12,a=void 0!==t.steps?t.steps:1,c=void 0!==t.depth?t.depth:1;let l=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,d=void 0!==t.bevelSize?t.bevelSize:u-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,v=void 0!==t.UVGenerator?t.UVGenerator:vm;let m,g,y,S,b,_=!1;f&&(m=f.getSpacedPoints(a),_=!0,l=!1,g=f.computeFrenetFrames(a,!1),y=new ou,S=new ou,b=new ou),l||(p=0,u=0,d=0,h=0);const w=e.extractPoints(s);let x=w.shape;const C=w.holes;if(!dm.isClockWise(x)){x=x.reverse();for(let e=0,t=C.length;e<t;e++){const t=C[e];dm.isClockWise(t)&&(C[e]=t.reverse())}}const E=dm.triangulateShape(x,C),P=x;for(let t=0,n=C.length;t<n;t++){const e=C[t];x=x.concat(e)}function T(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const R=x.length,M=E.length;function A(e,t,n){let i,r,o;const s=e.x-t.x,a=e.y-t.y,c=n.x-e.x,l=n.y-e.y,u=s*s+a*a,d=s*l-a*c;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(u),h=Math.sqrt(c*c+l*l),p=t.x-a/d,f=t.y+s/d,v=((n.x-l/h-p)*l-(n.y+c/h-f)*c)/(s*l-a*c);i=p+s*v-e.x,r=f+a*v-e.y;const m=i*i+r*r;if(m<=2)return new Il(i,r);o=Math.sqrt(m/2)}else{let e=!1;s>Number.EPSILON?c>Number.EPSILON&&(e=!0):s<-Number.EPSILON?c<-Number.EPSILON&&(e=!0):Math.sign(a)===Math.sign(l)&&(e=!0),e?(i=-a,r=s,o=Math.sqrt(u)):(i=s,r=a,o=Math.sqrt(u/2))}return new Il(i/o,r/o)}const I=[];for(let t=0,n=P.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),I[t]=A(P[t],P[i],P[r]);const k=[];let O,D=I.concat();for(let t=0,n=C.length;t<n;t++){const e=C[t];O=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),O[t]=A(e[t],e[i],e[r]);k.push(O),D=D.concat(O)}for(let t=0;t<p;t++){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=d*Math.sin(e*Math.PI/2)+h;for(let t=0,r=P.length;t<r;t++){const e=T(P[t],I[t],i);z(e.x,e.y,-n)}for(let t=0,r=C.length;t<r;t++){const e=C[t];O=k[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],O[t],i);z(r.x,r.y,-n)}}}const L=d+h;for(let t=0;t<R;t++){const e=l?T(x[t],D[t],L):x[t];_?(S.copy(g.normals[0]).multiplyScalar(e.x),y.copy(g.binormals[0]).multiplyScalar(e.y),b.copy(m[0]).add(S).add(y),z(b.x,b.y,b.z)):z(e.x,e.y,0)}for(let t=1;t<=a;t++)for(let e=0;e<R;e++){const n=l?T(x[e],D[e],L):x[e];_?(S.copy(g.normals[t]).multiplyScalar(n.x),y.copy(g.binormals[t]).multiplyScalar(n.y),b.copy(m[t]).add(S).add(y),z(b.x,b.y,b.z)):z(n.x,n.y,c/a*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=d*Math.sin(e*Math.PI/2)+h;for(let t=0,r=P.length;t<r;t++){const e=T(P[t],I[t],i);z(e.x,e.y,c+n)}for(let t=0,r=C.length;t<r;t++){const e=C[t];O=k[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],O[t],i);_?z(r.x,r.y+m[a-1].y,m[a-1].x+n):z(r.x,r.y,c+n)}}}function N(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=a+2*p;e<n;e++){const n=R*e,o=R*(e+1);U(t+i+n,t+r+n,t+r+o,t+i+o)}}}function z(e,t,n){o.push(e),o.push(t),o.push(n)}function F(e,t,r){B(e),B(t),B(r);const o=i.length/3,s=v.generateTopUV(n,i,o-3,o-2,o-1);j(s[0]),j(s[1]),j(s[2])}function U(e,t,r,o){B(e),B(t),B(o),B(t),B(r),B(o);const s=i.length/3,a=v.generateSideWallUV(n,i,s-6,s-3,s-2,s-1);j(a[0]),j(a[1]),j(a[3]),j(a[1]),j(a[2]),j(a[3])}function B(e){i.push(o[3*e+0]),i.push(o[3*e+1]),i.push(o[3*e+2])}function j(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(l){let e=0,t=R*e;for(let n=0;n<M;n++){const e=E[n];F(e[2]+t,e[1]+t,e[0]+t)}e=a+2*p,t=R*e;for(let n=0;n<M;n++){const e=E[n];F(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<M;e++){const t=E[e];F(t[2],t[1],t[0])}for(let e=0;e<M;e++){const t=E[e];F(t[0]+R*a,t[1]+R*a,t[2]+R*a)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;N(P,t),t+=P.length;for(let n=0,i=C.length;n<i;n++){const e=C[n];N(e,t),t+=e.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new Dd(i,3)),this.setAttribute("uv",new Dd(r,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){const t=e[i];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,o=e.shapes.length;r<o;r++){const i=t[e.shapes[r]];n.push(i)}const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new Nv[i.type]).fromJSON(i)),new fm(n,e.options)}}const vm={generateTopUV:function(e,t,n,i,r){const o=t[3*n],s=t[3*n+1],a=t[3*i],c=t[3*i+1],l=t[3*r],u=t[3*r+1];return[new Il(o,s),new Il(a,c),new Il(l,u)]},generateSideWallUV:function(e,t,n,i,r,o){const s=t[3*n],a=t[3*n+1],c=t[3*n+2],l=t[3*i],u=t[3*i+1],d=t[3*i+2],h=t[3*r],p=t[3*r+1],f=t[3*r+2],v=t[3*o],m=t[3*o+1],g=t[3*o+2];return Math.abs(a-u)<Math.abs(s-l)?[new Il(s,1-c),new Il(l,1-d),new Il(h,1-f),new Il(v,1-g)]:[new Il(a,1-c),new Il(u,1-d),new Il(p,1-f),new Il(m,1-g)]}};function mm(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function gm(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}class ym{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let o;n:{i:if(!(e<i)){for(let o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(r=i,i=t[++n],e<i)break t}o=t.length;break n}if(e>=r)break e;{const s=t[1];e<s&&(n=2,r=s);for(let o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(i=r,r=t[--n-1],e>=r)break t}o=n,n=0}}for(;n<o;){const i=n+o>>>1;e<t[i]?o=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let o=0;o!==i;++o)t[o]=n[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Sm extends ym{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Zc,endingEnd:Zc}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,o=e+1,s=i[r],a=i[o];if(void 0===s)switch(this.getSettings_().endingStart){case el:r=e,s=2*t-n;break;case tl:r=i.length-2,s=t+i[r]-i[r+1];break;default:r=e,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case el:o=e,a=2*n-t;break;case tl:o=1,a=n+i[1]-i[0];break;default:o=e-1,a=t}const c=.5*(n-t),l=this.valueSize;this._weightPrev=c/(t-s),this._weightNext=c/(a-n),this._offsetPrev=r*l,this._offsetNext=o*l}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,c=a-s,l=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(i-t),f=p*p,v=f*p,m=-d*v+2*d*f-d*p,g=(1+d)*v+(-1.5-2*d)*f+(-.5+d)*p+1,y=(-1-h)*v+(1.5+h)*f+.5*p,S=h*v-h*f;for(let b=0;b!==s;++b)r[b]=m*o[l+b]+g*o[c+b]+y*o[a+b]+S*o[u+b];return r}}class bm extends ym{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,c=a-s,l=(n-t)/(i-t),u=1-l;for(let d=0;d!==s;++d)r[d]=o[c+d]*u+o[a+d]*l;return r}}class _m extends ym{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class wm{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=mm(t,this.TimeBufferType),this.values=mm(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:mm(e.times,Array),values:mm(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new _m(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new bm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Sm(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Yc:t=this.InterpolantFactoryMethodDiscrete;break;case $c:t=this.InterpolantFactoryMethodLinear;break;case Qc:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Yc;case this.InterpolantFactoryMethodLinear:return $c;case this.InterpolantFactoryMethodSmooth:return Qc}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,o=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);const e=this.getValueSize();this.times=n.slice(r,o),this.values=this.values.slice(r*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==r;s++){const t=n[s];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,t,o),e=!1;break}o=t}if(void 0!==i&&gm(i))for(let s=0,a=i.length;s!==a;++s){const t=i[s];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===Qc,r=e.length-1;let o=1;for(let s=1;s<r;++s){let r=!1;const a=e[s];if(a!==e[s+1]&&(1!==s||a!==e[0]))if(i)r=!0;else{const e=s*n,i=e-n,o=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[i+s]||n!==t[o+s]){r=!0;break}}}if(r){if(s!==o){e[o]=e[s];const i=s*n,r=o*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++o}}if(r>0){e[o]=e[r];for(let e=r*n,i=o*n,s=0;s!==n;++s)t[i+s]=t[e+s];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}wm.prototype.TimeBufferType=Float32Array,wm.prototype.ValueBufferType=Float32Array,wm.prototype.DefaultInterpolation=$c;class xm extends wm{}xm.prototype.ValueTypeName="bool",xm.prototype.ValueBufferType=Array,xm.prototype.DefaultInterpolation=Yc,xm.prototype.InterpolantFactoryMethodLinear=void 0,xm.prototype.InterpolantFactoryMethodSmooth=void 0;class Cm extends wm{}Cm.prototype.ValueTypeName="color";class Em extends wm{}Em.prototype.ValueTypeName="number";class Pm extends ym{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-t)/(i-t);let c=e*s;for(let l=c+s;c!==l;c+=4)ru.slerpFlat(r,0,o,c-s,o,c,a);return r}}class Tm extends wm{InterpolantFactoryMethodLinear(e){return new Pm(this.times,this.values,this.getValueSize(),e)}}Tm.prototype.ValueTypeName="quaternion",Tm.prototype.DefaultInterpolation=$c,Tm.prototype.InterpolantFactoryMethodSmooth=void 0;class Rm extends wm{}Rm.prototype.ValueTypeName="string",Rm.prototype.ValueBufferType=Array,Rm.prototype.DefaultInterpolation=Yc,Rm.prototype.InterpolantFactoryMethodLinear=void 0,Rm.prototype.InterpolantFactoryMethodSmooth=void 0;class Mm extends wm{}Mm.prototype.ValueTypeName="vector";const Am={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Im{constructor(e,t,n){const i=this;let r,o=!1,s=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===o&&void 0!==i.onStart&&i.onStart(e,s,a),o=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,a),s===a&&(o=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){const t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=c.length;t<n;t+=2){const n=c[t],i=c[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}}const km=new Im;class Om{constructor(e){this.manager=void 0!==e?e:km,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Om.DEFAULT_MATERIAL_NAME="__DEFAULT";const Dm={};class Lm extends Error{constructor(e,t){super(e),this.response=t}}class Nm extends Om{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Am.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout((()=>{t&&t(r),this.manager.itemEnd(e)}),0),r;if(void 0!==Dm[e])return void Dm[e].push({onLoad:t,onProgress:n,onError:i});Dm[e]=[],Dm[e].push({onLoad:t,onProgress:n,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,a=this.responseType;fetch(o).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=Dm[e],i=t.body.getReader(),r=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),o=r?parseInt(r):0,s=0!==o;let a=0;const c=new ReadableStream({start(e){!function t(){i.read().then((i=>{let{done:r,value:c}=i;if(r)e.close();else{a+=c.byteLength;const i=new ProgressEvent("progress",{lengthComputable:s,loaded:a,total:o});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(i)}e.enqueue(c),t()}}))}()}});return new Response(c)}throw new Lm('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((e=>{switch(a){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,s)));case"json":return e.json();default:if(void 0===s)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then((e=>i.decode(e)))}}})).then((t=>{Am.add(e,t);const n=Dm[e];delete Dm[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onLoad&&i.onLoad(t)}})).catch((t=>{const n=Dm[e];if(void 0===n)throw this.manager.itemError(e),t;delete Dm[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class zm{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Fm(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Fm();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Fm(){return("undefined"===typeof performance?Date:performance).now()}const Um="\\[\\]\\.:\\/",Bm=new RegExp("["+Um+"]","g"),jm="[^"+Um+"]",Vm="[^"+Um.replace("\\.","")+"]",Hm=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",jm)+/(WCOD+)?/.source.replace("WCOD",Vm)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",jm)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",jm)+"$"),Wm=["material","materials","bones","map"];class Gm{constructor(e,t,n){this.path=t,this.parsedPath=n||Gm.parseTrackName(t),this.node=Gm.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Gm.Composite(e,t,n):new Gm(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Bm,"")}static parseTrackName(e){const t=Hm.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==Wm.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const o=n(r.children);if(o)return o}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=Gm.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const o=e[i];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Gm.Composite=class{constructor(e,t,n){const i=n||Gm.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Gm.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Gm.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Gm.prototype.GetterByBindingType=[Gm.prototype._getValue_direct,Gm.prototype._getValue_array,Gm.prototype._getValue_arrayElement,Gm.prototype._getValue_toArray],Gm.prototype.SetterByBindingTypeAndVersioning=[[Gm.prototype._setValue_direct,Gm.prototype._setValue_direct_setNeedsUpdate,Gm.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gm.prototype._setValue_array,Gm.prototype._setValue_array_setNeedsUpdate,Gm.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gm.prototype._setValue_arrayElement,Gm.prototype._setValue_arrayElement_setNeedsUpdate,Gm.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gm.prototype._setValue_fromArray,Gm.prototype._setValue_fromArray_setNeedsUpdate,Gm.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);class qm{constructor(){this.type="ShapePath",this.color=new Cd,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Fv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,o){return this.currentPath.bezierCurveTo(e,t,n,i,r,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let i=!1;for(let r=n-1,o=0;o<n;r=o++){let n=t[r],s=t[o],a=s.x-n.x,c=s.y-n.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(n=t[o],a=-a,s=t[r],c=-c),e.y<n.y||e.y>s.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=c*(e.x-n.x)-a*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(s.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=s.x)return!0}}return i}const n=dm.isClockWise,i=this.subPaths;if(0===i.length)return[];let r,o,s;const a=[];if(1===i.length)return o=i[0],s=new Uv,s.curves=o.curves,a.push(s),a;let c=!n(i[0].getPoints());c=e?!c:c;const l=[],u=[];let d,h,p=[],f=0;u[f]=void 0,p[f]=[];for(let v=0,m=i.length;v<m;v++)o=i[v],d=o.getPoints(),r=n(d),r=e?!r:r,r?(!c&&u[f]&&f++,u[f]={s:new Uv,p:d},u[f].s.curves=o.curves,c&&f++,p[f]=[]):p[f].push({h:o,p:d[0]});if(!u[0])return function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new Uv;r.curves=i.curves,t.push(r)}return t}(i);if(u.length>1){let e=!1,n=0;for(let t=0,i=u.length;t<i;t++)l[t]=[];for(let i=0,r=u.length;i<r;i++){const r=p[i];for(let o=0;o<r.length;o++){const s=r[o];let a=!0;for(let r=0;r<u.length;r++)t(s.p,u[r].p)&&(i!==r&&n++,a?(a=!1,l[r].push(s)):e=!0);a&&l[i].push(s)}}n>0&&!1===e&&(p=l)}for(let v=0,m=u.length;v<m;v++){s=u[v].s,a.push(s),h=p[v];for(let e=0,t=h.length;e<t;e++)s.holes.push(h[e].h)}return a}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:nc}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=nc);class Xm extends Om{constructor(e){super(e)}load(e,t,n,i){const r=this,o=new Nm(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(e){const n=r.parse(JSON.parse(e));t&&t(n)}),n,i)}parse(e){return new Km(e)}}class Km{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e){const t=[],n=function(e,t,n){const i=Array.from(e),r=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,s=[];let a=0,c=0;for(let l=0;l<i.length;l++){const e=i[l];if("\n"===e)a=0,c-=o;else{const t=Jm(e,r,a,c,n);a+=t.offsetX,s.push(t.path)}}return s}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,this.data);for(let i=0,r=n.length;i<r;i++)t.push(...n[i].toShapes());return t}}function Jm(e,t,n,i,r){const o=r.glyphs[e]||r.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".");const s=new qm;let a,c,l,u,d,h,p,f;if(o.o){const e=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let r=0,o=e.length;r<o;){switch(e[r++]){case"m":a=e[r++]*t+n,c=e[r++]*t+i,s.moveTo(a,c);break;case"l":a=e[r++]*t+n,c=e[r++]*t+i,s.lineTo(a,c);break;case"q":l=e[r++]*t+n,u=e[r++]*t+i,d=e[r++]*t+n,h=e[r++]*t+i,s.quadraticCurveTo(d,h,l,u);break;case"b":l=e[r++]*t+n,u=e[r++]*t+i,d=e[r++]*t+n,h=e[r++]*t+i,p=e[r++]*t+n,f=e[r++]*t+i,s.bezierCurveTo(d,h,p,f,l,u)}}}return{offsetX:o.ha*t,path:s}}class Ym extends fm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.font;if(void 0===n)super();else{const i=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(i,t)}this.type="TextGeometry"}}const $m={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"};class Qm{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Zm=new Gh(-1,1,1,-1,0,1);const eg=new class extends Vd{constructor(){super(),this.setAttribute("position",new Dd([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Dd([0,2,0,0,2,0],2))}};class tg{constructor(e){this._mesh=new sh(eg,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Zm)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class ng extends Qm{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof ph?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=hh.clone(e.uniforms),this.material=new ph({name:void 0!==e.name?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new tg(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class ig extends Qm{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const i=e.getContext(),r=e.state;let o,s;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0),this.inverse?(o=0,s=1):(o=1,s=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),r.buffers.stencil.setFunc(i.ALWAYS,o,4294967295),r.buffers.stencil.setClear(s),r.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.color.setMask(!0),r.buffers.depth.setMask(!0),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(i.EQUAL,1,4294967295),r.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),r.buffers.stencil.setLocked(!0)}}class rg extends Qm{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class og{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),void 0===t){const n=e.getSize(new Il);this._width=n.width,this._height=n.height,(t=new tu(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Uc})).texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new ng($m),this.copyPass.material.blending=0,this.clock=new zm}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let i=0,r=this.passes.length;i<r;i++){const t=this.passes[i];if(!1!==t.enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),t.needsSwap){if(n){const t=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==ig&&(t instanceof ig?n=!0:t instanceof rg&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new Il);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(let r=0;r<this.passes.length;r++)this.passes[r].setSize(n,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class sg extends Qm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=r,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Cd}render(e,t,n){const i=e.autoClear;let r,o;e.autoClear=!1,null!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor)),null!==this.clearAlpha&&(r=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),1==this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),!0===this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),null!==this.clearColor&&e.setClearColor(this._oldClearColor),null!==this.clearAlpha&&e.setClearAlpha(r),null!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=i}}const ag={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\tuniform int byp; //should we apply the glitch ?\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tDisp;\n\n\t\tuniform float amount;\n\t\tuniform float angle;\n\t\tuniform float seed;\n\t\tuniform float seed_x;\n\t\tuniform float seed_y;\n\t\tuniform float distortion_x;\n\t\tuniform float distortion_y;\n\t\tuniform float col_s;\n\n\t\tvarying vec2 vUv;\n\n\n\t\tfloat rand(vec2 co){\n\t\t\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tif(byp<1) {\n\t\t\t\tvec2 p = vUv;\n\t\t\t\tfloat xs = floor(gl_FragCoord.x / 0.5);\n\t\t\t\tfloat ys = floor(gl_FragCoord.y / 0.5);\n\t\t\t\t//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n\t\t\t\tfloat disp = texture2D(tDisp, p*seed*seed).r;\n\t\t\t\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\n\t\t\t\t\tif(seed_x>0.){\n\t\t\t\t\t\tp.y = 1. - (p.y + distortion_y);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.y = distortion_y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {\n\t\t\t\t\tif(seed_y>0.){\n\t\t\t\t\t\tp.x=distortion_x;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.x = 1. - (p.x + distortion_x);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tp.x+=disp*seed_x*(seed/5.);\n\t\t\t\tp.y+=disp*seed_y*(seed/5.);\n\t\t\t\t//base from RGB shift shader\n\t\t\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n\t\t\t\tvec4 cr = texture2D(tDiffuse, p + offset);\n\t\t\t\tvec4 cga = texture2D(tDiffuse, p);\n\t\t\t\tvec4 cb = texture2D(tDiffuse, p - offset);\n\t\t\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n\t\t\t\t//add noise\n\t\t\t\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);\n\t\t\t\tgl_FragColor = gl_FragColor+ snow;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor=texture2D (tDiffuse, vUv);\n\t\t\t}\n\t\t}"};class cg extends Qm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:64;super();const t=ag;this.uniforms=hh.clone(t.uniforms),this.heightMap=this.generateHeightmap(e),this.uniforms.tDisp.value=this.heightMap,this.material=new ph({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.fsQuad=new tg(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()}render(e,t,n){!1===e.capabilities.isWebGL2&&(this.uniforms.tDisp.value.format=1024),this.uniforms.tDiffuse.value=n.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=Al.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=Al.randFloat(-1,1),this.uniforms.seed_y.value=Al.randFloat(-1,1),this.uniforms.distortion_x.value=Al.randFloat(0,1),this.uniforms.distortion_y.value=Al.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=Al.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=Al.randFloat(0,1),this.uniforms.distortion_y.value=Al.randFloat(0,1),this.uniforms.seed_x.value=Al.randFloat(-.3,.3),this.uniforms.seed_y.value=Al.randFloat(-.3,.3)):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}generateTrigger(){this.randX=Al.randInt(120,240)}generateHeightmap(e){const t=new Float32Array(e*e),n=e*e;for(let r=0;r<n;r++){const e=Al.randFloat(0,1);t[r]=e}const i=new bv(t,e,e,Wc,Fc);return i.needsUpdate=!0,i}dispose(){this.material.dispose(),this.heightMap.dispose(),this.fsQuad.dispose()}}const lg={name:"RGBShiftShader",uniforms:{tDiffuse:{value:null},amount:{value:.005},angle:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float amount;\n\t\tuniform float angle;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n\t\t\tvec4 cr = texture2D(tDiffuse, vUv + offset);\n\t\t\tvec4 cga = texture2D(tDiffuse, vUv);\n\t\t\tvec4 cb = texture2D(tDiffuse, vUv - offset);\n\t\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n\n\t\t}"};var ug=n(579);const dg=()=>{const e=(0,t.useRef)(null);return(0,t.useEffect)((()=>{const t=new Sv,n=new yh(75,window.innerWidth/window.innerHeight,.1,1e3);n.position.z=5;const i=new yv({alpha:!0});i.setSize(window.innerWidth,window.innerHeight),e.current.appendChild(i.domElement);return(new Xm).load("".concat("/EVA-libre","/fonts/PressStart.json"),(function(e){const r=new Ym("Loading...",{font:e,size:.33,height:.2,curveSegments:12,bevelEnabled:!0,bevelThickness:.03,bevelSize:.02,bevelSegments:5}),o=new Rd({color:16777215,transparent:!0,opacity:.7}),s=new sh(r,o);s.geometry.center(),t.add(s);const a=new og(i);a.addPass(new sg(t,n));const c=new ng(lg);a.addPass(c);const l=new cg;a.addPass(l),l.goWild=!1;let u=0;const d=()=>{requestAnimationFrame(d),u+=.05,s.rotation.y=.1*Math.sin(u),c.uniforms.amount.value=.005*Math.random(),a.render()};d()})),()=>{e.current&&i.domElement&&e.current.removeChild(i.domElement),t.clear(),i.dispose()}}),[]),(0,ug.jsx)("div",{ref:e,style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",overflow:"hidden"}})};var hg,pg,fg,vg,mg,gg,yg,Sg,bg,_g;const wg=$t(hg||(hg=o(["\n  from { width: 0%; }\n  to { width: 100%; }\n"]))),xg=$t(pg||(pg=o(["\n  0% {background-position: 0% 50%}\n  50% {background-position: 100% 50%}\n  100% {background-position: 0% 50%}\n"]))),Cg=($t(fg||(fg=o(["\n  0% {\n    box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7);\n  }\n  70% {\n    box-shadow: 0 0 0 10px rgba(255, 255, 255, 0);\n  }\n  100% {\n    box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);\n  }\n"]))),$t(vg||(vg=o(["\n  0% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(1.6);\n  }\n"])))),Eg=Yt.div(mg||(mg=o(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: black;\n  z-index: 10; // Ensure the background is below the loading bar and image\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  opacity: 1;\n  transition: opacity 0.5s ease;\n"]))),Pg=Yt.div(gg||(gg=o(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 5px;\n  background: linear-gradient(to right, violet, indigo, blue, green, yellow, orange, red);\n  background-size: 200% 200%;\n  animation: "," 5s ease infinite; // Adjust time as needed for the cycling effect\n  z-index: 30; // Highest z-index to ensure it's above everything\n"])),xg),Tg=Yt.div(yg||(yg=o(["\n  height: 100%;\n  background-color: transparent;\n  width: 0%;\n  animation: "," 90s linear forwards; // 90 seconds to complete\n"])),wg),Rg=["logo.png","visage.webp","lovelace.jpg","visfaces.webp","visfaces.webp","visfaces.webp","lol.webp"][Math.floor(7*Math.random())],Mg=["MG-kyulvO_c","YF_fu6HCloQ","VWtEP3Uc8A8","BUYJyVubL6w","HgH_LsBHTPw","ANArGmr74u4","sK2v4GrASjw","Fy1xQSiLx8U","K0HSD_i2DvA","rQMtXDkF9q4","rQMtXDkF9q4"][Math.floor(11*Math.random())],Ag=(Yt.div(Sg||(Sg=o(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 20; // Ensure this is above the PosterImage but below the LoaderBarContainer\n"]))),Yt.div(bg||(bg=o(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-image: url('","/images/","');\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  opacity: 1;\n  animation: "," 40s ease-out infinite alternate;\n  z-index: -1; // Lower than ParticlesContainer\n"])),"/EVA-libre",Rg,Cg)),Ig=Yt.div(_g||(_g=o(["\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  z-index: 1000; // Ensure it's above everything else\n  width: 360px;\n  height: 203px; // 16:9 aspect ratio for 360px width\n"])));const kg=function(e){let{isLoading:n}=e;const[i,r]=(0,t.useState)(n),o=(0,t.useRef)(null);return(0,t.useEffect)((()=>{r(n)}),[n]),(0,ug.jsx)(ug.Fragment,{children:i&&(0,ug.jsxs)(Eg,{children:[(0,ug.jsx)(Pg,{children:(0,ug.jsx)(Tg,{})}),(0,ug.jsx)(oo,{id:"tsparticles",init:async e=>{await La(e)},options:(s="#ffffff",{background:{color:{value:"transparent"}},fpsLimit:60,interactivity:{events:{onClick:{enable:!0,mode:"push"},onHover:{enable:!0,mode:"repulse"}},modes:{bubble:{distance:400,duration:2,opacity:.8,size:40},push:{quantity:4},repulse:{distance:200,duration:.4}}},particles:{color:{value:s},links:{color:"#ffffff",distance:150,enable:!0,opacity:.5,width:1},collisions:{enable:!0},move:{direction:"none",enable:!0,outMode:"bounce",random:!1,speed:2,straight:!1},number:{density:{enable:!0,area:800},value:222},opacity:{value:.5},shape:{type:"circle"},size:{random:!0,value:5}},detectRetina:!0})}),(0,ug.jsx)(dg,{}),(0,ug.jsx)(Ag,{}),(0,ug.jsx)(Ig,{children:(0,ug.jsx)(tc,{videoId:Mg,opts:{height:"100%",width:"100%",playerVars:{autoplay:1,start:0}},ref:o})})]})});var s};var Og=(e,t)=>e.find((e=>e.id===t));function Dg(e,t){const n=Lg(e,t);return{position:n,index:n?e[n].findIndex((e=>e.id===t)):-1}}function Lg(e,t){for(const[n,i]of Object.entries(e))if(Og(i,t))return n}function Ng(e){return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:"top"===e||"bottom"===e?"0 auto":void 0,top:e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,bottom:e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,right:e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",left:e.includes("right")?void 0:"env(safe-area-inset-left, 0px)"}}function zg(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=(0,t.useRef)(e);return(0,t.useEffect)((()=>{i.current=e})),(0,t.useCallback)((function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return null==(e=i.current)?void 0:e.call(i,...n)}),n)}function Fg(e,n){const i=(0,t.useRef)(!1),r=(0,t.useRef)(!1);(0,t.useEffect)((()=>{if(i.current&&r.current)return e();r.current=!0}),n),(0,t.useEffect)((()=>(i.current=!0,()=>{i.current=!1})),[])}var Ug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")};function Bg(e){const t=typeof e;return null!=e&&("object"===t||"function"===t)&&!Array.isArray(e)}var jg=e=>{const{condition:t,message:n}=e};function Vg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Hg(e)?e(...n):e}var Hg=e=>"function"===typeof e,Wg=e=>e?"":void 0;function Gg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.some((t=>(null==t||t(e),null==e?void 0:e.defaultPrevented)))}}const qg=(0,t.createContext)(null);function Xg(){const e=(0,t.useContext)(qg);if(null===e)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=(0,t.useId)();(0,t.useEffect)((()=>r(o)),[]);return!n&&i?[!1,()=>i&&i(o)]:[!0]}function Kg(){return null===(e=(0,t.useContext)(qg))||e.isPresent;var e}const Jg=(0,t.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Yg=(0,t.createContext)({}),$g="undefined"!==typeof document,Qg=$g?t.useLayoutEffect:t.useEffect,Zg=(0,t.createContext)({strict:!1}),ey=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),ty="data-"+ey("framerAppearId"),ny=!1,iy=!1;class ry{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const oy=["prepare","read","update","preRender","render","postRender"];function sy(e,t){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=oy.reduce(((e,t)=>(e[t]=function(e){let t=new ry,n=new ry,i=0,r=!1,o=!1;const s=new WeakSet,a={schedule:function(e){const o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&r,a=o?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&s.add(e),a.add(e)&&o&&r&&(i=t.order.length),e},cancel:e=>{n.remove(e),s.delete(e)},process:c=>{if(r)o=!0;else{if(r=!0,[t,n]=[n,t],n.clear(),i=t.order.length,i)for(let n=0;n<i;n++){const i=t.order[n];s.has(i)&&(a.schedule(i),e()),i(c)}r=!1,o&&(o=!1,a.process(c))}}};return a}((()=>n=!0)),e)),{}),s=e=>{o[e].process(r)},a=()=>{const o=iy?r.timestamp:performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(o-r.timestamp,40),1),r.timestamp=o,r.isProcessing=!0,oy.forEach(s),r.isProcessing=!1,n&&t&&(i=!1,e(a))},c=oy.reduce(((t,s)=>{const c=o[s];return t[s]=function(t){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,i=!0,r.isProcessing||e(a)),c.schedule(t,o,s)},t}),{});return{schedule:c,cancel:e=>oy.forEach((t=>o[t].cancel(e))),state:r,steps:o}}const{schedule:ay,cancel:cy}=sy(queueMicrotask,!1);function ly(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function uy(e){return"string"===typeof e||Array.isArray(e)}function dy(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const hy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],py=["initial",...hy];function fy(e){return dy(e.animate)||py.some((t=>uy(e[t])))}function vy(e){return Boolean(fy(e)||e.variants)}function my(e){const{initial:n,animate:i}=function(e,t){if(fy(e)){const{initial:t,animate:n}=e;return{initial:!1===t||uy(t)?t:void 0,animate:uy(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(Yg));return(0,t.useMemo)((()=>({initial:n,animate:i})),[gy(n),gy(i)])}function gy(e){return Array.isArray(e)?e.join(" "):e}const yy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Sy={};for(const n in yy)Sy[n]={isEnabled:e=>yy[n].some((t=>!!e[t]))};const by=(0,t.createContext)({}),_y=(0,t.createContext)({}),wy=Symbol.for("motionComponentSymbol");function xy(e){let{preloadedFeatures:n,createVisualElement:i,useRender:r,useVisualState:o,Component:s}=e;n&&function(e){for(const t in e)Sy[t]={...Sy[t],...e[t]}}(n);const a=(0,t.forwardRef)((function(e,a){let c;const l={...(0,t.useContext)(Jg),...e,layoutId:Cy(e)},{isStatic:u}=l,d=my(e),h=o(e,u);if(!u&&$g){d.visualElement=function(e,n,i,r){const{visualElement:o}=(0,t.useContext)(Yg),s=(0,t.useContext)(Zg),a=(0,t.useContext)(qg),c=(0,t.useContext)(Jg).reducedMotion,l=(0,t.useRef)();r=r||s.renderer,!l.current&&r&&(l.current=r(e,{visualState:n,parent:o,props:i,presenceContext:a,blockInitialAnimation:!!a&&!1===a.initial,reducedMotionConfig:c}));const u=l.current;(0,t.useInsertionEffect)((()=>{u&&u.update(i,a)}));const d=(0,t.useRef)(Boolean(i[ty]&&!window.HandoffComplete));return Qg((()=>{u&&(ay.postRender(u.render),d.current&&u.animationState&&u.animationState.animateChanges())})),(0,t.useEffect)((()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))})),u}(s,h,l,i);const e=(0,t.useContext)(_y),r=(0,t.useContext)(Zg).strict;d.visualElement&&(c=d.visualElement.loadFeatures(l,r,n,e))}return t.createElement(Yg.Provider,{value:d},c&&d.visualElement?t.createElement(c,{visualElement:d.visualElement,...l}):null,r(s,e,function(e,n,i){return(0,t.useCallback)((t=>{t&&e.mount&&e.mount(t),n&&(t?n.mount(t):n.unmount()),i&&("function"===typeof i?i(t):ly(i)&&(i.current=t))}),[n])}(h,d.visualElement,a),h,u,d.visualElement))}));return a[wy]=s,a}function Cy(e){let{layoutId:n}=e;const i=(0,t.useContext)(by).id;return i&&void 0!==n?i+"-"+n:n}function Ey(e){function t(t){return xy(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const Py=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ty(e){return"string"===typeof e&&!e.includes("-")&&!!(Py.indexOf(e)>-1||/[A-Z]/.test(e))}const Ry={};const My=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ay=new Set(My);function Iy(e,t){let{layout:n,layoutId:i}=t;return Ay.has(e)||e.startsWith("origin")||(n||void 0!==i)&&(!!Ry[e]||"opacity"===e)}const ky=e=>Boolean(e&&e.getVelocity),Oy={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Dy=My.length;const Ly=e=>t=>"string"===typeof t&&t.startsWith(e),Ny=Ly("--"),zy=Ly("var(--"),Fy=e=>!!zy(e)&&Uy.test(e.split("/*")[0].trim()),Uy=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)$/i,By=(e,t)=>t&&"number"===typeof e?t.transform(e):e,jy=(e,t,n)=>n>t?t:n<e?e:n,Vy={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Hy={...Vy,transform:e=>jy(0,1,e)},Wy={...Vy,default:1},Gy=e=>Math.round(1e5*e)/1e5,qy=/(-)?([\d]*\.?[\d])+/g,Xy=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Ky=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Jy(e){return"string"===typeof e}const Yy=e=>({test:t=>Jy(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),$y=Yy("deg"),Qy=Yy("%"),Zy=Yy("px"),eS=Yy("vh"),tS=Yy("vw"),nS={...Qy,parse:e=>Qy.parse(e)/100,transform:e=>Qy.transform(100*e)},iS={...Vy,transform:Math.round},rS={borderWidth:Zy,borderTopWidth:Zy,borderRightWidth:Zy,borderBottomWidth:Zy,borderLeftWidth:Zy,borderRadius:Zy,radius:Zy,borderTopLeftRadius:Zy,borderTopRightRadius:Zy,borderBottomRightRadius:Zy,borderBottomLeftRadius:Zy,width:Zy,maxWidth:Zy,height:Zy,maxHeight:Zy,size:Zy,top:Zy,right:Zy,bottom:Zy,left:Zy,padding:Zy,paddingTop:Zy,paddingRight:Zy,paddingBottom:Zy,paddingLeft:Zy,margin:Zy,marginTop:Zy,marginRight:Zy,marginBottom:Zy,marginLeft:Zy,rotate:$y,rotateX:$y,rotateY:$y,rotateZ:$y,scale:Wy,scaleX:Wy,scaleY:Wy,scaleZ:Wy,skew:$y,skewX:$y,skewY:$y,distance:Zy,translateX:Zy,translateY:Zy,translateZ:Zy,x:Zy,y:Zy,z:Zy,perspective:Zy,transformPerspective:Zy,opacity:Hy,originX:nS,originY:nS,originZ:Zy,zIndex:iS,fillOpacity:Hy,strokeOpacity:Hy,numOctaves:iS};function oS(e,t,n,i){const{style:r,vars:o,transform:s,transformOrigin:a}=e;let c=!1,l=!1,u=!0;for(const d in t){const e=t[d];if(Ny(d)){o[d]=e;continue}const n=rS[d],i=By(e,n);if(Ay.has(d)){if(c=!0,s[d]=i,!u)continue;e!==(n.default||0)&&(u=!1)}else d.startsWith("origin")?(l=!0,a[d]=i):r[d]=i}if(t.transform||(c||i?r.transform=function(e,t,n,i){let{enableHardwareAcceleration:r=!0,allowTransformNone:o=!0}=t,s="";for(let a=0;a<Dy;a++){const t=My[a];if(void 0!==e[t]){const n=Oy[t]||t;s+="".concat(n,"(").concat(e[t],") ")}}return r&&!e.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(e,n?"":s):o&&n&&(s="none"),s}(e.transform,n,u,i):r.transform&&(r.transform="none")),l){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;r.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const sS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function aS(e,t,n){for(const i in t)ky(t[i])||Iy(i,n)||(e[i]=t[i])}function cS(e,n,i){const r={};return aS(r,e.style||{},e),Object.assign(r,function(e,n,i){let{transformTemplate:r}=e;return(0,t.useMemo)((()=>{const e=sS();return oS(e,n,{enableHardwareAcceleration:!i},r),Object.assign({},e.vars,e.style)}),[n])}(e,n,i)),r}function lS(e,t,n){const i={},r=cS(e,t,n);return e.drag&&!1!==e.dragListener&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=r,i}const uS=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function dS(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||uS.has(e)}let hS=e=>!dS(e);try{(pS=require("@emotion/is-prop-valid").default)&&(hS=e=>e.startsWith("on")?!dS(e):pS(e))}catch(OR){}var pS;function fS(e,t,n){return"string"===typeof e?e:Zy.transform(t+n*e)}const vS={offset:"stroke-dashoffset",array:"stroke-dasharray"},mS={offset:"strokeDashoffset",array:"strokeDasharray"};function gS(e,t,n,i,r){let{attrX:o,attrY:s,attrScale:a,originX:c,originY:l,pathLength:u,pathSpacing:d=1,pathOffset:h=0,...p}=t;if(oS(e,p,n,r),i)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:f,style:v,dimensions:m}=e;f.transform&&(m&&(v.transform=f.transform),delete f.transform),m&&(void 0!==c||void 0!==l||v.transform)&&(v.transformOrigin=function(e,t,n){const i=fS(t,e.x,e.width),r=fS(n,e.y,e.height);return"".concat(i," ").concat(r)}(m,void 0!==c?c:.5,void 0!==l?l:.5)),void 0!==o&&(f.x=o),void 0!==s&&(f.y=s),void 0!==a&&(f.scale=a),void 0!==u&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const o=r?vS:mS;e[o.offset]=Zy.transform(-i);const s=Zy.transform(t),a=Zy.transform(n);e[o.array]="".concat(s," ").concat(a)}(f,u,d,h,!1)}const yS=()=>({...sS(),attrs:{}}),SS=e=>"string"===typeof e&&"svg"===e.toLowerCase();function bS(e,n,i,r){const o=(0,t.useMemo)((()=>{const t=yS();return gS(t,n,{enableHardwareAcceleration:!1},SS(r),e.transformTemplate),{...t.attrs,style:{...t.style}}}),[n]);if(e.style){const t={};aS(t,e.style,e),o.style={...t,...o.style}}return o}function _S(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(n,i,r,o,s)=>{let{latestValues:a}=o;const c=(Ty(n)?bS:lS)(i,a,s,n),l=function(e,t,n){const i={};for(const r in e)"values"===r&&"object"===typeof e.values||(hS(r)||!0===n&&dS(r)||!t&&!dS(r)||e.draggable&&r.startsWith("onDrag"))&&(i[r]=e[r]);return i}(i,"string"===typeof n,e),u=n!==t.Fragment?{...l,...c,ref:r}:{},{children:d}=i,h=(0,t.useMemo)((()=>ky(d)?d.get():d),[d]);return(0,t.createElement)(n,{...u,children:h})}}function wS(e,t,n,i){let{style:r,vars:o}=t;Object.assign(e.style,r,i&&i.getProjectionStyles(n));for(const s in o)e.style.setProperty(s,o[s])}const xS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function CS(e,t,n,i){wS(e,t,void 0,i);for(const r in t.attrs)e.setAttribute(xS.has(r)?r:ey(r),t.attrs[r])}function ES(e,t){const{style:n}=e,i={};for(const r in n)(ky(n[r])||t.style&&ky(t.style[r])||Iy(r,e))&&(i[r]=n[r]);return i}function PS(e,t){const n=ES(e,t);for(const i in e)if(ky(e[i])||ky(t[i])){n[-1!==My.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return n}function TS(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,i,r)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,i,r)),t}function RS(e){const n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}const MS=e=>Array.isArray(e),AS=e=>Boolean(e&&"object"===typeof e&&e.mix&&e.toValue),IS=e=>MS(e)?e[e.length-1]||0:e;function kS(e){const t=ky(e)?e.get():e;return AS(t)?t.toValue():t}const OS=e=>(n,i)=>{const r=(0,t.useContext)(Yg),o=(0,t.useContext)(qg),s=()=>function(e,t,n,i){let{scrapeMotionValuesFromProps:r,createRenderState:o,onMount:s}=e;const a={latestValues:DS(t,n,i,r),renderState:o()};return s&&(a.mount=e=>s(t,e,a)),a}(e,n,r,o);return i?s():RS(s)};function DS(e,t,n,i){const r={},o=i(e,{});for(const h in o)r[h]=kS(o[h]);let{initial:s,animate:a}=e;const c=fy(e),l=vy(e);t&&l&&!c&&!1!==e.inherit&&(void 0===s&&(s=t.initial),void 0===a&&(a=t.animate));let u=!!n&&!1===n.initial;u=u||!1===s;const d=u?a:s;if(d&&"boolean"!==typeof d&&!dy(d)){(Array.isArray(d)?d:[d]).forEach((t=>{const n=TS(e,t);if(!n)return;const{transitionEnd:i,transition:o,...s}=n;for(const e in s){let t=s[e];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(r[e]=t)}for(const e in i)r[e]=i[e]}))}return r}const LS=e=>e,{schedule:NS,cancel:zS,state:FS,steps:US}=sy("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:LS,!0),BS={useVisualState:OS({scrapeMotionValuesFromProps:PS,createRenderState:yS,onMount:(e,t,n)=>{let{renderState:i,latestValues:r}=n;NS.read((()=>{try{i.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){i.dimensions={x:0,y:0,width:0,height:0}}})),NS.render((()=>{gS(i,r,{enableHardwareAcceleration:!1},SS(t.tagName),e.transformTemplate),CS(t,i)}))}})},jS={useVisualState:OS({scrapeMotionValuesFromProps:ES,createRenderState:sS})};function VS(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}const HS=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function WS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const GS=e=>t=>HS(t)&&e(t,WS(t));function qS(e,t,n,i){return VS(e,t,GS(n),i)}const XS=(e,t)=>n=>t(e(n)),KS=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(XS)};function JS(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const YS=JS("dragHorizontal"),$S=JS("dragVertical");function QS(e){let t=!1;if("y"===e)t=$S();else if("x"===e)t=YS();else{const e=YS(),n=$S();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function ZS(){const e=QS(!0);return!e||(e(),!1)}class eb{constructor(e){this.isMounted=!1,this.node=e}update(){}}function tb(e,t){const n="pointer"+(t?"enter":"leave"),i="onHover"+(t?"Start":"End");return qS(e.current,n,((n,r)=>{if("touch"===n.pointerType||ZS())return;const o=e.getProps();e.animationState&&o.whileHover&&e.animationState.setActive("whileHover",t),o[i]&&NS.update((()=>o[i](n,r)))}),{passive:!e.getProps()[i]})}const nb=(e,t)=>!!t&&(e===t||nb(e,t.parentElement));function ib(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,WS(n))}const rb=new WeakMap,ob=new WeakMap,sb=e=>{const t=rb.get(e.target);t&&t(e)},ab=e=>{e.forEach(sb)};function cb(e,t,n){const i=function(e){let{root:t,...n}=e;const i=t||document;ob.has(i)||ob.set(i,{});const r=ob.get(i),o=JSON.stringify(n);return r[o]||(r[o]=new IntersectionObserver(ab,{root:t,...n})),r[o]}(t);return rb.set(e,n),i.observe(e),()=>{rb.delete(e),i.unobserve(e)}}const lb={some:0,all:1};const ub={inView:{Feature:class extends eb{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:r}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof i?i:lb[i]};return cb(this.node.current,o,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,r&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:i}=this.node.getProps(),o=t?n:i;o&&o(e)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends eb{constructor(){super(...arguments),this.removeStartListeners=LS,this.removeEndListeners=LS,this.removeAccessibleListeners=LS,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=qS(window,"pointerup",((e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:i,globalTapTarget:r}=this.node.getProps();NS.update((()=>{r||nb(this.node.current,e.target)?n&&n(e,t):i&&i(e,t)}))}),{passive:!(n.onTap||n.onPointerUp)}),r=qS(window,"pointercancel",((e,t)=>this.cancelPress(e,t)),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=KS(i,r),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=VS(this.node.current,"keydown",(e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=VS(this.node.current,"keyup",(e=>{"Enter"===e.key&&this.checkPressEnd()&&ib("up",((e,t)=>{const{onTap:n}=this.node.getProps();n&&NS.update((()=>n(e,t)))}))})),ib("down",((e,t)=>{this.startPress(e,t)}))})),t=VS(this.node.current,"blur",(()=>{this.isPressing&&ib("cancel",((e,t)=>this.cancelPress(e,t)))}));this.removeAccessibleListeners=KS(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&NS.update((()=>n(e,t)))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!ZS()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&NS.update((()=>n(e,t)))}mount(){const e=this.node.getProps(),t=qS(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=VS(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=KS(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends eb{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=KS(VS(this.node.current,"focus",(()=>this.onFocus())),VS(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends eb{mount(){this.unmount=KS(tb(this.node,!0),tb(this.node,!1))}unmount(){}}}};function db(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function hb(e,t,n){const i=e.getProps();return TS(i,t,void 0!==n?n:i.custom,function(e){const t={};return e.values.forEach(((e,n)=>t[n]=e.get())),t}(e),function(e){const t={};return e.values.forEach(((e,n)=>t[n]=e.getVelocity())),t}(e))}let pb=LS,fb=LS;const vb=e=>1e3*e,mb=e=>e/1e3,gb=!1,yb=e=>Array.isArray(e)&&"number"===typeof e[0];function Sb(e){return Boolean(!e||"string"===typeof e&&_b[e]||yb(e)||Array.isArray(e)&&e.every(Sb))}const bb=e=>{let[t,n,i,r]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(i,", ").concat(r,")")},_b={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bb([0,.65,.55,1]),circOut:bb([.55,0,1,.45]),backIn:bb([.31,.01,.66,-.59]),backOut:bb([.33,1.53,.69,.99])};function wb(e){if(e)return yb(e)?bb(e):Array.isArray(e)?e.map(wb):_b[e]}const xb=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Cb=1e-7,Eb=12;function Pb(e,t,n,i){if(e===t&&n===i)return LS;const r=t=>function(e,t,n,i,r){let o,s,a=0;do{s=t+(n-t)/2,o=xb(s,i,r)-e,o>0?n=s:t=s}while(Math.abs(o)>Cb&&++a<Eb);return s}(t,0,1,e,n);return e=>0===e||1===e?e:xb(r(e),t,i)}const Tb=Pb(.42,0,1,1),Rb=Pb(0,0,.58,1),Mb=Pb(.42,0,.58,1),Ab=e=>Array.isArray(e)&&"number"!==typeof e[0],Ib=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,kb=e=>t=>1-e(1-t),Ob=e=>1-Math.sin(Math.acos(e)),Db=kb(Ob),Lb=Ib(Ob),Nb=Pb(.33,1.53,.69,.99),zb=kb(Nb),Fb=Ib(zb),Ub={linear:LS,easeIn:Tb,easeInOut:Mb,easeOut:Rb,circIn:Ob,circInOut:Lb,circOut:Db,backIn:zb,backInOut:Fb,backOut:Nb,anticipate:e=>(e*=2)<1?.5*zb(e):.5*(2-Math.pow(2,-10*(e-1)))},Bb=e=>{if(Array.isArray(e)){fb(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,i,r]=e;return Pb(t,n,i,r)}return"string"===typeof e?(fb(void 0!==Ub[e],"Invalid easing type '".concat(e,"'")),Ub[e]):e},jb=(e,t,n)=>{const i=t-e;return 0===i?1:(n-e)/i},Vb=(e,t,n)=>e+(t-e)*n;function Hb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}const Wb=(e,t)=>n=>Boolean(Jy(n)&&Ky.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Gb=(e,t,n)=>i=>{if(!Jy(i))return i;const[r,o,s,a]=i.match(qy);return{[e]:parseFloat(r),[t]:parseFloat(o),[n]:parseFloat(s),alpha:void 0!==a?parseFloat(a):1}},qb={...Vy,transform:e=>Math.round((e=>jy(0,255,e))(e))},Xb={test:Wb("rgb","red"),parse:Gb("red","green","blue"),transform:e=>{let{red:t,green:n,blue:i,alpha:r=1}=e;return"rgba("+qb.transform(t)+", "+qb.transform(n)+", "+qb.transform(i)+", "+Gy(Hy.transform(r))+")"}};const Kb={test:Wb("#"),parse:function(e){let t="",n="",i="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,i+=i,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}},transform:Xb.transform},Jb={test:Wb("hsl","hue"),parse:Gb("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:i,alpha:r=1}=e;return"hsla("+Math.round(t)+", "+Qy.transform(Gy(n))+", "+Qy.transform(Gy(i))+", "+Gy(Hy.transform(r))+")"}},Yb=(e,t,n)=>{const i=e*e,r=n*(t*t-i)+i;return r<0?0:Math.sqrt(r)},$b=[Kb,Xb,Jb];function Qb(e){const t=(e=>$b.find((t=>t.test(e))))(e);fb(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));let n=t.parse(e);return t===Jb&&(n=function(e){let{hue:t,saturation:n,lightness:i,alpha:r}=e;t/=360,n/=100,i/=100;let o=0,s=0,a=0;if(n){const e=i<.5?i*(1+n):i+n-i*n,r=2*i-e;o=Hb(r,e,t+1/3),s=Hb(r,e,t),a=Hb(r,e,t-1/3)}else o=s=a=i;return{red:Math.round(255*o),green:Math.round(255*s),blue:Math.round(255*a),alpha:r}}(n)),n}const Zb=(e,t)=>{const n=Qb(e),i=Qb(t),r={...n};return e=>(r.red=Yb(n.red,i.red,e),r.green=Yb(n.green,i.green,e),r.blue=Yb(n.blue,i.blue,e),r.alpha=Vb(n.alpha,i.alpha,e),Xb.transform(r))},e_={test:e=>Xb.test(e)||Kb.test(e)||Jb.test(e),parse:e=>Xb.test(e)?Xb.parse(e):Jb.test(e)?Jb.parse(e):Kb.parse(e),transform:e=>Jy(e)?e:e.hasOwnProperty("red")?Xb.transform(e):Jb.transform(e)};const t_="number",n_="color",i_="var",r_="var(",o_="${}",s_=/(var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\))|(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))|((-)?([\d]*\.?[\d])+)/gi;function a_(e){const t=e.toString(),n=t.match(s_)||[],i=[],r={color:[],number:[],var:[]},o=[];for(let s=0;s<n.length;s++){const e=n[s];e_.test(e)?(r.color.push(s),o.push(n_),i.push(e_.parse(e))):e.startsWith(r_)?(r.var.push(s),o.push(i_),i.push(e)):(r.number.push(s),o.push(t_),i.push(parseFloat(e)))}return{values:i,split:t.replace(s_,o_).split(o_),indexes:r,types:o}}function c_(e){return a_(e).values}function l_(e){const{split:t,types:n}=a_(e),i=t.length;return e=>{let r="";for(let o=0;o<i;o++)if(r+=t[o],void 0!==e[o]){const t=n[o];r+=t===t_?Gy(e[o]):t===n_?e_.transform(e[o]):e[o]}return r}}const u_=e=>"number"===typeof e?0:e;const d_={test:function(e){var t,n;return isNaN(e)&&Jy(e)&&((null===(t=e.match(qy))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(Xy))||void 0===n?void 0:n.length)||0)>0},parse:c_,createTransformer:l_,getAnimatableNone:function(e){const t=c_(e);return l_(e)(t.map(u_))}};function h_(e,t){return n=>n>0?t:e}function p_(e,t){return n=>Vb(e,t,n)}function f_(e){return"number"===typeof e?p_:"string"===typeof e?Fy(e)?h_:e_.test(e)?Zb:g_:Array.isArray(e)?v_:"object"===typeof e?e_.test(e)?Zb:m_:h_}function v_(e,t){const n=[...e],i=n.length,r=e.map(((e,n)=>f_(e)(e,t[n])));return e=>{for(let t=0;t<i;t++)n[t]=r[t](e);return n}}function m_(e,t){const n={...e,...t},i={};for(const r in n)void 0!==e[r]&&void 0!==t[r]&&(i[r]=f_(e[r])(e[r],t[r]));return e=>{for(const t in i)n[t]=i[t](e);return n}}const g_=(e,t)=>{const n=d_.createTransformer(t),i=a_(e),r=a_(t);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?KS(v_(function(e,t){var n;const i=[],r={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const s=t.types[o],a=e.indexes[s][r[s]],c=null!==(n=e.values[a])&&void 0!==n?n:0;i[o]=c,r[s]++}return i}(i,r),r.values),n):(pb(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),h_(e,t))};function y_(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return Vb(e,t,n);return f_(e)(e,t)}function S_(e,t){let{clamp:n=!0,ease:i,mixer:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=e.length;if(fb(o===t.length,"Both input and output ranges must be the same length"),1===o)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=function(e,t,n){const i=[],r=n||y_,o=e.length-1;for(let s=0;s<o;s++){let n=r(e[s],e[s+1]);if(t){const e=Array.isArray(t)?t[s]||LS:t;n=KS(e,n)}i.push(n)}return i}(t,i,r),a=s.length,c=t=>{let n=0;if(a>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const i=jb(e[n],e[n+1],t);return s[n](i)};return n?t=>c(jy(e[0],e[o-1],t)):c}function b_(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const r=jb(0,t,i);e.push(Vb(n,1,r))}}(t,e.length-1),t}function __(e){let{duration:t=300,keyframes:n,times:i,ease:r="easeInOut"}=e;const o=Ab(r)?r.map(Bb):Bb(r),s={done:!1,value:n[0]},a=function(e,t){return e.map((e=>e*t))}(i&&i.length===n.length?i:b_(n),t),c=S_(a,n,{ease:Array.isArray(o)?o:(l=n,u=o,l.map((()=>u||Mb)).splice(0,l.length-1))});var l,u;return{calculatedDuration:t,next:e=>(s.value=c(e),s.done=e>=t,s)}}function w_(e,t){return t?e*(1e3/t):0}const x_=5;function C_(e,t,n){const i=Math.max(t-x_,0);return w_(n-e(i),t-i)}const E_=.001,P_=.01,T_=10,R_=.05,M_=1;function A_(e){let t,n,{duration:i=800,bounce:r=.25,velocity:o=0,mass:s=1}=e;pb(i<=vb(T_),"Spring duration must be 10 seconds or less");let a=1-r;a=jy(R_,M_,a),i=jy(P_,T_,mb(i)),a<1?(t=e=>{const t=e*a,n=t*i,r=t-o,s=k_(e,a),c=Math.exp(-n);return E_-r/s*c},n=e=>{const n=e*a*i,r=n*o+o,s=Math.pow(a,2)*Math.pow(e,2)*i,c=Math.exp(-n),l=k_(Math.pow(e,2),a);return(-t(e)+E_>0?-1:1)*((r-s)*c)/l}):(t=e=>Math.exp(-e*i)*((e-o)*i+1)-E_,n=e=>Math.exp(-e*i)*(i*i*(o-e)));const c=function(e,t,n){let i=n;for(let r=1;r<I_;r++)i-=e(i)/t(i);return i}(t,n,5/i);if(i=vb(i),isNaN(c))return{stiffness:100,damping:10,duration:i};{const e=Math.pow(c,2)*s;return{stiffness:e,damping:2*a*Math.sqrt(s*e),duration:i}}}const I_=12;function k_(e,t){return e*Math.sqrt(1-t*t)}const O_=["duration","bounce"],D_=["stiffness","damping","mass"];function L_(e,t){return t.some((t=>void 0!==e[t]))}function N_(e){let{keyframes:t,restDelta:n,restSpeed:i,...r}=e;const o=t[0],s=t[t.length-1],a={done:!1,value:o},{stiffness:c,damping:l,mass:u,duration:d,velocity:h,isResolvedFromDuration:p}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!L_(e,D_)&&L_(e,O_)){const n=A_(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}({...r,velocity:-mb(r.velocity||0)}),f=h||0,v=l/(2*Math.sqrt(c*u)),m=s-o,g=mb(Math.sqrt(c/u)),y=Math.abs(m)<5;let S;if(i||(i=y?.01:2),n||(n=y?.005:.5),v<1){const e=k_(g,v);S=t=>{const n=Math.exp(-v*g*t);return s-n*((f+v*g*m)/e*Math.sin(e*t)+m*Math.cos(e*t))}}else if(1===v)S=e=>s-Math.exp(-g*e)*(m+(f+g*m)*e);else{const e=g*Math.sqrt(v*v-1);S=t=>{const n=Math.exp(-v*g*t),i=Math.min(e*t,300);return s-n*((f+v*g*m)*Math.sinh(i)+e*m*Math.cosh(i))/e}}return{calculatedDuration:p&&d||null,next:e=>{const t=S(e);if(p)a.done=e>=d;else{let r=f;0!==e&&(r=v<1?C_(S,e,t):0);const o=Math.abs(r)<=i,c=Math.abs(s-t)<=n;a.done=o&&c}return a.value=a.done?s:t,a}}}function z_(e){let{keyframes:t,velocity:n=0,power:i=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:s=500,modifyTarget:a,min:c,max:l,restDelta:u=.5,restSpeed:d}=e;const h=t[0],p={done:!1,value:h},f=e=>void 0===c?l:void 0===l||Math.abs(c-e)<Math.abs(l-e)?c:l;let v=i*n;const m=h+v,g=void 0===a?m:a(m);g!==m&&(v=g-h);const y=e=>-v*Math.exp(-e/r),S=e=>g+y(e),b=e=>{const t=y(e),n=S(e);p.done=Math.abs(t)<=u,p.value=p.done?g:n};let _,w;const x=e=>{(e=>void 0!==c&&e<c||void 0!==l&&e>l)(p.value)&&(_=e,w=N_({keyframes:[p.value,f(p.value)],velocity:C_(S,e,p.value),damping:o,stiffness:s,restDelta:u,restSpeed:d}))};return x(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==_||(t=!0,b(e),x(e)),void 0!==_&&e>_?w.next(e-_):(!t&&b(e),p)}}}let F_;function U_(){F_=void 0}const B_={now:()=>(void 0===F_&&B_.set(FS.isProcessing||iy?FS.timestamp:performance.now()),F_),set:e=>{F_=e,queueMicrotask(U_)}},j_=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>NS.update(t,!0),stop:()=>zS(t),now:()=>FS.isProcessing?FS.timestamp:B_.now()}},V_=2e4;function H_(e){let t=0;let n=e.next(t);for(;!n.done&&t<V_;)t+=50,n=e.next(t);return t>=V_?1/0:t}const W_={decay:z_,inertia:z_,tween:__,keyframes:__,spring:N_},G_=e=>e/100;function q_(e){let t,n,{autoplay:i=!0,delay:r=0,driver:o=j_,keyframes:s,type:a="keyframes",repeat:c=0,repeatDelay:l=0,repeatType:u="loop",onPlay:d,onStop:h,onComplete:p,onUpdate:f,...v}=e,m=1,g=!1;const y=()=>{n=new Promise((e=>{t=e}))};let S;y();const b=W_[a]||__;let _;b!==__&&"number"!==typeof s[0]&&(_=KS(G_,y_(s[0],s[1])),s=[0,100]);const w=b({...v,keyframes:s});let x;"mirror"===u&&(x=b({...v,keyframes:[...s].reverse(),velocity:-(v.velocity||0)}));let C="idle",E=null,P=null,T=null;null===w.calculatedDuration&&c&&(w.calculatedDuration=H_(w));const{calculatedDuration:R}=w;let M=1/0,A=1/0;null!==R&&(M=R+l,A=M*(c+1)-l);let I=0;const k=e=>{if(null===P)return;m>0&&(P=Math.min(P,e)),m<0&&(P=Math.min(e-A/m,P)),I=null!==E?E:Math.round(e-P)*m;const t=I-r*(m>=0?1:-1),n=m>=0?t<0:t>A;I=Math.max(t,0),"finished"===C&&null===E&&(I=A);let i=I,o=w;if(c){const e=Math.min(I,A)/M;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,c+1);Boolean(t%2)&&("reverse"===u?(n=1-n,l&&(n-=l/M)):"mirror"===u&&(o=x)),i=jy(0,1,n)*M}const a=n?{done:!1,value:s[0]}:o.next(i);_&&(a.value=_(a.value));let{done:d}=a;n||null===R||(d=m>=0?I>=A:I<=0);const h=null===E&&("finished"===C||"running"===C&&d);return f&&f(a.value),h&&L(),a},O=()=>{S&&S.stop(),S=void 0},D=()=>{C="idle",O(),t(),y(),P=T=null},L=()=>{C="finished",p&&p(),O(),t()},N=()=>{if(g)return;S||(S=o(k));const e=S.now();d&&d(),null!==E?P=e-E:P&&"finished"!==C||(P=e),"finished"===C&&y(),T=P,E=null,C="running",S.start()};i&&N();const z={then:(e,t)=>n.then(e,t),get time(){return mb(I)},set time(e){e=vb(e),I=e,null===E&&S&&0!==m?P=S.now()-e/m:E=e},get duration(){const e=null===w.calculatedDuration?H_(w):w.calculatedDuration;return mb(e)},get speed(){return m},set speed(e){e!==m&&S&&(m=e,z.time=mb(I))},get state(){return C},play:N,pause:()=>{C="paused",E=I},stop:()=>{g=!0,"idle"!==C&&(C="idle",h&&h(),D())},cancel:()=>{null!==T&&k(T),D()},complete:()=>{C="finished"},sample:e=>(P=0,k(e))};return z}const X_=function(e){let t;return()=>(void 0===t&&(t=e()),t)}((()=>Object.hasOwnProperty.call(Element.prototype,"animate"))),K_=new Set(["opacity","clipPath","filter","transform"]);function J_(e,t,n){let{onUpdate:i,onComplete:r,...o}=n;if(!(X_()&&K_.has(t)&&!o.repeatDelay&&"mirror"!==o.repeatType&&0!==o.damping&&"inertia"!==o.type))return!1;let s,a,c=!1,l=!1;const u=()=>{a=new Promise((e=>{s=e}))};u();let{keyframes:d,duration:h=300,ease:p,times:f}=o;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!Sb(t.ease))(t,o)){const e=q_({...o,repeat:0,delay:0});let t={done:!1,value:d[0]};const n=[];let i=0;for(;!t.done&&i<2e4;)t=e.sample(i),n.push(t.value),i+=10;f=void 0,d=n,h=i-10,p="linear"}const v=function(e,t,n){let{delay:i=0,duration:r,repeat:o=0,repeatType:s="loop",ease:a,times:c}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const l={[t]:n};c&&(l.offset=c);const u=wb(a);return Array.isArray(u)&&(l.easing=u),e.animate(l,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:"reverse"===s?"alternate":"normal"})}(e.owner.current,t,d,{...o,duration:h,ease:p,times:f}),m=()=>{l=!1,v.cancel()},g=()=>{l=!0,NS.update(m),s(),u()};v.onfinish=()=>{l||(e.set(function(e,t){let{repeat:n,repeatType:i="loop"}=t;return e[n&&"loop"!==i&&n%2===1?0:e.length-1]}(d,o)),r&&r(),g())};return{then:(e,t)=>a.then(e,t),attachTimeline:e=>(v.timeline=e,v.onfinish=null,LS),get time(){return mb(v.currentTime||0)},set time(e){v.currentTime=vb(e)},get speed(){return v.playbackRate},set speed(e){v.playbackRate=e},get duration(){return mb(h)},play:()=>{c||(v.play(),zS(m))},pause:()=>v.pause(),stop:()=>{if(c=!0,"idle"===v.playState)return;const{currentTime:t}=v;if(t){const n=q_({...o,autoplay:!1});e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}g()},complete:()=>{l||v.finish()},cancel:g}}const Y_={type:"spring",stiffness:500,damping:25,restSpeed:10},$_={type:"keyframes",duration:.8},Q_={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Z_=(e,t)=>{let{keyframes:n}=t;return n.length>2?$_:Ay.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:Y_:Q_},ew=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!d_.test(t)&&"0"!==t||t.startsWith("url("))),tw=new Set(["brightness","contrast","saturate","opacity"]);function nw(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[i]=n.match(qy)||[];if(!i)return e;const r=n.replace(i,"");let o=tw.has(t)?1:0;return i!==n&&(o*=100),t+"("+o+r+")"}const iw=/([a-z-]*)\(.*?\)/g,rw={...d_,getAnimatableNone:e=>{const t=e.match(iw);return t?t.map(nw).join(" "):e}},ow={...rS,color:e_,backgroundColor:e_,outlineColor:e_,fill:e_,stroke:e_,borderColor:e_,borderTopColor:e_,borderRightColor:e_,borderBottomColor:e_,borderLeftColor:e_,filter:rw,WebkitFilter:rw},sw=e=>ow[e];function aw(e,t){let n=sw(e);return n!==rw&&(n=d_),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const cw=e=>/^0[^.\s]+$/.test(e);function lw(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||cw(e):void 0}function uw(e,t){return e[t]||e.default||e}const dw=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r=>{const o=uw(i,e)||{},s=o.delay||i.delay||0;let{elapsed:a=0}=i;a-=vb(s);const c=function(e,t,n,i){const r=ew(t,n);let o;o=Array.isArray(n)?[...n]:[null,n];const s=void 0!==i.from?i.from:e.get();let a;const c=[];for(let l=0;l<o.length;l++)null===o[l]&&(o[l]=0===l?s:o[l-1]),lw(o[l])&&c.push(l),"string"===typeof o[l]&&"none"!==o[l]&&"0"!==o[l]&&(a=o[l]);if(r&&c.length&&a)for(let l=0;l<c.length;l++)o[c[l]]=aw(t,a);return o}(t,e,n,o),l=c[0],u=c[c.length-1],d=ew(e,l),h=ew(e,u);pb(d===h,"You are trying to animate ".concat(e,' from "').concat(l,'" to "').concat(u,'". ').concat(l," is not an animatable value - to enable this animation set ").concat(l," to a value animatable to ").concat(u," via the `style` property."));let p={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-a,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(function(e){let{when:t,delay:n,delayChildren:i,staggerChildren:r,staggerDirection:o,repeat:s,repeatType:a,repeatDelay:c,from:l,elapsed:u,...d}=e;return!!Object.keys(d).length}(o)||(p={...p,...Z_(e,p)}),p.duration&&(p.duration=vb(p.duration)),p.repeatDelay&&(p.repeatDelay=vb(p.repeatDelay)),!d||!h||gb||!1===o.type||ny)return function(e){let{keyframes:t,delay:n,onUpdate:i,onComplete:r}=e;const o=()=>(i&&i(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:LS,pause:LS,stop:LS,then:e=>(e(),Promise.resolve()),cancel:LS,complete:LS});return n?q_({keyframes:[0,1],duration:0,delay:n,onComplete:o}):o()}(gb?{...p,delay:0}:p);if(!i.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const n=J_(t,e,p);if(n)return n}return q_(p)}};function hw(e){return Boolean(ky(e)&&e.add)}const pw=e=>/^\-?\d*\.?\d+$/.test(e);function fw(e,t){-1===e.indexOf(t)&&e.push(t)}function vw(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class mw{constructor(){this.subscriptions=[]}add(e){return fw(this.subscriptions,e),()=>vw(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](e,t,n);else for(let r=0;r<i;r++){const i=this.subscriptions[r];i&&i(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gw={current:void 0};class yw{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="11.0.8",this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=B_.now();t.updatedAt!==i&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev&&t.events.change&&t.events.change.notify(t.current),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.hasAnimated=!1,this.setCurrent(e),this.canTrackVelocity=(e=>!isNaN(parseFloat(e)))(this.current),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=B_.now()}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new mw);const n=this.events[e].add(t);return"change"===e?()=>{n(),NS.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return gw.current&&gw.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=B_.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return w_(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Sw(e,t){return new yw(e,t)}const bw=e=>t=>t.test(e),_w=[Vy,Zy,Qy,$y,tS,eS,{test:e=>"auto"===e,parse:e=>e}],ww=e=>_w.find(bw(e)),xw=[..._w,e_,d_],Cw=e=>xw.find(bw(e));function Ew(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Sw(n))}function Pw(e,t){const n=hb(e,t);let{transitionEnd:i={},transition:r={},...o}=n?e.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const s in o){Ew(e,s,IS(o[s]))}}function Tw(e,t){if(!t)return;return(t[e]||t.default||t).from}function Rw(e,t){let{protectedKeys:n,needsAnimating:i}=e;const r=n.hasOwnProperty(t)&&!0!==i[t];return i[t]=!1,r}function Mw(e,t){const n=e.get();if(!Array.isArray(t))return n!==t;for(let i=0;i<t.length;i++)if(t[i]!==n)return!0}function Aw(e,t){let{delay:n=0,transitionOverride:i,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:o=e.getDefaultTransition(),transitionEnd:s,...a}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");i&&(o=i);const l=[],u=r&&e.animationState&&e.animationState.getState()[r];for(const d in a){const t=e.getValue(d),i=a[d];if(!t||void 0===i||u&&Rw(u,d))continue;const r={delay:n,elapsed:0,...uw(o||{},d)};if(window.HandoffAppearAnimations){const n=e.getProps()[ty];if(n){const e=window.HandoffAppearAnimations(n,d,t,NS);null!==e&&(r.elapsed=e,r.isHandoff=!0)}}let s=!r.isHandoff&&!Mw(t,i);if("spring"===r.type&&(t.getVelocity()||r.velocity)&&(s=!1),t.animation&&(s=!1),s)continue;t.start(dw(d,t,i,e.shouldReduceMotion&&Ay.has(d)?{type:!1}:r));const h=t.animation;hw(c)&&(c.add(d),h.then((()=>c.remove(d)))),l.push(h)}return s&&Promise.all(l).then((()=>{s&&Pw(e,s)})),l}function Iw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=hb(e,t,n.custom);let{transition:r=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(Aw(e,i,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:o=0,staggerChildren:s,staggerDirection:a}=r;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5?arguments[5]:void 0;const s=[],a=(e.variantChildren.size-1)*i,c=1===r?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*i}:function(){return a-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*i};return Array.from(e.variantChildren).sort(kw).forEach(((e,i)=>{e.notify("AnimationStart",t),s.push(Iw(e,t,{...o,delay:n+c(i)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(s)}(e,t,o+i,s,a,n)}:()=>Promise.resolve(),{when:a}=r;if(a){const[e,t]="beforeChildren"===a?[o,s]:[s,o];return e().then((()=>t()))}return Promise.all([o(),s(n.delay)])}function kw(e,t){return e.sortNodePosition(t)}const Ow=[...hy].reverse(),Dw=hy.length;function Lw(e){return t=>Promise.all(t.map((t=>{let{animation:n,options:i}=t;return function(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map((t=>Iw(e,t,i)));n=Promise.all(r)}else if("string"===typeof t)n=Iw(e,t,i);else{const r="function"===typeof t?hb(e,t,i.custom):t;n=Promise.all(Aw(e,r,i))}return n.then((()=>e.notify("AnimationComplete",t)))}(e,n,i)})))}function Nw(e){let t=Lw(e);const n={animate:Fw(!0),whileInView:Fw(),whileHover:Fw(),whileTap:Fw(),whileDrag:Fw(),whileFocus:Fw(),exit:Fw()};let i=!0;const r=(t,n)=>{const i=hb(e,n);if(i){const{transition:e,transitionEnd:n,...r}=i;t={...t,...r,...n}}return t};function o(o,s){const a=e.getProps(),c=e.getVariantContext(!0)||{},l=[],u=new Set;let d={},h=1/0;for(let t=0;t<Dw;t++){const p=Ow[t],f=n[p],v=void 0!==a[p]?a[p]:c[p],m=uy(v),g=p===s?f.isActive:null;!1===g&&(h=t);let y=v===c[p]&&v!==a[p]&&m;if(y&&i&&e.manuallyAnimateOnMount&&(y=!1),f.protectedKeys={...d},!f.isActive&&null===g||!v&&!f.prevProp||dy(v)||"boolean"===typeof v)continue;let S=zw(f.prevProp,v)||p===s&&f.isActive&&!y&&m||t>h&&m,b=!1;const _=Array.isArray(v)?v:[v];let w=_.reduce(r,{});!1===g&&(w={});const{prevResolvedValues:x={}}=f,C={...x,...w},E=e=>{S=!0,u.has(e)&&(b=!0,u.delete(e)),f.needsAnimating[e]=!0};for(const e in C){const t=w[e],n=x[e];if(d.hasOwnProperty(e))continue;let i=!1;i=MS(t)&&MS(n)?!db(t,n):t!==n,i?void 0!==t?E(e):u.add(e):void 0!==t&&u.has(e)?E(e):f.protectedKeys[e]=!0}f.prevProp=v,f.prevResolvedValues=w,f.isActive&&(d={...d,...w}),i&&e.blockInitialAnimation&&(S=!1),!S||y&&!b||l.push(..._.map((e=>({animation:e,options:{type:p,...o}}))))}if(u.size){const t={};u.forEach((n=>{const i=e.getBaseTarget(n);void 0!==i&&(t[n]=i)})),l.push({animation:t})}let p=Boolean(l.length);return!i||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(p=!1),i=!1,p?t(l):Promise.resolve()}return{animateChanges:o,setActive:function(t,i,r){var s;if(n[t].isActive===i)return Promise.resolve();null===(s=e.variantChildren)||void 0===s||s.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,i)})),n[t].isActive=i;const a=o(r,t);for(const e in n)n[e].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function zw(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!db(t,e)}function Fw(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let Uw=0;const Bw={animation:{Feature:class extends eb{constructor(e){super(e),e.animationState||(e.animationState=Nw(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),dy(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends eb{constructor(){super(...arguments),this.id=Uw++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e,{custom:null!==n&&void 0!==n?n:this.node.getProps().custom});t&&!e&&r.then((()=>t(this.id)))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},jw=(e,t)=>Math.abs(e-t);class Vw{constructor(e,t){let{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Gw(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=jw(e.x,t.x),i=jw(e.y,t.y);return Math.sqrt(n**2+i**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:i}=e,{timestamp:r}=FS;this.history.push({...i,timestamp:r});const{onStart:o,onMove:s}=this.handlers;t||(o&&o(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),s&&s(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Hw(t,this.transformPagePoint),NS.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:i,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const o=Gw("pointercancel"===e.type?this.lastMoveEventInfo:Hw(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,o),i&&i(e,o)},!HS(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.contextWindow=i||window;const o=Hw(WS(e),this.transformPagePoint),{point:s}=o,{timestamp:a}=FS;this.history=[{...s,timestamp:a}];const{onSessionStart:c}=t;c&&c(e,Gw(o,this.history)),this.removeListeners=KS(qS(this.contextWindow,"pointermove",this.handlePointerMove),qS(this.contextWindow,"pointerup",this.handlePointerUp),qS(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),zS(this.updatePoint)}}function Hw(e,t){return t?{point:t(e.point)}:e}function Ww(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Gw(e,t){let{point:n}=e;return{point:n,delta:Ww(n,Xw(t)),offset:Ww(n,qw(t)),velocity:Kw(t,.1)}}function qw(e){return e[0]}function Xw(e){return e[e.length-1]}function Kw(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const r=Xw(e);for(;n>=0&&(i=e[n],!(r.timestamp-i.timestamp>vb(t)));)n--;if(!i)return{x:0,y:0};const o=mb(r.timestamp-i.timestamp);if(0===o)return{x:0,y:0};const s={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Jw(e){return e.max-e.min}function Yw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function $w(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=i,e.originPoint=Vb(t.min,t.max,e.origin),e.scale=Jw(n)/Jw(t),(Yw(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Vb(n.min,n.max,e.origin)-e.originPoint,(Yw(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Qw(e,t,n,i){$w(e.x,t.x,n.x,i?i.originX:void 0),$w(e.y,t.y,n.y,i?i.originY:void 0)}function Zw(e,t,n){e.min=n.min+t.min,e.max=e.min+Jw(t)}function ex(e,t,n){e.min=t.min-n.min,e.max=e.min+Jw(t)}function tx(e,t,n){ex(e.x,t.x,n.x),ex(e.y,t.y,n.y)}function nx(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function ix(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}const rx=.35;function ox(e,t,n){return{min:sx(e,t),max:sx(e,n)}}function sx(e,t){return"number"===typeof e?e:e[t]||0}const ax=()=>({x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}),cx=()=>({x:{min:0,max:0},y:{min:0,max:0}});function lx(e){return[e("x"),e("y")]}function ux(e){let{top:t,left:n,right:i,bottom:r}=e;return{x:{min:n,max:i},y:{min:t,max:r}}}function dx(e){return void 0===e||1===e}function hx(e){let{scale:t,scaleX:n,scaleY:i}=e;return!dx(t)||!dx(n)||!dx(i)}function px(e){return hx(e)||fx(e)||e.z||e.rotate||e.rotateX||e.rotateY}function fx(e){return vx(e.x)||vx(e.y)}function vx(e){return e&&"0%"!==e}function mx(e,t,n){return n+t*(e-n)}function gx(e,t,n,i,r){return void 0!==r&&(e=mx(e,r,i)),mx(e,n,i)+t}function yx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;e.min=gx(e.min,t,n,i,r),e.max=gx(e.max,t,n,i,r)}function Sx(e,t){let{x:n,y:i}=t;yx(e.x,n.translate,n.scale,n.originPoint),yx(e.y,i.translate,i.scale,i.originPoint)}function bx(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function _x(e,t){e.min=e.min+t,e.max=e.max+t}function wx(e,t,n){let[i,r,o]=n;const s=void 0!==t[o]?t[o]:.5,a=Vb(e.min,e.max,s);yx(e,t[i],t[r],a,t.scale)}const xx=["x","scaleX","originX"],Cx=["y","scaleY","originY"];function Ex(e,t){wx(e.x,t,xx),wx(e.y,t,Cx)}function Px(e,t){return ux(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}const Tx=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},Rx=new WeakMap;class Mx{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=cx(),this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:i}=this.getProps();this.panSession=new Vw(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(WS(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:i,onDragStart:r}=this.getProps();if(n&&!i&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=QS(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),lx((e=>{let t=this.getAxisMotionValue(e).get()||0;if(Qy.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const i=n.layout.layoutBox[e];if(i){t=Jw(i)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),r&&NS.update((()=>r(e,t)),!1,!0);const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:i,onDirectionLock:r,onDrag:o}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:s}=t;if(i&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(s),void(null!==this.currentDirection&&r&&r(this.currentDirection));this.updateAxis("x",t.point,s),this.updateAxis("y",t.point,s),this.visualElement.render(),o&&o(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>lx((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,contextWindow:Tx(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:r}=this.getProps();r&&NS.update((()=>r(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!Ax(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=function(e,t,n){let{min:i,max:r}=t;return void 0!==i&&e<i?e=n?Vb(i,e,n.min):Math.max(e,i):void 0!==r&&e>r&&(e=n?Vb(r,e,n.max):Math.min(e,r)),e}(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,r=this.constraints;t&&ly(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!i)&&function(e,t){let{top:n,left:i,bottom:r,right:o}=t;return{x:nx(e.x,i,o),y:nx(e.y,n,r)}}(i.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rx;return!1===e?e=0:!0===e&&(e=rx),{x:ox(e,"left","right"),y:ox(e,"top","bottom")}}(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&lx((e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ly(e))return!1;const n=e.current;fb(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=function(e,t,n){const i=Px(e,n),{scroll:r}=t;return r&&(_x(i.x,r.offset.x),_x(i.y,r.offset.y)),i}(n,i.root,this.visualElement.getTransformPagePoint());let o=function(e,t){return{x:ix(e.x,t.x),y:ix(e.y,t.y)}}(i.layout.layoutBox,r);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!e,e&&(o=ux(e))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:s}=this.getProps(),a=this.constraints||{},c=lx((s=>{if(!Ax(s,t,this.currentDirection))return;let c=a&&a[s]||{};o&&(c={min:0,max:0});const l=i?200:1e6,u=i?40:1e7,d={type:"inertia",velocity:n?e[s]:0,bounceStiffness:l,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...r,...c};return this.startAxisValueAnimation(s,d)}));return Promise.all(c).then(s)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(dw(e,n,0,t))}stopAnimation(){lx((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){lx((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){lx((t=>{const{drag:n}=this.getProps();if(!Ax(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(t);if(i&&i.layout){const{min:n,max:o}=i.layout.layoutBox[t];r.set(e[t]-Vb(n,o,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!ly(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};lx((e=>{const t=this.getAxisMotionValue(e);if(t){const n=t.get();i[e]=function(e,t){let n=.5;const i=Jw(e),r=Jw(t);return r>i?n=jb(t.min,t.max-i,e.min):i>r&&(n=jb(e.min,e.max-r,t.min)),jy(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),lx((t=>{if(!Ax(t,e,null))return;const n=this.getAxisMotionValue(t),{min:r,max:o}=this.constraints[t];n.set(Vb(r,o,i[t]))}))}addListeners(){if(!this.visualElement.current)return;Rx.set(this.visualElement,this);const e=qS(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();ly(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),t();const r=VS(window,"resize",(()=>this.scalePositionWithinConstraints())),o=n.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(lx((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{r(),e(),i(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=rx,dragMomentum:s=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:s}}}function Ax(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const Ix=e=>(t,n)=>{e&&NS.update((()=>e(t,n)))};const kx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ox(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Dx={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Zy.test(e))return e;e=parseFloat(e)}const n=Ox(e,t.target.x),i=Ox(e,t.target.y);return"".concat(n,"% ").concat(i,"%")}},Lx={correct:(e,t)=>{let{treeScale:n,projectionDelta:i}=t;const r=e,o=d_.parse(e);if(o.length>5)return r;const s=d_.createTransformer(e),a="number"!==typeof o[0]?1:0,c=i.x.scale*n.x,l=i.y.scale*n.y;o[0+a]/=c,o[1+a]/=l;const u=Vb(c,l,.5);return"number"===typeof o[2+a]&&(o[2+a]/=u),"number"===typeof o[3+a]&&(o[3+a]/=u),s(o)}};class Nx extends t.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:r}=e;var o;o=Fx,Object.assign(Ry,o),r&&(t.group&&t.group.add(r),n&&n.register&&i&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",(()=>{this.safeToRemove()})),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),kx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:r}=this.props,o=n.projection;return o?(o.isPresent=r,i||e.layoutDependency!==t||void 0===t?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||NS.postRender((()=>{const e=o.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ay.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function zx(e){const[n,i]=Xg(),r=(0,t.useContext)(by);return t.createElement(Nx,{...e,layoutGroup:r,switchLayoutGroup:(0,t.useContext)(_y),isPresent:n,safeToRemove:i})}const Fx={borderRadius:{...Dx,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dx,borderTopRightRadius:Dx,borderBottomLeftRadius:Dx,borderBottomRightRadius:Dx,boxShadow:Lx},Ux=["TopLeft","TopRight","BottomLeft","BottomRight"],Bx=Ux.length,jx=e=>"string"===typeof e?parseFloat(e):e,Vx=e=>"number"===typeof e||Zy.test(e);function Hx(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Wx=qx(0,.5,Db),Gx=qx(.5,.95,LS);function qx(e,t,n){return i=>i<e?0:i>t?1:n(jb(e,t,i))}function Xx(e,t){e.min=t.min,e.max=t.max}function Kx(e,t){Xx(e.x,t.x),Xx(e.y,t.y)}function Jx(e,t,n,i,r){return e=mx(e-=t,1/n,i),void 0!==r&&(e=mx(e,1/r,i)),e}function Yx(e,t,n,i,r){let[o,s,a]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Qy.test(t)&&(t=parseFloat(t),t=Vb(s.min,s.max,t/100)-s.min);if("number"!==typeof t)return;let a=Vb(o.min,o.max,i);e===o&&(a-=t),e.min=Jx(e.min,t,n,a,r),e.max=Jx(e.max,t,n,a,r)}(e,t[o],t[s],t[a],t.scale,i,r)}const $x=["x","scaleX","originX"],Qx=["y","scaleY","originY"];function Zx(e,t,n,i){Yx(e.x,t,$x,n?n.x:void 0,i?i.x:void 0),Yx(e.y,t,Qx,n?n.y:void 0,i?i.y:void 0)}function eC(e){return 0===e.translate&&1===e.scale}function tC(e){return eC(e.x)&&eC(e.y)}function nC(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function iC(e){return Jw(e.x)/Jw(e.y)}class rC{constructor(){this.members=[]}add(e){fw(this.members,e),e.scheduleRender()}remove(e){if(vw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let i=t;i>=0;i--){const e=this.members[i];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;!1===i&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function oC(e,t,n){let i="";const r=e.x.translate/t.x,o=e.y.translate/t.y;if((r||o)&&(i="translate3d(".concat(r,"px, ").concat(o,"px, 0) ")),1===t.x&&1===t.y||(i+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{rotate:e,rotateX:t,rotateY:r}=n;e&&(i+="rotate(".concat(e,"deg) ")),t&&(i+="rotateX(".concat(t,"deg) ")),r&&(i+="rotateY(".concat(r,"deg) "))}const s=e.x.scale*t.x,a=e.y.scale*t.y;return 1===s&&1===a||(i+="scale(".concat(s,", ").concat(a,")")),i||"none"}const sC=(e,t)=>e.depth-t.depth;class aC{constructor(){this.children=[],this.isDirty=!1}add(e){fw(this.children,e),this.isDirty=!0}remove(e){vw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sC),this.isDirty=!1,this.children.forEach(e)}}const cC=["","X","Y","Z"],lC={visibility:"hidden"};let uC=0;const dC={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function hC(e){let{attachResizeListener:t,defaultParent:n,measureScroll:i,checkIsScrollRoot:r,resetTransform:o}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=uC++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,dC.totalNodes=dC.resolvedTargetDeltas=dC.recalculatedProjection=0,this.nodes.forEach(vC),this.nodes.forEach(wC),this.nodes.forEach(xC),this.nodes.forEach(mC),function(e){window.MotionDebug&&window.MotionDebug.record(e)}(dC)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new aC)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new mw),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t&&t.notify(...i)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var i;this.isSVG=(i=e)instanceof SVGElement&&"svg"!==i.tagName,this.instance=e;const{layoutId:r,layout:o,visualElement:s}=this.options;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(o||r)&&(this.isLayoutDirty=!0),t){let n;const i=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=B_.now(),i=r=>{let{timestamp:o}=r;const s=o-n;s>=t&&(zS(i),e(s-t))};return NS.read(i,!0),()=>zS(i)}(i,250),kx.hasAnimatedSinceResize&&(kx.hasAnimatedSinceResize=!1,this.nodes.forEach(_C))}))}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&s&&(r||o)&&this.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:i,layout:r}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const o=this.options.transition||s.getDefaultTransition()||MC,{onLayoutAnimationStart:a,onLayoutAnimationComplete:c}=s.getProps(),l=!this.targetLayout||!nC(this.targetLayout,r)||i,u=!n&&i;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||n&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,u);const e={...uw(o,"layout"),onPlay:a,onComplete:c};(s.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||_C(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,zS(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(CC),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const e=this.path[r];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(yC);this.isUpdating||this.nodes.forEach(SC),this.isUpdating=!1,window.HandoffCancelAllAnimations&&window.HandoffCancelAllAnimations(),this.nodes.forEach(bC),this.nodes.forEach(pC),this.nodes.forEach(fC),this.clearAllSnapshots();const e=B_.now();FS.delta=jy(0,1e3/60,e-FS.timestamp),FS.timestamp=e,FS.isProcessing=!0,US.update.process(FS),US.preRender.process(FS),US.render.process(FS),FS.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ay.read((()=>this.update())))}clearAllSnapshots(){this.nodes.forEach(gC),this.sharedNodes.forEach(EC)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,NS.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){NS.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=cx(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:r(this.instance),offset:i(this.instance)})}resetTransform(){if(!o)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!tC(this.projectionDelta),n=this.getTransformTemplate(),i=n?n(this.latestValues,""):void 0,r=i!==this.prevTransformTemplateValue;e&&(t||px(this.latestValues)||r)&&(o(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var i;return e&&(n=this.removeTransform(n)),kC((i=n).x),kC(i.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return cx();const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(_x(t.x,n.offset.x),_x(t.y,n.offset.y)),t}removeElementScroll(e){const t=cx();Kx(t,e);for(let n=0;n<this.path.length;n++){const i=this.path[n],{scroll:r,options:o}=i;if(i!==this.root&&r&&o.layoutScroll){if(r.isRoot){Kx(t,e);const{scroll:n}=this.root;n&&(_x(t.x,-n.offset.x),_x(t.y,-n.offset.y))}_x(t.x,r.offset.x),_x(t.y,r.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=cx();Kx(n,e);for(let i=0;i<this.path.length;i++){const e=this.path[i];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Ex(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),px(e.latestValues)&&Ex(n,e.latestValues)}return px(this.latestValues)&&Ex(n,this.latestValues),n}removeTransform(e){const t=cx();Kx(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!px(e.latestValues))continue;hx(e.latestValues)&&e.updateSnapshot();const i=cx();Kx(i,e.measurePageBox()),Zx(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,i)}return px(this.latestValues)&&Zx(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==FS.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const i=Boolean(this.resumingFrom)||this!==n;if(!(e||i&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:r,layoutId:o}=this.options;if(this.layout&&(r||o)){if(this.resolvedRelativeTargetAt=FS.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cx(),this.relativeTargetOrigin=cx(),tx(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Kx(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var s,a,c;if(this.target||(this.target=cx(),this.targetWithTransforms=cx()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,a=this.relativeTarget,c=this.relativeParent.target,Zw(s.x,a.x,c.x),Zw(s.y,a.y,c.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Kx(this.target,this.layout.layoutBox),Sx(this.target,this.targetDelta)):Kx(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cx(),this.relativeTargetOrigin=cx(),tx(this.relativeTargetOrigin,this.target,e.target),Kx(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}dC.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!hx(this.parent.latestValues)&&!fx(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let i=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(i=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===FS.timestamp&&(i=!1),i)return;const{layout:r,layoutId:o}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!o)return;Kx(this.layoutCorrected,this.layout.layoutBox);const s=this.treeScale.x,a=this.treeScale.y;!function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=n.length;if(!r)return;let o,s;t.x=t.y=1;for(let a=0;a<r;a++){o=n[a],s=o.projectionDelta;const r=o.instance;r&&r.style&&"contents"===r.style.display||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ex(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,Sx(e,s)),i&&px(o.latestValues)&&Ex(e,o.latestValues))}t.x=bx(t.x),t.y=bx(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms=cx());const{target:c}=t;if(!c)return void(this.projectionTransform&&(this.projectionDelta=ax(),this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta=ax(),this.projectionDeltaWithTransform=ax());const l=this.projectionTransform;Qw(this.projectionDelta,this.layoutCorrected,c,this.latestValues),this.projectionTransform=oC(this.projectionDelta,this.treeScale),this.projectionTransform===l&&this.treeScale.x===s&&this.treeScale.y===a||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",c)),dC.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,i=n?n.latestValues:{},r={...this.latestValues},o=ax();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const s=cx(),a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),l=!c||c.members.length<=1,u=Boolean(a&&!l&&!0===this.options.crossfade&&!this.path.some(RC));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;PC(o.x,e.x,n),PC(o.y,e.y,n),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(tx(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,i){TC(e.x,t.x,n.x,i),TC(e.y,t.y,n.y,i)}(this.relativeTarget,this.relativeTargetOrigin,s,n),d&&function(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d=cx()),Kx(d,this.relativeTarget)),a&&(this.animationValues=r,function(e,t,n,i,r,o){r?(e.opacity=Vb(0,void 0!==n.opacity?n.opacity:1,Wx(i)),e.opacityExit=Vb(void 0!==t.opacity?t.opacity:1,0,Gx(i))):o&&(e.opacity=Vb(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,i));for(let s=0;s<Bx;s++){const r="border".concat(Ux[s],"Radius");let o=Hx(t,r),a=Hx(n,r);void 0===o&&void 0===a||(o||(o=0),a||(a=0),0===o||0===a||Vx(o)===Vx(a)?(e[r]=Math.max(Vb(jx(o),jx(a),i),0),(Qy.test(a)||Qy.test(o))&&(e[r]+="%")):e[r]=a)}(t.rotate||n.rotate)&&(e.rotate=Vb(t.rotate||0,n.rotate||0,i))}(r,i,this.latestValues,n,u,l)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(zS(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=NS.update((()=>{kx.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const i=ky(e)?e:Sw(e);return i.start(dw("",i,t,n)),i.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:i,latestValues:r}=e;if(t&&n&&i){if(this!==e&&this.layout&&i&&OC(this.options.animationType,this.layout.layoutBox,i.layoutBox)){n=this.target||cx();const t=Jw(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const i=Jw(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+i}Kx(t,n),Ex(t,r),Qw(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new rC);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this.getStack();i&&i.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),!t)return;const i={};for(let r=0;r<cC.length;r++){const t="rotate"+cC[r];n[t]&&(i[t]=n[t],e.setStaticValue(t,0))}e.render();for(const r in i)e.setStaticValue(r,i[r]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return lC;const i={visibility:""},r=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=kS(null===e||void 0===e?void 0:e.pointerEvents)||"",i.transform=r?r(this.latestValues,""):"none",i;const o=this.getLead();if(!this.projectionDelta||!this.layout||!o.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=kS(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!px(this.latestValues)&&(t.transform=r?r({},""):"none",this.hasProjected=!1),t}const s=o.animationValues||o.latestValues;this.applyTransformsToTarget(),i.transform=oC(this.projectionDeltaWithTransform,this.treeScale,s),r&&(i.transform=r(s,i.transform));const{x:a,y:c}=this.projectionDelta;i.transformOrigin="".concat(100*a.origin,"% ").concat(100*c.origin,"% 0"),o.animationValues?i.opacity=o===this?null!==(n=null!==(t=s.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:i.opacity=o===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const l in Ry){if(void 0===s[l])continue;const{correct:e,applyTo:t}=Ry[l],n="none"===i.transform?s[l]:e(s[l],o);if(t){const e=t.length;for(let r=0;r<e;r++)i[t[r]]=n}else i[l]=n}return this.options.layoutId&&(i.pointerEvents=o===this?kS(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),i}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(yC),this.root.sharedNodes.clear()}}}function pC(e){e.updateLayout()}function fC(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=e.layout,{animationType:r}=e.options,o=n.source!==e.layout.source;"size"===r?lx((e=>{const i=o?n.measuredBox[e]:n.layoutBox[e],r=Jw(i);i.min=t[e].min,i.max=i.min+r})):OC(r,n.layoutBox,t)&&lx((i=>{const r=o?n.measuredBox[i]:n.layoutBox[i],s=Jw(t[i]);r.max=r.min+s,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[i].max=e.relativeTarget[i].min+s)}));const s=ax();Qw(s,t,n.layoutBox);const a=ax();o?Qw(a,e.applyTransform(i,!0),n.measuredBox):Qw(a,t,n.layoutBox);const c=!tC(s);let l=!1;if(!e.resumeFrom){const i=e.getClosestProjectingParent();if(i&&!i.resumeFrom){const{snapshot:r,layout:o}=i;if(r&&o){const s=cx();tx(s,n.layoutBox,r.layoutBox);const a=cx();tx(a,t,o.layoutBox),nC(s,a)||(l=!0),i.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=s,e.relativeParent=i)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:s,hasLayoutChanged:c,hasRelativeTargetChanged:l})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function vC(e){dC.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function mC(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function gC(e){e.clearSnapshot()}function yC(e){e.clearMeasurements()}function SC(e){e.isLayoutDirty=!1}function bC(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function _C(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function wC(e){e.resolveTargetDelta()}function xC(e){e.calcProjection()}function CC(e){e.resetRotation()}function EC(e){e.removeLeadSnapshot()}function PC(e,t,n){e.translate=Vb(t.translate,0,n),e.scale=Vb(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function TC(e,t,n,i){e.min=Vb(t.min,n.min,i),e.max=Vb(t.max,n.max,i)}function RC(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const MC={duration:.45,ease:[.4,0,.1,1]},AC=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),IC=AC("applewebkit/")&&!AC("chrome/")?Math.round:LS;function kC(e){e.min=IC(e.min),e.max=IC(e.max)}function OC(e,t,n){return"position"===e||"preserve-aspect"===e&&!Yw(iC(t),iC(n),.2)}const DC=hC({attachResizeListener:(e,t)=>VS(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),LC={current:void 0},NC=hC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!LC.current){const e=new DC({});e.mount(window),e.setOptions({layoutScroll:!0}),LC.current=e}return LC.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),zC={pan:{Feature:class extends eb{constructor(){super(...arguments),this.removePointerDownListener=LS}onPointerDown(e){this.session=new Vw(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Tx(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Ix(e),onStart:Ix(t),onMove:n,onEnd:(e,t)=>{delete this.session,i&&NS.update((()=>i(e,t)))}}}mount(){this.removePointerDownListener=qS(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends eb{constructor(e){super(e),this.removeGroupControls=LS,this.removeListeners=LS,this.controls=new Mx(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||LS}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:NC,MeasureLayout:zx}},FC=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;const UC=4;function BC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;fb(n<=UC,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));const[i,r]=function(e){const t=FC.exec(e);if(!t)return[,];const[,n,i]=t;return[n,i]}(e);if(!i)return;const o=window.getComputedStyle(t).getPropertyValue(i);if(o){const e=o.trim();return pw(e)?parseFloat(e):e}return Fy(r)?BC(r,t,n+1):r}const jC=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),VC=e=>jC.has(e),HC=e=>e===Vy||e===Zy,WC=(e,t)=>parseFloat(e.split(", ")[t]),GC=(e,t)=>(n,i)=>{let{transform:r}=i;if("none"===r||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/);if(o)return WC(o[1],t);{const t=r.match(/^matrix\((.+)\)$/);return t?WC(t[1],e):0}},qC=new Set(["x","y","z"]),XC=My.filter((e=>!qC.has(e)));const KC={width:(e,t)=>{let{x:n}=e,{paddingLeft:i="0",paddingRight:r="0"}=t;return n.max-n.min-parseFloat(i)-parseFloat(r)},height:(e,t)=>{let{y:n}=e,{paddingTop:i="0",paddingBottom:r="0"}=t;return n.max-n.min-parseFloat(i)-parseFloat(r)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:i}=t;return parseFloat(i)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:i}=t;return parseFloat(i)+(n.max-n.min)},x:GC(4,13),y:GC(5,14)};KC.translateX=KC.x,KC.translateY=KC.y;const JC=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t={...t},i={...i};const r=Object.keys(t).filter(VC);let o=[],s=!1;const a=[];if(r.forEach((r=>{const c=e.getValue(r);if(!e.hasValue(r))return;let l=n[r],u=ww(l);const d=t[r];let h;if(MS(d)){const e=d.length,t=null===d[0]?1:0;l=d[t],u=ww(l);for(let n=t;n<e&&null!==d[n];n++)h?fb(ww(d[n])===h,"All keyframes must be of the same type"):(h=ww(d[n]),fb(h===u||HC(u)&&HC(h),"Keyframes must be of the same dimension as the current value"))}else h=ww(d);if(u!==h)if(HC(u)&&HC(h)){const e=c.get();"string"===typeof e&&c.set(parseFloat(e)),"string"===typeof d?t[r]=parseFloat(d):Array.isArray(d)&&h===Zy&&(t[r]=d.map(parseFloat))}else(null===u||void 0===u?void 0:u.transform)&&(null===h||void 0===h?void 0:h.transform)&&(0===l||0===d)?0===l?c.set(h.transform(l)):t[r]=u.transform(d):(s||(o=function(e){const t=[];return XC.forEach((n=>{const i=e.getValue(n);void 0!==i&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))})),t.length&&e.render(),t}(e),s=!0),a.push(r),i[r]=void 0!==i[r]?i[r]:t[r],c.jump(d))})),a.length){const n=a.indexOf("height")>=0?window.pageYOffset:null,r=((e,t,n)=>{const i=t.measureViewportBox(),r=t.current,o=getComputedStyle(r),{display:s}=o,a={};"none"===s&&t.setStaticValue("display",e.display||"block"),n.forEach((e=>{a[e]=KC[e](i,o)})),t.render();const c=t.measureViewportBox();return n.forEach((n=>{const i=t.getValue(n);i&&i.jump(a[n]),e[n]=KC[n](c,o)})),e})(t,e,a);return o.length&&o.forEach((t=>{let[n,i]=t;e.getValue(n).set(i)})),e.render(),$g&&null!==n&&window.scrollTo({top:n}),{target:r,transitionEnd:i}}return{target:t,transitionEnd:i}};function YC(e,t,n,i){return(e=>Object.keys(e).some(VC))(t)?JC(e,t,n,i):{target:t,transitionEnd:i}}const $C=(e,t,n,i)=>{const r=function(e,t,n){let{...i}=t;const r=e.current;if(!(r instanceof Element))return{target:i,transitionEnd:n};n&&(n={...n}),e.values.forEach((e=>{const t=e.get();if(!Fy(t))return;const n=BC(t,r);n&&e.set(n)}));for(const o in i){const e=i[o];if(!Fy(e))continue;const t=BC(e,r);t&&(i[o]=t,n||(n={}),void 0===n[o]&&(n[o]=e))}return{target:i,transitionEnd:n}}(e,t,i);return YC(e,t=r.target,n,i=r.transitionEnd)},QC={current:null},ZC={current:!1};const eE=new WeakMap,tE=Object.keys(Sy),nE=tE.length,iE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],rE=py.length;class oE{constructor(e){let{parent:t,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>NS.render(this.render,!1,!0);const{latestValues:a,renderState:c}=o;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=s,this.isControllingVariants=fy(n),this.isVariantNode=vy(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:l,...u}=this.scrapeMotionValuesFromProps(n,{});for(const d in u){const e=u[d];void 0!==a[d]&&ky(e)&&(e.set(a[d],!1),hw(l)&&l.add(d))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,eE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),ZC.current||function(){if(ZC.current=!0,$g)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>QC.current=e.matches;e.addListener(t),t()}else QC.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||QC.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){eE.delete(this.current),this.projection&&this.projection.unmount(),zS(this.notifyUpdate),zS(this.render),this.valueSubscriptions.forEach((e=>e())),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=Ay.has(e),i=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&NS.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)})),r=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,(()=>{i(),r()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures(e,t,n,i){let r,o,{children:s,...a}=e;for(let c=0;c<nE;c++){const e=tE[c],{isEnabled:t,Feature:n,ProjectionNode:i,MeasureLayout:s}=Sy[e];i&&(r=i),t(a)&&(!this.features[e]&&n&&(this.features[e]=new n(this)),s&&(o=s))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&r){this.projection=new r(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:t,drag:n,dragConstraints:o,layoutScroll:s,layoutRoot:c}=a;this.projection.setOptions({layoutId:e,layout:t,alwaysMeasureLayout:Boolean(n)||o&&ly(o),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof t?t:"both",initialPromotionConfig:i,layoutScroll:s,layoutRoot:c})}return o}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):cx()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<iE.length;n++){const t=iE[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const i=e["on"+t];i&&(this.propEventSubscriptions[t]=this.on(t,i))}this.prevMotionValues=function(e,t,n){const{willChange:i}=t;for(const r in t){const o=t[r],s=n[r];if(ky(o))e.addValue(r,o),hw(i)&&i.add(r);else if(ky(s))e.addValue(r,Sw(o,{owner:e})),hw(i)&&i.remove(r);else if(s!==o)if(e.hasValue(r)){const t=e.getValue(r);!t.hasAnimated&&t.set(o)}else{const t=e.getStaticValue(r);e.addValue(r,Sw(void 0!==t?t:o,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<rE;t++){const n=py[t],i=this.props[n];(uy(i)||!1===i)&&(e[n]=i)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=Sw(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,i="string"===typeof n||"object"===typeof n?null===(t=TS(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==i)return i;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||ky(r)?void 0!==this.initialValues[e]&&void 0===i?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new mw),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.events[e].notify(...n)}}}class sE extends oE{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:i}=t;delete n[e],delete i[e]}makeTargetAnimatableFromInstance(e,t){let{transition:n,transitionEnd:i,...r}=e;const o=function(e,t,n){const i={};for(const r in e){const e=Tw(r,t);if(void 0!==e)i[r]=e;else{const e=n.getValue(r);e&&(i[r]=e.get())}}return i}(r,n||{},this);if(t){!function(e,t,n){var i,r;const o=Object.keys(t).filter((t=>!e.hasValue(t))),s=o.length;if(s)for(let a=0;a<s;a++){const s=o[a],c=t[s];let l=null;Array.isArray(c)&&(l=c[0]),null===l&&(l=null!==(r=null!==(i=n[s])&&void 0!==i?i:e.readValue(s))&&void 0!==r?r:t[s]),void 0!==l&&null!==l&&("string"===typeof l&&(pw(l)||cw(l))?l=parseFloat(l):!Cw(l)&&d_.test(c)&&(l=aw(s,c)),e.addValue(s,Sw(l,{owner:e})),void 0===n[s]&&(n[s]=l),null!==l&&e.setBaseTarget(s,l))}}(this,r,o);const e=$C(this,r,o,i);i=e.transitionEnd,r=e.target}return{transition:n,transitionEnd:i,...r}}}class aE extends sE{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(Ay.has(t)){const e=sw(t);return e&&e.default||0}{const i=(n=e,window.getComputedStyle(n)),r=(Ny(t)?i.getPropertyValue(t):i[t])||0;return"string"===typeof r?r.trim():r}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return Px(e,n)}build(e,t,n,i){oS(e,t,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return ES(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ky(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent="".concat(e))})))}renderInstance(e,t,n,i){wS(e,t,n,i)}}class cE extends sE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ay.has(t)){const e=sw(t);return e&&e.default||0}return t=xS.has(t)?t:ey(t),e.getAttribute(t)}measureInstanceViewportBox(){return cx()}scrapeMotionValuesFromProps(e,t){return PS(e,t)}build(e,t,n,i){gS(e,t,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,n,i){CS(e,t,0,i)}mount(e){this.isSVGTag=SS(e.tagName),super.mount(e)}}const lE=(e,t)=>Ty(e)?new cE(t,{enableHardwareAcceleration:!1}):new aE(t,{enableHardwareAcceleration:!0}),uE={...Bw,...ub,...zC,...{layout:{ProjectionNode:NC,MeasureLayout:zx}}},dE=Ey(((e,t)=>function(e,t,n,i){let{forwardMotionProps:r=!1}=t;return{...Ty(e)?BS:jS,preloadedFeatures:n,useRender:_S(r),createVisualElement:i,Component:e}}(e,t,uE,lE)));var hE=n(9611),pE=e=>"string"===typeof e?e.replace(/!(important)?$/,"").trim():e,fE=(e,t)=>n=>{const i=String(t),r=(e=>/!(important)?$/.test(e))(i),o=pE(i),s=e?"".concat(e,".").concat(o):o;let a=Bg(n.__cssMap)&&s in n.__cssMap?n.__cssMap[s].varRef:t;return a=pE(a),r?"".concat(a," !important"):a};function vE(e){const{scale:t,transform:n,compose:i}=e;return(e,r)=>{var o;const s=fE(t,e)(r);let a=null!=(o=null==n?void 0:n(s,r))?o:s;return i&&(a=i(a,r)),a}}var mE=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduce(((e,t)=>t(e)),e)};function gE(e,t){return n=>{const i={property:n,scale:e};return i.transform=vE({scale:e,transform:t}),i}}var yE=e=>{let{rtl:t,ltr:n}=e;return e=>"rtl"===e.direction?t:n};var SE=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];var bE={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},_E={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};var wE={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},xE={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},CE=new Set(Object.values(xE)),EE=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),PE=e=>e.trim();var TE=e=>"string"===typeof e&&e.includes("(")&&e.includes(")");var RE=e=>t=>"".concat(e,"(").concat(t,")"),ME={filter:e=>"auto"!==e?e:bE,backdropFilter:e=>"auto"!==e?e:_E,ring:e=>function(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}(ME.px(e)),bgClip:e=>"text"===e?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e},transform:e=>"auto"===e?["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...SE].join(" "):"auto-gpu"===e?["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...SE].join(" "):e,vh:e=>"$100vh"===e?"var(--chakra-vh)":e,px(e){if(null==e)return e;const{unitless:t}=(e=>{const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}})(e);return t||"number"===typeof e?"".concat(e,"px"):e},fraction:e=>"number"!==typeof e||e>1?e:"".concat(100*e,"%"),float:(e,t)=>"rtl"===t.direction?{left:"right",right:"left"}[e]:e,degree(e){if(function(e){return/^var\(--.+\)$/.test(e)}(e)||null==e)return e;const t="string"===typeof e&&!e.endsWith("deg");return"number"===typeof e||t?"".concat(e,"deg"):e},gradient:(e,t)=>function(e,t){if(null==e||EE.has(e))return e;if(!TE(e)&&!EE.has(e))return"url('".concat(e,"')");const n=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),i=null==n?void 0:n[1],r=null==n?void 0:n[2];if(!i||!r)return e;const o=i.includes("-gradient")?i:"".concat(i,"-gradient"),[s,...a]=r.split(",").map(PE).filter(Boolean);if(0===(null==a?void 0:a.length))return e;const c=s in xE?xE[s]:s;a.unshift(c);const l=a.map((e=>{if(CE.has(e))return e;const n=e.indexOf(" "),[i,r]=-1!==n?[e.substr(0,n),e.substr(n+1)]:[e],o=TE(r)?r:r&&r.split(" "),s="colors.".concat(i),a=s in t.__cssMap?t.__cssMap[s].varRef:i;return o?[a,...Array.isArray(o)?o:[o]].join(" "):a}));return"".concat(o,"(").concat(l.join(", "),")")}(e,null!=t?t:{}),blur:RE("blur"),opacity:RE("opacity"),brightness:RE("brightness"),contrast:RE("contrast"),dropShadow:RE("drop-shadow"),grayscale:RE("grayscale"),hueRotate:e=>RE("hue-rotate")(ME.degree(e)),invert:RE("invert"),saturate:RE("saturate"),sepia:RE("sepia"),bgImage(e){if(null==e)return e;return TE(e)||EE.has(e)?e:"url(".concat(e,")")},outline(e){const t="0"===String(e)||"none"===String(e);return null!==e&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){var t;const{space:n,divide:i}=null!=(t=wE[e])?t:{},r={flexDirection:e};return n&&(r[n]=1),i&&(r[i]=1),r}},AE={borderWidths:gE("borderWidths"),borderStyles:gE("borderStyles"),colors:gE("colors"),borders:gE("borders"),gradients:gE("gradients",ME.gradient),radii:gE("radii",ME.px),space:gE("space",mE(ME.vh,ME.px)),spaceT:gE("space",mE(ME.vh,ME.px)),degreeT:e=>({property:e,transform:ME.degree}),prop:(e,t,n)=>({property:e,scale:t,...t&&{transform:vE({scale:t,transform:n})}}),propT:(e,t)=>({property:e,transform:t}),sizes:gE("sizes",mE(ME.vh,ME.px)),sizesT:gE("sizes",mE(ME.vh,ME.fraction)),shadows:gE("shadows"),logical:function(e){const{property:t,scale:n,transform:i}=e;return{scale:n,property:yE(t),transform:n?vE({scale:n,compose:i}):i}},blur:gE("blur",ME.blur)},IE={background:AE.colors("background"),backgroundColor:AE.colors("backgroundColor"),backgroundImage:AE.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:ME.bgClip},bgSize:AE.prop("backgroundSize"),bgPosition:AE.prop("backgroundPosition"),bg:AE.colors("background"),bgColor:AE.colors("backgroundColor"),bgPos:AE.prop("backgroundPosition"),bgRepeat:AE.prop("backgroundRepeat"),bgAttachment:AE.prop("backgroundAttachment"),bgGradient:AE.gradients("backgroundImage"),bgClip:{transform:ME.bgClip}};Object.assign(IE,{bgImage:IE.backgroundImage,bgImg:IE.backgroundImage});var kE={border:AE.borders("border"),borderWidth:AE.borderWidths("borderWidth"),borderStyle:AE.borderStyles("borderStyle"),borderColor:AE.colors("borderColor"),borderRadius:AE.radii("borderRadius"),borderTop:AE.borders("borderTop"),borderBlockStart:AE.borders("borderBlockStart"),borderTopLeftRadius:AE.radii("borderTopLeftRadius"),borderStartStartRadius:AE.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:AE.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:AE.radii("borderTopRightRadius"),borderStartEndRadius:AE.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:AE.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:AE.borders("borderRight"),borderInlineEnd:AE.borders("borderInlineEnd"),borderBottom:AE.borders("borderBottom"),borderBlockEnd:AE.borders("borderBlockEnd"),borderBottomLeftRadius:AE.radii("borderBottomLeftRadius"),borderBottomRightRadius:AE.radii("borderBottomRightRadius"),borderLeft:AE.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:AE.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:AE.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:AE.borders(["borderLeft","borderRight"]),borderInline:AE.borders("borderInline"),borderY:AE.borders(["borderTop","borderBottom"]),borderBlock:AE.borders("borderBlock"),borderTopWidth:AE.borderWidths("borderTopWidth"),borderBlockStartWidth:AE.borderWidths("borderBlockStartWidth"),borderTopColor:AE.colors("borderTopColor"),borderBlockStartColor:AE.colors("borderBlockStartColor"),borderTopStyle:AE.borderStyles("borderTopStyle"),borderBlockStartStyle:AE.borderStyles("borderBlockStartStyle"),borderBottomWidth:AE.borderWidths("borderBottomWidth"),borderBlockEndWidth:AE.borderWidths("borderBlockEndWidth"),borderBottomColor:AE.colors("borderBottomColor"),borderBlockEndColor:AE.colors("borderBlockEndColor"),borderBottomStyle:AE.borderStyles("borderBottomStyle"),borderBlockEndStyle:AE.borderStyles("borderBlockEndStyle"),borderLeftWidth:AE.borderWidths("borderLeftWidth"),borderInlineStartWidth:AE.borderWidths("borderInlineStartWidth"),borderLeftColor:AE.colors("borderLeftColor"),borderInlineStartColor:AE.colors("borderInlineStartColor"),borderLeftStyle:AE.borderStyles("borderLeftStyle"),borderInlineStartStyle:AE.borderStyles("borderInlineStartStyle"),borderRightWidth:AE.borderWidths("borderRightWidth"),borderInlineEndWidth:AE.borderWidths("borderInlineEndWidth"),borderRightColor:AE.colors("borderRightColor"),borderInlineEndColor:AE.colors("borderInlineEndColor"),borderRightStyle:AE.borderStyles("borderRightStyle"),borderInlineEndStyle:AE.borderStyles("borderInlineEndStyle"),borderTopRadius:AE.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:AE.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:AE.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:AE.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(kE,{rounded:kE.borderRadius,roundedTop:kE.borderTopRadius,roundedTopLeft:kE.borderTopLeftRadius,roundedTopRight:kE.borderTopRightRadius,roundedTopStart:kE.borderStartStartRadius,roundedTopEnd:kE.borderStartEndRadius,roundedBottom:kE.borderBottomRadius,roundedBottomLeft:kE.borderBottomLeftRadius,roundedBottomRight:kE.borderBottomRightRadius,roundedBottomStart:kE.borderEndStartRadius,roundedBottomEnd:kE.borderEndEndRadius,roundedLeft:kE.borderLeftRadius,roundedRight:kE.borderRightRadius,roundedStart:kE.borderInlineStartRadius,roundedEnd:kE.borderInlineEndRadius,borderStart:kE.borderInlineStart,borderEnd:kE.borderInlineEnd,borderTopStartRadius:kE.borderStartStartRadius,borderTopEndRadius:kE.borderStartEndRadius,borderBottomStartRadius:kE.borderEndStartRadius,borderBottomEndRadius:kE.borderEndEndRadius,borderStartRadius:kE.borderInlineStartRadius,borderEndRadius:kE.borderInlineEndRadius,borderStartWidth:kE.borderInlineStartWidth,borderEndWidth:kE.borderInlineEndWidth,borderStartColor:kE.borderInlineStartColor,borderEndColor:kE.borderInlineEndColor,borderStartStyle:kE.borderInlineStartStyle,borderEndStyle:kE.borderInlineEndStyle});var OE={color:AE.colors("color"),textColor:AE.colors("color"),fill:AE.colors("fill"),stroke:AE.colors("stroke")},DE={boxShadow:AE.shadows("boxShadow"),mixBlendMode:!0,blendMode:AE.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:AE.prop("backgroundBlendMode"),opacity:!0};Object.assign(DE,{shadow:DE.boxShadow});var LE={filter:{transform:ME.filter},blur:AE.blur("--chakra-blur"),brightness:AE.propT("--chakra-brightness",ME.brightness),contrast:AE.propT("--chakra-contrast",ME.contrast),hueRotate:AE.propT("--chakra-hue-rotate",ME.hueRotate),invert:AE.propT("--chakra-invert",ME.invert),saturate:AE.propT("--chakra-saturate",ME.saturate),dropShadow:AE.propT("--chakra-drop-shadow",ME.dropShadow),backdropFilter:{transform:ME.backdropFilter},backdropBlur:AE.blur("--chakra-backdrop-blur"),backdropBrightness:AE.propT("--chakra-backdrop-brightness",ME.brightness),backdropContrast:AE.propT("--chakra-backdrop-contrast",ME.contrast),backdropHueRotate:AE.propT("--chakra-backdrop-hue-rotate",ME.hueRotate),backdropInvert:AE.propT("--chakra-backdrop-invert",ME.invert),backdropSaturate:AE.propT("--chakra-backdrop-saturate",ME.saturate)},NE={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:ME.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:AE.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:AE.space("gap"),rowGap:AE.space("rowGap"),columnGap:AE.space("columnGap")};Object.assign(NE,{flexDir:NE.flexDirection});var zE={gridGap:AE.space("gridGap"),gridColumnGap:AE.space("gridColumnGap"),gridRowGap:AE.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},FE={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:ME.outline},outlineOffset:!0,outlineColor:AE.colors("outlineColor")},UE={width:AE.sizesT("width"),inlineSize:AE.sizesT("inlineSize"),height:AE.sizes("height"),blockSize:AE.sizes("blockSize"),boxSize:AE.sizes(["width","height"]),minWidth:AE.sizes("minWidth"),minInlineSize:AE.sizes("minInlineSize"),minHeight:AE.sizes("minHeight"),minBlockSize:AE.sizes("minBlockSize"),maxWidth:AE.sizes("maxWidth"),maxInlineSize:AE.sizes("maxInlineSize"),maxHeight:AE.sizes("maxHeight"),maxBlockSize:AE.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>{var n,i,r;const o=null!=(r=null==(i=null==(n=t.__breakpoints)?void 0:n.get(e))?void 0:i.minW)?r:e;return{["@media screen and (min-width: ".concat(o,")")]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(e,t)=>{var n,i,r;const o=null!=(r=null==(i=null==(n=t.__breakpoints)?void 0:n.get(e))?void 0:i._minW)?r:e;return{["@media screen and (max-width: ".concat(o,")")]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:AE.propT("float",ME.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(UE,{w:UE.width,h:UE.height,minW:UE.minWidth,maxW:UE.maxWidth,minH:UE.minHeight,maxH:UE.maxHeight,overscroll:UE.overscrollBehavior,overscrollX:UE.overscrollBehaviorX,overscrollY:UE.overscrollBehaviorY});var BE={listStyleType:!0,listStylePosition:!0,listStylePos:AE.prop("listStylePosition"),listStyleImage:!0,listStyleImg:AE.prop("listStyleImage")};var jE=(e=>{const t=new WeakMap;return(n,i,r,o)=>{if("undefined"===typeof n)return e(n,i,r);t.has(n)||t.set(n,new Map);const s=t.get(n);if(s.has(i))return s.get(i);const a=e(n,i,r,o);return s.set(i,a),a}})((function(e,t,n,i){const r="string"===typeof t?t.split("."):[t];for(i=0;i<r.length&&e;i+=1)e=e[r[i]];return void 0===e?n:e})),VE={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},HE={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},WE=(e,t,n)=>{const i={},r=jE(e,t,{});for(const o in r){o in n&&null!=n[o]||(i[o]=r[o])}return i},GE={srOnly:{transform:e=>!0===e?VE:"focusable"===e?HE:{}},layerStyle:{processResult:!0,transform:(e,t,n)=>WE(t,"layerStyles.".concat(e),n)},textStyle:{processResult:!0,transform:(e,t,n)=>WE(t,"textStyles.".concat(e),n)},apply:{processResult:!0,transform:(e,t,n)=>WE(t,e,n)}},qE={position:!0,pos:AE.prop("position"),zIndex:AE.prop("zIndex","zIndices"),inset:AE.spaceT("inset"),insetX:AE.spaceT(["left","right"]),insetInline:AE.spaceT("insetInline"),insetY:AE.spaceT(["top","bottom"]),insetBlock:AE.spaceT("insetBlock"),top:AE.spaceT("top"),insetBlockStart:AE.spaceT("insetBlockStart"),bottom:AE.spaceT("bottom"),insetBlockEnd:AE.spaceT("insetBlockEnd"),left:AE.spaceT("left"),insetInlineStart:AE.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:AE.spaceT("right"),insetInlineEnd:AE.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(qE,{insetStart:qE.insetInlineStart,insetEnd:qE.insetInlineEnd});var XE={ring:{transform:ME.ring},ringColor:AE.colors("--chakra-ring-color"),ringOffset:AE.prop("--chakra-ring-offset-width"),ringOffsetColor:AE.colors("--chakra-ring-offset-color"),ringInset:AE.prop("--chakra-ring-inset")},KE={margin:AE.spaceT("margin"),marginTop:AE.spaceT("marginTop"),marginBlockStart:AE.spaceT("marginBlockStart"),marginRight:AE.spaceT("marginRight"),marginInlineEnd:AE.spaceT("marginInlineEnd"),marginBottom:AE.spaceT("marginBottom"),marginBlockEnd:AE.spaceT("marginBlockEnd"),marginLeft:AE.spaceT("marginLeft"),marginInlineStart:AE.spaceT("marginInlineStart"),marginX:AE.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:AE.spaceT("marginInline"),marginY:AE.spaceT(["marginTop","marginBottom"]),marginBlock:AE.spaceT("marginBlock"),padding:AE.space("padding"),paddingTop:AE.space("paddingTop"),paddingBlockStart:AE.space("paddingBlockStart"),paddingRight:AE.space("paddingRight"),paddingBottom:AE.space("paddingBottom"),paddingBlockEnd:AE.space("paddingBlockEnd"),paddingLeft:AE.space("paddingLeft"),paddingInlineStart:AE.space("paddingInlineStart"),paddingInlineEnd:AE.space("paddingInlineEnd"),paddingX:AE.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:AE.space("paddingInline"),paddingY:AE.space(["paddingTop","paddingBottom"]),paddingBlock:AE.space("paddingBlock")};Object.assign(KE,{m:KE.margin,mt:KE.marginTop,mr:KE.marginRight,me:KE.marginInlineEnd,marginEnd:KE.marginInlineEnd,mb:KE.marginBottom,ml:KE.marginLeft,ms:KE.marginInlineStart,marginStart:KE.marginInlineStart,mx:KE.marginX,my:KE.marginY,p:KE.padding,pt:KE.paddingTop,py:KE.paddingY,px:KE.paddingX,pb:KE.paddingBottom,pl:KE.paddingLeft,ps:KE.paddingInlineStart,paddingStart:KE.paddingInlineStart,pr:KE.paddingRight,pe:KE.paddingInlineEnd,paddingEnd:KE.paddingInlineEnd});var JE={textDecorationColor:AE.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:AE.shadows("textShadow")},YE={clipPath:!0,transform:AE.propT("transform",ME.transform),transformOrigin:!0,translateX:AE.spaceT("--chakra-translate-x"),translateY:AE.spaceT("--chakra-translate-y"),skewX:AE.degreeT("--chakra-skew-x"),skewY:AE.degreeT("--chakra-skew-y"),scaleX:AE.prop("--chakra-scale-x"),scaleY:AE.prop("--chakra-scale-y"),scale:AE.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:AE.degreeT("--chakra-rotate")},$E={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:AE.prop("transitionDuration","transition.duration"),transitionProperty:AE.prop("transitionProperty","transition.property"),transitionTimingFunction:AE.prop("transitionTimingFunction","transition.easing")},QE={fontFamily:AE.prop("fontFamily","fonts"),fontSize:AE.prop("fontSize","fontSizes",ME.px),fontWeight:AE.prop("fontWeight","fontWeights"),lineHeight:AE.prop("lineHeight","lineHeights"),letterSpacing:AE.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(!0===e)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},ZE={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:AE.spaceT("scrollMargin"),scrollMarginTop:AE.spaceT("scrollMarginTop"),scrollMarginBottom:AE.spaceT("scrollMarginBottom"),scrollMarginLeft:AE.spaceT("scrollMarginLeft"),scrollMarginRight:AE.spaceT("scrollMarginRight"),scrollMarginX:AE.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:AE.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:AE.spaceT("scrollPadding"),scrollPaddingTop:AE.spaceT("scrollPaddingTop"),scrollPaddingBottom:AE.spaceT("scrollPaddingBottom"),scrollPaddingLeft:AE.spaceT("scrollPaddingLeft"),scrollPaddingRight:AE.spaceT("scrollPaddingRight"),scrollPaddingX:AE.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:AE.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function eP(e){return Bg(e)&&e.reference?e.reference:String(e)}var tP=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.map(eP).join(" ".concat(e," ")).replace(/calc/g,"")},nP=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(tP("+",...t),")")},iP=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(tP("-",...t),")")},rP=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(tP("*",...t),")")},oP=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(tP("/",...t),")")},sP=e=>{const t=eP(e);return null==t||Number.isNaN(parseFloat(t))?rP(t,-1):String(t).startsWith("-")?String(t).slice(1):"-".concat(t)},aP=Object.assign((e=>({add:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return aP(nP(e,...n))},subtract:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return aP(iP(e,...n))},multiply:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return aP(rP(e,...n))},divide:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return aP(oP(e,...n))},negate:()=>aP(sP(e)),toString:()=>e.toString()})),{add:nP,subtract:iP,multiply:rP,divide:oP,negate:sP});function cP(e){const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(/\s+/g,t)}(e.toString());return function(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}(function(e){if(e.includes("\\."))return e;const t=!Number.isInteger(parseFloat(e.toString()));return t?e.replace(".","\\."):e}(t))}function lP(e,t){return"var(".concat(e).concat(t?", ".concat(t):"",")")}function uP(e){return cP("--".concat(function(e){return[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e].filter(Boolean).join("-")}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")))}function dP(e,t,n){const i=uP(e,n);return{variable:i,reference:lP(i,t)}}function hP(e){const t=null==e?0:e.length;return t?e[t-1]:void 0}function pP(e){if(null==e)return e;const{unitless:t}=function(e){const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}}(e);return t||"number"===typeof e?"".concat(e,"px"):e}var fP=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,vP=e=>Object.fromEntries(Object.entries(e).sort(fP));function mP(e){const t=vP(e);return Object.assign(Object.values(t),t)}function gP(e){var t;if(!e)return e;e=null!=(t=pP(e))?t:e;return"number"===typeof e?"".concat(e+-.02):e.replace(/(\d+\.?\d*)/u,(e=>"".concat(parseFloat(e)+-.02)))}function yP(e,t){const n=["@media screen"];return e&&n.push("and","(min-width: ".concat(pP(e),")")),t&&n.push("and","(max-width: ".concat(pP(t),")")),n.join(" ")}function SP(e){var t;if(!e)return null;e.base=null!=(t=e.base)?t:"0px";const n=mP(e),i=Object.entries(e).sort(fP).map(((e,t,n)=>{let[i,r]=e;var o;let[,s]=null!=(o=n[t+1])?o:[];return s=parseFloat(s)>0?gP(s):void 0,{_minW:gP(r),breakpoint:i,minW:r,maxW:s,maxWQuery:yP(null,s),minWQuery:yP(r),minMaxQuery:yP(r,s)}})),r=function(e){const t=Object.keys(vP(e));return new Set(t)}(e),o=Array.from(r.values());return{keys:r,normalized:n,isResponsive(e){const t=Object.keys(e);return t.length>0&&t.every((e=>r.has(e)))},asObject:vP(e),asArray:mP(e),details:i,get:e=>i.find((t=>t.breakpoint===e)),media:[null,...n.map((e=>yP(e))).slice(1)],toArrayValue(e){if(!Bg(e))throw new Error("toArrayValue: value must be an object");const t=o.map((t=>{var n;return null!=(n=e[t])?n:null}));for(;null===hP(t);)t.pop();return t},toObjectValue(e){if(!Array.isArray(e))throw new Error("toObjectValue: value must be an array");return e.reduce(((e,t,n)=>{const i=o[n];return null!=i&&null!=t&&(e[i]=t),e}),{})}}}var bP=(e,t)=>"".concat(e,":hover ").concat(t,", ").concat(e,"[data-hover] ").concat(t),_P=(e,t)=>"".concat(e,":focus ").concat(t,", ").concat(e,"[data-focus] ").concat(t),wP=(e,t)=>"".concat(e,":focus-visible ").concat(t),xP=(e,t)=>"".concat(e,":focus-within ").concat(t),CP=(e,t)=>"".concat(e,":active ").concat(t,", ").concat(e,"[data-active] ").concat(t),EP=(e,t)=>"".concat(e,":disabled ").concat(t,", ").concat(e,"[data-disabled] ").concat(t),PP=(e,t)=>"".concat(e,":invalid ").concat(t,", ").concat(e,"[data-invalid] ").concat(t),TP=(e,t)=>"".concat(e,":checked ").concat(t,", ").concat(e,"[data-checked] ").concat(t),RP=(e,t)=>"".concat(e,":placeholder-shown ").concat(t),MP=e=>IP((t=>e(t,"&")),"[role=group]","[data-group]",".group"),AP=e=>IP((t=>e(t,"~ &")),"[data-peer]",".peer"),IP=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.map(e).join(", ")},kP={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:MP(bP),_peerHover:AP(bP),_groupFocus:MP(_P),_peerFocus:AP(_P),_groupFocusVisible:MP(wP),_peerFocusVisible:AP(wP),_groupActive:MP(CP),_peerActive:AP(CP),_groupDisabled:MP(EP),_peerDisabled:AP(EP),_groupInvalid:MP(PP),_peerInvalid:AP(PP),_groupChecked:MP(TP),_peerChecked:AP(TP),_groupFocusWithin:MP(xP),_peerFocusWithin:AP(xP),_peerPlaceholderShown:AP(RP),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},OP=Object.keys(kP);function DP(e,t){return dP(String(e).replace(/\./g,"-"),void 0,t)}function LP(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{stop:i,getKey:r}=n;return function e(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var s;if(function(e){return"object"===typeof e&&null!=e&&!Array.isArray(e)}(n)||Array.isArray(n)){const a={};for(const[c,l]of Object.entries(n)){const u=null!=(s=null==r?void 0:r(c))?s:c,d=[...o,u];if(null==i?void 0:i(n,d))return t(n,o);a[u]=e(l,d)}return a}return t(n,o)}(e)}var NP=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];var zP=e=>OP.includes(e)||"default"===e;function FP(e){var t;const n=function(e){const{__cssMap:t,__cssVars:n,__breakpoints:i,...r}=e;return r}(e),i=function(e){return function(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}(e,NP)}(n),r=function(e){return e.semanticTokens}(n),o=function(e){let{tokens:t,semanticTokens:n}=e;const i={};return LP(t,((e,t)=>{null!=e&&(i[t.join(".")]={isSemantic:!1,value:e})})),LP(n,((e,t)=>{null!=e&&(i[t.join(".")]={isSemantic:!0,value:e})}),{stop:e=>Object.keys(e).every(zP)}),i}({tokens:i,semanticTokens:r}),s=null==(t=n.config)?void 0:t.cssVarPrefix,{cssMap:a,cssVars:c}=function(e,t){let n={};const i={};for(const[r,o]of Object.entries(e)){const{isSemantic:s,value:a}=o,{variable:c,reference:l}=DP(r,null==t?void 0:t.cssVarPrefix);if(!s){if(r.startsWith("space")){const e=r.split("."),[t,...n]=e,o="".concat(t,".-").concat(n.join(".")),s=aP.negate(a),u=aP.negate(l);i[o]={value:s,var:c,varRef:u}}n[c]=a,i[r]={value:a,var:c,varRef:l};continue}const u=n=>{const i=[String(r).split(".")[0],n].join(".");if(!e[i])return n;const{reference:o}=DP(i,null==t?void 0:t.cssVarPrefix);return o},d=Bg(a)?a:{default:a};n=hE(n,Object.entries(d).reduce(((e,t)=>{let[n,i]=t;var r,o;if(!i)return e;const s=u("".concat(i));return"default"===n?(e[c]=s,e):(e[null!=(o=null==(r=kP)?void 0:r[n])?o:n]={[c]:s},e)}),{})),i[r]={value:l,var:c,varRef:l}}return{cssVars:n,cssMap:i}}(o,{cssVarPrefix:s});return Object.assign(n,{__cssVars:{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0",...c},__cssMap:a,__breakpoints:SP(n.breakpoints)}),n}var UP=hE({},IE,kE,OE,NE,UE,LE,XE,FE,zE,GE,qE,DE,KE,ZE,QE,JE,YE,BE,$E),BP=Object.assign({},KE,UE,NE,zE,qE),jP=(Object.keys(BP),[...Object.keys(UP),...OP]),VP={...UP,...kP},HP=e=>e in VP;var WP=(e,t)=>e.startsWith("--")&&"string"===typeof t&&!function(e){return/^var\(--.+\)$/.test(e)}(t),GP=(e,t)=>{var n,i;if(null==t)return t;const r=t=>{var n,i;return null==(i=null==(n=e.__cssMap)?void 0:n[t])?void 0:i.varRef},o=e=>{var t;return null!=(t=r(e))?t:e},[s,a]=function(e){const t=[];let n="",i=!1;for(let r=0;r<e.length;r++){const o=e[r];"("===o?(i=!0,n+=o):")"===o?(i=!1,n+=o):","!==o||i?n+=o:(t.push(n),n="")}return n=n.trim(),n&&t.push(n),t}(t);return t=null!=(i=null!=(n=r(s))?n:o(a))?i:o(t)};function qP(e){const{configs:t={},pseudos:n={},theme:i}=e,r=function(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var s,a,c;const l=Vg(e,i),u=(e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:n,toArrayValue:i,media:r}=t.__breakpoints,o={};for(const s in e){let a=Vg(e[s],t);if(null==a)continue;if(a=Bg(a)&&n(a)?i(a):a,!Array.isArray(a)){o[s]=a;continue}const c=a.slice(0,r.length).length;for(let e=0;e<c;e+=1){const t=null==r?void 0:r[e];t?(o[t]=o[t]||{},null!=a[e]&&(o[t][s]=a[e])):o[s]=a[e]}}return o})(l)(i);let d={};for(let h in u){let e=Vg(u[h],i);h in n&&(h=n[h]),WP(h,e)&&(e=GP(i,e));let p=t[h];if(!0===p&&(p={property:h}),Bg(e)){d[h]=null!=(s=d[h])?s:{},d[h]=hE({},d[h],r(e,!0));continue}let f=null!=(c=null==(a=null==p?void 0:p.transform)?void 0:a.call(p,e,i,l))?c:e;f=(null==p?void 0:p.processResult)?r(f,!0):f;const v=Vg(null==p?void 0:p.property,i);if(!o&&(null==p?void 0:p.static)){const e=Vg(p.static,i);d=hE({},d,e)}if(v&&Array.isArray(v))for(const t of v)d[t]=f;else v?"&"===v&&Bg(f)?d=hE({},d,f):d[v]=f:Bg(f)?d=hE({},d,f):d[h]=f}return d};return r}var XP=e=>t=>qP({theme:t,pseudos:kP,configs:UP})(e);function KP(e){return{definePartsStyle:e=>e,defineMultiStyleConfig:t=>({parts:e,...t})}}function JP(e,t){for(let n=t+1;n<e.length;n++)if(null!=e[n])return n;return-1}function YP(e){const t=e.__breakpoints;return function(e,n,i,r){var o,s;if(!t)return;const a={},c=function(e,t){return Array.isArray(e)?e:Bg(e)?t(e):null!=e?[e]:void 0}(i,t.toArrayValue);if(!c)return a;const l=c.length,u=1===l,d=!!e.parts;for(let h=0;h<l;h++){const i=t.details[h],l=t.details[JP(c,h)],p=yP(i.minW,null==l?void 0:l._minW),f=Vg(null==(o=e[n])?void 0:o[c[h]],r);f&&(d?null==(s=e.parts)||s.forEach((e=>{hE(a,{[e]:u?f[e]:{[p]:f[e]}})})):d?a[p]=f:u?hE(a,f):a[p]=f)}return a}}function $P(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Object.assign({},e);for(const i of t)i in n&&delete n[i];return n}(e,["styleConfig","size","variant","colorScheme"])}var QP=new Set([...jP,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),ZP=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function eT(e){return ZP.has(e)||!QP.has(e)}var tT=(0,t.createContext)({});function nT(){const e=(0,t.useContext)(tT);if(void 0===e)throw new Error("useColorMode must be used within a ColorModeProvider");return e}function iT(e,t){const{colorMode:n}=nT();return"dark"===n?t:e}tT.displayName="ColorModeContext";var rT=(e=>{const t=new WeakMap;return(n,i,r,o)=>{if("undefined"===typeof n)return e(n,i,r);t.has(n)||t.set(n,new Map);const s=t.get(n);if(s.has(i))return s.get(i);const a=e(n,i,r,o);return s.set(i,a),a}})((function(e,t,n,i){const r="string"===typeof t?t.split("."):[t];for(i=0;i<r.length&&e;i+=1)e=e[r[i]];return void 0===e?n:e}));function oT(e,t){const n={};return Object.keys(e).forEach((i=>{const r=e[i];t(r,i,e)&&(n[i]=r)})),n}var sT=e=>oT(e,(e=>null!==e&&void 0!==e));function aT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return function(e){return"function"===typeof e}(e)?e(...n):e}function cT(){return cT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},cT.apply(this,arguments)}function lT(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var uT=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,dT=lT((function(e){return uT.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var hT=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(i){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),pT=Math.abs,fT=String.fromCharCode,vT=Object.assign;function mT(e){return e.trim()}function gT(e,t,n){return e.replace(t,n)}function yT(e,t){return e.indexOf(t)}function ST(e,t){return 0|e.charCodeAt(t)}function bT(e,t,n){return e.slice(t,n)}function _T(e){return e.length}function wT(e){return e.length}function xT(e,t){return t.push(e),e}var CT=1,ET=1,PT=0,TT=0,RT=0,MT="";function AT(e,t,n,i,r,o,s){return{value:e,root:t,parent:n,type:i,props:r,children:o,line:CT,column:ET,length:s,return:""}}function IT(e,t){return vT(AT("",null,null,"",null,null,0),e,{length:-e.length},t)}function kT(){return RT=TT<PT?ST(MT,TT++):0,ET++,10===RT&&(ET=1,CT++),RT}function OT(){return ST(MT,TT)}function DT(){return TT}function LT(e,t){return bT(MT,e,t)}function NT(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function zT(e){return CT=ET=1,PT=_T(MT=e),TT=0,[]}function FT(e){return MT="",e}function UT(e){return mT(LT(TT-1,VT(91===e?e+2:40===e?e+1:e)))}function BT(e){for(;(RT=OT())&&RT<33;)kT();return NT(e)>2||NT(RT)>3?"":" "}function jT(e,t){for(;--t&&kT()&&!(RT<48||RT>102||RT>57&&RT<65||RT>70&&RT<97););return LT(e,DT()+(t<6&&32==OT()&&32==kT()))}function VT(e){for(;kT();)switch(RT){case e:return TT;case 34:case 39:34!==e&&39!==e&&VT(RT);break;case 40:41===e&&VT(e);break;case 92:kT()}return TT}function HT(e,t){for(;kT()&&e+RT!==57&&(e+RT!==84||47!==OT()););return"/*"+LT(t,TT-1)+"*"+fT(47===e?e:kT())}function WT(e){for(;!NT(OT());)kT();return LT(e,TT)}var GT="-ms-",qT="-moz-",XT="-webkit-",KT="comm",JT="rule",YT="decl",$T="@keyframes";function QT(e,t){for(var n="",i=wT(e),r=0;r<i;r++)n+=t(e[r],r,e,t)||"";return n}function ZT(e,t,n,i){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case YT:return e.return=e.return||e.value;case KT:return"";case $T:return e.return=e.value+"{"+QT(e.children,i)+"}";case JT:e.value=e.props.join(",")}return _T(n=QT(e.children,i))?e.return=e.value+"{"+n+"}":""}function eR(e){return FT(tR("",null,null,null,[""],e=zT(e),0,[0],e))}function tR(e,t,n,i,r,o,s,a,c){for(var l=0,u=0,d=s,h=0,p=0,f=0,v=1,m=1,g=1,y=0,S="",b=r,_=o,w=i,x=S;m;)switch(f=y,y=kT()){case 40:if(108!=f&&58==ST(x,d-1)){-1!=yT(x+=gT(UT(y),"&","&\f"),"&\f")&&(g=-1);break}case 34:case 39:case 91:x+=UT(y);break;case 9:case 10:case 13:case 32:x+=BT(f);break;case 92:x+=jT(DT()-1,7);continue;case 47:switch(OT()){case 42:case 47:xT(iR(HT(kT(),DT()),t,n),c);break;default:x+="/"}break;case 123*v:a[l++]=_T(x)*g;case 125*v:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+u:-1==g&&(x=gT(x,/\f/g,"")),p>0&&_T(x)-d&&xT(p>32?rR(x+";",i,n,d-1):rR(gT(x," ","")+";",i,n,d-2),c);break;case 59:x+=";";default:if(xT(w=nR(x,t,n,l,u,r,a,S,b=[],_=[],d),o),123===y)if(0===u)tR(x,t,w,w,b,o,d,a,_);else switch(99===h&&110===ST(x,3)?100:h){case 100:case 108:case 109:case 115:tR(e,w,w,i&&xT(nR(e,w,w,0,0,r,a,S,r,b=[],d),_),r,_,d,a,i?b:_);break;default:tR(x,w,w,w,[""],_,0,a,_)}}l=u=p=0,v=g=1,S=x="",d=s;break;case 58:d=1+_T(x),p=f;default:if(v<1)if(123==y)--v;else if(125==y&&0==v++&&125==(RT=TT>0?ST(MT,--TT):0,ET--,10===RT&&(ET=1,CT--),RT))continue;switch(x+=fT(y),y*v){case 38:g=u>0?1:(x+="\f",-1);break;case 44:a[l++]=(_T(x)-1)*g,g=1;break;case 64:45===OT()&&(x+=UT(kT())),h=OT(),u=d=_T(S=x+=WT(DT())),y++;break;case 45:45===f&&2==_T(x)&&(v=0)}}return o}function nR(e,t,n,i,r,o,s,a,c,l,u){for(var d=r-1,h=0===r?o:[""],p=wT(h),f=0,v=0,m=0;f<i;++f)for(var g=0,y=bT(e,d+1,d=pT(v=s[f])),S=e;g<p;++g)(S=mT(v>0?h[g]+" "+y:gT(y,/&\f/g,h[g])))&&(c[m++]=S);return AT(e,t,n,0===r?JT:a,c,l,u)}function iR(e,t,n){return AT(e,t,n,KT,fT(RT),bT(e,2,-2),0)}function rR(e,t,n,i){return AT(e,t,n,YT,bT(e,0,i),bT(e,i+1,-1),i)}var oR=function(e,t,n){for(var i=0,r=0;i=r,r=OT(),38===i&&12===r&&(t[n]=1),!NT(r);)kT();return LT(e,TT)},sR=function(e,t){return FT(function(e,t){var n=-1,i=44;do{switch(NT(i)){case 0:38===i&&12===OT()&&(t[n]=1),e[n]+=oR(TT-1,t,n);break;case 2:e[n]+=UT(i);break;case 4:if(44===i){e[++n]=58===OT()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=fT(i)}}while(i=kT());return e}(zT(e),t))},aR=new WeakMap,cR=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||aR.get(n))&&!i){aR.set(e,!0);for(var r=[],o=sR(t,r),s=n.props,a=0,c=0;a<o.length;a++)for(var l=0;l<s.length;l++,c++)e.props[c]=r[a]?o[a].replace(/&\f/g,s[l]):s[l]+" "+o[a]}}},lR=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function uR(e,t){switch(function(e,t){return 45^ST(e,0)?(((t<<2^ST(e,0))<<2^ST(e,1))<<2^ST(e,2))<<2^ST(e,3):0}(e,t)){case 5103:return XT+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return XT+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return XT+e+qT+e+GT+e+e;case 6828:case 4268:return XT+e+GT+e+e;case 6165:return XT+e+GT+"flex-"+e+e;case 5187:return XT+e+gT(e,/(\w+).+(:[^]+)/,XT+"box-$1$2"+GT+"flex-$1$2")+e;case 5443:return XT+e+GT+"flex-item-"+gT(e,/flex-|-self/,"")+e;case 4675:return XT+e+GT+"flex-line-pack"+gT(e,/align-content|flex-|-self/,"")+e;case 5548:return XT+e+GT+gT(e,"shrink","negative")+e;case 5292:return XT+e+GT+gT(e,"basis","preferred-size")+e;case 6060:return XT+"box-"+gT(e,"-grow","")+XT+e+GT+gT(e,"grow","positive")+e;case 4554:return XT+gT(e,/([^-])(transform)/g,"$1"+XT+"$2")+e;case 6187:return gT(gT(gT(e,/(zoom-|grab)/,XT+"$1"),/(image-set)/,XT+"$1"),e,"")+e;case 5495:case 3959:return gT(e,/(image-set\([^]*)/,XT+"$1$`$1");case 4968:return gT(gT(e,/(.+:)(flex-)?(.*)/,XT+"box-pack:$3"+GT+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+XT+e+e;case 4095:case 3583:case 4068:case 2532:return gT(e,/(.+)-inline(.+)/,XT+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(_T(e)-1-t>6)switch(ST(e,t+1)){case 109:if(45!==ST(e,t+4))break;case 102:return gT(e,/(.+:)(.+)-([^]+)/,"$1"+XT+"$2-$3$1"+qT+(108==ST(e,t+3)?"$3":"$2-$3"))+e;case 115:return~yT(e,"stretch")?uR(gT(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==ST(e,t+1))break;case 6444:switch(ST(e,_T(e)-3-(~yT(e,"!important")&&10))){case 107:return gT(e,":",":"+XT)+e;case 101:return gT(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+XT+(45===ST(e,14)?"inline-":"")+"box$3$1"+XT+"$2$3$1"+GT+"$2box$3")+e}break;case 5936:switch(ST(e,t+11)){case 114:return XT+e+GT+gT(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return XT+e+GT+gT(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return XT+e+GT+gT(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return XT+e+GT+e+e}return e}var dR=[function(e,t,n,i){if(e.length>-1&&!e.return)switch(e.type){case YT:e.return=uR(e.value,e.length);break;case $T:return QT([IT(e,{value:gT(e.value,"@","@"+XT)})],i);case JT:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return QT([IT(e,{props:[gT(t,/:(read-\w+)/,":-moz-$1")]})],i);case"::placeholder":return QT([IT(e,{props:[gT(t,/:(plac\w+)/,":"+XT+"input-$1")]}),IT(e,{props:[gT(t,/:(plac\w+)/,":-moz-$1")]}),IT(e,{props:[gT(t,/:(plac\w+)/,GT+"input-$1")]})],i)}return""}))}}],hR=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||dR;var r,o,s={},a=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;a.push(e)}));var c,l,u=[ZT,(l=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],d=function(e){var t=wT(e);return function(n,i,r,o){for(var s="",a=0;a<t;a++)s+=e[a](n,i,r,o)||"";return s}}([cR,lR].concat(i,u));o=function(e,t,n,i){c=n,function(e){QT(eR(e),d)}(e?e+"{"+t.styles+"}":t.styles),i&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new hT({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return h.sheet.hydrate(a),h},pR=function(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var i=e(n);return t.set(n,i),i}};var fR={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},vR=/[A-Z]|^ms/g,mR=/_EMO_([^_]+?)_([^]*?)_EMO_/g,gR=function(e){return 45===e.charCodeAt(1)},yR=function(e){return null!=e&&"boolean"!==typeof e},SR=lT((function(e){return gR(e)?e:e.replace(vR,"-$&").toLowerCase()})),bR=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(mR,(function(e,t,n){return wR={name:t,styles:n,next:wR},t}))}return 1===fR[e]||gR(e)||"number"!==typeof t||0===t?t:t+"px"};function _R(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return wR={name:n.name,styles:n.styles,next:wR},n.name;if(void 0!==n.styles){var i=n.next;if(void 0!==i)for(;void 0!==i;)wR={name:i.name,styles:i.styles,next:wR},i=i.next;return n.styles+";"}return function(e,t,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=_R(e,t,n[r])+";";else for(var o in n){var s=n[o];if("object"!==typeof s)null!=t&&void 0!==t[s]?i+=o+"{"+t[s]+"}":yR(s)&&(i+=SR(o)+":"+bR(o,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var a=_R(e,t,s);switch(o){case"animation":case"animationName":i+=SR(o)+":"+a+";";break;default:i+=o+"{"+a+"}"}}else for(var c=0;c<s.length;c++)yR(s[c])&&(i+=SR(o)+":"+bR(o,s[c])+";")}return i}(e,t,n);case"function":if(void 0!==e){var r=wR,o=n(e);return wR=r,_R(e,t,o)}}if(null==t)return n;var s=t[n];return void 0!==s?s:n}var wR,xR=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var CR=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,r="";wR=void 0;var o=e[0];null==o||void 0===o.raw?(i=!1,r+=_R(n,t,o)):r+=o[0];for(var s=1;s<e.length;s++)r+=_R(n,t,e[s]),i&&(r+=o[s]);xR.lastIndex=0;for(var a,c="";null!==(a=xR.exec(r));)c+="-"+a[1];var l=function(e){for(var t,n=0,i=0,r=e.length;r>=4;++i,r-=4)t=1540483477*(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(r){case 3:n^=(255&e.charCodeAt(i+2))<<16;case 2:n^=(255&e.charCodeAt(i+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(i)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(r)+c;return{name:l,styles:r,next:wR}},ER=!!i.useInsertionEffect&&i.useInsertionEffect,PR=ER||function(e){return e()},TR=ER||t.useLayoutEffect,RR=t.createContext("undefined"!==typeof HTMLElement?hR({key:"css"}):null);RR.Provider;var MR=function(e){return(0,t.forwardRef)((function(n,i){var r=(0,t.useContext)(RR);return e(n,r,i)}))};var AR=t.createContext({});var IR=pR((function(e){return pR((function(t){return function(e,t){return"function"===typeof t?t(e):cT({},e,t)}(e,t)}))})),kR=function(e){var n=t.useContext(AR);return e.theme!==n&&(n=IR(n)(e.theme)),t.createElement(AR.Provider,{value:n},e.children)};var OR,DR=function(e,t,n){var i=e.key+"-"+t.name;!1===n&&void 0===e.registered[i]&&(e.registered[i]=t.styles)},LR=function(e,t,n){DR(e,t,n);var i=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var r=t;do{e.insert(t===r?"."+i:"",r,e.sheet,!0),r=r.next}while(void 0!==r)}},NR=dT,zR=function(e){return"theme"!==e},FR=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?NR:zR},UR=function(e,t,n){var i;if(t){var r=t.shouldForwardProp;i=e.__emotion_forwardProp&&r?function(t){return e.__emotion_forwardProp(t)&&r(t)}:r}return"function"!==typeof i&&n&&(i=e.__emotion_forwardProp),i},BR=function(e){var t=e.cache,n=e.serialized,i=e.isStringTag;return DR(t,n,i),PR((function(){return LR(t,n,i)})),null},jR=function e(n,i){var r,o,s=n.__emotion_real===n,a=s&&n.__emotion_base||n;void 0!==i&&(r=i.label,o=i.target);var c=UR(n,i,s),l=c||FR(a),u=!l("as");return function(){var d=arguments,h=s&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==r&&h.push("label:"+r+";"),null==d[0]||void 0===d[0].raw)h.push.apply(h,d);else{0,h.push(d[0][0]);for(var p=d.length,f=1;f<p;f++)h.push(d[f],d[0][f])}var v=MR((function(e,n,i){var r=u&&e.as||a,s="",d=[],p=e;if(null==e.theme){for(var f in p={},e)p[f]=e[f];p.theme=t.useContext(AR)}"string"===typeof e.className?s=function(e,t,n){var i="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):i+=n+" "})),i}(n.registered,d,e.className):null!=e.className&&(s=e.className+" ");var v=CR(h.concat(d),n.registered,p);s+=n.key+"-"+v.name,void 0!==o&&(s+=" "+o);var m=u&&void 0===c?FR(r):l,g={};for(var y in e)u&&"as"===y||m(y)&&(g[y]=e[y]);return g.className=s,g.ref=i,t.createElement(t.Fragment,null,t.createElement(BR,{cache:n,serialized:v,isStringTag:"string"===typeof r}),t.createElement(r,g))}));return v.displayName=void 0!==r?r:"Styled("+("string"===typeof a?a:a.displayName||a.name||"Component")+")",v.defaultProps=n.defaultProps,v.__emotion_real=v,v.__emotion_base=a,v.__emotion_styles=h,v.__emotion_forwardProp=c,Object.defineProperty(v,"toString",{value:function(){return"."+o}}),v.withComponent=function(t,n){return e(t,cT({},i,n,{shouldForwardProp:UR(v,n,!0)})).apply(void 0,h)},v}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){jR[e]=jR(e)}));var VR=null!=(OR=jR.default)?OR:jR,HR=e=>{let{baseStyle:t}=e;return e=>{const{theme:n,css:i,__css:r,sx:o,...s}=e,a=oT(s,((e,t)=>HP(t))),c=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const t={...e};for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(const o of i)if(null!=o)for(const e in o)Object.prototype.hasOwnProperty.call(o,e)&&(e in t&&delete t[e],t[e]=o[e]);return t}({},r,aT(t,e),sT(a),o),l=XP(c)(e.theme);return i?[l,i]:l}};function WR(e,n){const{baseStyle:i,...r}=null!=n?n:{};r.shouldForwardProp||(r.shouldForwardProp=eT);const o=HR({baseStyle:i}),s=VR(e,r)(o);return t.forwardRef((function(e,n){const{colorMode:i,forced:r}=nT();return t.createElement(s,{ref:n,"data-theme":r?i:void 0,...e})}))}var GR=function(){const e=new Map;return new Proxy(WR,{apply:(e,t,n)=>WR(...n),get:(t,n)=>(e.has(n)||e.set(n,WR(n)),e.get(n))})}(),qR={initial:e=>{const{position:t}=e,n=["top","bottom"].includes(t)?"y":"x";let i=["top-right","bottom-right"].includes(t)?1:-1;return"bottom"===t&&(i=1),{opacity:0,[n]:24*i}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},XR=(0,t.memo)((e=>{const{id:n,message:i,onCloseComplete:r,onRequestRemove:o,requestClose:s=!1,position:a="bottom",duration:c=5e3,containerStyle:l,motionVariants:u=qR,toastSpacing:d="0.5rem"}=e,[h,p]=(0,t.useState)(c),f=Kg();Fg((()=>{f||null==r||r()}),[f]),Fg((()=>{p(c)}),[c]);const v=()=>{f&&o()};(0,t.useEffect)((()=>{f&&s&&o()}),[f,s,o]),function(e,n){const i=zg(e);(0,t.useEffect)((()=>{if(null==n)return;let e=null;return e=window.setTimeout((()=>{i()}),n),()=>{e&&window.clearTimeout(e)}}),[n,i])}(v,h);const m=(0,t.useMemo)((()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:d,...l})),[l,d]),g=(0,t.useMemo)((()=>function(e){let t="center";return e.includes("right")&&(t="flex-end"),e.includes("left")&&(t="flex-start"),{display:"flex",flexDirection:"column",alignItems:t}}(a)),[a]);return(0,ug.jsx)(dE.div,{layout:!0,className:"chakra-toast",variants:u,initial:"initial",animate:"animate",exit:"exit",onHoverStart:()=>p(null),onHoverEnd:()=>p(c),custom:{position:a},style:g,children:(0,ug.jsx)(GR.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:m,children:Vg(i,{id:n,onClose:v})})})}));function KR(e,t){var n;const i=null!=e?e:"bottom",r={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[i];return null!=(n=null==r?void 0:r[t])?n:i}function JR(e){return(0,t.forwardRef)(e)}function YR(){const e=(0,t.useContext)(AR);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}function $R(){return{...nT(),theme:YR()}}XR.displayName="ToastComponent";var QR=n(6366);function ZR(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;const{styleConfig:r,...o}=n,{theme:s,colorMode:a}=$R(),c=e?rT(s,"components.".concat(e)):void 0,l=r||c,u=hE({theme:s,colorMode:a},null!=(i=null==l?void 0:l.defaultProps)?i:{},sT(function(e,t){const n={};return Object.keys(e).forEach((i=>{t.includes(i)||(n[i]=e[i])})),n}(o,["children"]))),d=(0,t.useRef)({});if(l){const e=function(e){return t=>{var n;const{variant:i,size:r,theme:o}=t,s=YP(o);return hE({},Vg(null!=(n=e.baseStyle)?n:{},t),s(e,"sizes",r,t),s(e,"variants",i,t))}}(l),t=e(u);QR(d.current,t)||(d.current=t)}return d.current}function eM(e){return ZR(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function tM(e){return ZR(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}var nM={path:(0,ug.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.5",children:[(0,ug.jsx)("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),(0,ug.jsx)("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),(0,ug.jsx)("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},iM=JR(((e,t)=>{const{as:n,viewBox:i,color:r="currentColor",focusable:o=!1,children:s,className:a,__css:c,...l}=e,u={ref:t,focusable:o,className:Ug("chakra-icon",a),__css:{w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:r,...c,...eM("Icon",e)}},d=null!=i?i:nM.viewBox;if(n&&"string"!==typeof n)return(0,ug.jsx)(GR.svg,{as:n,...u,...l});const h=null!=s?s:nM.path;return(0,ug.jsx)(GR.svg,{verticalAlign:"middle",viewBox:d,...u,...l,children:h})}));iM.displayName="Icon";function rM(e){return(0,ug.jsx)(iM,{viewBox:"0 0 24 24",...e,children:(0,ug.jsx)("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}function oM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{name:n,strict:i=!0,hookName:r="useContext",providerName:o="Provider",errorMessage:s,defaultValue:a}=e,c=(0,t.createContext)(a);return c.displayName=n,[c.Provider,function e(){var n;const a=(0,t.useContext)(c);if(!a&&i){const t=new Error(null!=s?s:(l=o,"".concat(r," returned `undefined`. Seems you forgot to wrap component within ").concat(l)));throw t.name="ContextError",null==(n=Error.captureStackTrace)||n.call(Error,t,e),t}var l;return a},c]}n(219);var sM=MR((function(e,n){var i=e.styles,r=CR([i],void 0,t.useContext(AR)),o=t.useRef();return TR((function(){var e=n.key+"-global",t=new n.sheet.constructor({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),i=!1,s=document.querySelector('style[data-emotion="'+e+" "+r.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==s&&(i=!0,s.setAttribute("data-emotion",e),t.hydrate([s])),o.current=[t,i],function(){t.flush()}}),[n]),TR((function(){var e=o.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==r.next&&LR(n,r.next,!0),t.tags.length){var i=t.tags[t.tags.length-1].nextElementSibling;t.before=i,t.flush()}n.insert("",r,t,!1)}}),[n,r.name]),null}));function aM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return CR(t)}var cM=function(){var e=aM.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),lM=JR(((e,t)=>{const n=eM("Spinner",e),{label:i="Loading...",thickness:r="2px",speed:o="0.45s",emptyColor:s="transparent",className:a,...c}=$P(e),l=Ug("chakra-spinner",a),u={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:r,borderBottomColor:s,borderLeftColor:s,animation:"".concat(cM," ").concat(o," linear infinite"),...n};return(0,ug.jsx)(GR.div,{ref:t,__css:u,className:l,...c,children:i&&(0,ug.jsx)(GR.span,{srOnly:!0,children:i})})}));lM.displayName="Spinner";var[uM,dM]=oM({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[hM,pM]=oM({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),fM={info:{icon:function(e){return(0,ug.jsx)(iM,{viewBox:"0 0 24 24",...e,children:(0,ug.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})},colorScheme:"blue"},warning:{icon:rM,colorScheme:"orange"},success:{icon:function(e){return(0,ug.jsx)(iM,{viewBox:"0 0 24 24",...e,children:(0,ug.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})},colorScheme:"green"},error:{icon:rM,colorScheme:"red"},loading:{icon:lM,colorScheme:"blue"}};var vM=JR((function(e,t){var n;const{status:i="info",addRole:r=!0,...o}=$P(e),s=null!=(n=e.colorScheme)?n:function(e){return fM[e].colorScheme}(i),a=tM("Alert",{...e,colorScheme:s}),c={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...a.container};return(0,ug.jsx)(uM,{value:{status:i},children:(0,ug.jsx)(hM,{value:a,children:(0,ug.jsx)(GR.div,{"data-status":i,role:r?"alert":void 0,ref:t,...o,className:Ug("chakra-alert",e.className),__css:c})})})}));function mM(e){const{status:t}=dM(),n=function(e){return fM[e].icon}(t),i=pM(),r="loading"===t?i.spinner:i.icon;return(0,ug.jsx)(GR.span,{display:"inherit","data-status":t,...e,className:Ug("chakra-alert__icon",e.className),__css:r,children:e.children||(0,ug.jsx)(n,{h:"100%",w:"100%"})})}vM.displayName="Alert",mM.displayName="AlertIcon";var gM=JR((function(e,t){const n=pM(),{status:i}=dM();return(0,ug.jsx)(GR.div,{ref:t,"data-status":i,...e,className:Ug("chakra-alert__title",e.className),__css:n.title})}));gM.displayName="AlertTitle";var yM=JR((function(e,t){const n=pM(),{status:i}=dM(),r={display:"inline",...n.description};return(0,ug.jsx)(GR.div,{ref:t,"data-status":i,...e,className:Ug("chakra-alert__desc",e.className),__css:r})}));function SM(e){return(0,ug.jsx)(iM,{focusable:"false","aria-hidden":!0,...e,children:(0,ug.jsx)("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}yM.displayName="AlertDescription";var bM=JR((function(e,t){const n=eM("CloseButton",e),{children:i,isDisabled:r,__css:o,...s}=$P(e);return(0,ug.jsx)(GR.button,{type:"button","aria-label":"Close",ref:t,disabled:r,__css:{outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,...n,...o},...s,children:i||(0,ug.jsx)(SM,{width:"1em",height:"1em"})})}));bM.displayName="CloseButton";var _M=function(e){let t=e;const n=new Set,i=e=>{t=e(t),n.forEach((e=>e()))};return{getState:()=>t,subscribe:t=>(n.add(t),()=>{i((()=>e)),n.delete(t)}),removeToast:(e,t)=>{i((n=>({...n,[t]:n[t].filter((t=>t.id!=e))})))},notify:(e,t)=>{const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,i;wM+=1;const r=null!=(n=t.id)?n:wM,o=null!=(i=t.position)?i:"bottom";return{id:r,message:e,position:o,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>_M.removeToast(String(r),o),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}(e,t),{position:r,id:o}=n;return i((e=>{var t,i;const o=r.includes("top")?[n,...null!=(t=e[r])?t:[]]:[...null!=(i=e[r])?i:[],n];return{...e,[r]:o}})),o},update:(e,t)=>{e&&i((n=>{const i={...n},{position:r,index:o}=Dg(i,e);return r&&-1!==o&&(i[r][o]={...i[r][o],...t,message:CM(t)}),i}))},closeAll:function(){let{positions:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i((t=>(null!=e?e:["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce(((e,n)=>(e[n]=t[n].map((e=>({...e,requestClose:!0}))),e)),{...t})))},close:e=>{i((t=>{const n=Lg(t,e);return n?{...t,[n]:t[n].map((t=>t.id==e?{...t,requestClose:!0}:t))}:t}))},isActive:e=>Boolean(Dg(_M.getState(),e).position)}}({top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]});var wM=0;var xM=e=>{const{status:t,variant:n="solid",id:i,title:r,isClosable:o,onClose:s,description:a,colorScheme:c,icon:l}=e,u=i?{root:"toast-".concat(i),title:"toast-".concat(i,"-title"),description:"toast-".concat(i,"-description")}:void 0;return(0,ug.jsxs)(vM,{addRole:!1,status:t,variant:n,id:null==u?void 0:u.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:c,children:[(0,ug.jsx)(mM,{children:l}),(0,ug.jsxs)(GR.div,{flex:"1",maxWidth:"100%",children:[r&&(0,ug.jsx)(gM,{id:null==u?void 0:u.title,children:r}),a&&(0,ug.jsx)(yM,{id:null==u?void 0:u.description,display:"block",children:a})]}),o&&(0,ug.jsx)(bM,{size:"sm",onClick:s,position:"absolute",insetEnd:1,top:1})]})};function CM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{render:t,toastComponent:n=xM}=e;return i=>"function"===typeof t?t({...i,...e}):(0,ug.jsx)(n,{...i,...e})}function EM(){const e=(0,t.useRef)(!1);return Qg((()=>(e.current=!0,()=>{e.current=!1})),[]),e}class PM extends t.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function TM(e){let{children:n,isPresent:i}=e;const r=(0,t.useId)(),o=(0,t.useRef)(null),s=(0,t.useRef)({width:0,height:0,top:0,left:0});return(0,t.useInsertionEffect)((()=>{const{width:e,height:t,top:n,left:a}=s.current;if(i||!o.current||!e||!t)return;o.current.dataset.motionPopId=r;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(r,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(n,"px !important;\n            left: ").concat(a,"px !important;\n          }\n        ")),()=>{document.head.removeChild(c)}}),[i]),t.createElement(PM,{isPresent:i,childRef:o,sizeRef:s},t.cloneElement(n,{ref:o}))}const RM=e=>{let{children:n,initial:i,isPresent:r,onExitComplete:o,custom:s,presenceAffectsLayout:a,mode:c}=e;const l=RS(MM),u=(0,t.useId)(),d=(0,t.useMemo)((()=>({id:u,initial:i,isPresent:r,custom:s,onExitComplete:e=>{l.set(e,!0);for(const t of l.values())if(!t)return;o&&o()},register:e=>(l.set(e,!1),()=>l.delete(e))})),a?void 0:[r]);return(0,t.useMemo)((()=>{l.forEach(((e,t)=>l.set(t,!1)))}),[r]),t.useEffect((()=>{!r&&!l.size&&o&&o()}),[r]),"popLayout"===c&&(n=t.createElement(TM,{isPresent:r},n)),t.createElement(qg.Provider,{value:d},n)};function MM(){return new Map}const AM=e=>e.key||"";const IM=e=>{let{children:n,custom:i,initial:r=!0,onExitComplete:o,exitBeforeEnter:s,presenceAffectsLayout:a=!0,mode:c="sync"}=e;fb(!s,"Replace exitBeforeEnter with mode='wait'");const l=(0,t.useContext)(by).forceRender||function(){const e=EM(),[n,i]=(0,t.useState)(0),r=(0,t.useCallback)((()=>{e.current&&i(n+1)}),[n]);return[(0,t.useCallback)((()=>NS.postRender(r)),[r]),n]}()[0],u=EM(),d=function(e){const n=[];return t.Children.forEach(e,(e=>{(0,t.isValidElement)(e)&&n.push(e)})),n}(n);let h=d;const p=(0,t.useRef)(new Map).current,f=(0,t.useRef)(h),v=(0,t.useRef)(new Map).current,m=(0,t.useRef)(!0);var g;if(Qg((()=>{m.current=!1,function(e,t){e.forEach((e=>{const n=AM(e);t.set(n,e)}))}(d,v),f.current=h})),g=()=>{m.current=!0,v.clear(),p.clear()},(0,t.useEffect)((()=>()=>g()),[]),m.current)return t.createElement(t.Fragment,null,h.map((e=>t.createElement(RM,{key:AM(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:a,mode:c},e))));h=[...h];const y=f.current.map(AM),S=d.map(AM),b=y.length;for(let t=0;t<b;t++){const e=y[t];-1!==S.indexOf(e)||p.has(e)||p.set(e,void 0)}return"wait"===c&&p.size&&(h=[]),p.forEach(((e,n)=>{if(-1!==S.indexOf(n))return;const r=v.get(n);if(!r)return;const s=y.indexOf(n);let m=e;if(!m){const e=()=>{p.delete(n);const e=Array.from(v.keys()).filter((e=>!S.includes(e)));if(e.forEach((e=>v.delete(e))),f.current=d.filter((t=>{const i=AM(t);return i===n||e.includes(i)})),!p.size){if(!1===u.current)return;l(),o&&o()}};m=t.createElement(RM,{key:AM(r),isPresent:!1,onExitComplete:e,custom:i,presenceAffectsLayout:a,mode:c},r),p.set(n,m)}h.splice(s,0,m)})),h=h.map((e=>{const n=e.key;return p.has(n)?e:t.createElement(RM,{key:AM(e),isPresent:!0,presenceAffectsLayout:a,mode:c},e)})),t.createElement(t.Fragment,null,p.size?h:h.map((e=>(0,t.cloneElement)(e))))};var[kM,OM]=oM({strict:!1,name:"PortalManagerContext"});function DM(e){const{children:t,zIndex:n}=e;return(0,ug.jsx)(kM,{value:{zIndex:n},children:t})}DM.displayName="PortalManager";var LM=Boolean(null==globalThis?void 0:globalThis.document)?t.useLayoutEffect:t.useEffect,NM=n(7950),[zM,FM]=oM({strict:!1,name:"PortalContext"}),UM="chakra-portal",BM=e=>(0,ug.jsx)("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),jM=e=>{const{appendToParentPortal:n,children:i}=e,[r,o]=(0,t.useState)(null),s=(0,t.useRef)(null),[,a]=(0,t.useState)({});(0,t.useEffect)((()=>a({})),[]);const c=FM(),l=OM();LM((()=>{if(!r)return;const e=r.ownerDocument,t=n&&null!=c?c:e.body;if(!t)return;s.current=e.createElement("div"),s.current.className=UM,t.appendChild(s.current),a({});const i=s.current;return()=>{t.contains(i)&&t.removeChild(i)}}),[r]);const u=(null==l?void 0:l.zIndex)?(0,ug.jsx)(BM,{zIndex:null==l?void 0:l.zIndex,children:i}):i;return s.current?(0,NM.createPortal)((0,ug.jsx)(zM,{value:s.current,children:u}),s.current):(0,ug.jsx)("span",{ref:e=>{e&&o(e)}})},VM=e=>{const{children:n,containerRef:i,appendToParentPortal:r}=e,o=i.current,s=null!=o?o:"undefined"!==typeof window?document.body:void 0,a=(0,t.useMemo)((()=>{const e=null==o?void 0:o.ownerDocument.createElement("div");return e&&(e.className=UM),e}),[o]),[,c]=(0,t.useState)({});return LM((()=>c({})),[]),LM((()=>{if(a&&s)return s.appendChild(a),()=>{s.removeChild(a)}}),[a,s]),s&&a?(0,NM.createPortal)((0,ug.jsx)(zM,{value:r?a:null,children:n}),a):null};function HM(e){const t={appendToParentPortal:!0,...e},{containerRef:n,...i}=t;return n?(0,ug.jsx)(VM,{containerRef:n,...i}):(0,ug.jsx)(jM,{...i})}HM.className=UM,HM.selector=".chakra-portal",HM.displayName="Portal";var[WM,GM]=oM({name:"ToastOptionsContext",strict:!1}),qM=e=>{const n=(0,t.useSyncExternalStore)(_M.subscribe,_M.getState,_M.getState),{motionVariants:i,component:r=XR,portalProps:o}=e,s=Object.keys(n).map((e=>{const t=n[e];return(0,ug.jsx)("div",{role:"region","aria-live":"polite","aria-label":"Notifications-".concat(e),id:"chakra-toast-manager-".concat(e),style:Ng(e),children:(0,ug.jsx)(IM,{initial:!1,children:t.map((e=>(0,ug.jsx)(r,{motionVariants:i,...e},e.id)))})},e)}));return(0,ug.jsx)(HM,{...o,children:s})};function XM(e){const{theme:n}=$R(),i=GM();return(0,t.useMemo)((()=>function(e,t){const n=n=>{var i;return{...t,...n,position:KR(null!=(i=null==n?void 0:n.position)?i:null==t?void 0:t.position,e)}},i=e=>{const t=n(e),i=CM(t);return _M.notify(i,t)};return i.update=(e,t)=>{_M.update(e,n(t))},i.promise=(e,t)=>{const n=i({...t.loading,status:"loading",duration:null});e.then((e=>i.update(n,{status:"success",duration:5e3,...Vg(t.success,e)}))).catch((e=>i.update(n,{status:"error",duration:5e3,...Vg(t.error,e)})))},i.closeAll=_M.closeAll,i.close=_M.close,i.isActive=_M.isActive,i}(n.direction,{...i,...e})),[e,n.direction,i])}var[KM,JM]=oM({strict:!1,name:"ButtonGroupContext"});function YM(e){const{children:n,className:i,...r}=e,o=(0,t.isValidElement)(n)?(0,t.cloneElement)(n,{"aria-hidden":!0,focusable:!1}):n,s=Ug("chakra-button__icon",i);return(0,ug.jsx)(GR.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...r,className:s,children:o})}function $M(e){const{label:n,placement:i,spacing:r="0.5rem",children:o=(0,ug.jsx)(lM,{color:"currentColor",width:"1em",height:"1em"}),className:s,__css:a,...c}=e,l=Ug("chakra-button__spinner",s),u="start"===i?"marginEnd":"marginStart",d=(0,t.useMemo)((()=>({display:"flex",alignItems:"center",position:n?"relative":"absolute",[u]:n?r:0,fontSize:"1em",lineHeight:"normal",...a})),[a,n,u,r]);return(0,ug.jsx)(GR.div,{className:l,...c,__css:d,children:o})}function QM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{!function(e,t){if(null!=e)if("function"!==typeof e)try{e.current=t}catch(n){throw new Error("Cannot assign value '".concat(t,"' to ref '").concat(e,"'"))}else e(t)}(t,e)}))}}function ZM(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(0,t.useMemo)((()=>QM(...n)),n)}YM.displayName="ButtonIcon",$M.displayName="ButtonSpinner";var eA=JR(((e,n)=>{const i=JM(),r=eM("Button",{...i,...e}),{isDisabled:o=(null==i?void 0:i.isDisabled),isLoading:s,isActive:a,children:c,leftIcon:l,rightIcon:u,loadingText:d,iconSpacing:h="0.5rem",type:p,spinner:f,spinnerPlacement:v="start",className:m,as:g,...y}=$P(e),S=(0,t.useMemo)((()=>{const e={...null==r?void 0:r._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...r,...!!i&&{_focus:e}}}),[r,i]),{ref:b,type:_}=function(e){const[n,i]=(0,t.useState)(!e),r=(0,t.useCallback)((e=>{e&&i("BUTTON"===e.tagName)}),[]);return{ref:r,type:n?"button":void 0}}(g),w={rightIcon:u,leftIcon:l,iconSpacing:h,children:c};return(0,ug.jsxs)(GR.button,{ref:ZM(n,b),as:g,type:null!=p?p:_,"data-active":Wg(a),"data-loading":Wg(s),__css:S,className:Ug("chakra-button",m),...y,disabled:o||s,children:[s&&"start"===v&&(0,ug.jsx)($M,{className:"chakra-button__spinner--start",label:d,placement:"start",spacing:h,children:f}),s?d||(0,ug.jsx)(GR.span,{opacity:0,children:(0,ug.jsx)(tA,{...w})}):(0,ug.jsx)(tA,{...w}),s&&"end"===v&&(0,ug.jsx)($M,{className:"chakra-button__spinner--end",label:d,placement:"end",spacing:h,children:f})]})}));function tA(e){const{leftIcon:t,rightIcon:n,children:i,iconSpacing:r}=e;return(0,ug.jsxs)(ug.Fragment,{children:[t&&(0,ug.jsx)(YM,{marginEnd:r,children:t}),i,n&&(0,ug.jsx)(YM,{marginStart:r,children:n})]})}eA.displayName="Button";var nA=JR(((e,n)=>{const{icon:i,children:r,isRound:o,"aria-label":s,...a}=e,c=i||r,l=(0,t.isValidElement)(c)?(0,t.cloneElement)(c,{"aria-hidden":!0,focusable:!1}):null;return(0,ug.jsx)(eA,{padding:"0",borderRadius:o?"full":void 0,ref:n,"aria-label":s,...a,children:l})}));nA.displayName="IconButton";var iA=Object.defineProperty,rA=(e,t,n)=>(((e,t,n)=>{t in e?iA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n),oA=new class{constructor(){rA(this,"modals"),this.modals=new Map}add(e){return this.modals.set(e,this.modals.size+1),this.modals.size}remove(e){this.modals.delete(e)}isTopModal(e){return!!e&&this.modals.get(e)===this.modals.size}};function sA(e,n){const[i,r]=(0,t.useState)(0);return(0,t.useEffect)((()=>{const t=e.current;if(t){if(n){const e=oA.add(t);r(e)}return()=>{oA.remove(t),r(0)}}}),[n,e]),i}var aA=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},cA=new WeakMap,lA=new WeakMap,uA={},dA=0,hA=function(e){return e&&(e.host||hA(e.parentNode))},pA=function(e,t,n,i){var r=function(e,t){return t.map((function(t){if(e.contains(t))return t;var n=hA(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);uA[n]||(uA[n]=new WeakMap);var o=uA[n],s=[],a=new Set,c=new Set(r),l=function(e){e&&!a.has(e)&&(a.add(e),l(e.parentNode))};r.forEach(l);var u=function(e){e&&!c.has(e)&&Array.prototype.forEach.call(e.children,(function(e){if(a.has(e))u(e);else{var t=e.getAttribute(i),r=null!==t&&"false"!==t,c=(cA.get(e)||0)+1,l=(o.get(e)||0)+1;cA.set(e,c),o.set(e,l),s.push(e),1===c&&r&&lA.set(e,!0),1===l&&e.setAttribute(n,"true"),r||e.setAttribute(i,"true")}}))};return u(t),a.clear(),dA++,function(){s.forEach((function(e){var t=cA.get(e)-1,r=o.get(e)-1;cA.set(e,t),o.set(e,r),t||(lA.has(e)||e.removeAttribute(i),lA.delete(e)),r||e.removeAttribute(n)})),--dA||(cA=new WeakMap,cA=new WeakMap,lA=new WeakMap,uA={})}},fA=function(e,t,n){void 0===n&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),r=t||aA(e);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),pA(i,r,n,"aria-hidden")):function(){return null}};function vA(e){const{isOpen:n,onClose:i,id:r,closeOnOverlayClick:o=!0,closeOnEsc:s=!0,useInert:a=!0,onOverlayClick:c,onEsc:l}=e,u=(0,t.useRef)(null),d=(0,t.useRef)(null),[h,p,f]=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const o=(0,t.useId)(),s=e||o;return(0,t.useMemo)((()=>i.map((e=>"".concat(e,"-").concat(s)))),[s,i])}(r,"chakra-modal","chakra-modal--header","chakra-modal--body");!function(e,n){const i=e.current;(0,t.useEffect)((()=>{if(e.current&&n)return fA(e.current)}),[n,e,i])}(u,n&&a);const v=sA(u,n),m=(0,t.useRef)(null),g=(0,t.useCallback)((e=>{m.current=e.target}),[]),y=(0,t.useCallback)((e=>{"Escape"===e.key&&(e.stopPropagation(),s&&(null==i||i()),null==l||l())}),[s,i,l]),[S,b]=(0,t.useState)(!1),[_,w]=(0,t.useState)(!1),x=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{role:"dialog",...e,ref:QM(t,u),id:h,tabIndex:-1,"aria-modal":!0,"aria-labelledby":S?p:void 0,"aria-describedby":_?f:void 0,onClick:Gg(e.onClick,(e=>e.stopPropagation()))}}),[f,_,h,p,S]),C=(0,t.useCallback)((e=>{e.stopPropagation(),m.current===e.target&&oA.isTopModal(u.current)&&(o&&(null==i||i()),null==c||c())}),[i,o,c]),E=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...e,ref:QM(t,d),onClick:Gg(e.onClick,C),onKeyDown:Gg(e.onKeyDown,y),onMouseDown:Gg(e.onMouseDown,g)}}),[y,g,C]);return{isOpen:n,onClose:i,headerId:p,bodyId:f,setBodyMounted:w,setHeaderMounted:b,dialogRef:u,overlayRef:d,getDialogProps:x,getDialogContainerProps:E,index:v}}var[mA,gA]=oM({name:"ModalStylesContext",errorMessage:"useModalStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Modal />\" "}),[yA,SA]=oM({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),bA=e=>{const t={scrollBehavior:"outside",autoFocus:!0,trapFocus:!0,returnFocusOnClose:!0,blockScrollOnMount:!0,allowPinchZoom:!1,motionPreset:"scale",lockFocusAcrossFrames:!0,...e},{portalProps:n,children:i,autoFocus:r,trapFocus:o,initialFocusRef:s,finalFocusRef:a,returnFocusOnClose:c,blockScrollOnMount:l,allowPinchZoom:u,preserveScrollBarGap:d,motionPreset:h,lockFocusAcrossFrames:p,onCloseComplete:f}=t,v=tM("Modal",t),m={...vA(t),autoFocus:r,trapFocus:o,initialFocusRef:s,finalFocusRef:a,returnFocusOnClose:c,blockScrollOnMount:l,allowPinchZoom:u,preserveScrollBarGap:d,motionPreset:h,lockFocusAcrossFrames:p};return(0,ug.jsx)(yA,{value:m,children:(0,ug.jsx)(mA,{value:v,children:(0,ug.jsx)(IM,{onExitComplete:f,children:m.isOpen&&(0,ug.jsx)(HM,{...n,children:i})})})})};bA.displayName="Modal";var[_A,wA]=oM(),xA={start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}};function CA(e){var t;const{isOpen:n,onClose:i,placement:r="right",children:o,...s}=e,a=YR(),c=null==(t=a.components)?void 0:t.Drawer,l=function(e,t){var n,i;if(e)return null!=(i=null==(n=xA[e])?void 0:n[t])?i:e}(r,a.direction);return(0,ug.jsx)(_A,{value:{placement:l},children:(0,ug.jsx)(bA,{isOpen:n,onClose:i,styleConfig:c,...s,children:o})})}var EA="data-focus-lock",PA="data-focus-lock-disabled";function TA(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var RA=new WeakMap;function MA(e,n){var i=function(e,n){var i=(0,t.useState)((function(){return{value:e,callback:n,facade:{get current(){return i.value},set current(e){var t=i.value;t!==e&&(i.value=e,i.callback(e,t))}}}}))[0];return i.callback=n,i.facade}(n||null,(function(t){return e.forEach((function(e){return TA(e,t)}))}));return t.useLayoutEffect((function(){var t=RA.get(i);if(t){var n=new Set(t),r=new Set(e),o=i.current;n.forEach((function(e){r.has(e)||TA(e,null)})),r.forEach((function(e){n.has(e)||TA(e,o)}))}RA.set(i,e)}),[e]),i}var AA={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},IA=function(e){var n=e.children,i=void 0===n?null:n;return t.createElement(t.Fragment,null,t.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:AA}),i,i&&t.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:AA}))};IA.propTypes={};var kA=function(){return kA=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},kA.apply(this,arguments)};function OA(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create;function DA(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;function LA(e){return e}function NA(e,t){void 0===t&&(t=LA);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var r=t(e,i);return n.push(r),function(){n=n.filter((function(e){return e!==r}))}},assignSyncMedium:function(e){for(i=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){i=!0;var t=[];if(n.length){var r=n;n=[],r.forEach(e),t=n}var o=function(){var n=t;t=[],n.forEach(e)},s=function(){return Promise.resolve().then(o)};s(),n={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),n}}}};return r}function zA(e,t){return void 0===t&&(t=LA),NA(e,t)}function FA(e){void 0===e&&(e={});var t=NA(null);return t.options=kA({async:!0,ssr:!1},e),t}var UA=zA({},(function(e){return{target:e.target,currentTarget:e.currentTarget}})),BA=zA(),jA=zA(),VA=FA({async:!0,ssr:"undefined"!==typeof document}),HA=(0,t.createContext)(void 0),WA=[],GA=t.forwardRef((function(e,n){var i,r=t.useState(),o=r[0],s=r[1],a=t.useRef(),c=t.useRef(!1),l=t.useRef(null),u=t.useState({})[1],d=e.children,h=e.disabled,p=void 0!==h&&h,f=e.noFocusGuards,v=void 0!==f&&f,m=e.persistentFocus,g=void 0!==m&&m,y=e.crossFrame,S=void 0===y||y,b=e.autoFocus,_=void 0===b||b,w=(e.allowTextSelection,e.group),x=e.className,C=e.whiteList,E=e.hasPositiveIndices,P=e.shards,T=void 0===P?WA:P,R=e.as,M=void 0===R?"div":R,A=e.lockProps,I=void 0===A?{}:A,k=e.sideCar,O=e.returnFocus,D=void 0!==O&&O,L=e.focusOptions,N=e.onActivation,z=e.onDeactivation,F=t.useState({})[0],U=t.useCallback((function(e){var t=e.captureFocusRestore;if(!l.current){var n,i=null==(n=document)?void 0:n.activeElement;l.current=i,i!==document.body&&(l.current=t(i))}a.current&&N&&N(a.current),c.current=!0,u()}),[N]),B=t.useCallback((function(){c.current=!1,z&&z(a.current),u()}),[z]),j=t.useCallback((function(e){var t=l.current;if(t){var n=("function"===typeof t?t():t)||document.body,i="function"===typeof D?D(n):D;if(i){var r="object"===typeof i?i:void 0;l.current=null,e?Promise.resolve().then((function(){return n.focus(r)})):n.focus(r)}}}),[D]),V=t.useCallback((function(e){c.current&&UA.useMedium(e)}),[]),H=BA.useMedium,W=t.useCallback((function(e){a.current!==e&&(a.current=e,s(e))}),[]);var G=cT(((i={})[PA]=p&&"disabled",i[EA]=w,i),I),q=!0!==v,X=q&&"tail"!==v,K=MA([n,W]),J=t.useMemo((function(){return{observed:a,shards:T,enabled:!p,active:c.current}}),[p,c.current,T,o]);return t.createElement(t.Fragment,null,q&&[t.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:p?-1:0,style:AA}),E?t.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:p?-1:1,style:AA}):null],!p&&t.createElement(k,{id:F,sideCar:VA,observed:o,disabled:p,persistentFocus:g,crossFrame:S,autoFocus:_,whiteList:C,shards:T,onActivation:U,onDeactivation:B,returnFocus:j,focusOptions:L}),t.createElement(M,cT({ref:K},G,{className:x,onBlur:H,onFocus:V}),t.createElement(HA.Provider,{value:J},d)),X&&t.createElement("div",{"data-focus-guard":!0,tabIndex:p?-1:0,style:AA}))}));GA.propTypes={};const qA=GA;function XA(e,t){return XA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},XA(e,t)}function KA(e){return KA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KA(e)}function JA(e){var t=function(e,t){if("object"!=KA(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=KA(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==KA(t)?t:String(t)}const YA=function(e,n){return function(i){var r,o=[];function s(){r=e(o.map((function(e){return e.props}))),n(r)}var a=function(e){var n,a;function c(){return e.apply(this,arguments)||this}a=e,(n=c).prototype=Object.create(a.prototype),n.prototype.constructor=n,XA(n,a),c.peek=function(){return r};var l=c.prototype;return l.componentDidMount=function(){o.push(this),s()},l.componentDidUpdate=function(){s()},l.componentWillUnmount=function(){var e=o.indexOf(this);o.splice(e,1),s()},l.render=function(){return t.createElement(i,this.props)},c}(t.PureComponent);return function(e,t,n){(t=JA(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(a,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(i)+")"),a}};var $A=function(e){for(var t=Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t},QA=function(e){return Array.isArray(e)?e:[e]},ZA=function(e){return Array.isArray(e)?e[0]:e},eI=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},tI=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},nI=function(e,t){return!e||tI(e)||!function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!(!t||!t.getPropertyValue)&&("none"===t.getPropertyValue("display")||"hidden"===t.getPropertyValue("visibility"))}(e)&&!function(e){return e.hasAttribute("inert")}(e)&&t(eI(e))},iI=function(e,t){var n=e.get(t);if(void 0!==n)return n;var i=nI(t,iI.bind(void 0,e));return e.set(t,i),i},rI=function(e,t){var n=e.get(t);if(void 0!==n)return n;var i=function(e,t){return!(e&&!tI(e))||!!cI(e)&&t(eI(e))}(t,rI.bind(void 0,e));return e.set(t,i),i},oI=function(e){return e.dataset},sI=function(e){return"INPUT"===e.tagName},aI=function(e){return sI(e)&&"radio"===e.type},cI=function(e){var t=e.getAttribute("data-no-autofocus");return![!0,"true",""].includes(t)},lI=function(e){var t;return Boolean(e&&(null===(t=oI(e))||void 0===t?void 0:t.focusGuard))},uI=function(e){return!lI(e)},dI=function(e){return Boolean(e)},hI=function(e,t){var n=Math.max(0,e.tabIndex),i=Math.max(0,t.tabIndex),r=n-i,o=e.index-t.index;if(r){if(!n)return 1;if(!i)return-1}return r||o},pI=function(e,t,n){return $A(e).map((function(e,t){var i=function(e){return e.tabIndex<0&&!e.hasAttribute("tabindex")?0:e.tabIndex}(e);return{node:e,index:t,tabIndex:n&&-1===i?(e.dataset||{}).focusGuard?0:-1:i}})).filter((function(e){return!t||e.tabIndex>=0})).sort(hI)},fI=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"].join(","),vI="".concat(fI,", [data-focus-guard]"),mI=function(e,t){return $A((e.shadowRoot||e).children).reduce((function(e,n){return e.concat(n.matches(t?vI:fI)?[n]:[],mI(n))}),[])},gI=function(e,t){return e.reduce((function(e,n){var i,r=mI(n,t),o=(i=[]).concat.apply(i,r.map((function(e){return function(e,t){var n;return e instanceof HTMLIFrameElement&&(null===(n=e.contentDocument)||void 0===n?void 0:n.body)?gI([e.contentDocument.body],t):[e]}(e,t)})));return e.concat(o,n.parentNode?$A(n.parentNode.querySelectorAll(fI)).filter((function(e){return e===n})):[])}),[])},yI=function(e,t){return $A(e).filter((function(e){return iI(t,e)})).filter((function(e){return function(e){return!((sI(e)||function(e){return"BUTTON"===e.tagName}(e))&&("hidden"===e.type||e.disabled))}(e)}))},SI=function(e,t){return void 0===t&&(t=new Map),$A(e).filter((function(e){return rI(t,e)}))},bI=function(e,t,n){return pI(yI(gI(e,n),t),!0,n)},_I=function(e,t){return pI(yI(gI(e),t),!1)},wI=function(e,t){return yI(function(e){var t=e.querySelectorAll("[".concat("data-autofocus-inside","]"));return $A(t).map((function(e){return gI([e])})).reduce((function(e,t){return e.concat(t)}),[])}(e),t)},xI=function(e,t){return e.shadowRoot?xI(e.shadowRoot,t):!(void 0===Object.getPrototypeOf(e).contains||!Object.getPrototypeOf(e).contains.call(e,t))||$A(e.children).some((function(e){var n;if(e instanceof HTMLIFrameElement){var i=null===(n=e.contentDocument)||void 0===n?void 0:n.body;return!!i&&xI(i,t)}return xI(e,t)}))},CI=function(e){if(void 0===e&&(e=document),e&&e.activeElement){var t=e.activeElement;return t.shadowRoot?CI(t.shadowRoot):t instanceof HTMLIFrameElement&&function(e){try{return e()}catch(t){return}}((function(){return t.contentWindow.document}))?CI(t.contentWindow.document):t}},EI=function(e){return e.parentNode?EI(e.parentNode):e},PI=function(e){return QA(e).filter(Boolean).reduce((function(e,t){var n=t.getAttribute(EA);return e.push.apply(e,n?function(e){for(var t=new Set,n=e.length,i=0;i<n;i+=1)for(var r=i+1;r<n;r+=1){var o=e[i].compareDocumentPosition(e[r]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(r),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(i)}return e.filter((function(e,n){return!t.has(n)}))}($A(EI(t).querySelectorAll("[".concat(EA,'="').concat(n,'"]:not([').concat(PA,'="disabled"])')))):[t]),e}),[])},TI=function(e,t){return void 0===t&&(t=CI(ZA(e).ownerDocument)),!(!t||t.dataset&&t.dataset.focusGuard)&&PI(e).some((function(e){return xI(e,t)||function(e,t){return Boolean($A(e.querySelectorAll("iframe")).some((function(e){return function(e,t){return e===t}(e,t)})))}(e,t)}))},RI=function(e,t){e&&("focus"in e&&e.focus(t),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus())},MI=function(e,t){return aI(e)&&e.name?function(e,t){return t.filter(aI).filter((function(t){return t.name===e.name})).filter((function(e){return e.checked}))[0]||e}(e,t):e},AI=function(e){return e[0]&&e.length>1?MI(e[0],e):e[0]},II=function(e,t){return e.indexOf(MI(t,e))},kI="NEW_FOCUS",OI=function(e,t,n,i,r){var o=e.length,s=e[0],a=e[o-1],c=lI(i);if(!(i&&e.indexOf(i)>=0)){var l=void 0!==i?n.indexOf(i):-1,u=r?n.indexOf(r):l,d=r?e.indexOf(r):-1;if(-1===l)return-1!==d?d:kI;if(-1===d)return kI;var h=l-u,p=n.indexOf(s),f=n.indexOf(a),v=function(e){var t=new Set;return e.forEach((function(n){return t.add(MI(n,e))})),e.filter((function(e){return t.has(e)}))}(n),m=(void 0!==i?v.indexOf(i):-1)-(r?v.indexOf(r):l);if(!h&&d>=0)return d;if(0===t.length)return d;var g=II(e,t[0]),y=II(e,t[t.length-1]);return l<=p&&c&&Math.abs(h)>1?y:l>=f&&c&&Math.abs(h)>1?g:h&&Math.abs(m)>1?d:l<=p?y:l>f?g:h?Math.abs(h)>1?d:(o+d+h)%o:void 0}},DI=function(e,t,n){var i,r=e.map((function(e){return e.node})),o=SI(r.filter((i=n,function(e){var t,n=null===(t=oI(e))||void 0===t?void 0:t.autofocus;return e.autofocus||void 0!==n&&"false"!==n||i.indexOf(e)>=0})));return o&&o.length?AI(o):AI(SI(t))},LI=function(e,t){return void 0===t&&(t=[]),t.push(e),e.parentNode&&LI(e.parentNode.host||e.parentNode,t),t},NI=function(e,t){for(var n=LI(e),i=LI(t),r=0;r<n.length;r+=1){var o=n[r];if(i.indexOf(o)>=0)return o}return!1},zI=function(e,t,n){var i=QA(e),r=QA(t),o=i[0],s=!1;return r.filter(Boolean).forEach((function(e){s=NI(s||e,e)||s,n.filter(Boolean).forEach((function(e){var t=NI(o,e);t&&(s=!s||xI(t,s)?t:NI(t,s))}))})),s},FI=function(e,t){return e.reduce((function(e,n){return e.concat(wI(n,t))}),[])},UI=function(e,t){var n=CI(QA(e).length>0?document:ZA(e).ownerDocument),i=PI(e).filter(uI),r=zI(n||e,e,i),o=new Map,s=_I(i,o),a=s.filter((function(e){var t=e.node;return uI(t)}));if(a[0]){var c=_I([r],o).map((function(e){return e.node})),l=function(e,t){var n=new Map;return t.forEach((function(e){return n.set(e.node,e)})),e.map((function(e){return n.get(e)})).filter(dI)}(c,a),u=l.map((function(e){return e.node})),d=l.filter((function(e){return e.tabIndex>=0})).map((function(e){return e.node})),h=OI(u,d,c,n,t);if(h===kI){var p=DI(s,d,FI(i,o))||DI(s,u,FI(i,o));return p?{node:p}:void console.warn("focus-lock: cannot find any node to move focus into")}return void 0===h?h:l[h]}},BI=0,jI=!1,VI=function(e,t,n){void 0===n&&(n={});var i=UI(e,t);if(!jI&&i){if(BI>2)return console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),jI=!0,void setTimeout((function(){jI=!1}),1);BI++,RI(i.node,n.focusOptions),BI--}},HI=function(e,t,n){void 0===t&&(t={});var i=function(e){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},e)}(t),r=function(e,t,n){if(!e||!t)return console.error("no element or scope given"),{};var i=QA(t);if(i.every((function(t){return!xI(t,e)})))return console.error("Active element is not contained in the scope"),{};var r=n?bI(i,new Map):_I(i,new Map),o=r.findIndex((function(t){return t.node===e}));return-1!==o?{prev:r[o-1],next:r[o+1],first:r[0],last:r[r.length-1]}:void 0}(e,i.scope,i.onlyTabbable);if(r){var o=n(r,i.cycle);o&&RI(o.node,i.focusOptions)}},WI=function(e,t,n){var i,r=function(e,t){var n=t?bI(QA(e),new Map):_I(QA(e),new Map);return{first:n[0],last:n[n.length-1]}}(e,null===(i=t.onlyTabbable)||void 0===i||i),o=r[n];o&&RI(o.node,t.focusOptions)};function GI(e){if(!e)return null;var t=e?new WeakRef(e):null;return function(){return(null===t||void 0===t?void 0:t.deref())||null}}function qI(e){setTimeout(e,1)}var XI=function(e){return e&&"current"in e?e.current:e},KI=function(){return document&&document.activeElement===document.body||function(e){void 0===e&&(e=document);var t=CI(e);return!!t&&$A(e.querySelectorAll("[".concat("data-no-focus-lock","]"))).some((function(e){return xI(e,t)}))}()},JI=null,YI=null,$I=null,QI=!1,ZI=function(){return!0};function ek(e,t,n,i){var r=null,o=e;do{var s=i[o];if(s.guard)s.node.dataset.focusAutoGuard&&(r=s);else{if(!s.lockItem)break;if(o!==e)return;r=null}}while((o+=n)!==t);r&&(r.node.tabIndex=0)}var tk=function e(t,n,i){return n&&(n.host===t&&(!n.activeElement||i.contains(n.activeElement))||n.parentNode&&e(t,n.parentNode,i))},nk=function(){var e,t=!1;if(JI){var n=JI,i=n.observed,r=n.persistentFocus,o=n.autoFocus,s=n.shards,a=n.crossFrame,c=n.focusOptions,l=i||$I&&$I.portaledElement,u=document&&document.activeElement;if(l){var d=[l].concat(s.map(XI).filter(Boolean));if(u&&!function(e){return(JI.whiteList||ZI)(e)}(u)||(r||(a?Boolean(QI):"meanwhile"===QI)||!KI()||!YI&&o)&&(l&&!(TI(d)||u&&function(e,t){return t.some((function(t){return tk(e,t,t)}))}(u,d)||(e=u,$I&&$I.portaledElement===e))&&(document&&!YI&&u&&!o?(u.blur&&u.blur(),document.body.focus()):(t=VI(d,YI,{focusOptions:c}),$I={})),QI=!1,YI=document&&document.activeElement),document&&u!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var h=document&&document.activeElement,p=function(e){var t=PI(e).filter(uI),n=zI(e,e,t),i=pI(gI([n],!0),!0,!0),r=gI(t,!1);return i.map((function(e){var t=e.node;return{node:t,index:e.index,lockItem:r.indexOf(t)>=0,guard:lI(t)}}))}(d),f=p.map((function(e){return e.node})).indexOf(h);f>-1&&(p.filter((function(e){var t=e.guard,n=e.node;return t&&n.dataset.focusAutoGuard})).forEach((function(e){return e.node.removeAttribute("tabIndex")})),ek(f,p.length,1,p),ek(f,-1,-1,p))}}}return t},ik=function(e){nk()&&e&&(e.stopPropagation(),e.preventDefault())},rk=function(){return qI(nk)},ok=function(e){var t=e.target,n=e.currentTarget;n.contains(t)||($I={observerNode:n,portaledElement:t})},sk=function(){QI="just",qI((function(){QI="meanwhile"}))};var ak={moveFocusInside:VI,focusInside:TI,focusNextElement:function(e,t){void 0===t&&(t={}),HI(e,t,(function(e,t){var n=e.next,i=e.first;return n||t&&i}))},focusPrevElement:function(e,t){void 0===t&&(t={}),HI(e,t,(function(e,t){var n=e.prev,i=e.last;return n||t&&i}))},focusFirstElement:function(e,t){void 0===t&&(t={}),WI(e,t,"first")},focusLastElement:function(e,t){void 0===t&&(t={}),WI(e,t,"last")},captureFocusRestore:function(e){var t=function(e){if(!e)return null;for(var t=[],n=e;n&&n!==document.body;)t.push({current:GI(n),parent:GI(n.parentElement),left:GI(n.previousElementSibling),right:GI(n.nextElementSibling)}),n=n.parentElement;return{element:GI(e),stack:t,ownerDocument:e.ownerDocument}}(e);return function(){return function(e){var t,n,i,r,o;if(e)for(var s=e.stack,a=e.ownerDocument,c=new Map,l=0,u=s;l<u.length;l++){var d=u[l],h=null===(t=d.parent)||void 0===t?void 0:t.call(d);if(h&&a.contains(h)){for(var p=null===(n=d.left)||void 0===n?void 0:n.call(d),f=d.current(),v=h.contains(f)?f:void 0,m=null===(i=d.right)||void 0===i?void 0:i.call(d),g=bI([h],c),y=null!==(o=null!==(r=null!==v&&void 0!==v?v:null===p||void 0===p?void 0:p.nextElementSibling)&&void 0!==r?r:m)&&void 0!==o?o:p;y;){for(var S=0,b=g;S<b.length;S++){var _=b[S];if(null===y||void 0===y?void 0:y.contains(_.node))return _.node}y=y.nextElementSibling}if(g.length)return g[0].node}}}(t)}}};UA.assignSyncMedium(ok),BA.assignMedium(rk),jA.assignMedium((function(e){return e(ak)}));const ck=YA((function(e){return e.filter((function(e){return!e.disabled}))}),(function(e){var t=e.slice(-1)[0];t&&!JI&&(document.addEventListener("focusin",ik),document.addEventListener("focusout",rk),window.addEventListener("blur",sk));var n=JI,i=n&&t&&t.id===n.id;JI=t,n&&!i&&(n.onDeactivation(),e.filter((function(e){return e.id===n.id})).length||n.returnFocus(!t)),t?(YI=null,i&&n.observed===t.observed||t.onActivation(ak),nk(),qI(nk)):(document.removeEventListener("focusin",ik),document.removeEventListener("focusout",rk),window.removeEventListener("blur",sk),YI=null)}))((function(){return null}));var lk=t.forwardRef((function(e,n){return t.createElement(qA,cT({sideCar:ck,ref:n},e))})),uk=qA.propTypes||{};uk.sideCar,function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n])}(uk,["sideCar"]);lk.propTypes={};const dk=lk;function hk(e){return null!=e&&"object"==typeof e&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function pk(e){var t;if(!hk(e))return!1;return e instanceof(null!=(t=e.ownerDocument.defaultView)?t:window).HTMLElement}var fk=e=>e.hasAttribute("tabindex");function vk(e){return!(!e.parentElement||!vk(e.parentElement))||e.hidden}function mk(e){if(!pk(e)||vk(e)||function(e){return!0===Boolean(e.getAttribute("disabled"))||!0===Boolean(e.getAttribute("aria-disabled"))}(e))return!1;const{localName:t}=e;if(["input","select","textarea","button"].indexOf(t)>=0)return!0;const n={a:()=>e.hasAttribute("href"),audio:()=>e.hasAttribute("controls"),video:()=>e.hasAttribute("controls")};return t in n?n[t]():!!function(e){const t=e.getAttribute("contenteditable");return"false"!==t&&null!=t}(e)||fk(e)}var gk,yk=["input:not(:disabled):not([disabled])","select:not(:disabled):not([disabled])","textarea:not(:disabled):not([disabled])","embed","iframe","object","a[href]","area[href]","button:not(:disabled):not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"].join(),Sk=e=>e.offsetWidth>0&&e.offsetHeight>0;function bk(e){const t=Array.from(e.querySelectorAll(yk));return t.unshift(e),t.filter((e=>mk(e)&&Sk(e)))}var _k=null!=(gk=dk.default)?gk:dk,wk=e=>{const{initialFocusRef:n,finalFocusRef:i,contentRef:r,restoreFocus:o,children:s,isDisabled:a,autoFocus:c,persistentFocus:l,lockFocusAcrossFrames:u}=e,d=(0,t.useCallback)((()=>{if(null==n?void 0:n.current)n.current.focus();else if(null==r?void 0:r.current){0===bk(r.current).length&&requestAnimationFrame((()=>{var e;null==(e=r.current)||e.focus()}))}}),[n,r]),h=(0,t.useCallback)((()=>{var e;null==(e=null==i?void 0:i.current)||e.focus()}),[i]),p=o&&!i;return(0,ug.jsx)(_k,{crossFrame:u,persistentFocus:l,autoFocus:c,disabled:a,onActivation:d,onDeactivation:h,returnFocus:p,children:s})};wk.displayName="FocusLock";var xk="right-scroll-bar-position",Ck="width-before-scroll-bar",Ek=FA(),Pk=function(){},Tk=t.forwardRef((function(e,n){var i=t.useRef(null),r=t.useState({onScrollCapture:Pk,onWheelCapture:Pk,onTouchMoveCapture:Pk}),o=r[0],s=r[1],a=e.forwardProps,c=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,p=e.sideCar,f=e.noIsolation,v=e.inert,m=e.allowPinchZoom,g=e.as,y=void 0===g?"div":g,S=e.gapMode,b=OA(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=p,w=MA([i,n]),x=kA(kA({},b),o);return t.createElement(t.Fragment,null,d&&t.createElement(_,{sideCar:Ek,removeScrollBar:u,shards:h,noIsolation:f,inert:v,setCallbacks:s,allowPinchZoom:!!m,lockRef:i,gapMode:S}),a?t.cloneElement(t.Children.only(c),kA(kA({},x),{ref:w})):t.createElement(y,kA({},x,{className:l,ref:w}),c))}));Tk.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Tk.classNames={fullWidth:Ck,zeroRight:xk};var Rk,Mk=function(e){var n=e.sideCar,i=OA(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=n.read();if(!r)throw new Error("Sidecar medium not found");return t.createElement(r,kA({},i))};Mk.isSideCarExport=!0;function Ak(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Rk||n.nc;return t&&e.setAttribute("nonce",t),e}var Ik=function(){var e=0,t=null;return{add:function(n){var i;0==e&&(t=Ak())&&(!function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}(t,n),i=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(i)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},kk=function(){var e=function(){var e=Ik();return function(n,i){t.useEffect((function(){return e.add(n),function(){e.remove()}}),[n&&i])}}();return function(t){var n=t.styles,i=t.dynamic;return e(n,i),null}},Ok={left:0,top:0,right:0,gap:0},Dk=function(e){return parseInt(e||"",10)||0},Lk=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return Ok;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],i=t["padding"===e?"paddingTop":"marginTop"],r=t["padding"===e?"paddingRight":"marginRight"];return[Dk(n),Dk(i),Dk(r)]}(e),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-n+t[2]-t[0])}},Nk=kk(),zk="data-scroll-locked",Fk=function(e,t,n,i){var r=e.left,o=e.top,s=e.right,a=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(i,";\n   padding-right: ").concat(a,"px ").concat(i,";\n  }\n  body[").concat(zk,"] {\n    overflow: hidden ").concat(i,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(i,";"),"margin"===n&&"\n    padding-left: ".concat(r,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(i,";\n    "),"padding"===n&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(xk," {\n    right: ").concat(a,"px ").concat(i,";\n  }\n  \n  .").concat(Ck," {\n    margin-right: ").concat(a,"px ").concat(i,";\n  }\n  \n  .").concat(xk," .").concat(xk," {\n    right: 0 ").concat(i,";\n  }\n  \n  .").concat(Ck," .").concat(Ck," {\n    margin-right: 0 ").concat(i,";\n  }\n  \n  body[").concat(zk,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},Uk=function(e){var n=e.noRelative,i=e.noImportant,r=e.gapMode,o=void 0===r?"margin":r,s=t.useMemo((function(){return Lk(o)}),[o]);return t.useEffect((function(){return document.body.setAttribute(zk,""),function(){document.body.removeAttribute(zk)}}),[]),t.createElement(Nk,{styles:Fk(s,!n,o,i?"":"!important")})},Bk=!1;if("undefined"!==typeof window)try{var jk=Object.defineProperty({},"passive",{get:function(){return Bk=!0,!0}});window.addEventListener("test",jk,jk),window.removeEventListener("test",jk,jk)}catch(_Q){Bk=!1}var Vk=!!Bk&&{passive:!1},Hk=function(e,t){var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},Wk=function(e,t){var n=t.ownerDocument,i=t;do{if("undefined"!==typeof ShadowRoot&&i instanceof ShadowRoot&&(i=i.host),Gk(e,i)){var r=qk(e,i);if(r[1]>r[2])return!0}i=i.parentNode}while(i&&i!==n.body);return!1},Gk=function(e,t){return"v"===e?function(e){return Hk(e,"overflowY")}(t):function(e){return Hk(e,"overflowX")}(t)},qk=function(e,t){return"v"===e?function(e){return[e.scrollTop,e.scrollHeight,e.clientHeight]}(t):function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t)},Xk=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Kk=function(e){return[e.deltaX,e.deltaY]},Jk=function(e){return e&&"current"in e?e.current:e},Yk=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},$k=0,Qk=[];function Zk(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const eO=(tO=function(e){var n=t.useRef([]),i=t.useRef([0,0]),r=t.useRef(),o=t.useState($k++)[0],s=t.useState(kk)[0],a=t.useRef(e);t.useEffect((function(){a.current=e}),[e]),t.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var t=DA([e.lockRef.current],(e.shards||[]).map(Jk),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(o))})),function(){document.body.classList.remove("block-interactivity-".concat(o)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(o))}))}}}),[e.inert,e.lockRef.current,e.shards]);var c=t.useCallback((function(e,t){if("touches"in e&&2===e.touches.length)return!a.current.allowPinchZoom;var n,o=Xk(e),s=i.current,c="deltaX"in e?e.deltaX:s[0]-o[0],l="deltaY"in e?e.deltaY:s[1]-o[1],u=e.target,d=Math.abs(c)>Math.abs(l)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=Wk(d,u);if(!h)return!0;if(h?n=d:(n="v"===d?"h":"v",h=Wk(d,u)),!h)return!1;if(!r.current&&"changedTouches"in e&&(c||l)&&(r.current=n),!n)return!0;var p=r.current||n;return function(e,t,n,i,r){var o=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),s=o*i,a=n.target,c=t.contains(a),l=!1,u=s>0,d=0,h=0;do{var p=qk(e,a),f=p[0],v=p[1]-p[2]-o*f;(f||v)&&Gk(e,a)&&(d+=v,h+=f),a=a instanceof ShadowRoot?a.host:a.parentNode}while(!c&&a!==document.body||c&&(t.contains(a)||t===a));return(u&&(r&&Math.abs(d)<1||!r&&s>d)||!u&&(r&&Math.abs(h)<1||!r&&-s>h))&&(l=!0),l}(p,t,e,"h"===p?c:l,!0)}),[]),l=t.useCallback((function(e){var t=e;if(Qk.length&&Qk[Qk.length-1]===s){var i="deltaY"in t?Kk(t):Xk(t),r=n.current.filter((function(e){return e.name===t.type&&(e.target===t.target||t.target===e.shadowParent)&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,i)}))[0];if(r&&r.should)t.cancelable&&t.preventDefault();else if(!r){var o=(a.current.shards||[]).map(Jk).filter(Boolean).filter((function(e){return e.contains(t.target)}));(o.length>0?c(t,o[0]):!a.current.noIsolation)&&t.cancelable&&t.preventDefault()}}}),[]),u=t.useCallback((function(e,t,i,r){var o={name:e,delta:t,target:i,should:r,shadowParent:Zk(i)};n.current.push(o),setTimeout((function(){n.current=n.current.filter((function(e){return e!==o}))}),1)}),[]),d=t.useCallback((function(e){i.current=Xk(e),r.current=void 0}),[]),h=t.useCallback((function(t){u(t.type,Kk(t),t.target,c(t,e.lockRef.current))}),[]),p=t.useCallback((function(t){u(t.type,Xk(t),t.target,c(t,e.lockRef.current))}),[]);t.useEffect((function(){return Qk.push(s),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Vk),document.addEventListener("touchmove",l,Vk),document.addEventListener("touchstart",d,Vk),function(){Qk=Qk.filter((function(e){return e!==s})),document.removeEventListener("wheel",l,Vk),document.removeEventListener("touchmove",l,Vk),document.removeEventListener("touchstart",d,Vk)}}),[]);var f=e.removeScrollBar,v=e.inert;return t.createElement(t.Fragment,null,v?t.createElement(s,{styles:Yk(o)}):null,f?t.createElement(Uk,{gapMode:e.gapMode}):null)},Ek.useMedium(tO),Mk);var tO,nO=t.forwardRef((function(e,n){return t.createElement(Tk,kA({},e,{ref:n,sideCar:eO}))}));nO.classNames=Tk.classNames;const iO=nO;function rO(e){const{autoFocus:n,trapFocus:i,dialogRef:r,initialFocusRef:o,blockScrollOnMount:s,allowPinchZoom:a,finalFocusRef:c,returnFocusOnClose:l,preserveScrollBarGap:u,lockFocusAcrossFrames:d,isOpen:h}=SA(),[p,f]=Xg();(0,t.useEffect)((()=>{!p&&f&&setTimeout(f)}),[p,f]);const v=sA(r,h);return(0,ug.jsx)(wk,{autoFocus:n,isDisabled:!i,initialFocusRef:o,finalFocusRef:c,restoreFocus:l,contentRef:r,lockFocusAcrossFrames:d,children:(0,ug.jsx)(iO,{removeScrollBar:!u,allowPinchZoom:a,enabled:1===v&&s,forwardProps:!0,children:e.children})})}var oO={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},sO={position:{left:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"-100%",y:0}},aO={position:{right:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"100%",y:0}},cO={position:{top:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"-100%"}},lO={position:{bottom:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"100%"}};function uO(e){var t;switch(null!=(t=null==e?void 0:e.direction)?t:"right"){case"right":default:return aO;case"left":return sO;case"bottom":return lO;case"top":return cO}}var dO=(e,t)=>({...e,delay:"number"===typeof t?t:null==t?void 0:t.enter}),hO=(e,t)=>({...e,delay:"number"===typeof t?t:null==t?void 0:t.exit}),pO={exit:{duration:.15,ease:oO.easeInOut},enter:{type:"spring",damping:25,stiffness:180}},fO={exit:e=>{let{direction:t,transition:n,transitionEnd:i,delay:r}=e;var o;const{exit:s}=uO({direction:t});return{...s,transition:null!=(o=null==n?void 0:n.exit)?o:hO(pO.exit,r),transitionEnd:null==i?void 0:i.exit}},enter:e=>{let{direction:t,transitionEnd:n,transition:i,delay:r}=e;var o;const{enter:s}=uO({direction:t});return{...s,transition:null!=(o=null==i?void 0:i.enter)?o:dO(pO.enter,r),transitionEnd:null==n?void 0:n.enter}}},vO=(0,t.forwardRef)((function(e,t){const{direction:n="right",style:i,unmountOnExit:r,in:o,className:s,transition:a,transitionEnd:c,delay:l,motionProps:u,...d}=e,h=uO({direction:n}),p=Object.assign({position:"fixed"},h.position,i),f=!r||o&&r,v=o||r?"enter":"exit",m={transitionEnd:c,transition:a,direction:n,delay:l};return(0,ug.jsx)(IM,{custom:m,children:f&&(0,ug.jsx)(dE.div,{...d,ref:t,initial:"exit",className:Ug("chakra-slide",s),animate:v,exit:"exit",custom:m,variants:fO,style:p,...u})})}));vO.displayName="Slide";var mO=GR(vO),gO=JR(((e,t)=>{const{className:n,children:i,motionProps:r,containerProps:o,...s}=e,{getDialogProps:a,getDialogContainerProps:c,isOpen:l}=SA(),u=a(s,t),d=c(o),h=Ug("chakra-modal__content",n),p=gA(),f={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...p.dialog},v={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...p.dialogContainer},{placement:m}=wA();return(0,ug.jsx)(rO,{children:(0,ug.jsx)(GR.div,{...d,className:"chakra-modal__content-container",__css:v,children:(0,ug.jsx)(mO,{motionProps:r,direction:m,in:l,className:h,...u,__css:f,children:i})})})}));gO.displayName="DrawerContent";var yO=JR(((e,t)=>{const{onClick:n,className:i,...r}=e,{onClose:o}=SA(),s=Ug("chakra-modal__close-btn",i),a=gA();return(0,ug.jsx)(bM,{ref:t,__css:a.closeButton,className:s,onClick:Gg(n,(e=>{e.stopPropagation(),o()})),...r})}));yO.displayName="ModalCloseButton";var SO=JR(((e,n)=>{const{className:i,...r}=e,{headerId:o,setHeaderMounted:s}=SA();(0,t.useEffect)((()=>(s(!0),()=>s(!1))),[s]);const a=Ug("chakra-modal__header",i),c={flex:0,...gA().header};return(0,ug.jsx)(GR.header,{ref:n,className:a,id:o,...r,__css:c})}));SO.displayName="ModalHeader";var bO=JR((function(e,t){const{direction:n,align:i,justify:r,wrap:o,basis:s,grow:a,shrink:c,...l}=e,u={display:"flex",flexDirection:n,alignItems:i,justifyContent:r,flexWrap:o,flexBasis:s,flexGrow:a,flexShrink:c};return(0,ug.jsx)(GR.div,{ref:t,__css:u,...l})}));bO.displayName="Flex";var _O=JR((function(e,t){const n=eM("Text",e),{className:i,align:r,decoration:o,casing:s,...a}=$P(e),c=function(e){const t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return(0,ug.jsx)(GR.p,{ref:t,className:Ug("chakra-text",e.className),...c,...a,__css:n})}));_O.displayName="Text";var[wO,xO]=oM({name:"FormControlStylesContext",errorMessage:"useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<FormControl />\" "}),[CO,EO]=oM({strict:!1,name:"FormControlContext"});var PO=JR((function(e,n){const i=tM("Form",e),r=$P(e),{getRootProps:o,htmlProps:s,...a}=function(e){const{id:n,isRequired:i,isInvalid:r,isDisabled:o,isReadOnly:s,...a}=e,c=(0,t.useId)(),l=n||"field-".concat(c),u="".concat(l,"-label"),d="".concat(l,"-feedback"),h="".concat(l,"-helptext"),[p,f]=(0,t.useState)(!1),[v,m]=(0,t.useState)(!1),[g,y]=(0,t.useState)(!1),S=(0,t.useCallback)((function(){return{id:h,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ref:QM(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=>{e&&m(!0)}))}}),[h]),b=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...e,ref:t,"data-focus":Wg(g),"data-disabled":Wg(o),"data-invalid":Wg(r),"data-readonly":Wg(s),id:void 0!==e.id?e.id:u,htmlFor:void 0!==e.htmlFor?e.htmlFor:l}}),[l,o,g,r,s,u]),_=(0,t.useCallback)((function(){return{id:d,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ref:QM(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=>{e&&f(!0)})),"aria-live":"polite"}}),[d]),w=(0,t.useCallback)((function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},...a,ref:e,role:"group","data-focus":Wg(g),"data-disabled":Wg(o),"data-invalid":Wg(r),"data-readonly":Wg(s)}}),[a,o,g,r,s]),x=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...e,ref:t,role:"presentation","aria-hidden":!0,children:e.children||"*"}}),[]);return{isRequired:!!i,isInvalid:!!r,isReadOnly:!!s,isDisabled:!!o,isFocused:!!g,onFocus:()=>y(!0),onBlur:()=>y(!1),hasFeedbackText:p,setHasFeedbackText:f,hasHelpText:v,setHasHelpText:m,id:l,labelId:u,feedbackId:d,helpTextId:h,htmlProps:a,getHelpTextProps:S,getErrorMessageProps:_,getRootProps:w,getLabelProps:b,getRequiredIndicatorProps:x}}(r),c=Ug("chakra-form-control",e.className);return(0,ug.jsx)(CO,{value:a,children:(0,ug.jsx)(wO,{value:i,children:(0,ug.jsx)(GR.div,{...o({},n),className:c,__css:i.container})})})}));PO.displayName="FormControl";var TO=JR((function(e,t){const n=EO(),i=xO(),r=Ug("chakra-form__helper-text",e.className);return(0,ug.jsx)(GR.div,{...null==n?void 0:n.getHelpTextProps(e,t),__css:i.helperText,className:r})}));function RO(e){var t,n,i;const r=EO(),{id:o,disabled:s,readOnly:a,required:c,isRequired:l,isInvalid:u,isReadOnly:d,isDisabled:h,onFocus:p,onBlur:f,...v}=e,m=e["aria-describedby"]?[e["aria-describedby"]]:[];return(null==r?void 0:r.hasFeedbackText)&&(null==r?void 0:r.isInvalid)&&m.push(r.feedbackId),(null==r?void 0:r.hasHelpText)&&m.push(r.helpTextId),{...v,"aria-describedby":m.join(" ")||void 0,id:null!=o?o:null==r?void 0:r.id,isDisabled:null!=(t=null!=s?s:h)?t:null==r?void 0:r.isDisabled,isReadOnly:null!=(n=null!=a?a:d)?n:null==r?void 0:r.isReadOnly,isRequired:null!=(i=null!=c?c:l)?i:null==r?void 0:r.isRequired,isInvalid:null!=u?u:null==r?void 0:r.isInvalid,onFocus:Gg(null==r?void 0:r.onFocus,p),onBlur:Gg(null==r?void 0:r.onBlur,f)}}TO.displayName="FormHelperText";var MO={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};var AO=()=>"undefined"!==typeof document;var IO=!1,kO=null,OO=!1,DO=!1,LO=new Set;function NO(e,t){LO.forEach((n=>n(e,t)))}var zO="undefined"!==typeof window&&null!=window.navigator&&/^Mac/.test(window.navigator.platform);function FO(e){OO=!0,function(e){return!(e.metaKey||!zO&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key)}(e)&&(kO="keyboard",NO("keyboard",e))}function UO(e){if(kO="pointer","mousedown"===e.type||"pointerdown"===e.type){OO=!0;const t=e.composedPath?e.composedPath()[0]:e.target;let n=!1;try{n=t.matches(":focus-visible")}catch{}if(n)return;NO("pointer",e)}}function BO(e){var t;(0===(t=e).mozInputSource&&t.isTrusted||0===t.detail&&!t.pointerType)&&(OO=!0,kO="virtual")}function jO(e){e.target!==window&&e.target!==document&&(OO||DO||(kO="virtual",NO("virtual",e)),OO=!1,DO=!1)}function VO(){OO=!1,DO=!0}function HO(){return"pointer"!==kO}function WO(){if(!AO()||IO)return;const{focus:e}=HTMLElement.prototype;HTMLElement.prototype.focus=function(){OO=!0;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.apply(this,n)},document.addEventListener("keydown",FO,!0),document.addEventListener("keyup",FO,!0),document.addEventListener("click",BO,!0),window.addEventListener("focus",jO,!0),window.addEventListener("blur",VO,!1),"undefined"!==typeof PointerEvent?(document.addEventListener("pointerdown",UO,!0),document.addEventListener("pointermove",UO,!0),document.addEventListener("pointerup",UO,!0)):(document.addEventListener("mousedown",UO,!0),document.addEventListener("mousemove",UO,!0),document.addEventListener("mouseup",UO,!0)),IO=!0}function GO(e){WO(),e(HO());const t=()=>e(HO());return LO.add(t),()=>{LO.delete(t)}}function qO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=RO(e),{isDisabled:i,isReadOnly:r,isRequired:o,isInvalid:s,id:a,onBlur:c,onFocus:l,"aria-describedby":u}=n,{defaultChecked:d,isChecked:h,isFocusable:p,onChange:f,isIndeterminate:v,name:m,value:g,tabIndex:y,"aria-label":S,"aria-labelledby":b,"aria-invalid":_,...w}=e,x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Object.assign({},e);for(const i of t)i in n&&delete n[i];return n}(w,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),C=zg(f),E=zg(c),P=zg(l),[T,R]=(0,t.useState)(!1),[M,A]=(0,t.useState)(!1),[I,k]=(0,t.useState)(!1),[O,D]=(0,t.useState)(!1);(0,t.useEffect)((()=>GO(R)),[]);const L=(0,t.useRef)(null),[N,z]=(0,t.useState)(!0),[F,U]=(0,t.useState)(!!d),B=void 0!==h,j=B?h:F,V=(0,t.useCallback)((e=>{r||i?e.preventDefault():(B||U(j?e.target.checked:!!v||e.target.checked),null==C||C(e))}),[r,i,j,B,v,C]);LM((()=>{L.current&&(L.current.indeterminate=Boolean(v))}),[v]),Fg((()=>{i&&A(!1)}),[i,A]),LM((()=>{const e=L.current;if(!(null==e?void 0:e.form))return;const t=()=>{U(!!d)};return e.form.addEventListener("reset",t),()=>{var n;return null==(n=e.form)?void 0:n.removeEventListener("reset",t)}}),[]);const H=i&&!p,W=(0,t.useCallback)((e=>{" "===e.key&&D(!0)}),[D]),G=(0,t.useCallback)((e=>{" "===e.key&&D(!1)}),[D]);LM((()=>{if(!L.current)return;L.current.checked!==j&&U(L.current.checked)}),[L.current]);const q=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...e,ref:t,"data-active":Wg(O),"data-hover":Wg(I),"data-checked":Wg(j),"data-focus":Wg(M),"data-focus-visible":Wg(M&&T),"data-indeterminate":Wg(v),"data-disabled":Wg(i),"data-invalid":Wg(s),"data-readonly":Wg(r),"aria-hidden":!0,onMouseDown:Gg(e.onMouseDown,(e=>{M&&e.preventDefault(),D(!0)})),onMouseUp:Gg(e.onMouseUp,(()=>D(!1))),onMouseEnter:Gg(e.onMouseEnter,(()=>k(!0))),onMouseLeave:Gg(e.onMouseLeave,(()=>k(!1)))}}),[O,j,i,M,T,I,v,s,r]),X=(0,t.useCallback)((function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ref:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,"data-active":Wg(O),"data-hover":Wg(I),"data-checked":Wg(j),"data-focus":Wg(M),"data-focus-visible":Wg(M&&T),"data-indeterminate":Wg(v),"data-disabled":Wg(i),"data-invalid":Wg(s),"data-readonly":Wg(r)}}),[O,j,i,M,T,I,v,s,r]),K=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...x,...e,ref:QM(t,(e=>{e&&z("LABEL"===e.tagName)})),onClick:Gg(e.onClick,(()=>{var e;N||(null==(e=L.current)||e.click(),requestAnimationFrame((()=>{var e;null==(e=L.current)||e.focus({preventScroll:!0})})))})),"data-disabled":Wg(i),"data-checked":Wg(j),"data-invalid":Wg(s)}}),[x,i,j,s,N]),J=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...e,ref:QM(L,t),type:"checkbox",name:m,value:g,id:a,tabIndex:y,onChange:Gg(e.onChange,V),onBlur:Gg(e.onBlur,E,(()=>A(!1))),onFocus:Gg(e.onFocus,P,(()=>A(!0))),onKeyDown:Gg(e.onKeyDown,W),onKeyUp:Gg(e.onKeyUp,G),required:o,checked:j,disabled:H,readOnly:r,"aria-label":S,"aria-labelledby":b,"aria-invalid":_?Boolean(_):s,"aria-describedby":u,"aria-disabled":i,style:MO}}),[m,g,a,V,E,P,W,G,o,j,H,r,S,b,_,s,u,i,y]),Y=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...e,ref:t,onMouseDown:Gg(e.onMouseDown,XO),"data-disabled":Wg(i),"data-checked":Wg(j),"data-invalid":Wg(s)}}),[j,i,s]);return{state:{isInvalid:s,isFocused:M,isChecked:j,isActive:O,isHovered:I,isIndeterminate:v,isDisabled:i,isReadOnly:r,isRequired:o},getRootProps:K,getCheckboxProps:q,getIndicatorProps:X,getInputProps:J,getLabelProps:Y,htmlProps:x}}function XO(e){e.preventDefault(),e.stopPropagation()}var KO=JR((function(e,n){const i=tM("Switch",e),{spacing:r="0.5rem",children:o,...s}=$P(e),{getIndicatorProps:a,getInputProps:c,getCheckboxProps:l,getRootProps:u,getLabelProps:d}=qO(s),h=(0,t.useMemo)((()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...i.container})),[i.container]),p=(0,t.useMemo)((()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...i.track})),[i.track]),f=(0,t.useMemo)((()=>({userSelect:"none",marginStart:r,...i.label})),[r,i.label]);return(0,ug.jsxs)(GR.label,{...u(),className:Ug("chakra-switch",e.className),__css:h,children:[(0,ug.jsx)("input",{className:"chakra-switch__input",...c({},n)}),(0,ug.jsx)(GR.span,{...l(),className:"chakra-switch__track",__css:p,children:(0,ug.jsx)(GR.span,{__css:i.thumb,className:"chakra-switch__thumb",...a()})}),o&&(0,ug.jsx)(GR.span,{className:"chakra-switch__label",...d(),__css:f,children:o})]})}));KO.displayName="Switch";var JO=JR(((e,n)=>{const{className:i,...r}=e,{bodyId:o,setBodyMounted:s}=SA();(0,t.useEffect)((()=>(s(!0),()=>s(!1))),[s]);const a=Ug("chakra-modal__body",i),c=gA();return(0,ug.jsx)(GR.div,{ref:n,className:a,id:o,...r,__css:c.body})}));JO.displayName="ModalBody";var YO=Object.defineProperty,$O=(e,t,n)=>(((e,t,n)=>{t in e?YO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);function QO(e){return e.sort(((e,t)=>{const n=e.compareDocumentPosition(t);if(n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(n&Node.DOCUMENT_POSITION_DISCONNECTED||n&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0}))}function ZO(e,t,n){let i=e+1;return n&&i>=t&&(i=0),i}function eD(e,t,n){let i=e-1;return n&&i<0&&(i=t),i}var tD="undefined"!==typeof window?t.useLayoutEffect:t.useEffect,nD=e=>e,iD=class{constructor(){var e=this;$O(this,"descendants",new Map),$O(this,"register",(e=>{var t;if(null!=e)return"object"==typeof(t=e)&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE?this.registerNode(e):t=>{this.registerNode(t,e)}})),$O(this,"unregister",(e=>{this.descendants.delete(e);const t=QO(Array.from(this.descendants.keys()));this.assignIndex(t)})),$O(this,"destroy",(()=>{this.descendants.clear()})),$O(this,"assignIndex",(e=>{this.descendants.forEach((t=>{const n=e.indexOf(t.node);t.index=n,t.node.dataset.index=t.index.toString()}))})),$O(this,"count",(()=>this.descendants.size)),$O(this,"enabledCount",(()=>this.enabledValues().length)),$O(this,"values",(()=>Array.from(this.descendants.values()).sort(((e,t)=>e.index-t.index)))),$O(this,"enabledValues",(()=>this.values().filter((e=>!e.disabled)))),$O(this,"item",(e=>{if(0!==this.count())return this.values()[e]})),$O(this,"enabledItem",(e=>{if(0!==this.enabledCount())return this.enabledValues()[e]})),$O(this,"first",(()=>this.item(0))),$O(this,"firstEnabled",(()=>this.enabledItem(0))),$O(this,"last",(()=>this.item(this.descendants.size-1))),$O(this,"lastEnabled",(()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)})),$O(this,"indexOf",(e=>{var t,n;return e&&null!=(n=null==(t=this.descendants.get(e))?void 0:t.index)?n:-1})),$O(this,"enabledIndexOf",(e=>null==e?-1:this.enabledValues().findIndex((t=>t.node.isSameNode(e))))),$O(this,"next",(function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=ZO(t,e.count(),n);return e.item(i)})),$O(this,"nextEnabled",(function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=e.item(t);if(!i)return;const r=ZO(e.enabledIndexOf(i.node),e.enabledCount(),n);return e.enabledItem(r)})),$O(this,"prev",(function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=eD(t,e.count()-1,n);return e.item(i)})),$O(this,"prevEnabled",(function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=e.item(t);if(!i)return;const r=eD(e.enabledIndexOf(i.node),e.enabledCount()-1,n);return e.enabledItem(r)})),$O(this,"registerNode",((e,t)=>{if(!e||this.descendants.has(e))return;const n=QO(Array.from(this.descendants.keys()).concat(e));(null==t?void 0:t.disabled)&&(t.disabled=!!t.disabled);const i={node:e,index:-1,...t};this.descendants.set(e,i),this.assignIndex(n)}))}};var[rD,oD]=oM({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});var[sD,aD]=oM({name:"AccordionStylesContext",hookName:"useAccordionStyles",providerName:"<Accordion />"}),[cD,lD]=oM({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItem />"}),[uD,dD,hD,pD]=[nD(rD),()=>nD(oD()),()=>function(){const e=(0,t.useRef)(new iD);return tD((()=>()=>e.current.destroy())),e.current}(),e=>function(e){const n=oD(),[i,r]=(0,t.useState)(-1),o=(0,t.useRef)(null);tD((()=>()=>{o.current&&n.unregister(o.current)}),[]),tD((()=>{if(!o.current)return;const e=Number(o.current.dataset.index);i==e||Number.isNaN(e)||r(e)}));const s=nD(e?n.register(e):n.register);return{descendants:n,index:i,enabledIndex:n.enabledIndexOf(o.current),register:QM(s,o)}}(e)];function fD(e){const{value:n,defaultValue:i,onChange:r,shouldUpdate:o=((e,t)=>e!==t)}=e,s=zg(r),a=zg(o),[c,l]=(0,t.useState)(i),u=void 0!==n,d=u?n:c,h=zg((e=>{const t="function"===typeof e?e(d):e;a(d,t)&&(u||l(t),s(t))}),[u,s,d,a]);return[d,h]}function vD(e){const{onChange:n,defaultIndex:i,index:r,allowMultiple:o,allowToggle:s,...a}=e;!function(e){const t=e.index||e.defaultIndex,n=null!=t&&!Array.isArray(t)&&e.allowMultiple;jg({condition:!!n,message:"If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ".concat(typeof t,",")})}(e),function(e){jg({condition:!(!e.allowMultiple||!e.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}(e);const c=hD(),[l,u]=(0,t.useState)(-1);(0,t.useEffect)((()=>()=>{u(-1)}),[]);const[d,h]=fD({value:r,defaultValue:()=>o?null!=i?i:[]:null!=i?i:-1,onChange:n});return{index:d,setIndex:h,htmlProps:a,getAccordionItemProps:e=>{let t=!1;null!==e&&(t=Array.isArray(d)?d.includes(e):d===e);return{isOpen:t,onChange:t=>{if(null!==e)if(o&&Array.isArray(d)){const n=t?d.concat(e):d.filter((t=>t!==e));h(n)}else t?h(e):s&&h(-1)}}},focusedIndex:l,setFocusedIndex:u,descendants:c}}var[mD,gD]=oM({name:"AccordionContext",hookName:"useAccordionContext",providerName:"Accordion"});function yD(e){const{isDisabled:n,isFocusable:i,id:r,...o}=e,{getAccordionItemProps:s,setFocusedIndex:a}=gD(),c=(0,t.useRef)(null),l=(0,t.useId)(),u=null!=r?r:l,d="accordion-button-".concat(u),h="accordion-panel-".concat(u);!function(e){jg({condition:!(!e.isFocusable||e.isDisabled),message:"Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.\n    "})}(e);const{register:p,index:f,descendants:v}=pD({disabled:n&&!i}),{isOpen:m,onChange:g}=s(-1===f?null:f);!function(e){jg({condition:e.isOpen&&!!e.isDisabled,message:"Cannot open a disabled accordion item"})}({isOpen:m,isDisabled:n});const y=(0,t.useCallback)((()=>{null==g||g(!m),a(f)}),[f,a,m,g]),S=(0,t.useCallback)((e=>{const t={ArrowDown:()=>{const e=v.nextEnabled(f);null==e||e.node.focus()},ArrowUp:()=>{const e=v.prevEnabled(f);null==e||e.node.focus()},Home:()=>{const e=v.firstEnabled();null==e||e.node.focus()},End:()=>{const e=v.lastEnabled();null==e||e.node.focus()}},n=t[e.key];n&&(e.preventDefault(),n(e))}),[v,f]),b=(0,t.useCallback)((()=>{a(f)}),[a,f]),_=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...e,type:"button",ref:QM(p,c,t),id:d,disabled:!!n,"aria-expanded":!!m,"aria-controls":h,onClick:Gg(e.onClick,y),onFocus:Gg(e.onFocus,b),onKeyDown:Gg(e.onKeyDown,S)}}),[d,n,m,y,b,S,h,p]),w=(0,t.useCallback)((function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ref:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,role:"region",id:h,"aria-labelledby":d,hidden:!m}}),[d,m,h]);return{isOpen:m,isDisabled:n,isFocusable:i,onOpen:()=>{null==g||g(!0)},onClose:()=>{null==g||g(!1)},getButtonProps:_,getPanelProps:w,htmlProps:o}}var SD=JR((function(e,n){let{children:i,reduceMotion:r,...o}=e;const s=tM("Accordion",o),a=$P(o),{htmlProps:c,descendants:l,...u}=vD(a),d=(0,t.useMemo)((()=>({...u,reduceMotion:!!r})),[u,r]);return(0,ug.jsx)(uD,{value:l,children:(0,ug.jsx)(mD,{value:d,children:(0,ug.jsx)(sD,{value:s,children:(0,ug.jsx)(GR.div,{ref:n,...c,className:Ug("chakra-accordion",o.className),__css:s.root,children:i})})})})}));SD.displayName="Accordion";var bD=JR((function(e,n){const{children:i,className:r}=e,{htmlProps:o,...s}=yD(e),a={...aD().container,overflowAnchor:"none"},c=(0,t.useMemo)((()=>s),[s]);return(0,ug.jsx)(cD,{value:c,children:(0,ug.jsx)(GR.div,{ref:n,...o,className:Ug("chakra-accordion__item",r),__css:a,children:"function"===typeof i?i({isExpanded:!!s.isOpen,isDisabled:!!s.isDisabled}):i})})}));bD.displayName="AccordionItem";var _D=JR((function(e,t){const{getButtonProps:n}=lD(),i=n(e,t),r={display:"flex",alignItems:"center",width:"100%",outline:0,...aD().button};return(0,ug.jsx)(GR.button,{...i,className:Ug("chakra-accordion__button",e.className),__css:r})}));_D.displayName="AccordionButton";var wD=GR("div");wD.displayName="Box";var xD=JR((function(e,t){const{size:n,centerContent:i=!0,...r}=e,o=i?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return(0,ug.jsx)(wD,{ref:t,boxSize:n,__css:{...o,flexShrink:0,flexGrow:0},...r})}));xD.displayName="Square";var CD=JR((function(e,t){const{size:n,...i}=e;return(0,ug.jsx)(xD,{size:n,ref:t,borderRadius:"9999px",...i})}));function ED(e){const{isOpen:t,isDisabled:n}=lD(),{reduceMotion:i}=gD(),r=Ug("chakra-accordion__icon",e.className),o={opacity:n?.4:1,transform:t?"rotate(-180deg)":void 0,transition:i?void 0:"transform 0.2s",transformOrigin:"center",...aD().icon};return(0,ug.jsx)(iM,{viewBox:"0 0 24 24","aria-hidden":!0,className:r,__css:o,...e,children:(0,ug.jsx)("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})}CD.displayName="Circle",ED.displayName="AccordionIcon";var PD=e=>null!=e&&parseInt(e.toString(),10)>0,TD={exit:{height:{duration:.2,ease:oO.ease},opacity:{duration:.3,ease:oO.ease}},enter:{height:{duration:.3,ease:oO.ease},opacity:{duration:.4,ease:oO.ease}}},RD={exit:e=>{let{animateOpacity:t,startingHeight:n,transition:i,transitionEnd:r,delay:o}=e;var s;return{...t&&{opacity:PD(n)?1:0},height:n,transitionEnd:null==r?void 0:r.exit,transition:null!=(s=null==i?void 0:i.exit)?s:hO(TD.exit,o)}},enter:e=>{let{animateOpacity:t,endingHeight:n,transition:i,transitionEnd:r,delay:o}=e;var s;return{...t&&{opacity:1},height:n,transitionEnd:null==r?void 0:r.enter,transition:null!=(s=null==i?void 0:i.enter)?s:dO(TD.enter,o)}}},MD=(0,t.forwardRef)(((e,n)=>{const{in:i,unmountOnExit:r,animateOpacity:o=!0,startingHeight:s=0,endingHeight:a="auto",style:c,className:l,transition:u,transitionEnd:d,...h}=e,[p,f]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const e=setTimeout((()=>{f(!0)}));return()=>clearTimeout(e)}),[]),jg({condition:Number(s)>0&&!!r,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const v=parseFloat(s.toString())>0,m={startingHeight:s,endingHeight:a,animateOpacity:o,transition:p?u:{enter:{duration:0}},transitionEnd:{enter:null==d?void 0:d.enter,exit:r?null==d?void 0:d.exit:{...null==d?void 0:d.exit,display:v?"block":"none"}}},g=!r||i,y=i||r?"enter":"exit";return(0,ug.jsx)(IM,{initial:!1,custom:m,children:g&&(0,ug.jsx)(dE.div,{ref:n,...h,className:Ug("chakra-collapse",l),style:{overflow:"hidden",display:"block",...c},custom:m,variants:RD,initial:!!r&&"exit",animate:y,exit:"exit"})})}));MD.displayName="Collapse";var AD=JR((function(e,t){const{className:n,motionProps:i,...r}=e,{reduceMotion:o}=gD(),{getPanelProps:s,isOpen:a}=lD(),c=s(r,t),l=Ug("chakra-accordion__panel",n),u=aD();o||delete c.hidden;const d=(0,ug.jsx)(GR.div,{...c,__css:u.panel,className:l});return o?d:(0,ug.jsx)(MD,{in:a,...i,children:d})}));AD.displayName="AccordionPanel";var ID=e=>(0,ug.jsx)(GR.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});ID.displayName="StackItem";Object.freeze(["base","sm","md","lg","xl","2xl"]);var kD=JR(((e,n)=>{const{isInline:i,direction:r,align:o,justify:s,spacing:a="0.5rem",wrap:c,children:l,divider:u,className:d,shouldWrapChildren:h,...p}=e,f=i?"row":null!=r?r:"column",v=(0,t.useMemo)((()=>function(e){const{spacing:t,direction:n}=e,i={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":(r=n,o=e=>i[e],Array.isArray(r)?r.map((e=>null===e?null:o(e))):Bg(r)?Object.keys(r).reduce(((e,t)=>(e[t]=o(r[t]),e)),{}):null!=r?o(r):null)};var r,o}({spacing:a,direction:f})),[a,f]),m=!!u,g=!h&&!m,y=(0,t.useMemo)((()=>{const e=function(e){return t.Children.toArray(e).filter((e=>(0,t.isValidElement)(e)))}(l);return g?e:e.map(((n,i)=>{const r="undefined"!==typeof n.key?n.key:i,o=i+1===e.length,s=h?(0,ug.jsx)(ID,{children:n},r):n;if(!m)return s;const a=(0,t.cloneElement)(u,{__css:v}),c=o?null:a;return(0,ug.jsxs)(t.Fragment,{children:[s,c]},r)}))}),[u,v,m,g,h,l]),S=Ug("chakra-stack",d);return(0,ug.jsx)(GR.div,{ref:n,display:"flex",alignItems:o,justifyContent:s,flexDirection:f,flexWrap:c,gap:m?void 0:a,className:S,...p,children:y})}));kD.displayName="Stack";var OD=JR(((e,t)=>(0,ug.jsx)(kD,{align:"center",...e,direction:"column",ref:t})));OD.displayName="VStack";var DD={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}};function LD(e){return["html","body","#document"].includes(e.localName)?e.ownerDocument.body:pk(e)&&function(e){const t=e.ownerDocument.defaultView||window,{overflow:n,overflowX:i,overflowY:r}=t.getComputedStyle(e);return/auto|scroll|overlay|hidden/.test(n+r+i)}(e)?e:LD(function(e){return"html"===e.localName?e:e.assignedSlot||e.parentElement||e.ownerDocument.documentElement}(e))}var ND=(e,t)=>({var:e,varRef:t?"var(".concat(e,", ").concat(t,")"):"var(".concat(e,")")}),zD={arrowShadowColor:ND("--popper-arrow-shadow-color"),arrowSize:ND("--popper-arrow-size","8px"),arrowSizeHalf:ND("--popper-arrow-size-half"),arrowBg:ND("--popper-arrow-bg"),transformOrigin:ND("--popper-transform-origin"),arrowOffset:ND("--popper-arrow-offset")};var FD={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},UD={scroll:!0,resize:!0};function BD(e){let t;return t="object"===typeof e?{enabled:!0,options:{...UD,...e}}:{enabled:e,options:UD},t}var jD={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:e=>{let{state:t}=e;t.styles.popper.width="".concat(t.rects.reference.width,"px")},effect:e=>{let{state:t}=e;return()=>{const e=t.elements.reference;t.elements.popper.style.width="".concat(e.offsetWidth,"px")}}},VD={name:"transformOrigin",enabled:!0,phase:"write",fn:e=>{let{state:t}=e;HD(t)},effect:e=>{let{state:t}=e;return()=>{HD(t)}}},HD=e=>{var t;e.elements.popper.style.setProperty(zD.transformOrigin.var,(t=e.placement,FD[t]))},WD={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:e=>{let{state:t}=e;GD(t)}},GD=e=>{var t;if(!e.placement)return;const n=qD(e.placement);if((null==(t=e.elements)?void 0:t.arrow)&&n){Object.assign(e.elements.arrow.style,{[n.property]:n.value,width:zD.arrowSize.varRef,height:zD.arrowSize.varRef,zIndex:-1});const t={[zD.arrowSizeHalf.var]:"calc(".concat(zD.arrowSize.varRef," / 2 - 1px)"),[zD.arrowOffset.var]:"calc(".concat(zD.arrowSizeHalf.varRef," * -1)")};for(const n in t)e.elements.arrow.style.setProperty(n,t[n])}},qD=e=>e.startsWith("top")?{property:"bottom",value:zD.arrowOffset.varRef}:e.startsWith("bottom")?{property:"top",value:zD.arrowOffset.varRef}:e.startsWith("left")?{property:"right",value:zD.arrowOffset.varRef}:e.startsWith("right")?{property:"left",value:zD.arrowOffset.varRef}:void 0,XD={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:e=>{let{state:t}=e;KD(t)},effect:e=>{let{state:t}=e;return()=>{KD(t)}}},KD=e=>{if(!e.elements.arrow)return;const t=e.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!t)return;const n=(i=e.placement).includes("top")?"1px 1px 0px 0 var(--popper-arrow-shadow-color)":i.includes("bottom")?"-1px -1px 0px 0 var(--popper-arrow-shadow-color)":i.includes("right")?"-1px 1px 0px 0 var(--popper-arrow-shadow-color)":i.includes("left")?"1px -1px 0px 0 var(--popper-arrow-shadow-color)":void 0;var i;n&&t.style.setProperty("--popper-arrow-default-shadow",n),Object.assign(t.style,{transform:"rotate(45deg)",background:zD.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},JD={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},YD={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function $D(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function QD(e){return e instanceof $D(e).Element||e instanceof Element}function ZD(e){return e instanceof $D(e).HTMLElement||e instanceof HTMLElement}function eL(e){return"undefined"!==typeof ShadowRoot&&(e instanceof $D(e).ShadowRoot||e instanceof ShadowRoot)}var tL=Math.max,nL=Math.min,iL=Math.round;function rL(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function oL(){return!/^((?!chrome|android).)*safari/i.test(rL())}function sL(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),r=1,o=1;t&&ZD(e)&&(r=e.offsetWidth>0&&iL(i.width)/e.offsetWidth||1,o=e.offsetHeight>0&&iL(i.height)/e.offsetHeight||1);var s=(QD(e)?$D(e):window).visualViewport,a=!oL()&&n,c=(i.left+(a&&s?s.offsetLeft:0))/r,l=(i.top+(a&&s?s.offsetTop:0))/o,u=i.width/r,d=i.height/o;return{width:u,height:d,top:l,right:c+u,bottom:l+d,left:c,x:c,y:l}}function aL(e){var t=$D(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function cL(e){return e?(e.nodeName||"").toLowerCase():null}function lL(e){return((QD(e)?e.ownerDocument:e.document)||window.document).documentElement}function uL(e){return sL(lL(e)).left+aL(e).scrollLeft}function dL(e){return $D(e).getComputedStyle(e)}function hL(e){var t=dL(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function pL(e,t,n){void 0===n&&(n=!1);var i=ZD(t),r=ZD(t)&&function(e){var t=e.getBoundingClientRect(),n=iL(t.width)/e.offsetWidth||1,i=iL(t.height)/e.offsetHeight||1;return 1!==n||1!==i}(t),o=lL(t),s=sL(e,r,n),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(i||!i&&!n)&&(("body"!==cL(t)||hL(o))&&(a=function(e){return e!==$D(e)&&ZD(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:aL(e);var t}(t)),ZD(t)?((c=sL(t,!0)).x+=t.clientLeft,c.y+=t.clientTop):o&&(c.x=uL(o))),{x:s.left+a.scrollLeft-c.x,y:s.top+a.scrollTop-c.y,width:s.width,height:s.height}}function fL(e){var t=sL(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function vL(e){return"html"===cL(e)?e:e.assignedSlot||e.parentNode||(eL(e)?e.host:null)||lL(e)}function mL(e){return["html","body","#document"].indexOf(cL(e))>=0?e.ownerDocument.body:ZD(e)&&hL(e)?e:mL(vL(e))}function gL(e,t){var n;void 0===t&&(t=[]);var i=mL(e),r=i===(null==(n=e.ownerDocument)?void 0:n.body),o=$D(i),s=r?[o].concat(o.visualViewport||[],hL(i)?i:[]):i,a=t.concat(s);return r?a:a.concat(gL(vL(s)))}function yL(e){return["table","td","th"].indexOf(cL(e))>=0}function SL(e){return ZD(e)&&"fixed"!==dL(e).position?e.offsetParent:null}function bL(e){for(var t=$D(e),n=SL(e);n&&yL(n)&&"static"===dL(n).position;)n=SL(n);return n&&("html"===cL(n)||"body"===cL(n)&&"static"===dL(n).position)?t:n||function(e){var t=/firefox/i.test(rL());if(/Trident/i.test(rL())&&ZD(e)&&"fixed"===dL(e).position)return null;var n=vL(e);for(eL(n)&&(n=n.host);ZD(n)&&["html","body"].indexOf(cL(n))<0;){var i=dL(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(e)||t}var _L="top",wL="bottom",xL="right",CL="left",EL="auto",PL=[_L,wL,xL,CL],TL="start",RL="end",ML="clippingParents",AL="viewport",IL="popper",kL="reference",OL=PL.reduce((function(e,t){return e.concat([t+"-"+TL,t+"-"+RL])}),[]),DL=[].concat(PL,[EL]).reduce((function(e,t){return e.concat([t,t+"-"+TL,t+"-"+RL])}),[]),LL=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function NL(e){var t=new Map,n=new Set,i=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var i=t.get(e);i&&r(i)}})),i.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||r(e)})),i}function zL(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var FL={placement:"bottom",modifiers:[],strategy:"absolute"};function UL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function BL(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,i=void 0===n?[]:n,r=t.defaultOptions,o=void 0===r?FL:r;return function(e,t,n){void 0===n&&(n=o);var r={placement:"bottom",orderedModifiers:[],options:Object.assign({},FL,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],a=!1,c={state:r,setOptions:function(n){var a="function"===typeof n?n(r.options):n;l(),r.options=Object.assign({},o,r.options,a),r.scrollParents={reference:QD(e)?gL(e):e.contextElement?gL(e.contextElement):[],popper:gL(t)};var u=function(e){var t=NL(e);return LL.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(i,r.options.modifiers)));return r.orderedModifiers=u.filter((function(e){return e.enabled})),r.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,i=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var a=o({state:r,name:t,instance:c,options:i}),l=function(){};s.push(a||l)}})),c.update()},forceUpdate:function(){if(!a){var e=r.elements,t=e.reference,n=e.popper;if(UL(t,n)){r.rects={reference:pL(t,bL(n),"fixed"===r.options.strategy),popper:fL(n)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach((function(e){return r.modifiersData[e.name]=Object.assign({},e.data)}));for(var i=0;i<r.orderedModifiers.length;i++)if(!0!==r.reset){var o=r.orderedModifiers[i],s=o.fn,l=o.options,u=void 0===l?{}:l,d=o.name;"function"===typeof s&&(r=s({state:r,options:u,name:d,instance:c})||r)}else r.reset=!1,i=-1}}},update:zL((function(){return new Promise((function(e){c.forceUpdate(),e(r)}))})),destroy:function(){l(),a=!0}};if(!UL(e,t))return c;function l(){s.forEach((function(e){return e()})),s=[]}return c.setOptions(n).then((function(e){!a&&n.onFirstUpdate&&n.onFirstUpdate(e)})),c}}var jL={passive:!0};const VL={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,o=void 0===r||r,s=i.resize,a=void 0===s||s,c=$D(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&l.forEach((function(e){e.addEventListener("scroll",n.update,jL)})),a&&c.addEventListener("resize",n.update,jL),function(){o&&l.forEach((function(e){e.removeEventListener("scroll",n.update,jL)})),a&&c.removeEventListener("resize",n.update,jL)}},data:{}};function HL(e){return e.split("-")[0]}function WL(e){return e.split("-")[1]}function GL(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function qL(e){var t,n=e.reference,i=e.element,r=e.placement,o=r?HL(r):null,s=r?WL(r):null,a=n.x+n.width/2-i.width/2,c=n.y+n.height/2-i.height/2;switch(o){case _L:t={x:a,y:n.y-i.height};break;case wL:t={x:a,y:n.y+n.height};break;case xL:t={x:n.x+n.width,y:c};break;case CL:t={x:n.x-i.width,y:c};break;default:t={x:n.x,y:n.y}}var l=o?GL(o):null;if(null!=l){var u="y"===l?"height":"width";switch(s){case TL:t[l]=t[l]-(n[u]/2-i[u]/2);break;case RL:t[l]=t[l]+(n[u]/2-i[u]/2)}}return t}const XL={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=qL({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};var KL={top:"auto",right:"auto",bottom:"auto",left:"auto"};function JL(e){var t,n=e.popper,i=e.popperRect,r=e.placement,o=e.variation,s=e.offsets,a=e.position,c=e.gpuAcceleration,l=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=s.x,p=void 0===h?0:h,f=s.y,v=void 0===f?0:f,m="function"===typeof u?u({x:p,y:v}):{x:p,y:v};p=m.x,v=m.y;var g=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),S=CL,b=_L,_=window;if(l){var w=bL(n),x="clientHeight",C="clientWidth";if(w===$D(n)&&"static"!==dL(w=lL(n)).position&&"absolute"===a&&(x="scrollHeight",C="scrollWidth"),r===_L||(r===CL||r===xL)&&o===RL)b=wL,v-=(d&&w===_&&_.visualViewport?_.visualViewport.height:w[x])-i.height,v*=c?1:-1;if(r===CL||(r===_L||r===wL)&&o===RL)S=xL,p-=(d&&w===_&&_.visualViewport?_.visualViewport.width:w[C])-i.width,p*=c?1:-1}var E,P=Object.assign({position:a},l&&KL),T=!0===u?function(e,t){var n=e.x,i=e.y,r=t.devicePixelRatio||1;return{x:iL(n*r)/r||0,y:iL(i*r)/r||0}}({x:p,y:v},$D(n)):{x:p,y:v};return p=T.x,v=T.y,c?Object.assign({},P,((E={})[b]=y?"0":"",E[S]=g?"0":"",E.transform=(_.devicePixelRatio||1)<=1?"translate("+p+"px, "+v+"px)":"translate3d("+p+"px, "+v+"px, 0)",E)):Object.assign({},P,((t={})[b]=y?v+"px":"",t[S]=g?p+"px":"",t.transform="",t))}const YL={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=void 0===i||i,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,c=void 0===a||a,l={placement:HL(t.placement),variation:WL(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,JL(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,JL(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};const $L={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},r=t.elements[e];ZD(r)&&cL(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(e){var t=i[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var i=t.elements[e],r=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});ZD(i)&&cL(i)&&(Object.assign(i.style,o),Object.keys(r).forEach((function(e){i.removeAttribute(e)})))}))}},requires:["computeStyles"]};const QL={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.offset,o=void 0===r?[0,0]:r,s=DL.reduce((function(e,n){return e[n]=function(e,t,n){var i=HL(e),r=[CL,_L].indexOf(i)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*r,[CL,xL].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,o),e}),{}),a=s[t.placement],c=a.x,l=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[i]=s}};var ZL={left:"right",right:"left",bottom:"top",top:"bottom"};function eN(e){return e.replace(/left|right|bottom|top/g,(function(e){return ZL[e]}))}var tN={start:"end",end:"start"};function nN(e){return e.replace(/start|end/g,(function(e){return tN[e]}))}function iN(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&eL(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function rN(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function oN(e,t,n){return t===AL?rN(function(e,t){var n=$D(e),i=lL(e),r=n.visualViewport,o=i.clientWidth,s=i.clientHeight,a=0,c=0;if(r){o=r.width,s=r.height;var l=oL();(l||!l&&"fixed"===t)&&(a=r.offsetLeft,c=r.offsetTop)}return{width:o,height:s,x:a+uL(e),y:c}}(e,n)):QD(t)?function(e,t){var n=sL(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):rN(function(e){var t,n=lL(e),i=aL(e),r=null==(t=e.ownerDocument)?void 0:t.body,o=tL(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=tL(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+uL(e),c=-i.scrollTop;return"rtl"===dL(r||n).direction&&(a+=tL(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:s,x:a,y:c}}(lL(e)))}function sN(e,t,n,i){var r="clippingParents"===t?function(e){var t=gL(vL(e)),n=["absolute","fixed"].indexOf(dL(e).position)>=0&&ZD(e)?bL(e):e;return QD(n)?t.filter((function(e){return QD(e)&&iN(e,n)&&"body"!==cL(e)})):[]}(e):[].concat(t),o=[].concat(r,[n]),s=o[0],a=o.reduce((function(t,n){var r=oN(e,n,i);return t.top=tL(r.top,t.top),t.right=nL(r.right,t.right),t.bottom=nL(r.bottom,t.bottom),t.left=tL(r.left,t.left),t}),oN(e,s,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function aN(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function cN(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function lN(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=void 0===i?e.placement:i,o=n.strategy,s=void 0===o?e.strategy:o,a=n.boundary,c=void 0===a?ML:a,l=n.rootBoundary,u=void 0===l?AL:l,d=n.elementContext,h=void 0===d?IL:d,p=n.altBoundary,f=void 0!==p&&p,v=n.padding,m=void 0===v?0:v,g=aN("number"!==typeof m?m:cN(m,PL)),y=h===IL?kL:IL,S=e.rects.popper,b=e.elements[f?y:h],_=sN(QD(b)?b:b.contextElement||lL(e.elements.popper),c,u,s),w=sL(e.elements.reference),x=qL({reference:w,element:S,strategy:"absolute",placement:r}),C=rN(Object.assign({},S,x)),E=h===IL?C:w,P={top:_.top-E.top+g.top,bottom:E.bottom-_.bottom+g.bottom,left:_.left-E.left+g.left,right:E.right-_.right+g.right},T=e.modifiersData.offset;if(h===IL&&T){var R=T[r];Object.keys(P).forEach((function(e){var t=[xL,wL].indexOf(e)>=0?1:-1,n=[_L,wL].indexOf(e)>=0?"y":"x";P[e]+=R[n]*t}))}return P}const uN={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0===s||s,c=n.fallbackPlacements,l=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=void 0===p||p,v=n.allowedAutoPlacements,m=t.options.placement,g=HL(m),y=c||(g===m||!f?[eN(m)]:function(e){if(HL(e)===EL)return[];var t=eN(e);return[nN(e),t,nN(t)]}(m)),S=[m].concat(y).reduce((function(e,n){return e.concat(HL(n)===EL?function(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?DL:c,u=WL(i),d=u?a?OL:OL.filter((function(e){return WL(e)===u})):PL,h=d.filter((function(e){return l.indexOf(e)>=0}));0===h.length&&(h=d);var p=h.reduce((function(t,n){return t[n]=lN(e,{placement:n,boundary:r,rootBoundary:o,padding:s})[HL(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:l,flipVariations:f,allowedAutoPlacements:v}):n)}),[]),b=t.rects.reference,_=t.rects.popper,w=new Map,x=!0,C=S[0],E=0;E<S.length;E++){var P=S[E],T=HL(P),R=WL(P)===TL,M=[_L,wL].indexOf(T)>=0,A=M?"width":"height",I=lN(t,{placement:P,boundary:u,rootBoundary:d,altBoundary:h,padding:l}),k=M?R?xL:CL:R?wL:_L;b[A]>_[A]&&(k=eN(k));var O=eN(k),D=[];if(o&&D.push(I[T]<=0),a&&D.push(I[k]<=0,I[O]<=0),D.every((function(e){return e}))){C=P,x=!1;break}w.set(P,D)}if(x)for(var L=function(e){var t=S.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return C=t,"break"},N=f?3:1;N>0;N--){if("break"===L(N))break}t.placement!==C&&(t.modifiersData[i]._skip=!0,t.placement=C,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function dN(e,t,n){return tL(e,nL(t,n))}const hN={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0!==s&&s,c=n.boundary,l=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,p=void 0===h||h,f=n.tetherOffset,v=void 0===f?0:f,m=lN(t,{boundary:c,rootBoundary:l,padding:d,altBoundary:u}),g=HL(t.placement),y=WL(t.placement),S=!y,b=GL(g),_="x"===b?"y":"x",w=t.modifiersData.popperOffsets,x=t.rects.reference,C=t.rects.popper,E="function"===typeof v?v(Object.assign({},t.rects,{placement:t.placement})):v,P="number"===typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,R={x:0,y:0};if(w){if(o){var M,A="y"===b?_L:CL,I="y"===b?wL:xL,k="y"===b?"height":"width",O=w[b],D=O+m[A],L=O-m[I],N=p?-C[k]/2:0,z=y===TL?x[k]:C[k],F=y===TL?-C[k]:-x[k],U=t.elements.arrow,B=p&&U?fL(U):{width:0,height:0},j=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=j[A],H=j[I],W=dN(0,x[k],B[k]),G=S?x[k]/2-N-W-V-P.mainAxis:z-W-V-P.mainAxis,q=S?-x[k]/2+N+W+H+P.mainAxis:F+W+H+P.mainAxis,X=t.elements.arrow&&bL(t.elements.arrow),K=X?"y"===b?X.clientTop||0:X.clientLeft||0:0,J=null!=(M=null==T?void 0:T[b])?M:0,Y=O+q-J,$=dN(p?nL(D,O+G-J-K):D,O,p?tL(L,Y):L);w[b]=$,R[b]=$-O}if(a){var Q,Z="x"===b?_L:CL,ee="x"===b?wL:xL,te=w[_],ne="y"===_?"height":"width",ie=te+m[Z],re=te-m[ee],oe=-1!==[_L,CL].indexOf(g),se=null!=(Q=null==T?void 0:T[_])?Q:0,ae=oe?ie:te-x[ne]-C[ne]-se+P.altAxis,ce=oe?te+x[ne]+C[ne]-se-P.altAxis:re,le=p&&oe?function(e,t,n){var i=dN(e,t,n);return i>n?n:i}(ae,te,ce):dN(p?ae:ie,te,p?ce:re);w[_]=le,R[_]=le-te}t.modifiersData[i]=R}},requiresIfExists:["offset"]};const pN={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,r=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=HL(n.placement),c=GL(a),l=[CL,xL].indexOf(a)>=0?"height":"width";if(o&&s){var u=function(e,t){return aN("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:cN(e,PL))}(r.padding,n),d=fL(o),h="y"===c?_L:CL,p="y"===c?wL:xL,f=n.rects.reference[l]+n.rects.reference[c]-s[c]-n.rects.popper[l],v=s[c]-n.rects.reference[c],m=bL(o),g=m?"y"===c?m.clientHeight||0:m.clientWidth||0:0,y=f/2-v/2,S=u[h],b=g-d[l]-u[p],_=g/2-d[l]/2+y,w=dN(S,_,b),x=c;n.modifiersData[i]=((t={})[x]=w,t.centerOffset=w-_,t)}},effect:function(e){var t=e.state,n=e.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!==typeof i||(i=t.elements.popper.querySelector(i)))&&iN(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function fN(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function vN(e){return[_L,xL,wL,CL].some((function(t){return e[t]>=0}))}const mN={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,o=t.modifiersData.preventOverflow,s=lN(t,{elementContext:"reference"}),a=lN(t,{altBoundary:!0}),c=fN(s,i),l=fN(a,r,o),u=vN(c),d=vN(l);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}};var gN=BL({defaultModifiers:[VL,XL,YL,$L,QL,uN,hN,pN,mN]});function yN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{enabled:n=!0,modifiers:i,placement:r="bottom",strategy:o="absolute",arrowPadding:s=8,eventListeners:a=!0,offset:c,gutter:l=8,flip:u=!0,boundary:d="clippingParents",preventOverflow:h=!0,matchWidth:p,direction:f="ltr"}=e,v=(0,t.useRef)(null),m=(0,t.useRef)(null),g=(0,t.useRef)(null),y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ltr";var n,i;const r=(null==(n=JD[e])?void 0:n[t])||e;return"ltr"===t?r:null!=(i=YD[e])?i:r}(r,f),S=(0,t.useRef)((()=>{})),b=(0,t.useCallback)((()=>{var e;n&&v.current&&m.current&&(null==(e=S.current)||e.call(S),g.current=gN(v.current,m.current,{placement:y,modifiers:[XD,WD,VD,{...jD,enabled:!!p},{name:"eventListeners",...BD(a)},{name:"arrow",options:{padding:s}},{name:"offset",options:{offset:null!=c?c:[0,l]}},{name:"flip",enabled:!!u,options:{padding:8}},{name:"preventOverflow",enabled:!!h,options:{boundary:d}},...null!=i?i:[]],strategy:o}),g.current.forceUpdate(),S.current=g.current.destroy)}),[y,n,i,p,a,s,c,l,u,h,d,o]);(0,t.useEffect)((()=>()=>{var e;v.current||m.current||(null==(e=g.current)||e.destroy(),g.current=null)}),[]);const _=(0,t.useCallback)((e=>{v.current=e,b()}),[b]),w=(0,t.useCallback)((function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ref:QM(_,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}}),[_]),x=(0,t.useCallback)((e=>{m.current=e,b()}),[b]),C=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...e,ref:QM(x,t),style:{...e.style,position:o,minWidth:p?void 0:"max-content",inset:"0 auto auto 0"}}}),[o,x,p]),E=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{size:n,shadowColor:i,bg:r,style:o,...s}=e;return{...s,ref:t,"data-popper-arrow":"",style:SN(e)}}),[]),P=(0,t.useCallback)((function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ref:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,"data-popper-arrow-inner":""}}),[]);return{update(){var e;null==(e=g.current)||e.update()},forceUpdate(){var e;null==(e=g.current)||e.forceUpdate()},transformOrigin:zD.transformOrigin.varRef,referenceRef:_,popperRef:x,getPopperProps:C,getArrowProps:E,getArrowInnerProps:P,getReferenceProps:w}}function SN(e){const{size:t,shadowColor:n,bg:i,style:r}=e,o={...r,position:"absolute"};return t&&(o["--popper-arrow-size"]=t),n&&(o["--popper-arrow-shadow-color"]=n),i&&(o["--popper-arrow-bg"]=i),o}function bN(e,n,i,r){const o=zg(i);return(0,t.useEffect)((()=>{const t="function"===typeof e?e():null!=e?e:document;if(i&&t)return t.addEventListener(n,o,r),()=>{t.removeEventListener(n,o,r)}}),[n,e,r,o,i]),()=>{const t="function"===typeof e?e():null!=e?e:document;null==t||t.removeEventListener(n,o,r)}}var _N=e=>{var t;return(null==(t=e.current)?void 0:t.ownerDocument)||document},wN=e=>{var t,n;return(null==(n=null==(t=e.current)?void 0:t.ownerDocument)?void 0:n.defaultView)||window};function xN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{openDelay:n=0,closeDelay:i=0,closeOnClick:r=!0,closeOnMouseDown:o,closeOnScroll:s,closeOnPointerDown:a=o,closeOnEsc:c=!0,onOpen:l,onClose:u,placement:d,id:h,isOpen:p,defaultIsOpen:f,arrowSize:v=10,arrowShadowColor:m,arrowPadding:g,modifiers:y,isDisabled:S,gutter:b,offset:_,direction:w,...x}=e,{isOpen:C,onOpen:E,onClose:P}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onClose:n,onOpen:i,isOpen:r,id:o}=e,s=zg(i),a=zg(n),[c,l]=(0,t.useState)(e.defaultIsOpen||!1),u=void 0!==r?r:c,d=void 0!==r,h=(0,t.useId)(),p=null!=o?o:"disclosure-".concat(h),f=(0,t.useCallback)((()=>{d||l(!1),null==a||a()}),[d,a]),v=(0,t.useCallback)((()=>{d||l(!0),null==s||s()}),[d,s]),m=(0,t.useCallback)((()=>{u?f():v()}),[u,v,f]);return{isOpen:u,onOpen:v,onClose:f,onToggle:m,isControlled:d,getButtonProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,"aria-expanded":u,"aria-controls":p,onClick(t){var n;null==(n=e.onClick)||n.call(e,t),m()}}},getDisclosureProps:function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},hidden:!u,id:p}}}}({isOpen:p,defaultIsOpen:f,onOpen:l,onClose:u}),{referenceRef:T,getPopperProps:R,getArrowInnerProps:M,getArrowProps:A}=yN({enabled:C,placement:d,arrowPadding:g,modifiers:y,gutter:b,offset:_,direction:w}),I=(0,t.useId)(),k="tooltip-".concat(null!=h?h:I),O=(0,t.useRef)(null),D=(0,t.useRef)(),L=(0,t.useCallback)((()=>{D.current&&(clearTimeout(D.current),D.current=void 0)}),[]),N=(0,t.useRef)(),z=(0,t.useCallback)((()=>{N.current&&(clearTimeout(N.current),N.current=void 0)}),[]),F=(0,t.useCallback)((()=>{z(),P()}),[P,z]),U=function(e,n){return(0,t.useEffect)((()=>{const t=_N(e);return t.addEventListener(CN,n),()=>t.removeEventListener(CN,n)}),[n,e]),()=>{const t=_N(e),n=wN(e);t.dispatchEvent(new n.CustomEvent(CN))}}(O,F),B=(0,t.useCallback)((()=>{if(!S&&!D.current){C&&U();const e=wN(O);D.current=e.setTimeout(E,n)}}),[U,S,C,E,n]),j=(0,t.useCallback)((()=>{L();const e=wN(O);N.current=e.setTimeout(F,i)}),[i,F,L]),V=(0,t.useCallback)((()=>{C&&r&&j()}),[r,j,C]),H=(0,t.useCallback)((()=>{C&&a&&j()}),[a,j,C]),W=(0,t.useCallback)((e=>{C&&"Escape"===e.key&&j()}),[C,j]);bN((()=>_N(O)),"keydown",c?W:void 0),bN((()=>{if(!s)return null;const e=O.current;if(!e)return null;const t=LD(e);return"body"===t.localName?wN(O):t}),"scroll",(()=>{C&&s&&F()}),{passive:!0,capture:!0}),(0,t.useEffect)((()=>{S&&(L(),C&&P())}),[S,C,P,L]),(0,t.useEffect)((()=>()=>{L(),z()}),[L,z]),bN((()=>O.current),"pointerleave",j);const G=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...e,ref:QM(O,t,T),onPointerEnter:Gg(e.onPointerEnter,(e=>{"touch"!==e.pointerType&&B()})),onClick:Gg(e.onClick,V),onPointerDown:Gg(e.onPointerDown,H),onFocus:Gg(e.onFocus,B),onBlur:Gg(e.onBlur,j),"aria-describedby":C?k:void 0}}),[B,j,H,C,k,V,T]),q=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return R({...e,style:{...e.style,[zD.arrowSize.var]:v?"".concat(v,"px"):void 0,[zD.arrowShadowColor.var]:m}},t)}),[R,v,m]),X=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n={...e.style,position:"relative",transformOrigin:zD.transformOrigin.varRef};return{ref:t,...x,...e,id:k,role:"tooltip",style:n}}),[x,k]);return{isOpen:C,show:B,hide:j,getTriggerProps:G,getTooltipProps:X,getTooltipPositionerProps:q,getArrowProps:A,getArrowInnerProps:M}}var CN="chakra-ui:close-tooltip";var EN=GR(dE.div),PN=JR(((e,n)=>{var i,r;const o=eM("Tooltip",e),s=$P(e),a=YR(),{children:c,label:l,shouldWrapChildren:u,"aria-label":d,hasArrow:h,bg:p,portalProps:f,background:v,backgroundColor:m,bgColor:g,motionProps:y,...S}=s,b=null!=(r=null!=(i=null!=v?v:m)?i:p)?r:g;if(b){o.bg=b;const e=function(e,t,n){var i,r,o;return null!=(o=null==(r=null==(i=e.__cssMap)?void 0:i["".concat(t,".").concat(n)])?void 0:r.varRef)?o:n}(a,"colors",b);o[zD.arrowBg.var]=e}const _=xN({...S,direction:a.direction});let w;if("string"===typeof c||u)w=(0,ug.jsx)(GR.span,{display:"inline-block",tabIndex:0,..._.getTriggerProps(),children:c});else{const e=t.Children.only(c);w=(0,t.cloneElement)(e,_.getTriggerProps(e.props,e.ref))}const x=!!d,C=_.getTooltipProps({},n),E=x?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Object.assign({},e);for(const i of t)i in n&&delete n[i];return n}(C,["role","id"]):C,P=function(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}(C,["role","id"]);return l?(0,ug.jsxs)(ug.Fragment,{children:[w,(0,ug.jsx)(IM,{children:_.isOpen&&(0,ug.jsx)(HM,{...f,children:(0,ug.jsx)(GR.div,{..._.getTooltipPositionerProps(),__css:{zIndex:o.zIndex,pointerEvents:"none"},children:(0,ug.jsxs)(EN,{variants:DD,initial:"exit",animate:"enter",exit:"exit",...y,...E,__css:o,children:[l,x&&(0,ug.jsx)(GR.span,{srOnly:!0,...P,children:d}),h&&(0,ug.jsx)(GR.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper",children:(0,ug.jsx)(GR.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:o.bg}})})]})})})})]}):(0,ug.jsx)(ug.Fragment,{children:c})}));PN.displayName="Tooltip";var TN=JR((function(e,t){const{htmlWidth:n,htmlHeight:i,alt:r,...o}=e;return(0,ug.jsx)("img",{width:n,height:i,ref:t,alt:r,...o})}));TN.displayName="NativeImage";function RN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Object.assign({},e);for(const i of t)i in n&&delete n[i];return n}var MN=JR((function(e,n){const{fallbackSrc:i,fallback:r,src:o,srcSet:s,align:a,fit:c,loading:l,ignoreFallback:u,crossOrigin:d,fallbackStrategy:h="beforeLoadOrError",referrerPolicy:p,...f}=e,v=null!=l||u||!(void 0!==i||void 0!==r),m=function(e){const{loading:n,src:i,srcSet:r,onLoad:o,onError:s,crossOrigin:a,sizes:c,ignoreFallback:l}=e,[u,d]=(0,t.useState)("pending");(0,t.useEffect)((()=>{d(i?"loading":"pending")}),[i]);const h=(0,t.useRef)(),p=(0,t.useCallback)((()=>{if(!i)return;f();const e=new Image;e.src=i,a&&(e.crossOrigin=a),r&&(e.srcset=r),c&&(e.sizes=c),n&&(e.loading=n),e.onload=e=>{f(),d("loaded"),null==o||o(e)},e.onerror=e=>{f(),d("failed"),null==s||s(e)},h.current=e}),[i,a,r,c,o,s,n]),f=()=>{h.current&&(h.current.onload=null,h.current.onerror=null,h.current=null)};return LM((()=>{if(!l)return"loading"===u&&p(),()=>{f()}}),[u,p,l]),l?"loaded":u}({...e,crossOrigin:d,ignoreFallback:v}),g=((e,t)=>"loaded"!==e&&"beforeLoadOrError"===t||"failed"===e&&"onError"===t)(m,h),y={ref:n,objectFit:c,objectPosition:a,...v?f:RN(f,["onError","onLoad"])};return g?r||(0,ug.jsx)(GR.img,{as:TN,className:"chakra-image__placeholder",src:i,...y}):(0,ug.jsx)(GR.img,{as:TN,src:o,srcSet:s,crossOrigin:d,loading:l,referrerPolicy:p,className:"chakra-image",...y})}));MN.displayName="Image";var AN=e=>e?"":void 0,IN=e=>!!e||void 0,kN=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")};function ON(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.some((t=>(null==t||t(e),null==e?void 0:e.defaultPrevented)))}}function DN(e){const{orientation:t,vertical:n,horizontal:i}=e;return"vertical"===t?n:i}var LN={width:0,height:0},NN=e=>e||LN;function zN(e){const t=function(e){var t;return null!=(t=e.view)?t:window}(e);return"undefined"!==typeof t.PointerEvent&&e instanceof t.PointerEvent?!("mouse"!==e.pointerType):e instanceof t.MouseEvent}function FN(e){return!!e.touches}function UN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return FN(e)?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";const n=e.touches[0]||e.changedTouches[0];return{x:n["".concat(t,"X")],y:n["".concat(t,"Y")]}}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{x:e["".concat(t,"X")],y:e["".concat(t,"Y")]}}(e,t)}function BN(e){function t(t){e(t,{point:UN(t)})}const n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?function(e){return t=>{const n=zN(t);(!n||n&&0===t.button)&&e(t)}}(t):t;return n}function jN(e,t,n,i){return function(e,t,n,i){return e.addEventListener(t,n,i),()=>{e.removeEventListener(t,n,i)}}(e,t,BN(n,"pointerdown"===t),i)}const VN=1/60*1e3,HN="undefined"!==typeof performance?()=>performance.now():()=>Date.now(),WN="undefined"!==typeof window?e=>window.requestAnimationFrame(e):e=>setTimeout((()=>e(HN())),VN);let GN=!0,qN=!1,XN=!1;const KN={delta:0,timestamp:0},JN=["read","update","preRender","render","postRender"],YN=JN.reduce(((e,t)=>(e[t]=function(e){let t=[],n=[],i=0,r=!1,o=!1;const s=new WeakSet,a={schedule:function(e){const o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&r,a=o?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&s.add(e),-1===a.indexOf(e)&&(a.push(e),o&&r&&(i=t.length)),e},cancel:e=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1),s.delete(e)},process:c=>{if(r)o=!0;else{if(r=!0,[t,n]=[n,t],n.length=0,i=t.length,i)for(let n=0;n<i;n++){const i=t[n];i(c),s.has(i)&&(a.schedule(i),e())}r=!1,o&&(o=!1,a.process(c))}}};return a}((()=>qN=!0)),e)),{}),$N=JN.reduce(((e,t)=>{const n=YN[t];return e[t]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return qN||tz(),n.schedule(e,t,i)},e}),{}),QN=JN.reduce(((e,t)=>(e[t]=YN[t].cancel,e)),{}),ZN=(JN.reduce(((e,t)=>(e[t]=()=>YN[t].process(KN),e)),{}),e=>YN[e].process(KN)),ez=e=>{qN=!1,KN.delta=GN?VN:Math.max(Math.min(e-KN.timestamp,40),1),KN.timestamp=e,XN=!0,JN.forEach(ZN),XN=!1,qN&&(GN=!1,WN(ez))},tz=()=>{qN=!0,GN=!0,XN||WN(ez)},nz=()=>KN,iz=$N;var rz=Object.defineProperty,oz=(e,t,n)=>(((e,t,n)=>{t in e?rz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n),sz=class{constructor(e,t,n){var i;if(oz(this,"history",[]),oz(this,"startEvent",null),oz(this,"lastEvent",null),oz(this,"lastEventInfo",null),oz(this,"handlers",{}),oz(this,"removeListeners",(()=>{})),oz(this,"threshold",3),oz(this,"win"),oz(this,"updatePoint",(()=>{if(!this.lastEvent||!this.lastEventInfo)return;const e=cz(this.lastEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){if("number"===typeof e&&"number"===typeof t)return dz(e,t);if(hz(e)&&hz(t)){const n=dz(e.x,t.x),i=dz(e.y,t.y);return Math.sqrt(n**2+i**2)}return 0}(e.offset,{x:0,y:0})>=this.threshold;if(!t&&!n)return;const{timestamp:i}=nz();this.history.push({...e.point,timestamp:i});const{onStart:r,onMove:o}=this.handlers;t||(null==r||r(this.lastEvent,e),this.startEvent=this.lastEvent),null==o||o(this.lastEvent,e)})),oz(this,"onPointerMove",((e,t)=>{this.lastEvent=e,this.lastEventInfo=t,iz.update(this.updatePoint,!0)})),oz(this,"onPointerUp",((e,t)=>{const n=cz(t,this.history),{onEnd:i,onSessionEnd:r}=this.handlers;null==r||r(e,n),this.end(),i&&this.startEvent&&(null==i||i(e,n))})),this.win=null!=(i=e.view)?i:window,function(e){return FN(e)&&e.touches.length>1}(e))return;this.handlers=t,n&&(this.threshold=n),e.stopPropagation(),e.preventDefault();const r={point:UN(e)},{timestamp:o}=nz();this.history=[{...r.point,timestamp:o}];const{onSessionStart:s}=t;null==s||s(e,cz(r,this.history)),this.removeListeners=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduce(((e,t)=>t(e)),e)}(jN(this.win,"pointermove",this.onPointerMove),jN(this.win,"pointerup",this.onPointerUp),jN(this.win,"pointercancel",this.onPointerUp))}updateHandlers(e){this.handlers=e}end(){var e;null==(e=this.removeListeners)||e.call(this),QN.update(this.updatePoint)}};function az(e,t){return{x:e.x-t.x,y:e.y-t.y}}function cz(e,t){return{point:e.point,delta:az(e.point,t[t.length-1]),offset:az(e.point,t[0]),velocity:uz(t,.1)}}var lz=e=>1e3*e;function uz(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const r=e[e.length-1];for(;n>=0&&(i=e[n],!(r.timestamp-i.timestamp>lz(t)));)n--;if(!i)return{x:0,y:0};const o=(r.timestamp-i.timestamp)/1e3;if(0===o)return{x:0,y:0};const s={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function dz(e,t){return Math.abs(e-t)}function hz(e){return"x"in e&&"y"in e}function pz(e){const n=(0,t.useRef)(null);return n.current=e,n}var fz=Boolean(null==globalThis?void 0:globalThis.document)?t.useLayoutEffect:t.useEffect;function vz(e){let{getNodes:n,observeMutation:i=!0}=e;const[r,o]=(0,t.useState)([]),[s,a]=(0,t.useState)(0);return fz((()=>{const e=n(),t=e.map(((e,t)=>function(e,t){var n;if(!e)return void t(void 0);t({width:e.offsetWidth,height:e.offsetHeight});const i=new(null!==(n=e.ownerDocument.defaultView)&&void 0!==n?n:window).ResizeObserver((n=>{if(!Array.isArray(n)||!n.length)return;const[i]=n;let r,o;if("borderBoxSize"in i){const e=i.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,o=t.blockSize}else r=e.offsetWidth,o=e.offsetHeight;t({width:r,height:o})}));return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}(e,(e=>{o((n=>[...n.slice(0,t),e,...n.slice(t+1)]))}))));if(i){const n=e[0];t.push(function(e,t){var n,i;if(!e||!e.parentElement)return;const r=new(null!=(i=null==(n=e.ownerDocument)?void 0:n.defaultView)?i:window).MutationObserver((()=>{t()}));return r.observe(e.parentElement,{childList:!0}),()=>{r.disconnect()}}(n,(()=>{a((e=>e+1))})))}return()=>{t.forEach((e=>{null==e||e()}))}}),[s]),r}function mz(e,t){let n=function(e){const t=parseFloat(e);return"number"!==typeof t||Number.isNaN(t)?0:t}(e);const i=10**(null!=t?t:10);return n=Math.round(n*i)/i,t?n.toFixed(t):n.toString()}function gz(e,t,n){return 100*(e-t)/(n-t)}function yz(e,t,n){const i=Math.round((e-t)/n)*n+t,r=function(e){if(!Number.isFinite(e))return 0;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n+=1;return n}(n);return mz(i,r)}function Sz(e,t,n){return null==e?e:(n<t&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(e,t),n))}function bz(e){var n;const{min:i=0,max:r=100,onChange:o,value:s,defaultValue:a,isReversed:c,direction:l="ltr",orientation:u="horizontal",id:d,isDisabled:h,isReadOnly:p,onChangeStart:f,onChangeEnd:v,step:m=1,getAriaValueText:g,"aria-valuetext":y,"aria-label":S,"aria-labelledby":b,name:_,focusThumbOnChange:w=!0,...x}=e,C=zg(f),E=zg(v),P=zg(g),T=function(e){const{isReversed:t,direction:n,orientation:i}=e;return"ltr"===n||"vertical"===i?t:!t}({isReversed:c,direction:l,orientation:u}),[R,M]=fD({value:s,defaultValue:null!=a?a:wz(i,r),onChange:o}),[A,I]=(0,t.useState)(!1),[k,O]=(0,t.useState)(!1),D=!(h||p),L=(r-i)/10,N=m||(r-i)/100,z=Sz(R,i,r),F=gz(T?r-z+i:z,i,r),U="vertical"===u,B=pz({min:i,max:r,step:m,isDisabled:h,value:z,isInteractive:D,isReversed:T,isVertical:U,eventSource:null,focusThumbOnChange:w,orientation:u}),j=(0,t.useRef)(null),V=(0,t.useRef)(null),H=(0,t.useRef)(null),W=(0,t.useId)(),G=null!=d?d:W,[q,X]=["slider-thumb-".concat(G),"slider-track-".concat(G)],K=(0,t.useCallback)((e=>{var t,n;if(!j.current)return;const i=B.current;i.eventSource="pointer";const r=j.current.getBoundingClientRect(),{clientX:o,clientY:s}=null!=(n=null==(t=e.touches)?void 0:t[0])?n:e;let a=(U?r.bottom-s:o-r.left)/(U?r.height:r.width);T&&(a=1-a);let c=function(e,t,n){return(n-t)*e+t}(a,i.min,i.max);return i.step&&(c=parseFloat(yz(c,i.min,i.step))),c=Sz(c,i.min,i.max),c}),[U,T,B]),J=(0,t.useCallback)((e=>{const t=B.current;t.isInteractive&&(e=Sz(e=parseFloat(yz(e,t.min,N)),t.min,t.max),M(e))}),[N,M,B]),Y=(0,t.useMemo)((()=>({stepUp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;J(T?z-e:z+e)},stepDown(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;J(T?z+e:z-e)},reset(){J(a||0)},stepTo(e){J(e)}})),[J,T,z,N,a]),$=(0,t.useCallback)((e=>{const t=B.current,n={ArrowRight:()=>Y.stepUp(),ArrowUp:()=>Y.stepUp(),ArrowLeft:()=>Y.stepDown(),ArrowDown:()=>Y.stepDown(),PageUp:()=>Y.stepUp(L),PageDown:()=>Y.stepDown(L),Home:()=>J(t.min),End:()=>J(t.max)}[e.key];n&&(e.preventDefault(),e.stopPropagation(),n(e),t.eventSource="keyboard")}),[Y,J,L,B]),Q=null!=(n=null==P?void 0:P(z))?n:y,Z=function(e){const[t]=vz({observeMutation:!1,getNodes(){var t;return["object"===typeof(t=e)&&null!==t&&"current"in t?e.current:e]}});return t}(V),{getThumbStyle:ee,rootStyle:te,trackStyle:ne,innerTrackStyle:ie}=(0,t.useMemo)((()=>{const e=B.current,t=null!=Z?Z:{width:0,height:0};return function(e){const{orientation:t,thumbPercents:n,thumbRects:i,isReversed:r}=e,o="vertical"===t?i.reduce(((e,t)=>NN(e).height>NN(t).height?e:t),LN):i.reduce(((e,t)=>NN(e).width>NN(t).width?e:t),LN),s={position:"relative",touchAction:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",userSelect:"none",outline:0,...DN({orientation:t,vertical:o?{paddingLeft:o.width/2,paddingRight:o.width/2}:{},horizontal:o?{paddingTop:o.height/2,paddingBottom:o.height/2}:{}})},a={position:"absolute",...DN({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",height:"100%"},horizontal:{top:"50%",transform:"translateY(-50%)",width:"100%"}})},c=1===n.length,l=[0,r?100-n[0]:n[0]],u=c?l:n;let d=u[0];!c&&r&&(d=100-d);const h=Math.abs(u[u.length-1]-u[0]);return{trackStyle:a,innerTrackStyle:{...a,...DN({orientation:t,vertical:r?{height:"".concat(h,"%"),top:"".concat(d,"%")}:{height:"".concat(h,"%"),bottom:"".concat(d,"%")},horizontal:r?{width:"".concat(h,"%"),right:"".concat(d,"%")}:{width:"".concat(h,"%"),left:"".concat(d,"%")}})},rootStyle:s,getThumbStyle:e=>{var r;const o=null!=(r=i[e])?r:LN;return{position:"absolute",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none",...DN({orientation:t,vertical:{bottom:"calc(".concat(n[e],"% - ").concat(o.height/2,"px)")},horizontal:{left:"calc(".concat(n[e],"% - ").concat(o.width/2,"px)")}})}}}}({isReversed:T,orientation:e.orientation,thumbRects:[t],thumbPercents:[F]})}),[T,Z,F,B]),re=(0,t.useCallback)((()=>{B.current.focusThumbOnChange&&setTimeout((()=>{var e;return null==(e=V.current)?void 0:e.focus()}))}),[B]);function oe(e){const t=K(e);null!=t&&t!==B.current.value&&M(t)}Fg((()=>{const e=B.current;re(),"keyboard"===e.eventSource&&(null==E||E(e.value))}),[z,E]),function(e,n){const{onPan:i,onPanStart:r,onPanEnd:o,onPanSessionStart:s,onPanSessionEnd:a,threshold:c}=n,l=Boolean(i||r||o||s||a),u=(0,t.useRef)(null),d=pz({onSessionStart:s,onSessionEnd:a,onStart:r,onMove:i,onEnd(e,t){u.current=null,null==o||o(e,t)}});(0,t.useEffect)((()=>{var e;null==(e=u.current)||e.updateHandlers(d.current)})),(0,t.useEffect)((()=>{const t=e.current;if(t&&l)return jN(t,"pointerdown",(function(e){u.current=new sz(e,d.current,c)}))}),[e,l,d,c]),(0,t.useEffect)((()=>()=>{var e;null==(e=u.current)||e.end(),u.current=null}),[])}(H,{onPanSessionStart(e){const t=B.current;t.isInteractive&&(I(!0),re(),oe(e),null==C||C(t.value))},onPanSessionEnd(){const e=B.current;e.isInteractive&&(I(!1),null==E||E(e.value))},onPan(e){B.current.isInteractive&&oe(e)}});const se=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...e,...x,ref:QM(t,H),tabIndex:-1,"aria-disabled":IN(h),"data-focused":AN(k),style:{...e.style,...te}}}),[x,h,k,te]),ae=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...e,ref:QM(t,j),id:X,"data-disabled":AN(h),style:{...e.style,...ne}}}),[h,X,ne]),ce=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...e,ref:t,style:{...e.style,...ie}}}),[ie]),le=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...e,ref:QM(t,V),role:"slider",tabIndex:D?0:void 0,id:q,"data-active":AN(A),"aria-valuetext":Q,"aria-valuemin":i,"aria-valuemax":r,"aria-valuenow":z,"aria-orientation":u,"aria-disabled":IN(h),"aria-readonly":IN(p),"aria-label":S,"aria-labelledby":S?void 0:b,style:{...e.style,...ee(0)},onKeyDown:ON(e.onKeyDown,$),onFocus:ON(e.onFocus,(()=>O(!0))),onBlur:ON(e.onBlur,(()=>O(!1)))}}),[D,q,A,Q,i,r,z,u,h,p,S,b,ee,$]),ue=(0,t.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=!(e.value<i||e.value>r),o=z>=e.value,s=gz(e.value,i,r),a={position:"absolute",pointerEvents:"none",..._z({orientation:u,vertical:{bottom:"".concat(T?100-s:s,"%")},horizontal:{left:"".concat(T?100-s:s,"%")}})};return{...e,ref:t,role:"presentation","aria-hidden":!0,"data-disabled":AN(h),"data-invalid":AN(!n),"data-highlighted":AN(o),style:{...e.style,...a}}}),[h,T,r,i,u,z]),de=(0,t.useCallback)((function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ref:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,type:"hidden",value:z,name:_}}),[_,z]);return{state:{value:z,isFocused:k,isDragging:A},actions:Y,getRootProps:se,getTrackProps:ae,getInnerTrackProps:ce,getThumbProps:le,getMarkerProps:ue,getInputProps:de}}function _z(e){const{orientation:t,vertical:n,horizontal:i}=e;return"vertical"===t?n:i}function wz(e,t){return t<e?e:e+(t-e)/2}var[xz,Cz]=oM({name:"SliderContext",hookName:"useSliderContext",providerName:"<Slider />"}),[Ez,Pz]=oM({name:"SliderStylesContext",hookName:"useSliderStyles",providerName:"<Slider />"}),Tz=JR(((e,t)=>{var n;const i={...e,orientation:null!=(n=null==e?void 0:e.orientation)?n:"horizontal"},r=tM("Slider",i),o=$P(i),{direction:s}=YR();o.direction=s;const{getInputProps:a,getRootProps:c,...l}=bz(o),u=c(),d=a({},t);return(0,ug.jsx)(xz,{value:l,children:(0,ug.jsx)(Ez,{value:r,children:(0,ug.jsxs)(GR.div,{...u,className:kN("chakra-slider",i.className),__css:r.container,children:[i.children,(0,ug.jsx)("input",{...d})]})})})}));Tz.displayName="Slider";var Rz=JR(((e,t)=>{const{getThumbProps:n}=Cz(),i=Pz(),r=n(e,t);return(0,ug.jsx)(GR.div,{...r,className:kN("chakra-slider__thumb",e.className),__css:i.thumb})}));Rz.displayName="SliderThumb";var Mz=JR(((e,t)=>{const{getTrackProps:n}=Cz(),i=Pz(),r=n(e,t);return(0,ug.jsx)(GR.div,{...r,className:kN("chakra-slider__track",e.className),__css:i.track})}));Mz.displayName="SliderTrack";var Az=JR(((e,t)=>{const{getInnerTrackProps:n}=Cz(),i=Pz(),r=n(e,t);return(0,ug.jsx)(GR.div,{...r,className:kN("chakra-slider__filled-track",e.className),__css:i.filledTrack})}));Az.displayName="SliderFilledTrack";var Iz=JR(((e,t)=>{const{getMarkerProps:n}=Cz(),i=Pz(),r=n(e,t);return(0,ug.jsx)(GR.div,{...r,className:kN("chakra-slider__marker",e.className),__css:i.mark})}));function kz(){}function Oz(e){return null==e?kz:function(){return this.querySelector(e)}}function Dz(){return[]}function Lz(e){return null==e?Dz:function(){return this.querySelectorAll(e)}}function Nz(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function zz(e){return function(){return this.matches(e)}}function Fz(e){return function(t){return t.matches(e)}}Iz.displayName="SliderMark";var Uz=Array.prototype.find;function Bz(){return this.firstElementChild}var jz=Array.prototype.filter;function Vz(){return Array.from(this.children)}function Hz(e){return new Array(e.length)}function Wz(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Gz(e,t,n,i,r,o){for(var s,a=0,c=t.length,l=o.length;a<l;++a)(s=t[a])?(s.__data__=o[a],i[a]=s):n[a]=new Wz(e,o[a]);for(;a<c;++a)(s=t[a])&&(r[a]=s)}function qz(e,t,n,i,r,o,s){var a,c,l,u=new Map,d=t.length,h=o.length,p=new Array(d);for(a=0;a<d;++a)(c=t[a])&&(p[a]=l=s.call(c,c.__data__,a,t)+"",u.has(l)?r[a]=c:u.set(l,c));for(a=0;a<h;++a)l=s.call(e,o[a],a,o)+"",(c=u.get(l))?(i[a]=c,c.__data__=o[a],u.delete(l)):n[a]=new Wz(e,o[a]);for(a=0;a<d;++a)(c=t[a])&&u.get(p[a])===c&&(r[a]=c)}function Xz(e){return e.__data__}function Kz(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Jz(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}Wz.prototype={constructor:Wz,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var Yz="http://www.w3.org/1999/xhtml";const $z={svg:"http://www.w3.org/2000/svg",xhtml:Yz,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qz(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),$z.hasOwnProperty(t)?{space:$z[t],local:e}:e}function Zz(e){return function(){this.removeAttribute(e)}}function eF(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tF(e,t){return function(){this.setAttribute(e,t)}}function nF(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function iF(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function rF(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function oF(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function sF(e){return function(){this.style.removeProperty(e)}}function aF(e,t,n){return function(){this.style.setProperty(e,t,n)}}function cF(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function lF(e,t){return e.style.getPropertyValue(t)||oF(e).getComputedStyle(e,null).getPropertyValue(t)}function uF(e){return function(){delete this[e]}}function dF(e,t){return function(){this[e]=t}}function hF(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function pF(e){return e.trim().split(/^|\s+/)}function fF(e){return e.classList||new vF(e)}function vF(e){this._node=e,this._names=pF(e.getAttribute("class")||"")}function mF(e,t){for(var n=fF(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function gF(e,t){for(var n=fF(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function yF(e){return function(){mF(this,e)}}function SF(e){return function(){gF(this,e)}}function bF(e,t){return function(){(t.apply(this,arguments)?mF:gF)(this,e)}}function _F(){this.textContent=""}function wF(e){return function(){this.textContent=e}}function xF(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function CF(){this.innerHTML=""}function EF(e){return function(){this.innerHTML=e}}function PF(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function TF(){this.nextSibling&&this.parentNode.appendChild(this)}function RF(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function MF(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Yz&&t.documentElement.namespaceURI===Yz?t.createElement(e):t.createElementNS(n,e)}}function AF(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function IF(e){var t=Qz(e);return(t.local?AF:MF)(t)}function kF(){return null}function OF(){var e=this.parentNode;e&&e.removeChild(this)}function DF(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function LF(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function NF(e){return function(){var t=this.__on;if(t){for(var n,i=0,r=-1,o=t.length;i<o;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function zF(e,t,n){return function(){var i,r=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=t);this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function FF(e,t,n){var i=oF(e),r=i.CustomEvent;"function"===typeof r?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function UF(e,t){return function(){return FF(this,e,t)}}function BF(e,t){return function(){return FF(this,e,t.apply(this,arguments))}}vF.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var jF=[null];function VF(e,t){this._groups=e,this._parents=t}function HF(){return new VF([[document.documentElement]],jF)}VF.prototype=HF.prototype={constructor:VF,select:function(e){"function"!==typeof e&&(e=Oz(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o,s,a=t[r],c=a.length,l=i[r]=new Array(c),u=0;u<c;++u)(o=a[u])&&(s=e.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),l[u]=s);return new VF(i,this._parents)},selectAll:function(e){e="function"===typeof e?Nz(e):Lz(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var s,a=t[o],c=a.length,l=0;l<c;++l)(s=a[l])&&(i.push(e.call(s,s.__data__,l,a)),r.push(s));return new VF(i,r)},selectChild:function(e){return this.select(null==e?Bz:function(e){return function(){return Uz.call(this.children,e)}}("function"===typeof e?e:Fz(e)))},selectChildren:function(e){return this.selectAll(null==e?Vz:function(e){return function(){return jz.call(this.children,e)}}("function"===typeof e?e:Fz(e)))},filter:function(e){"function"!==typeof e&&(e=zz(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o,s=t[r],a=s.length,c=i[r]=[],l=0;l<a;++l)(o=s[l])&&e.call(o,o.__data__,l,s)&&c.push(o);return new VF(i,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Xz);var n=t?qz:Gz,i=this._parents,r=this._groups;"function"!==typeof e&&(e=function(e){return function(){return e}}(e));for(var o=r.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var u=i[l],d=r[l],h=d.length,p=Kz(e.call(u,u&&u.__data__,l,i)),f=p.length,v=a[l]=new Array(f),m=s[l]=new Array(f);n(u,d,v,m,c[l]=new Array(h),p,t);for(var g,y,S=0,b=0;S<f;++S)if(g=v[S]){for(S>=b&&(b=S+1);!(y=m[b])&&++b<f;);g._next=y||null}}return(s=new VF(s,i))._enter=a,s._exit=c,s},enter:function(){return new VF(this._enter||this._groups.map(Hz),this._parents)},exit:function(){return new VF(this._exit||this._groups.map(Hz),this._parents)},join:function(e,t,n){var i=this.enter(),r=this,o=this.exit();return"function"===typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),c=0;c<s;++c)for(var l,u=n[c],d=i[c],h=u.length,p=a[c]=new Array(h),f=0;f<h;++f)(l=u[f]||d[f])&&(p[f]=l);for(;c<r;++c)a[c]=n[c];return new VF(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,r=e[t],o=r.length-1,s=r[o];--o>=0;)(i=r[o])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Jz);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s,a=n[o],c=a.length,l=r[o]=new Array(c),u=0;u<c;++u)(s=a[u])&&(l[u]=s);l.sort(t)}return new VF(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r,o=t[n],s=0,a=o.length;s<a;++s)(r=o[s])&&e.call(r,r.__data__,s,o);return this},attr:function(e,t){var n=Qz(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?eF:Zz:"function"===typeof t?n.local?rF:iF:n.local?nF:tF)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?sF:"function"===typeof t?cF:aF)(e,t,null==n?"":n)):lF(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?uF:"function"===typeof t?hF:dF)(e,t)):this.node()[e]},classed:function(e,t){var n=pF(e+"");if(arguments.length<2){for(var i=fF(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"===typeof t?bF:t?yF:SF)(n,t))},text:function(e){return arguments.length?this.each(null==e?_F:("function"===typeof e?xF:wF)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?CF:("function"===typeof e?PF:EF)(e)):this.node().innerHTML},raise:function(){return this.each(TF)},lower:function(){return this.each(RF)},append:function(e){var t="function"===typeof e?e:IF(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:IF(e),i=null==t?kF:"function"===typeof t?t:Oz(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(OF)},clone:function(e){return this.select(e?LF:DF)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var i,r,o=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),s=o.length;if(!(arguments.length<2)){for(a=t?zF:NF,i=0;i<s;++i)this.each(a(o[i],t,n));return this}var a=this.node().__on;if(a)for(var c,l=0,u=a.length;l<u;++l)for(i=0,c=a[l];i<s;++i)if((r=o[i]).type===c.type&&r.name===c.name)return c.value},dispatch:function(e,t){return this.each(("function"===typeof t?BF:UF)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i,r=e[t],o=0,s=r.length;o<s;++o)(i=r[o])&&(yield i)}};const WF=HF;var GF={value:()=>{}};function qF(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new XF(i)}function XF(e){this._=e}function KF(e,t){for(var n,i=0,r=e.length;i<r;++i)if((n=e[i]).name===t)return n.value}function JF(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=GF,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}XF.prototype=qF.prototype={constructor:XF,on:function(e,t){var n,i=this._,r=function(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}(e+"",i),o=-1,s=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(n=(e=r[o]).type)i[n]=JF(i[n],e.name,t);else if(null==t)for(n in i)i[n]=JF(i[n],e.name,null);return this}for(;++o<s;)if((n=(e=r[o]).type)&&(n=KF(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new XF(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(i=this._[e]).length;o<n;++o)i[o].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};const YF=qF;var $F,QF,ZF=0,eU=0,tU=0,nU=1e3,iU=0,rU=0,oU=0,sU="object"===typeof performance&&performance.now?performance:Date,aU="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function cU(){return rU||(aU(lU),rU=sU.now()+oU)}function lU(){rU=0}function uU(){this._call=this._time=this._next=null}function dU(e,t,n){var i=new uU;return i.restart(e,t,n),i}function hU(){rU=(iU=sU.now())+oU,ZF=eU=0;try{!function(){cU(),++ZF;for(var e,t=$F;t;)(e=rU-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ZF}()}finally{ZF=0,function(){var e,t,n=$F,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:$F=t);QF=e,fU(i)}(),rU=0}}function pU(){var e=sU.now(),t=e-iU;t>nU&&(oU-=t,iU=e)}function fU(e){ZF||(eU&&(eU=clearTimeout(eU)),e-rU>24?(e<1/0&&(eU=setTimeout(hU,e-sU.now()-oU)),tU&&(tU=clearInterval(tU))):(tU||(iU=sU.now(),tU=setInterval(pU,nU)),ZF=1,aU(hU)))}function vU(e,t,n){var i=new uU;return t=null==t?0:+t,i.restart((n=>{i.stop(),e(n+t)}),t,n),i}uU.prototype=dU.prototype={constructor:uU,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?cU():+n)+(null==t?0:+t),this._next||QF===this||(QF?QF._next=this:$F=this,QF=this),this._call=e,this._time=n,fU()},stop:function(){this._call&&(this._call=null,this._time=1/0,fU())}};var mU=YF("start","end","cancel","interrupt"),gU=[],yU=0,SU=1,bU=2,_U=3,wU=4,xU=5,CU=6;function EU(e,t,n,i,r,o){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var i,r=e.__transition;function o(e){n.state=SU,n.timer.restart(s,n.delay,n.time),n.delay<=e&&s(e-n.delay)}function s(o){var l,u,d,h;if(n.state!==SU)return c();for(l in r)if((h=r[l]).name===n.name){if(h.state===_U)return vU(s);h.state===wU?(h.state=CU,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[l]):+l<t&&(h.state=CU,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[l])}if(vU((function(){n.state===_U&&(n.state=wU,n.timer.restart(a,n.delay,n.time),a(o))})),n.state=bU,n.on.call("start",e,e.__data__,n.index,n.group),n.state===bU){for(n.state=_U,i=new Array(d=n.tween.length),l=0,u=-1;l<d;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=h);i.length=u+1}}function a(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(c),n.state=xU,1),o=-1,s=i.length;++o<s;)i[o].call(e,r);n.state===xU&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){for(var i in n.state=CU,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=dU(o,0,n.time)}(e,n,{name:t,index:i,group:r,on:mU,tween:gU,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:yU})}function PU(e,t){var n=RU(e,t);if(n.state>yU)throw new Error("too late; already scheduled");return n}function TU(e,t){var n=RU(e,t);if(n.state>_U)throw new Error("too late; already running");return n}function RU(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function MU(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var AU,IU=180/Math.PI,kU={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function OU(e,t,n,i,r,o){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*i)&&(n-=e*c,i-=t*c),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,c/=a),e*i<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*IU,skewX:Math.atan(c)*IU,scaleX:s,scaleY:a}}function DU(e,t,n,i){function r(e){return e.length?e.pop()+" ":""}return function(o,s){var a=[],c=[];return o=e(o),s=e(s),function(e,i,r,o,s,a){if(e!==r||i!==o){var c=s.push("translate(",null,t,null,n);a.push({i:c-4,x:MU(e,r)},{i:c-2,x:MU(i,o)})}else(r||o)&&s.push("translate("+r+t+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,c),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:MU(e,t)})):t&&n.push(r(n)+"rotate("+t+i)}(o.rotate,s.rotate,a,c),function(e,t,n,o){e!==t?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:MU(e,t)}):t&&n.push(r(n)+"skewX("+t+i)}(o.skewX,s.skewX,a,c),function(e,t,n,i,o,s){if(e!==n||t!==i){var a=o.push(r(o)+"scale(",null,",",null,")");s.push({i:a-4,x:MU(e,n)},{i:a-2,x:MU(t,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,c),o=s=null,function(e){for(var t,n=-1,i=c.length;++n<i;)a[(t=c[n]).i]=t.x(e);return a.join("")}}}var LU=DU((function(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?kU:OU(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),NU=DU((function(e){return null==e?kU:(AU||(AU=document.createElementNS("http://www.w3.org/2000/svg","g")),AU.setAttribute("transform",e),(e=AU.transform.baseVal.consolidate())?OU((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):kU)}),", ",")",")");function zU(e,t){var n,i;return function(){var r=TU(this,e),o=r.tween;if(o!==n)for(var s=0,a=(i=n=o).length;s<a;++s)if(i[s].name===t){(i=i.slice()).splice(s,1);break}r.tween=i}}function FU(e,t,n){var i,r;if("function"!==typeof n)throw new Error;return function(){var o=TU(this,e),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:t,value:n},c=0,l=r.length;c<l;++c)if(r[c].name===t){r[c]=a;break}c===l&&r.push(a)}o.tween=r}}function UU(e,t,n){var i=e._id;return e.each((function(){var e=TU(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return RU(e,i).value[t]}}function BU(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function jU(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function VU(){}var HU=.7,WU=1/HU,GU="\\s*([+-]?\\d+)\\s*",qU="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",XU="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",KU=/^#([0-9a-f]{3,8})$/,JU=new RegExp("^rgb\\(".concat(GU,",").concat(GU,",").concat(GU,"\\)$")),YU=new RegExp("^rgb\\(".concat(XU,",").concat(XU,",").concat(XU,"\\)$")),$U=new RegExp("^rgba\\(".concat(GU,",").concat(GU,",").concat(GU,",").concat(qU,"\\)$")),QU=new RegExp("^rgba\\(".concat(XU,",").concat(XU,",").concat(XU,",").concat(qU,"\\)$")),ZU=new RegExp("^hsl\\(".concat(qU,",").concat(XU,",").concat(XU,"\\)$")),eB=new RegExp("^hsla\\(".concat(qU,",").concat(XU,",").concat(XU,",").concat(qU,"\\)$")),tB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function nB(){return this.rgb().formatHex()}function iB(){return this.rgb().formatRgb()}function rB(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=KU.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?oB(t):3===n?new cB(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?sB(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?sB(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=JU.exec(e))?new cB(t[1],t[2],t[3],1):(t=YU.exec(e))?new cB(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=$U.exec(e))?sB(t[1],t[2],t[3],t[4]):(t=QU.exec(e))?sB(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ZU.exec(e))?fB(t[1],t[2]/100,t[3]/100,1):(t=eB.exec(e))?fB(t[1],t[2]/100,t[3]/100,t[4]):tB.hasOwnProperty(e)?oB(tB[e]):"transparent"===e?new cB(NaN,NaN,NaN,0):null}function oB(e){return new cB(e>>16&255,e>>8&255,255&e,1)}function sB(e,t,n,i){return i<=0&&(e=t=n=NaN),new cB(e,t,n,i)}function aB(e,t,n,i){return 1===arguments.length?function(e){return e instanceof VU||(e=rB(e)),e?new cB((e=e.rgb()).r,e.g,e.b,e.opacity):new cB}(e):new cB(e,t,n,null==i?1:i)}function cB(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function lB(){return"#".concat(pB(this.r)).concat(pB(this.g)).concat(pB(this.b))}function uB(){const e=dB(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(hB(this.r),", ").concat(hB(this.g),", ").concat(hB(this.b)).concat(1===e?")":", ".concat(e,")"))}function dB(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hB(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pB(e){return((e=hB(e))<16?"0":"")+e.toString(16)}function fB(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new mB(e,t,n,i)}function vB(e){if(e instanceof mB)return new mB(e.h,e.s,e.l,e.opacity);if(e instanceof VU||(e=rB(e)),!e)return new mB;if(e instanceof mB)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,a=o-r,c=(o+r)/2;return a?(s=t===o?(n-i)/a+6*(n<i):n===o?(i-t)/a+2:(t-n)/a+4,a/=c<.5?o+r:2-o-r,s*=60):a=c>0&&c<1?0:s,new mB(s,a,c,e.opacity)}function mB(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function gB(e){return(e=(e||0)%360)<0?e+360:e}function yB(e){return Math.max(0,Math.min(1,e||0))}function SB(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function bB(e,t,n,i,r){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*i+s*r)/6}BU(VU,rB,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:nB,formatHex:nB,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return vB(this).formatHsl()},formatRgb:iB,toString:iB}),BU(cB,aB,jU(VU,{brighter(e){return e=null==e?WU:Math.pow(WU,e),new cB(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?HU:Math.pow(HU,e),new cB(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new cB(hB(this.r),hB(this.g),hB(this.b),dB(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lB,formatHex:lB,formatHex8:function(){return"#".concat(pB(this.r)).concat(pB(this.g)).concat(pB(this.b)).concat(pB(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:uB,toString:uB})),BU(mB,(function(e,t,n,i){return 1===arguments.length?vB(e):new mB(e,t,n,null==i?1:i)}),jU(VU,{brighter(e){return e=null==e?WU:Math.pow(WU,e),new mB(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?HU:Math.pow(HU,e),new mB(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new cB(SB(e>=240?e-240:e+120,r,i),SB(e,r,i),SB(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new mB(gB(this.h),yB(this.s),yB(this.l),dB(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=dB(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(gB(this.h),", ").concat(100*yB(this.s),"%, ").concat(100*yB(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const _B=e=>()=>e;function wB(e,t){return function(n){return e+n*t}}function xB(e){return 1===(e=+e)?CB:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):_B(isNaN(t)?n:t)}}function CB(e,t){var n=t-e;return n?wB(e,n):_B(isNaN(e)?t:e)}const EB=function e(t){var n=xB(t);function i(e,t){var i=n((e=aB(e)).r,(t=aB(t)).r),r=n(e.g,t.g),o=n(e.b,t.b),s=CB(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=r(t),e.b=o(t),e.opacity=s(t),e+""}}return i.gamma=e,i}(1);function PB(e){return function(t){var n,i,r=t.length,o=new Array(r),s=new Array(r),a=new Array(r);for(n=0;n<r;++n)i=aB(t[n]),o[n]=i.r||0,s[n]=i.g||0,a[n]=i.b||0;return o=e(o),s=e(s),a=e(a),i.opacity=1,function(e){return i.r=o(e),i.g=s(e),i.b=a(e),i+""}}}PB((function(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],o=e[i+1],s=i>0?e[i-1]:2*r-o,a=i<t-1?e[i+2]:2*o-r;return bB((n-i/t)*t,s,r,o,a)}})),PB((function(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],o=e[i%t],s=e[(i+1)%t],a=e[(i+2)%t];return bB((n-i/t)*t,r,o,s,a)}}));var TB=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,RB=new RegExp(TB.source,"g");function MB(e,t){var n,i,r,o=TB.lastIndex=RB.lastIndex=0,s=-1,a=[],c=[];for(e+="",t+="";(n=TB.exec(e))&&(i=RB.exec(t));)(r=i.index)>o&&(r=t.slice(o,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:MU(n,i)})),o=RB.lastIndex;return o<t.length&&(r=t.slice(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?c[0]?function(e){return function(t){return e(t)+""}}(c[0].x):function(e){return function(){return e}}(t):(t=c.length,function(e){for(var n,i=0;i<t;++i)a[(n=c[i]).i]=n.x(e);return a.join("")})}function AB(e,t){var n;return("number"===typeof t?MU:t instanceof rB?EB:(n=rB(t))?(t=n,EB):MB)(e,t)}function IB(e){return function(){this.removeAttribute(e)}}function kB(e){return function(){this.removeAttributeNS(e.space,e.local)}}function OB(e,t,n){var i,r,o=n+"";return function(){var s=this.getAttribute(e);return s===o?null:s===i?r:r=t(i=s,n)}}function DB(e,t,n){var i,r,o=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===i?r:r=t(i=s,n)}}function LB(e,t,n){var i,r,o;return function(){var s,a,c=n(this);if(null!=c)return(s=this.getAttribute(e))===(a=c+"")?null:s===i&&a===r?o:(r=a,o=t(i=s,c));this.removeAttribute(e)}}function NB(e,t,n){var i,r,o;return function(){var s,a,c=n(this);if(null!=c)return(s=this.getAttributeNS(e.space,e.local))===(a=c+"")?null:s===i&&a===r?o:(r=a,o=t(i=s,c));this.removeAttributeNS(e.space,e.local)}}function zB(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function FB(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function UB(e,t){return function(){PU(this,e).delay=+t.apply(this,arguments)}}function BB(e,t){return t=+t,function(){PU(this,e).delay=t}}function jB(e,t){return function(){TU(this,e).duration=+t.apply(this,arguments)}}function VB(e,t){return t=+t,function(){TU(this,e).duration=t}}var HB=WF.prototype.constructor;function WB(e){return function(){this.style.removeProperty(e)}}var GB=0;function qB(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function XB(){return++GB}var KB=WF.prototype;qB.prototype=function(e){return WF().transition(e)}.prototype={constructor:qB,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Oz(e));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a,c,l=i[s],u=l.length,d=o[s]=new Array(u),h=0;h<u;++h)(a=l[h])&&(c=e.call(a,a.__data__,h,l))&&("__data__"in a&&(c.__data__=a.__data__),d[h]=c,EU(d[h],t,n,h,d,RU(a,n)));return new qB(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Lz(e));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var c,l=i[a],u=l.length,d=0;d<u;++d)if(c=l[d]){for(var h,p=e.call(c,c.__data__,d,l),f=RU(c,n),v=0,m=p.length;v<m;++v)(h=p[v])&&EU(h,t,n,v,p,f);o.push(p),s.push(c)}return new qB(o,s,t,n)},selectChild:KB.selectChild,selectChildren:KB.selectChildren,filter:function(e){"function"!==typeof e&&(e=zz(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o,s=t[r],a=s.length,c=i[r]=[],l=0;l<a;++l)(o=s[l])&&e.call(o,o.__data__,l,s)&&c.push(o);return new qB(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var c,l=t[a],u=n[a],d=l.length,h=s[a]=new Array(d),p=0;p<d;++p)(c=l[p]||u[p])&&(h[p]=c);for(;a<i;++a)s[a]=t[a];return new qB(s,this._parents,this._name,this._id)},selection:function(){return new HB(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=XB(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],c=a.length,l=0;l<c;++l)if(s=a[l]){var u=RU(s,t);EU(s,e,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new qB(i,this._parents,e,n)},call:KB.call,nodes:KB.nodes,node:KB.node,size:KB.size,empty:KB.empty,each:KB.each,on:function(e,t){var n=this._id;return arguments.length<2?RU(this.node(),n).on.on(e):this.each(function(e,t,n){var i,r,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?PU:TU;return function(){var s=o(this,e),a=s.on;a!==i&&(r=(i=a).copy()).on(t,n),s.on=r}}(n,e,t))},attr:function(e,t){var n=Qz(e),i="transform"===n?NU:AB;return this.attrTween(e,"function"===typeof t?(n.local?NB:LB)(n,i,UU(this,"attr."+e,t)):null==t?(n.local?kB:IB)(n):(n.local?DB:OB)(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var i=Qz(e);return this.tween(n,(i.local?zB:FB)(i,t))},style:function(e,t,n){var i="transform"===(e+="")?LU:AB;return null==t?this.styleTween(e,function(e,t){var n,i,r;return function(){var o=lF(this,e),s=(this.style.removeProperty(e),lF(this,e));return o===s?null:o===n&&s===i?r:r=t(n=o,i=s)}}(e,i)).on("end.style."+e,WB(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var i,r,o;return function(){var s=lF(this,e),a=n(this),c=a+"";return null==a&&(this.style.removeProperty(e),c=a=lF(this,e)),s===c?null:s===i&&c===r?o:(r=c,o=t(i=s,a))}}(e,i,UU(this,"style."+e,t))).each(function(e,t){var n,i,r,o,s="style."+t,a="end."+s;return function(){var c=TU(this,e),l=c.on,u=null==c.value[s]?o||(o=WB(t)):void 0;l===n&&r===u||(i=(n=l).copy()).on(a,r=u),c.on=i}}(this._id,e)):this.styleTween(e,function(e,t,n){var i,r,o=n+"";return function(){var s=lF(this,e);return s===o?null:s===i?r:r=t(i=s,n)}}(e,i,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!==typeof t)throw new Error;return this.tween(i,function(e,t,n){var i,r;function o(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&function(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}(e,o,n)),i}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(UU(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function i(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&function(e){return function(t){this.textContent=e.call(this,t)}}(i)),t}return i._value=e,i}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,r=RU(this.node(),n).tween,o=0,s=r.length;o<s;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((null==t?zU:FU)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?UB:BB)(t,e)):RU(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?jB:VB)(t,e)):RU(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){TU(this,e).ease=t}}(t,e)):RU(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;TU(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,i=n._id,r=n.size();return new Promise((function(o,s){var a={value:s},c={value:function(){0===--r&&o()}};n.each((function(){var n=TU(this,i),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),n.on=t})),0===r&&o()}))},[Symbol.iterator]:KB[Symbol.iterator]};var JB={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function YB(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}WF.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,i,r,o=e.__transition,s=!0;if(o){for(r in t=null==t?null:t+"",o)(n=o[r]).name===t?(i=n.state>bU&&n.state<xU,n.state=CU,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[r]):s=!1;s&&delete e.__transition}}(this,e)}))},WF.prototype.transition=function(e){var t,n;e instanceof qB?(t=e._id,e=e._name):(t=XB(),(n=JB).time=cU(),e=null==e?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],c=a.length,l=0;l<c;++l)(s=a[l])&&EU(s,e,t,l,a,n||YB(s,t));return new qB(i,this._parents,e,t)};const{abs:$B,max:QB,min:ZB}=Math;function ej(e){return[+e[0],+e[1]]}function tj(e){return[ej(e[0]),ej(e[1])]}["w","e"].map(nj),["n","s"].map(nj),["n","w","e","s","nw","ne","sw","se"].map(nj);function nj(e){return{type:e}}const ij=Math.sqrt(50),rj=Math.sqrt(10),oj=Math.sqrt(2);function sj(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),s=o>=ij?10:o>=rj?5:o>=oj?2:1;let a,c,l;return r<0?(l=Math.pow(10,-r)/s,a=Math.round(e*l),c=Math.round(t*l),a/l<e&&++a,c/l>t&&--c,l=-l):(l=Math.pow(10,r)*s,a=Math.round(e/l),c=Math.round(t/l),a*l<e&&++a,c*l>t&&--c),c<a&&.5<=n&&n<2?sj(e,t,2*n):[a,c,l]}function aj(e,t,n){return sj(e=+e,t=+t,n=+n)[2]}function cj(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function lj(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function uj(e){let t,n,i;function r(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(r<o){if(0!==t(i,i))return o;do{const t=r+o>>>1;n(e[t],i)<0?r=t+1:o=t}while(r<o)}return r}return 2!==e.length?(t=cj,n=(t,n)=>cj(e(t),n),i=(t,n)=>e(t)-n):(t=e===cj||e===lj?e:dj,n=e,i=e),{left:r,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=r(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return o>n&&i(e[o-1],t)>-i(e[o],t)?o-1:o},right:function(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(r<o){if(0!==t(i,i))return o;do{const t=r+o>>>1;n(e[t],i)<=0?r=t+1:o=t}while(r<o)}return r}}}function dj(){return 0}const hj=uj(cj),pj=hj.right,fj=(hj.left,uj((function(e){return null===e?NaN:+e})).center,pj);function vj(e,t){var n,i=t?t.length:0,r=e?Math.min(i,e.length):0,o=new Array(r),s=new Array(i);for(n=0;n<r;++n)o[n]=Sj(e[n],t[n]);for(;n<i;++n)s[n]=t[n];return function(e){for(n=0;n<r;++n)s[n]=o[n](e);return s}}function mj(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function gj(e,t){var n,i={},r={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?i[n]=Sj(e[n],t[n]):r[n]=t[n];return function(e){for(n in i)r[n]=i[n](e);return r}}function yj(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,r=t.slice();return function(o){for(n=0;n<i;++n)r[n]=e[n]*(1-o)+t[n]*o;return r}}function Sj(e,t){var n,i=typeof t;return null==t||"boolean"===i?_B(t):("number"===i?MU:"string"===i?(n=rB(t))?(t=n,EB):MB:t instanceof rB?EB:t instanceof Date?mj:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?yj:Array.isArray(t)?vj:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?gj:MU)(e,t)}function bj(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function _j(e){return+e}var wj=[0,1];function xj(e){return e}function Cj(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function Ej(e,t,n){var i=e[0],r=e[1],o=t[0],s=t[1];return r<i?(i=Cj(r,i),o=n(s,o)):(i=Cj(i,r),o=n(o,s)),function(e){return o(i(e))}}function Pj(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),o=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=Cj(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(t){var n=fj(e,t,1,i)-1;return o[n](r[n](t))}}function Tj(){var e,t,n,i,r,o,s=wj,a=wj,c=Sj,l=xj;function u(){var e=Math.min(s.length,a.length);return l!==xj&&(l=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(s[0],s[e-1])),i=e>2?Pj:Ej,r=o=null,d}function d(t){return null==t||isNaN(t=+t)?n:(r||(r=i(s.map(e),a,c)))(e(l(t)))}return d.invert=function(n){return l(t((o||(o=i(a,s.map(e),MU)))(n)))},d.domain=function(e){return arguments.length?(s=Array.from(e,_j),u()):s.slice()},d.range=function(e){return arguments.length?(a=Array.from(e),u()):a.slice()},d.rangeRound=function(e){return a=Array.from(e),c=bj,u()},d.clamp=function(e){return arguments.length?(l=!!e||xj,u()):l!==xj},d.interpolate=function(e){return arguments.length?(c=e,u()):c},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,i){return e=n,t=i,u()}}function Rj(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var Mj,Aj=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ij(e){if(!(t=Aj.exec(e)))throw new Error("invalid format: "+e);var t;return new kj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function kj(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Oj(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Dj(e){return(e=Oj(Math.abs(e)))?e[1]:NaN}function Lj(e,t){var n=Oj(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Ij.prototype=kj.prototype,kj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Nj={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Lj(100*e,t),r:Lj,s:function(e,t){var n=Oj(e,t);if(!n)return e+"";var i=n[0],r=n[1],o=r-(Mj=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Oj(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function zj(e){return e}var Fj,Uj,Bj,jj=Array.prototype.map,Vj=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Hj(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?zj:(t=jj.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var r=e.length,o=[],s=0,a=t[0],c=0;r>0&&a>0&&(c+a+1>i&&(a=Math.max(1,i-c)),o.push(e.substring(r-=a,r+a)),!((c+=a+1)>i));)a=t[s=(s+1)%t.length];return o.reverse().join(n)}),r=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",a=void 0===e.numerals?zj:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(jj.call(e.numerals,String)),c=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=Ij(e)).fill,n=e.align,d=e.sign,h=e.symbol,p=e.zero,f=e.width,v=e.comma,m=e.precision,g=e.trim,y=e.type;"n"===y?(v=!0,y="g"):Nj[y]||(void 0===m&&(m=12),g=!0,y="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var S="$"===h?r:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===h?o:/[%p]/.test(y)?c:"",_=Nj[y],w=/[defgprs%]/.test(y);function x(e){var r,o,c,h=S,x=b;if("c"===y)x=_(e)+x,e="";else{var C=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:_(Math.abs(e),m),g&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),C&&0===+e&&"+"!==d&&(C=!1),h=(C?"("===d?d:l:"-"===d||"("===d?"":d)+h,x=("s"===y?Vj[8+Mj/3]:"")+x+(C&&"("===d?")":""),w)for(r=-1,o=e.length;++r<o;)if(48>(c=e.charCodeAt(r))||c>57){x=(46===c?s+e.slice(r+1):e.slice(r))+x,e=e.slice(0,r);break}}v&&!p&&(e=i(e,1/0));var E=h.length+e.length+x.length,P=E<f?new Array(f-E+1).join(t):"";switch(v&&p&&(e=i(P+e,P.length?f-x.length:1/0),P=""),n){case"<":e=h+e+x+P;break;case"=":e=h+P+e+x;break;case"^":e=P.slice(0,E=P.length>>1)+h+e+x+P.slice(E);break;default:e=P+h+e+x}return a(e)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),x.toString=function(){return e+""},x}return{format:d,formatPrefix:function(e,t){var n=d(((e=Ij(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(Dj(t)/3))),r=Math.pow(10,-i),o=Vj[8+i/3];return function(e){return n(r*e)+o}}}}function Wj(e,t,n,i){var r,o=function(e,t,n){n=+n;const i=(t=+t)<(e=+e),r=i?aj(t,e,n):aj(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}(e,t,n);switch((i=Ij(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Dj(t)/3)))-Dj(Math.abs(e)))}(o,s))||(i.precision=r),Bj(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Dj(t)-Dj(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(e){return Math.max(0,-Dj(Math.abs(e)))}(o))||(i.precision=r-2*("%"===i.type))}return Uj(i)}function Gj(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const i=t<e,[r,o,s]=i?sj(t,e,n):sj(e,t,n);if(!(o>=r))return[];const a=o-r+1,c=new Array(a);if(i)if(s<0)for(let l=0;l<a;++l)c[l]=(o-l)/-s;else for(let l=0;l<a;++l)c[l]=(o-l)*s;else if(s<0)for(let l=0;l<a;++l)c[l]=(r+l)/-s;else for(let l=0;l<a;++l)c[l]=(r+l)*s;return c}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return Wj(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,r,o=t(),s=0,a=o.length-1,c=o[s],l=o[a],u=10;for(l<c&&(r=c,c=l,l=r,r=s,s=a,a=r);u-- >0;){if((r=aj(c,l,n))===i)return o[s]=c,o[a]=l,t(o);if(r>0)c=Math.floor(c/r)*r,l=Math.ceil(l/r)*r;else{if(!(r<0))break;c=Math.ceil(c*r)/r,l=Math.floor(l*r)/r}i=r}return e},e}function qj(){var e=Tj()(xj,xj);return e.copy=function(){return t=e,qj().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},Rj.apply(e,arguments),Gj(e)}function Xj(e,t,n){this.k=e,this.x=t,this.y=n}Fj=Hj({thousands:",",grouping:[3],currency:["$",""]}),Uj=Fj.format,Bj=Fj.formatPrefix,Xj.prototype={constructor:Xj,scale:function(e){return 1===e?this:new Xj(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Xj(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Xj(1,0,0);Xj.prototype;const Kj=e=>{let{au:n,name:i,intensity:r,notes:o,onChange:s,animationManager:a,muscularBasis:c,links:l}=e;const[u,d]=(0,t.useState)([]),[h,p]=(0,t.useState)(!1),f=qj().domain([0,100]).range(["teal","magenta"]);return(0,t.useEffect)((()=>{(async()=>{const e=Array.isArray(l)?l:[],t=await Promise.all(e.map((e=>(async e=>{const t=e.split("/wiki/")[1];if(!t)return null;const n="https://en.wikipedia.org/w/api.php?action=query&titles=".concat(t,"&prop=pageimages&format=json&origin=*&pithumbsize=100");try{const e=await fetch(n),t=await e.json(),i=t.query.pages[Object.keys(t.query.pages)[0]];return i.thumbnail?i.thumbnail.source:null}catch(i){return console.error("Failed to fetch Wikipedia image:",i),null}})(e))));d(t.filter((e=>null!==e)))})()}),[l]),(0,ug.jsxs)(wD,{width:"100%",children:[(0,ug.jsxs)(_O,{fontFamily:"sans-serif",mb:"2",display:"inline",children:["".concat(n," - ").concat(i),(0,ug.jsx)(PN,{label:null===c||void 0===c?void 0:c.split(", ").map(((e,t)=>(0,ug.jsx)(wD,{children:u[t]?(0,ug.jsx)(MN,{src:u[t],alt:e,boxSize:"100px"}):e},t))),isOpen:h,hasArrow:!0,children:(0,ug.jsx)(_O,{as:"span",fontSize:"sm",ml:2,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),style:{textDecoration:"underline",cursor:"pointer"},children:c})})]}),(0,ug.jsxs)(Tz,{id:n,value:r,min:0,max:100,onChange:e=>{a&&a.applyAUChange(n,e,0)},colorScheme:iT("teal","magenta"),children:[(0,ug.jsx)(Mz,{children:(0,ug.jsx)(Az,{bg:f(r)})}),(0,ug.jsx)(PN,{hasArrow:!0,label:"".concat(r,"%"),bg:"gray.300",color:"black",placement:"top",children:(0,ug.jsx)(Rz,{boxSize:6})})]}),o&&(0,ug.jsx)(_O,{mt:"2",fontSize:"sm",children:o})]})};var Jj=function(e){const{viewBox:n="0 0 24 24",d:i,displayName:r,defaultProps:o={}}=e,s=t.Children.toArray(e.path),a=JR(((e,t)=>(0,ug.jsx)(iM,{ref:t,viewBox:n,...o,...e,children:s.length?s:(0,ug.jsx)("path",{fill:"currentColor",d:i})})));return a.displayName=r,a}({displayName:"HamburgerIcon",viewBox:"0 0 24 24",d:"M 3 5 A 1.0001 1.0001 0 1 0 3 7 L 21 7 A 1.0001 1.0001 0 1 0 21 5 L 3 5 z M 3 11 A 1.0001 1.0001 0 1 0 3 13 L 21 13 A 1.0001 1.0001 0 1 0 21 11 L 3 11 z M 3 17 A 1.0001 1.0001 0 1 0 3 19 L 21 19 A 1.0001 1.0001 0 1 0 21 17 L 3 17 z"});const Yj=[{index:0,name:"Face_[01]",AUid:"1"},{index:1,name:"Face_[02]",AUid:"2"},{index:2,name:"Face_[02R]",AUid:"2R"},{index:3,name:"Face_[02L]",AUid:"2L"},{index:4,name:"Face_[04]",AUid:"4"},{index:5,name:"Face_[05]",AUid:"5"},{index:6,name:"Face_[06]",AUid:"6"},{index:7,name:"Face_[07]",AUid:"7"},{index:8,name:"Face_[08]",AUid:"8"},{index:9,name:"Face_[09]",AUid:"9"},{index:10,name:"Face_[10]",AUid:"10"},{index:11,name:"Face_[11]",AUid:"11"},{index:12,name:"Face_[12]",AUid:"12"},{index:13,name:"Face_[13]",AUid:"13"},{index:14,name:"Face_[14]",AUid:"14"},{index:15,name:"Face_[15]",AUid:"15"},{index:16,name:"Face_[16]",AUid:"16"},{index:17,name:"Face_[17]",AUid:"17"},{index:18,name:"Face_[18]",AUid:"18"},{index:19,name:"Face_[19]",AUid:"19"},{index:20,name:"Face_[20]",AUid:"20"},{index:21,name:"Face_[21]",AUid:"21"},{index:22,name:"Face_[22]",AUid:"22"},{index:23,name:"Face_[23]",AUid:"23"},{index:24,name:"Face_[24]",AUid:"24"},{index:25,name:"Face_[25]",AUid:"25"},{index:26,name:"Face_[26]",AUid:"26"},{index:27,name:"Face_[27]",AUid:"27"},{index:28,name:"Face_[28]",AUid:"28"},{index:29,name:"Face_[29]",AUid:"29"},{index:30,name:"Face_[30R]",AUid:"30R"},{index:31,name:"Face_[30L]",AUid:"30L"},{index:32,name:"Face_[31]",AUid:"31"},{index:33,name:"Face_[32]",AUid:"32"},{index:34,name:"Face_[33]",AUid:"33"},{index:35,name:"Face_[34]",AUid:"34"},{index:36,name:"Face_[35]",AUid:"35"},{index:37,name:"Face_[36L]",AUid:"36L"},{index:38,name:"Face_[36R]",AUid:"36R"},{index:39,name:"Face_[37]",AUid:"37"},{index:40,name:"Face_[38]",AUid:"38"},{index:41,name:"Face_[39]",AUid:"39"},{index:42,name:"Face_[41]",AUid:"41"},{index:43,name:"Face_[42]",AUid:"42"},{index:44,name:"Face_[43]",AUid:"43"},{index:45,name:"Face_[44]",AUid:"44"},{index:46,name:"Face_[45]",AUid:"45"},{index:47,name:"Face_[46R]",AUid:"46R"},{index:48,name:"Face_[46L]",AUid:"46L"},{index:49,name:"Face_[65]",AUid:"65"},{index:50,name:"Face_[neutral_viseme]"},{index:51,name:"Face_[ae_ax_ah]",VisemeName:"ae ax ah"},{index:52,name:"Face_[aa]",VisemeName:"aa"},{index:53,name:"Face_[ao]",VisemeName:"ao"},{index:54,name:"Face_[ey_eh_uh]",VisemeName:"ey eh uh"},{index:55,name:"Face_[er]",VisemeName:"er"},{index:56,name:"Face_[y_iy_ih_ix]",VisemeName:"y iy ih ix"},{index:57,name:"Face_[w_uw]",VisemeName:"w uw"},{index:58,name:"Face_[ow]",VisemeName:"ow"},{index:59,name:"Face_[aw]",VisemeName:"aw"},{index:60,name:"Face_[oy]",VisemeName:"oy"},{index:61,name:"Face_[ay]",VisemeName:"ay"},{index:62,name:"Face_[h]",VisemeName:"h"},{index:63,name:"Face_[r]",VisemeName:"r"},{index:64,name:"Face_[l]",VisemeName:"l"},{index:65,name:"Face_[s_z]",VisemeName:"s z"},{index:66,name:"Face_[sh_ch_jh_zh]001",VisemeName:"sh ch jh zh"},{index:67,name:"Face_[th_dh]",VisemeName:"th dh"},{index:68,name:"Face_[f_v]",VisemeName:"f v"},{index:69,name:"Face_[d_t_n]",VisemeName:"d t n"},{index:70,name:"Face_[f_v]001",VisemeName:"k g ng"},{index:71,name:"Face_[p_b_m]",VisemeName:"p b m"}],$j=[{index:0,name:"Face_51",AUid:"51"},{index:1,name:"Face_52",AUid:"52"},{index:2,name:"Face_53",AUid:"53"},{index:3,name:"Face_54",AUid:"54"},{index:4,name:"Face_55",AUid:"55"},{index:5,name:"Face_56",AUid:"56"},{index:6,name:"Face_57",AUid:"57"},{index:7,name:"Face_58",AUid:"58"},{index:8,name:"Face_61",AUid:"61"},{index:11,name:"Face_62",AUid:"62"},{index:13,name:"Face_63",AUid:"63"},{index:14,name:"Face_64",AUid:"64"},{index:17,name:"Face_66",AUid:"66"}],Qj=[{id:"1",name:"Inner Brow Raiser",muscularBasis:"frontalis (pars medialis)",links:["https://en.wikipedia.org/wiki/Frontalis_muscle","https://en.wikipedia.org/wiki/Pars_medialis"],faceSection:"Forehead"},{id:"2",name:"Outer Brow Raiser",muscularBasis:"frontalis (pars lateralis)",links:["https://en.wikipedia.org/wiki/Frontalis_muscle","https://en.wikipedia.org/wiki/Pars_lateralis"],faceSection:"Forehead"},{id:"2L",name:"outerBrowRaiserL",faceSection:"Forehead"},{id:"2R",name:"outerBrowRaiserR",faceSection:"Forehead"},{id:"4",name:"Brow Lowerer",muscularBasis:"depressor glabellae, depressor supercilii, corrugator supercilii",links:["https://en.wikipedia.org/wiki/Depressor_glabellae","https://en.wikipedia.org/wiki/Depressor_supercilii","https://en.wikipedia.org/wiki/Corrugator_supercilii"],faceSection:"Brow area"},{id:"5",name:"Upper Lid Raiser",muscularBasis:"levator palpebrae superioris, superior tarsal muscle",links:["https://en.wikipedia.org/wiki/Levator_palpebrae_superioris","https://en.wikipedia.org/wiki/Superior_tarsal_muscle"],faceSection:"Eyelids"},{id:"6",name:"Cheek Raiser",muscularBasis:"orbicularis oculi (pars orbitalis)",links:["https://en.wikipedia.org/wiki/Orbicularis_oculi"],faceSection:"Cheeks"},{id:"7",name:"Lid Tightener",muscularBasis:"orbicularis oculi (pars palpebralis)",links:["https://en.wikipedia.org/wiki/Orbicularis_oculi"],faceSection:"Eyelids"},{id:"8",name:"Lips Toward Each Other",muscularBasis:"orbicularis oris",links:["https://en.wikipedia.org/wiki/Orbicularis_oris"],faceSection:"Mouth"},{id:"9",name:"Nose Wrinkler",muscularBasis:"levator labii superioris alaeque nasi",links:["https://en.wikipedia.org/wiki/Levator_labii_superioris_alaeque_nasi"],faceSection:"Nose"},{id:"10",name:"Upper Lip Raiser",muscularBasis:"levator labii superioris, caput infraorbitalis",links:["https://en.wikipedia.org/wiki/Levator_labii_superioris"],faceSection:"Mouth"},{id:"11",name:"Nasolabial Deepener",muscularBasis:"zygomaticus minor",links:["https://en.wikipedia.org/wiki/Zygomaticus_minor"],faceSection:"Cheeks"},{id:"12",name:"Lip Corner Puller",muscularBasis:"zygomaticus major",links:["https://en.wikipedia.org/wiki/Zygomaticus_major"],faceSection:"Mouth"},{id:"13",name:"Sharp Lip Puller",muscularBasis:"levator anguli oris (also known as caninus)",links:["https://en.wikipedia.org/wiki/Levator_anguli_oris"],faceSection:"Mouth"},{id:"14",name:"Dimpler",muscularBasis:"buccinator",links:["https://en.wikipedia.org/wiki/Buccinator"],faceSection:"Cheeks"},{id:"15",name:"Lip Corner Depressor",muscularBasis:"depressor anguli oris (also known as triangularis)",links:["https://en.wikipedia.org/wiki/Depressor_anguli_oris"],faceSection:"Mouth"},{id:"16",name:"Lower Lip Depressor",muscularBasis:"depressor labii inferioris",links:["https://en.wikipedia.org/wiki/Depressor_labii_inferioris"],faceSection:"Mouth"},{id:"17",name:"Chin Raiser",muscularBasis:"mentalis",links:["https://en.wikipedia.org/wiki/Mentalis"],faceSection:"Chin"},{id:"18",name:"Lip Pucker",muscularBasis:"incisivii labii superioris and incisivii labii inferioris",links:[],faceSection:"Mouth"},{id:"19",name:"Tongue Show",muscularBasis:"",links:[],faceSection:"Mouth"},{id:"20",name:"Lip Stretcher",muscularBasis:"risorius with platysma",links:["https://en.wikipedia.org/wiki/Risorius","https://en.wikipedia.org/wiki/Platysma"],faceSection:"Mouth"},{id:"21",name:"Neck Tightener",muscularBasis:"platysma",links:["https://en.wikipedia.org/wiki/Platysma"],faceSection:"Neck"},{id:"22",name:"Lip Funneler",muscularBasis:"orbicularis oris",links:["https://en.wikipedia.org/wiki/Orbicularis_oris"],faceSection:"Mouth"},{id:"23",name:"Lip Tightener",muscularBasis:"orbicularis oris",links:["https://en.wikipedia.org/wiki/Orbicularis_oris"],faceSection:"Mouth"},{id:"24",name:"Lip Pressor",muscularBasis:"orbicularis oris",links:["https://en.wikipedia.org/wiki/Orbicularis_oris"],faceSection:"Mouth"},{id:"25",name:"Lips Part",muscularBasis:"depressor labii inferioris, or relaxation of mentalis or orbicularis oris",links:["https://en.wikipedia.org/wiki/Depressor_labii_inferioris","https://en.wikipedia.org/wiki/Mentalis","https://en.wikipedia.org/wiki/Orbicularis_oris"],faceSection:"Mouth"},{id:"26",name:"Jaw Drop",muscularBasis:"masseter; relaxed temporalis and internal pterygoid",links:["https://en.wikipedia.org/wiki/Masseter","https://en.wikipedia.org/wiki/Temporalis","https://en.wikipedia.org/wiki/Medial_pterygoid_muscle"],faceSection:"Jaw"},{id:"27",name:"Mouth Stretch",muscularBasis:"pterygoids, digastric",links:["https://en.wikipedia.org/wiki/Pterygoid_bone","https://en.wikipedia.org/wiki/Digastric_muscle"],faceSection:"Mouth"},{id:"28",name:"Lip Suck",muscularBasis:"orbicularis oris",links:["https://en.wikipedia.org/wiki/Orbicularis_oris"],faceSection:"Mouth"},{id:"29",name:"Jaw Thrust",muscularBasis:"",links:[],faceSection:"Jaw"},{id:"30L",name:"Jaw Sideways Left",muscularBasis:"",links:[],faceSection:"Jaw"},{id:"30R",name:"Jaw Sideways Right",muscularBasis:"",links:[],faceSection:"Jaw"},{id:"31",name:"Jaw Clencher",muscularBasis:"masseter, temporalis",links:["https://en.wikipedia.org/wiki/Masseter","https://en.wikipedia.org/wiki/Temporalis"],faceSection:"Jaw"},{id:"32",name:"Lip Bite",muscularBasis:"orbicularis oris",links:["https://en.wikipedia.org/wiki/Orbicularis_oris"],faceSection:"Mouth"},{id:"33",name:"Cheek Blow",muscularBasis:"",links:[],faceSection:"Cheeks"},{id:"34",name:"Cheek Puff",muscularBasis:"",links:[],faceSection:"Cheeks"},{id:"35",name:"Cheek Suck",muscularBasis:"",links:[],faceSection:"Cheeks"},{id:"36",name:"Tongue Bulge",muscularBasis:"",links:[],faceSection:"Mouth"},{id:"36L",name:"Tongue Bulge L",muscularBasis:"",links:[],faceSection:"Mouth"},{id:"36R",name:"Tongue Bulge R",muscularBasis:"",links:[],faceSection:"Mouth"},{id:"37",name:"Lip Wipe",muscularBasis:"",links:[],faceSection:"Mouth"},{id:"38",name:"Nostril Dilator",muscularBasis:"",links:[],faceSection:"Nose"},{id:"39",name:"Nostril Compressor",muscularBasis:"",links:[],faceSection:"Nose"},{id:"41",name:"Glabella Lowerer",muscularBasis:"",links:[],faceSection:"Forehead"},{id:"42",name:"Inner Eyebrow Lowerer",muscularBasis:"",links:[],faceSection:"Brow area"},{id:"43",name:"Eyes Closed",muscularBasis:"",links:[],faceSection:"Eyelids"},{id:"44",name:"Eyebrow Gatherer",muscularBasis:"",links:[],faceSection:"Brow area"},{id:"45",name:"Blink",muscularBasis:"",links:[],faceSection:"Eyelids"},{id:"46R",name:"Wink Right",muscularBasis:"",links:[],faceSection:"Eyelids"},{id:"46L",name:"Wink Left",muscularBasis:"",links:[],faceSection:"Eyelids"},{id:"51",name:"Head Turn Left",muscularBasis:"",links:[],faceSection:"Head"},{id:"52",name:"Head Turn Right",muscularBasis:"",links:[],faceSection:"Head"},{id:"53",name:"Head Up",muscularBasis:"",links:[],faceSection:"Head"},{id:"54",name:"Head Down",muscularBasis:"",links:[],faceSection:"Head"},{id:"55",name:"Head Tilt Left",muscularBasis:"",links:[],faceSection:"Head"},{id:"M55",name:"Head Tilt Left Bis",muscularBasis:"",links:[],faceSection:"Head"},{id:"56",name:"Head Tilt Right",muscularBasis:"",links:[],faceSection:"Head"},{id:"M56",name:"Head Tilt Right Bis",muscularBasis:"",links:[],faceSection:"Head"},{id:"57",name:"Head Forward",muscularBasis:"",links:[],faceSection:"Head"},{id:"M57",name:"Head Forward Bis",muscularBasis:"",links:[],faceSection:"Head"},{id:"58",name:"Head Back",muscularBasis:"",links:[],faceSection:"Head"},{id:"M59",name:"Head Shake Up And Down",muscularBasis:"",links:[],faceSection:"Head"},{id:"M60",name:"Head Shake Side To Side",muscularBasis:"",links:[],faceSection:"Head"},{id:"M83",name:"Head Upward And To The Side",muscularBasis:"",links:[],faceSection:"Head"},{id:"61",name:"Eyes Turn Left",muscularBasis:"",links:[],faceSection:"Eyes"},{id:"M61",name:"Eyes Left",muscularBasis:"",links:[],faceSection:"Eyes"},{id:"62",name:"Eyes Turn Right",muscularBasis:"",links:[],faceSection:"Eyes"},{id:"M62",name:"Eyes Right",muscularBasis:"",links:[],faceSection:"Eyes"},{id:"63",name:"Eyes Up",muscularBasis:"",links:[],faceSection:"Eyes"},{id:"64",name:"Eyes Down",muscularBasis:"",links:[],faceSection:"Eyes"},{id:"65",name:"Walleye",muscularBasis:"",links:["https://en.wikipedia.org/wiki/Strabismus"],faceSection:"Eyes"},{id:"66",name:"Cross-eye",muscularBasis:"",links:["https://en.wikipedia.org/wiki/Strabismus"],faceSection:"Eyes"},{id:"M68",name:"Upward Rolling Of Eyes",muscularBasis:"",links:[],faceSection:"Eyes"},{id:"69",name:"Eyes Positioned To Look At Other Person",muscularBasis:"",links:[],faceSection:"Eyes"},{id:"M69",name:"Head Or Eyes Look At Other Person",muscularBasis:"",links:[],faceSection:"Head/Eyes"}],Zj=[{name:"Neutral",code:""},{name:"Happiness",code:"6+12"},{name:"Sadness",code:"1+4+15"},{name:"Surprise",code:"1+2+5B+26"},{name:"Fear",code:"1+2+4+5+7+20+26"},{name:"Anger",code:"4+5+7+23"},{name:"Disgust",code:"9+15+16"},{name:"Contempt",code:"R12A+R14A"}],eV=[{id:0,name:"ae ax ah"},{id:1,name:"aa"},{id:2,name:"ao"},{id:3,name:"ey eh uh"},{id:4,name:"er"},{id:5,name:"y iy ih ix"},{id:6,name:"w uw"},{id:7,name:"ow"},{id:8,name:"aw"},{id:9,name:"oy"},{id:10,name:"ay"},{id:11,name:"h"},{id:12,name:"r"},{id:13,name:"l"},{id:14,name:"s z"},{id:15,name:"sh ch jh zh"},{id:16,name:"th dh"},{id:17,name:"f v"},{id:18,name:"d t n"},{id:19,name:"k g ng"},{id:20,name:"p b m"}],tV=e=>{let{auStates:n,setAuStates:i,animationManager:r,drawerControls:o,setDrawerControls:s}=e;const a=XM(),[c,l]=(0,t.useState)([]),u=(0,t.useMemo)((()=>Qj.reduce(((e,t)=>((e[t.faceSection||"Other"]=e[t.faceSection||"Other"]||[]).push(t),e)),{})),[]);(0,t.useEffect)((()=>{if(!o.showUnusedSliders){const e=Object.values(n).reduce(((e,t,n)=>{if(t.intensity>0){var i;const n=(null===(i=Qj.find((e=>e.id===t.id)))||void 0===i?void 0:i.faceSection)||"Other";e.add(n)}return e}),new Set);l([...e])}}),[n,o.showUnusedSliders]);const d=(0,t.useMemo)((()=>o.showUnusedSliders?Object.entries(u):Object.entries(u).filter((e=>{let[t,i]=e;return i.some((e=>{var t;return(null===(t=n[e.id])||void 0===t?void 0:t.intensity)>0}))}))),[u,n,o.showUnusedSliders]);return(0,ug.jsxs)(ug.Fragment,{children:[(0,ug.jsx)(nA,{icon:(0,ug.jsx)(Jj,{}),onClick:()=>s({isOpen:!o.isOpen}),position:"fixed",top:"1rem",left:"1rem",zIndex:"overlay"}),(0,ug.jsx)(CA,{isOpen:o.isOpen,placement:"left",onClose:()=>s({isOpen:!1}),size:"md",children:(0,ug.jsxs)(gO,{children:[(0,ug.jsx)(yO,{}),(0,ug.jsx)(SO,{borderBottomWidth:"1px",children:"Adjust Animation Units"}),(0,ug.jsxs)(bO,{direction:"column",p:4,boxShadow:"base",position:"sticky",top:0,zIndex:"sticky",bg:"gray.50",children:[(0,ug.jsxs)(bO,{justifyContent:"space-between",mb:4,alignItems:"center",children:[(0,ug.jsx)(_O,{children:"Show Unused Sliders"}),(0,ug.jsx)(KO,{isChecked:o.showUnusedSliders,onChange:()=>s({showUnusedSliders:!o.showUnusedSliders}),colorScheme:"teal"})]}),(0,ug.jsx)(eA,{colorScheme:"teal",onClick:()=>{if(r){r.setFaceToNeutral(750),a({title:"Face reset to neutral.",description:"All action units have been reset.",status:"info",duration:3e3,isClosable:!0});const e=Object.keys(n).reduce(((e,t)=>(e[t]={...n[t],intensity:0,notes:n[t].notes},e)),{});i(e),l([])}},children:"Set Face to Neutral"})]}),(0,ug.jsx)(JO,{children:(0,ug.jsx)(SD,{allowMultiple:!0,defaultIndex:c.map((e=>d.findIndex((t=>{let[n]=t;return n===e})))),children:d.map(((e,t)=>{let[s,a]=e;return(0,ug.jsx)(bD,{children:e=>{let{isExpanded:t}=e;return(0,ug.jsxs)(ug.Fragment,{children:[(0,ug.jsx)("h2",{children:(0,ug.jsxs)(_D,{onClick:()=>{l(t?e=>e.filter((e=>e!==s)):e=>[...e,s])},children:[(0,ug.jsx)(wD,{flex:"1",textAlign:"left",children:s}),(0,ug.jsx)(ED,{})]})}),(0,ug.jsx)(AD,{pb:4,children:(0,ug.jsx)(OD,{spacing:4,children:a.map((e=>{var t,s;const a=n[e.id];return a&&(o.showUnusedSliders||a.intensity>0)?(0,ug.jsx)(wD,{w:"100%",children:(0,ug.jsx)(Kj,{au:e.id,name:e.name,intensity:a.intensity,notes:a.notes,muscularBasis:null===(t=Qj[e.id])||void 0===t?void 0:t.muscularBasis,links:null===(s=Qj[e.id])||void 0===s?void 0:s.links,onChange:(t,n)=>((e,t,n)=>{if(i((i=>({...i,[e]:{...i[e],intensity:t,notes:null!==n&&void 0!==n?n:i[e].notes}}))),r&&r.applyAUChange(e,t,0),t>0){var o;const t=(null===(o=Qj.find((t=>t.id===e)))||void 0===o?void 0:o.faceSection)||"Other";c.includes(t)||l((e=>[...e,t]))}})(e.id,t,n),animationManager:r})},e.id):null}))})})]})}},s)}))})})]})})]})},nV=(0,t.createContext)(),iV=e=>{let{children:n}=e;const[i,r]=(0,t.useState)({isLoaded:!1,engine:null,facslib:null});return(0,t.useEffect)((()=>{const e=e=>{r({isLoaded:!0,engine:e.detail.engine,facslib:e.detail.facslib})};return document.addEventListener("unityLoaded",e),()=>document.removeEventListener("unityLoaded",e)}),[]),(0,ug.jsx)(nV.Provider,{value:i,children:n})};class rV{constructor(e,t){if(rV.instance)return rV.instance;this.facsLib=e,this.setAuStates=t,rV.instance=this,this.currentIntensity=Qj.reduce(((e,t)=>({...e,[t.id]:0})),{})}scheduleChange(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return new Promise((o=>{setTimeout((()=>{this.applyAUChange(e,t,n,"both",.5,r),setTimeout((()=>o()),n+i)}),i)}))}applyAUChange(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"both",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";this.facsLib.setTargetAU(e.replace("AU",""),Math.abs(Number(t)),"l",r),this.facsLib.updateEngine(),this.setAuStates((n=>({...n,[e]:{...n[e],intensity:t,side:i,smoothTime:r,notes:o}})))}setFaceToNeutral(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:750;Qj.forEach((t=>{this.scheduleChange(t.id,0,e,0,"")})),this.facsLib.updateEngine()}applyChangesFromJson(e){this.setFaceToNeutral(750),setTimeout((()=>{JSON.parse(e).forEach((e=>{let{id:t,intensity:n,duration:i,explanation:r=""}=e;this.scheduleChange(t,90*n,i,0,r)}))}),800)}}function oV(e){e.scheduleChange("54",0,900,0)}const sV=class{constructor(e,t){this.triggerPhrases=this.prepareTriggerPhrasesRegex(e),this.onTriggerDetected=t,this.recognition=null,this.isRecognizing=!1,this.initializeRecognition()}initializeRecognition(){const e=window.SpeechRecognition||window.webkitSpeechRecognition;e?(this.recognition=new e,this.recognition.lang="en-US",this.recognition.interimResults=!0,this.recognition.continuous=!0,this.recognition.onresult=e=>this.handleResult(e),this.recognition.onend=()=>this.handleEnd(),this.recognition.onerror=e=>this.handleError(e)):console.error("Speech recognition is not supported in this browser.")}prepareTriggerPhrasesRegex(e){const t=Array.isArray(e)?e.join("|"):e;return new RegExp(t.split(" ").join("\\s+"),"i")}start(){if(!this.isRecognizing&&this.recognition)try{this.recognition.start(),this.isRecognizing=!0,console.log("Speech recognition started.")}catch(e){console.log("Error starting speech recognition:",e)}}handleResult(e){const t=e.results[e.resultIndex],n=t[0].transcript;console.log("Heard: ".concat(n)),t.isFinal&&this.triggerPhrases.test(n)&&(console.log("Trigger phrase matched: ".concat(n)),this.onTriggerDetected(n))}handleEnd(){this.isRecognizing=!1,console.log("Speech recognition ended, attempting to restart..."),this.restartRecognition()}handleError(e){this.isRecognizing=!1,console.log("Speech recognition error, restarting."),"no-speech"!==e.error&&"audio-capture"!==e.error||this.restartRecognition()}restartRecognition(){setTimeout((()=>{this.isRecognizing||this.start()}),1e3)}},aV="4.28.4";let cV,lV,uV,dV,hV,pV,fV,vV,mV,gV=!1,yV=null,SV=null,bV=null,_V=null;class wV{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}cV||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{auto:!1};if(gV)throw new Error("you must `import 'openai/shims/".concat(e.kind,"'` before importing anything else from openai"));if(cV)throw new Error("can't `import 'openai/shims/".concat(e.kind,"'` after `import 'openai/shims/").concat(cV,"'`"));gV=t.auto,cV=e.kind,lV=e.fetch,yV=e.Request,SV=e.Response,bV=e.Headers,uV=e.FormData,_V=e.Blob,dV=e.File,hV=e.ReadableStream,pV=e.getMultipartRequestOptions,fV=e.getDefaultAgent,vV=e.fileFromPath,mV=e.isFsReadStream}(function(){let{manuallyImported:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e?"You may need to use polyfills":"Add one of these imports before your first `import \u2026 from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,i,r,o;try{n=fetch,i=Request,r=Response,o=Headers}catch(s){throw new Error("this environment is missing the following Web Fetch API type: ".concat(s.message,". ").concat(t))}return{kind:"web",fetch:n,Request:i,Response:r,Headers:o,FormData:"undefined"!==typeof FormData?FormData:class{constructor(){throw new Error("file uploads aren't supported in this environment yet as 'FormData' is undefined. ".concat(t))}},Blob:"undefined"!==typeof Blob?Blob:class{constructor(){throw new Error("file uploads aren't supported in this environment yet as 'Blob' is undefined. ".concat(t))}},File:"undefined"!==typeof File?File:class{constructor(){throw new Error("file uploads aren't supported in this environment yet as 'File' is undefined. ".concat(t))}},ReadableStream:"undefined"!==typeof ReadableStream?ReadableStream:class{constructor(){throw new Error("streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ".concat(t))}},getMultipartRequestOptions:async(e,t)=>({...t,body:new wV(e)}),getDefaultAgent:e=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0});class xV extends Error{}class CV extends xV{constructor(e,t,n,i){super("".concat(CV.makeMessage(e,t,n))),this.status=e,this.headers=i;const r=t;this.error=r,this.code=null===r||void 0===r?void 0:r.code,this.param=null===r||void 0===r?void 0:r.param,this.type=null===r||void 0===r?void 0:r.type}static makeMessage(e,t,n){const i=null!==t&&void 0!==t&&t.message?"string"===typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&i?"".concat(e," ").concat(i):e?"".concat(e," status code (no body)"):i||"(no status code or body)"}static generate(e,t,n,i){if(!e)return new PV({cause:gH(t)});const r=null===t||void 0===t?void 0:t.error;return 400===e?new RV(e,r,n,i):401===e?new MV(e,r,n,i):403===e?new AV(e,r,n,i):404===e?new IV(e,r,n,i):409===e?new kV(e,r,n,i):422===e?new OV(e,r,n,i):429===e?new DV(e,r,n,i):e>=500?new LV(e,r,n,i):new CV(e,r,n,i)}}class EV extends CV{constructor(){let{message:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class PV extends CV{constructor(e){let{message:t,cause:n}=e;super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}}class TV extends PV{constructor(){let{message:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({message:null!==e&&void 0!==e?e:"Request timed out."})}}class RV extends CV{constructor(){super(...arguments),this.status=400}}class MV extends CV{constructor(){super(...arguments),this.status=401}}class AV extends CV{constructor(){super(...arguments),this.status=403}}class IV extends CV{constructor(){super(...arguments),this.status=404}}class kV extends CV{constructor(){super(...arguments),this.status=409}}class OV extends CV{constructor(){super(...arguments),this.status=422}}class DV extends CV{constructor(){super(...arguments),this.status=429}}class LV extends CV{}class NV{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;const i=new zV;return new NV((async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const n of async function*(){if(!e.body)throw t.abort(),new xV("Attempted to iterate over a response with no body");const n=new FV,r=UV(e.body);for await(const e of r)for(const t of n.decode(e)){const e=i.decode(t);e&&(yield e)}for(const e of n.flush()){const t=i.decode(e);t&&(yield t)}}())if(!r)if(n.data.startsWith("[DONE]"))r=!0;else if(null===n.event){let e;try{e=JSON.parse(n.data)}catch(o){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),o}if(e&&e.error)throw new CV(void 0,e.error,void 0,void 0);yield e}r=!0}catch(o){if(o instanceof Error&&"AbortError"===o.name)return;throw o}finally{r||t.abort()}}),t)}static fromReadableStream(e,t){let n=!1;return new NV((async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(const t of async function*(){const t=new FV,n=UV(e);for await(const e of n)for(const n of t.decode(e))yield n;for(const e of t.flush())yield e}())i||t&&(yield JSON.parse(t));i=!0}catch(r){if(r instanceof Error&&"AbortError"===r.name)return;throw r}finally{i||t.abort()}}),t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),i=i=>({next:()=>{if(0===i.length){const i=n.next();e.push(i),t.push(i)}return i.shift()}});return[new NV((()=>i(e)),this.controller),new NV((()=>i(t)),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new hV({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:i,done:r}=await t.next();if(r)return e.close();const o=n.encode(JSON.stringify(i)+"\n");e.enqueue(o)}catch(_Q){e.error(_Q)}},async cancel(){var e,n;await(null===(e=(n=t).return)||void 0===e?void 0:e.call(n))}})}}class zV{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,i]=function(e,t){const n=e.indexOf(t);if(-1!==n)return[e.substring(0,n),t,e.substring(n+t.length)];return[e,"",""]}(e,":");return i.startsWith(" ")&&(i=i.substring(1)),"event"===t?this.event=i:"data"===t&&this.data.push(i),null}}class FV{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const n=FV.NEWLINE_CHARS.has(t[t.length-1]||"");let i=t.split(FV.NEWLINE_REGEXP);return 1!==i.length||n?(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),n||(this.buffer=[i.pop()||""]),i):(this.buffer.push(i[0]),[])}decodeText(e){if(null==e)return"";if("string"===typeof e)return e;if("undefined"!==typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new xV("Unexpected: received non-Uint8Array (".concat(e.constructor.name,') stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.'))}if("undefined"!==typeof TextDecoder){var t;if(e instanceof Uint8Array||e instanceof ArrayBuffer)return null!==(t=this.textDecoder)&&void 0!==t||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new xV("Unexpected: received non-Uint8Array/ArrayBuffer (".concat(e.constructor.name,") in a web platform. Please report this error."))}throw new xV("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}function UV(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return null!==e&&void 0!==e&&e.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}FV.NEWLINE_CHARS=new Set(["\n","\r","\v","\f","\x1c","\x1d","\x1e","\x85","\u2028","\u2029"]),FV.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;const BV=e=>null!=e&&"object"===typeof e&&"string"===typeof e.url&&"function"===typeof e.blob,jV=e=>null!=e&&"object"===typeof e&&"number"===typeof e.size&&"string"===typeof e.type&&"function"===typeof e.text&&"function"===typeof e.slice&&"function"===typeof e.arrayBuffer,VV=e=>(e=>null!=e&&"object"===typeof e&&"string"===typeof e.name&&"number"===typeof e.lastModified&&jV(e))(e)||BV(e)||mV(e);async function HV(e,t){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e=await e,BV(e)){var r;const n=await e.blob();return t||(t=null!==(r=new URL(e.url).pathname.split(/[\\/]/).pop())&&void 0!==r?r:"unknown_file"),new dV([n],t,i)}const o=await async function(e){let t=[];if("string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(jV(e))t.push(await e.arrayBuffer());else{var n;if(!GV(e))throw new Error("Unexpected data type: ".concat(typeof e,"; constructor: ").concat(null===e||void 0===e||null===(n=e.constructor)||void 0===n?void 0:n.name,"; props: ").concat(function(e){const t=Object.getOwnPropertyNames(e);return"[".concat(t.map((e=>'"'.concat(e,'"'))).join(", "),"]")}(e)));for await(const n of e)t.push(n)}return t}(e);if(t||(t=null!==(n=function(e){var t;return WV(e.name)||WV(e.filename)||(null===(t=WV(e.path))||void 0===t?void 0:t.split(/[\\/]/).pop())}(e))&&void 0!==n?n:"unknown_file"),!i.type){var s;const e=null===(s=o[0])||void 0===s?void 0:s.type;"string"===typeof e&&(i={...i,type:e})}return new dV(o,t,i)}const WV=e=>"string"===typeof e?e:"undefined"!==typeof Buffer&&e instanceof Buffer?String(e):void 0,GV=e=>null!=e&&"object"===typeof e&&"function"===typeof e[Symbol.asyncIterator],qV=e=>e&&"object"===typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],XV=async e=>{const t=await KV(e.body);return pV(t,e)},KV=async e=>{const t=new uV;return await Promise.all(Object.entries(e||{}).map((e=>{let[n,i]=e;return JV(t,n,i)}))),t},JV=async(e,t,n)=>{if(void 0!==n){if(null==n)throw new TypeError('Received null for "'.concat(t,"\"; to pass null in FormData, you must use the string 'null'"));if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)e.append(t,String(n));else if(VV(n)){const i=await HV(n);e.append(t,i)}else if(Array.isArray(n))await Promise.all(n.map((n=>JV(e,t+"[]",n))));else{if("object"!==typeof n)throw new TypeError("Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ".concat(n," instead"));await Promise.all(Object.entries(n).map((n=>{let[i,r]=n;return JV(e,"".concat(t,"[").concat(i,"]"),r)})))}}};var YV,$V=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},QV=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};async function ZV(e){const{response:t}=e;if(e.options.stream)return wH("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):NV.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type");if((null===n||void 0===n?void 0:n.includes("application/json"))||(null===n||void 0===n?void 0:n.includes("application/vnd.api+json"))){const e=await t.json();return wH("response",t.status,t.url,t.headers,e),e}const i=await t.text();return wH("response",t.status,t.url,t.headers,i),i}class eH extends Promise{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ZV;super((e=>{e(null)})),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new eH(this.responsePromise,(async t=>e(await this.parseResponse(t))))}asResponse(){return this.responsePromise.then((e=>e.response))}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class tH{constructor(e){let{baseURL:t,maxRetries:n=2,timeout:i=6e5,httpAgent:r,fetch:o}=e;this.baseURL=t,this.maxRetries=mH("maxRetries",n),this.timeout=mH("timeout",i),this.httpAgent=r,this.fetch=null!==o&&void 0!==o?o:lV}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...dH(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return"stainless-node-retry-".concat(xH())}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then((n=>({method:e,path:t,...n}))))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if("string"===typeof e){if("undefined"!==typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!==typeof TextEncoder){return(new TextEncoder).encode(e).length.toString()}}return null}buildRequest(e){var t,n,i,r,o,s;const{method:a,path:c,query:l,headers:u={}}=e,d=qV(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,h=this.calculateContentLength(d),p=this.buildURL(c,l);"timeout"in e&&mH("timeout",e.timeout);const f=null!==(t=e.timeout)&&void 0!==t?t:this.timeout,v=null!==(n=null!==(i=e.httpAgent)&&void 0!==i?i:this.httpAgent)&&void 0!==n?n:fV(p),m=f+1e3;"number"===typeof(null===v||void 0===v||null===(r=v.options)||void 0===r?void 0:r.timeout)&&m>(null!==(o=v.options.timeout)&&void 0!==o?o:0)&&(v.options.timeout=m),this.idempotencyHeader&&"get"!==a&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=e.idempotencyKey);return{req:{method:a,...d&&{body:d},headers:this.buildHeaders({options:e,headers:u,contentLength:h}),...v&&{agent:v},signal:null!==(s=e.signal)&&void 0!==s?s:null},url:p,timeout:f}}buildHeaders(e){let{options:t,headers:n,contentLength:i}=e;const r={};i&&(r["content-length"]=i);return _H(r,this.defaultHeaders(t)),_H(r,n),qV(t.body)&&"node"!==cV&&delete r["content-type"],this.validateHeaders(r,n),r}async prepareOptions(e){}async prepareRequest(e,t){let{url:n,options:i}=t}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map((e=>[...e]))):{...e}:{}}makeStatusError(e,t,n,i){return CV.generate(e,t,n,i)}request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new eH(this.makeRequest(e,t))}async makeRequest(e,t){var n;const i=await e;var r;null==t&&(t=null!==(r=i.maxRetries)&&void 0!==r?r:this.maxRetries);await this.prepareOptions(i);const{req:o,url:s,timeout:a}=this.buildRequest(i);if(await this.prepareRequest(o,{url:s,options:i}),wH("request",s,i,o.headers),null!==(n=i.signal)&&void 0!==n&&n.aborted)throw new EV;const c=new AbortController,l=await this.fetchWithTimeout(s,o,a,c).catch(gH);if(l instanceof Error){var u;if(null!==(u=i.signal)&&void 0!==u&&u.aborted)throw new EV;if(t)return this.retryRequest(i,t);if("AbortError"===l.name)throw new TV;throw new PV({cause:l})}const d=rH(l.headers);if(!l.ok){if(t&&this.shouldRetry(l)){const e="retrying, ".concat(t," attempts remaining");return wH("response (error; ".concat(e,")"),l.status,s,d),this.retryRequest(i,t,d)}const e=await l.text().catch((e=>gH(e).message)),n=hH(e),r=n?void 0:e;wH("response (error; ".concat(t?"(error; no more retries left)":"(error; not retryable)",")"),l.status,s,d,r);throw this.makeStatusError(l.status,n,r,d)}return{response:l,options:i,controller:c}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new iH(this,n,e)}buildURL(e,t){const n=fH(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return SH(i)||(t={...i,...t}),"object"===typeof t&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter((e=>{let[t,n]=e;return"undefined"!==typeof n})).map((e=>{let[t,n]=e;if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n));if(null===n)return"".concat(encodeURIComponent(t),"=");throw new xV("Cannot stringify type ".concat(typeof n,"; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case."))})).join("&")}async fetchWithTimeout(e,t,n,i){const{signal:r,...o}=t||{};r&&r.addEventListener("abort",(()=>i.abort()));const s=setTimeout((()=>i.abort()),n);return this.getRequestClient().fetch.call(void 0,e,{signal:i.signal,...o}).finally((()=>{clearTimeout(s)}))}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||(409===e.status||(429===e.status||e.status>=500)))}async retryRequest(e,t,n){let i;const r=null===n||void 0===n?void 0:n["retry-after-ms"];if(r){const e=parseFloat(r);Number.isNaN(e)||(i=e)}const o=null===n||void 0===n?void 0:n["retry-after"];if(o&&!i){const e=parseFloat(o);i=Number.isNaN(e)?Date.parse(o)-Date.now():1e3*e}if(!(i&&0<=i&&i<6e4)){var s;const n=null!==(s=e.maxRetries)&&void 0!==s?s:this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,n)}return await vH(i),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}getUserAgent(){return"".concat(this.constructor.name,"/JS ").concat(aV)}}class nH{constructor(e,t,n,i){YV.set(this,void 0),$V(this,YV,e,"f"),this.options=i,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new xV("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&"object"===typeof t.query)t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[t,i]of n)e.url.searchParams.set(t,i);t.query=void 0,t.path=e.url.toString()}return await QV(this,YV,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(YV=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class iH extends eH{constructor(e,t,n){super(t,(async t=>new n(e,t.response,await ZV(t),t.options)))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}const rH=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),oH={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0,__streamClass:!0},sH=e=>"object"===typeof e&&null!==e&&!SH(e)&&Object.keys(e).every((e=>bH(oH,e))),aH=()=>{if("undefined"!==typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aV,"X-Stainless-OS":lH(Deno.build.os),"X-Stainless-Arch":cH(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if("undefined"!==typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aV,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"other:".concat(EdgeRuntime),"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!==typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aV,"X-Stainless-OS":lH(process.platform),"X-Stainless-Arch":cH(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=function(){if("undefined"===typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e){const n=e[1]||0,i=e[2]||0,r=e[3]||0;return{browser:t,version:"".concat(n,".").concat(i,".").concat(r)}}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aV,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"browser:".concat(e.browser),"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aV,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};const cH=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?"other:".concat(e):"unknown",lH=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?"Other:".concat(e):"Unknown";let uH;const dH=()=>{var e;return null!==(e=uH)&&void 0!==e?e:uH=aH()},hH=e=>{try{return JSON.parse(e)}catch(_Q){return}},pH=new RegExp("^(?:[a-z]+:)?//","i"),fH=e=>pH.test(e),vH=e=>new Promise((t=>setTimeout(t,e))),mH=(e,t)=>{if("number"!==typeof t||!Number.isInteger(t))throw new xV("".concat(e," must be an integer"));if(t<0)throw new xV("".concat(e," must be a positive integer"));return t},gH=e=>e instanceof Error?e:new Error(e),yH=e=>{var t,n,i,r;return"undefined"!==typeof process?null!==(t=null===(n={NODE_ENV:"production",PUBLIC_URL:"/EVA-libre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===n||null===(n=n[e])||void 0===n?void 0:n.trim())&&void 0!==t?t:void 0:"undefined"!==typeof Deno?null===(i=Deno.env)||void 0===i||null===(r=i.get)||void 0===r||null===(r=r.call(i,e))||void 0===r?void 0:r.trim():void 0};function SH(e){if(!e)return!0;for(const t in e)return!1;return!0}function bH(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _H(e,t){for(const n in t){if(!bH(t,n))continue;const i=n.toLowerCase();if(!i)continue;const r=t[n];null===r?delete e[i]:void 0!==r&&(e[i]=r)}}function wH(e){if("undefined"!==typeof process&&"true"==={NODE_ENV:"production",PUBLIC_URL:"/EVA-libre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];console.log("OpenAI:DEBUG:".concat(e),...n)}}const xH=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));class CH extends nH{constructor(e,t,n,i){super(e,t,n,i),this.data=n.data||[],this.object=n.object}getPaginatedItems(){var e;return null!==(e=this.data)&&void 0!==e?e:[]}nextPageParams(){return null}nextPageInfo(){return null}}class EH extends nH{constructor(e,t,n,i){super(e,t,n,i),this.data=n.data||[]}getPaginatedItems(){var e;return null!==(e=this.data)&&void 0!==e?e:[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var e;const t=this.getPaginatedItems();if(!t.length)return null;const n=null===(e=t[t.length-1])||void 0===e?void 0:e.id;return n?{params:{after:n}}:null}}class PH{constructor(e){this._client=e}}class TH extends PH{create(e,t){var n;return this._client.post("/completions",{body:e,...t,stream:null!==(n=e.stream)&&void 0!==n&&n})}}TH||(TH={});class RH extends PH{create(e,t){var n;return this._client.post("/chat/completions",{body:e,...t,stream:null!==(n=e.stream)&&void 0!==n&&n})}}RH||(RH={});class MH extends PH{constructor(){super(...arguments),this.completions=new RH(this._client)}}!function(e){e.Completions=RH}(MH||(MH={}));class AH extends PH{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}AH||(AH={});class IH extends PH{create(e,t){return this._client.post("/files",XV({body:e,...t}))}retrieve(e,t){return this._client.get("/files/".concat(e),t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return sH(e)?this.list({},e):this._client.getAPIList("/files",kH,{query:e,...t})}del(e,t){return this._client.delete("/files/".concat(e),t)}content(e,t){return this._client.get("/files/".concat(e,"/content"),{...t,__binaryResponse:!0})}retrieveContent(e,t){return this._client.get("/files/".concat(e,"/content"),{...t,headers:{Accept:"application/json",...null===t||void 0===t?void 0:t.headers}})}async waitForProcessing(e){let{pollInterval:t=5e3,maxWait:n=18e5}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new Set(["processed","error","deleted"]),r=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await vH(t),o=await this.retrieve(e),Date.now()-r>n)throw new TV({message:"Giving up on waiting for file ".concat(e," to finish processing after ").concat(n," milliseconds.")});return o}}class kH extends CH{}!function(e){e.FileObjectsPage=kH}(IH||(IH={}));class OH extends PH{createVariation(e,t){return this._client.post("/images/variations",XV({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",XV({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}OH||(OH={});class DH extends PH{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:!0})}}DH||(DH={});class LH extends PH{create(e,t){return this._client.post("/audio/transcriptions",XV({body:e,...t}))}}LH||(LH={});class NH extends PH{create(e,t){return this._client.post("/audio/translations",XV({body:e,...t}))}}NH||(NH={});class zH extends PH{constructor(){super(...arguments),this.transcriptions=new LH(this._client),this.translations=new NH(this._client),this.speech=new DH(this._client)}}!function(e){e.Transcriptions=LH,e.Translations=NH,e.Speech=DH}(zH||(zH={}));class FH extends PH{create(e,t){return this._client.post("/moderations",{body:e,...t})}}FH||(FH={});class UH extends PH{retrieve(e,t){return this._client.get("/models/".concat(e),t)}list(e){return this._client.getAPIList("/models",BH,e)}del(e,t){return this._client.delete("/models/".concat(e),t)}}class BH extends CH{}!function(e){e.ModelsPage=BH}(UH||(UH={}));class jH extends PH{create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get("/fine_tuning/jobs/".concat(e),t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return sH(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",VH,{query:e,...t})}cancel(e,t){return this._client.post("/fine_tuning/jobs/".concat(e,"/cancel"),t)}listEvents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return sH(t)?this.listEvents(e,{},t):this._client.getAPIList("/fine_tuning/jobs/".concat(e,"/events"),HH,{query:t,...n})}}class VH extends EH{}class HH extends EH{}!function(e){e.FineTuningJobsPage=VH,e.FineTuningJobEventsPage=HH}(jH||(jH={}));class WH extends PH{constructor(){super(...arguments),this.jobs=new jH(this._client)}}!function(e){e.Jobs=jH,e.FineTuningJobsPage=VH,e.FineTuningJobEventsPage=HH}(WH||(WH={}));class GH extends PH{create(e,t,n){return this._client.post("/assistants/".concat(e,"/files"),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...null===n||void 0===n?void 0:n.headers}})}retrieve(e,t,n){return this._client.get("/assistants/".concat(e,"/files/").concat(t),{...n,headers:{"OpenAI-Beta":"assistants=v1",...null===n||void 0===n?void 0:n.headers}})}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return sH(t)?this.list(e,{},t):this._client.getAPIList("/assistants/".concat(e,"/files"),qH,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...null===n||void 0===n?void 0:n.headers}})}del(e,t,n){return this._client.delete("/assistants/".concat(e,"/files/").concat(t),{...n,headers:{"OpenAI-Beta":"assistants=v1",...null===n||void 0===n?void 0:n.headers}})}}class qH extends EH{}!function(e){e.AssistantFilesPage=qH}(GH||(GH={}));class XH extends PH{constructor(){super(...arguments),this.files=new GH(this._client)}create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...null===t||void 0===t?void 0:t.headers}})}retrieve(e,t){return this._client.get("/assistants/".concat(e),{...t,headers:{"OpenAI-Beta":"assistants=v1",...null===t||void 0===t?void 0:t.headers}})}update(e,t,n){return this._client.post("/assistants/".concat(e),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...null===n||void 0===n?void 0:n.headers}})}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return sH(e)?this.list({},e):this._client.getAPIList("/assistants",KH,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...null===t||void 0===t?void 0:t.headers}})}del(e,t){return this._client.delete("/assistants/".concat(e),{...t,headers:{"OpenAI-Beta":"assistants=v1",...null===t||void 0===t?void 0:t.headers}})}}class KH extends EH{}function JH(e){return"function"===typeof e.parse}!function(e){e.AssistantsPage=KH,e.Files=GH,e.AssistantFilesPage=qH}(XH||(XH={}));const YH=e=>"assistant"===(null===e||void 0===e?void 0:e.role),$H=e=>"function"===(null===e||void 0===e?void 0:e.role),QH=e=>"tool"===(null===e||void 0===e?void 0:e.role);var ZH,eW,tW,nW,iW,rW,oW,sW,aW,cW,lW,uW,dW,hW,pW,fW,vW,mW,gW,yW,SW=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},bW=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};const _W=10;class wW{constructor(){ZH.add(this),this.controller=new AbortController,eW.set(this,void 0),tW.set(this,(()=>{})),nW.set(this,(()=>{})),iW.set(this,void 0),rW.set(this,(()=>{})),oW.set(this,(()=>{})),sW.set(this,{}),this._chatCompletions=[],this.messages=[],aW.set(this,!1),cW.set(this,!1),lW.set(this,!1),uW.set(this,!1),mW.set(this,(e=>{if(SW(this,cW,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new EV),e instanceof EV)return SW(this,lW,!0,"f"),this._emit("abort",e);if(e instanceof xV)return this._emit("error",e);if(e instanceof Error){const t=new xV(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new xV(String(e)))})),SW(this,eW,new Promise(((e,t)=>{SW(this,tW,e,"f"),SW(this,nW,t,"f")})),"f"),SW(this,iW,new Promise(((e,t)=>{SW(this,rW,e,"f"),SW(this,oW,t,"f")})),"f"),bW(this,eW,"f").catch((()=>{})),bW(this,iW,"f").catch((()=>{}))}_run(e){setTimeout((()=>{e().then((()=>{this._emitFinal(),this._emit("end")}),bW(this,mW,"f"))}),0)}_addChatCompletion(e){var t;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=null===(t=e.choices[0])||void 0===t?void 0:t.message;return n&&this._addMessage(n),e}_addMessage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),($H(e)||QH(e))&&e.content)this._emit("functionCallResult",e.content);else if(YH(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(YH(e)&&e.tool_calls)for(const n of e.tool_calls)"function"===n.type&&this._emit("functionCall",n.function)}_connected(){this.ended||(bW(this,tW,"f").call(this),this._emit("connect"))}get ended(){return bW(this,aW,"f")}get errored(){return bW(this,cW,"f")}get aborted(){return bW(this,lW,"f")}abort(){this.controller.abort()}on(e,t){return(bW(this,sW,"f")[e]||(bW(this,sW,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=bW(this,sW,"f")[e];if(!n)return this;const i=n.findIndex((e=>e.listener===t));return i>=0&&n.splice(i,1),this}once(e,t){return(bW(this,sW,"f")[e]||(bW(this,sW,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise(((t,n)=>{SW(this,uW,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)}))}async done(){SW(this,uW,!0,"f"),await bW(this,iW,"f")}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new xV("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),bW(this,ZH,"m",dW).call(this)}async finalMessage(){return await this.done(),bW(this,ZH,"m",hW).call(this)}async finalFunctionCall(){return await this.done(),bW(this,ZH,"m",pW).call(this)}async finalFunctionCallResult(){return await this.done(),bW(this,ZH,"m",fW).call(this)}async totalUsage(){return await this.done(),bW(this,ZH,"m",vW).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(bW(this,aW,"f"))return;"end"===e&&(SW(this,aW,!0,"f"),bW(this,rW,"f").call(this));const r=bW(this,sW,"f")[e];if(r&&(bW(this,sW,"f")[e]=r.filter((e=>!e.once)),r.forEach((e=>{let{listener:t}=e;return t(...n)}))),"abort"===e){const e=n[0];return bW(this,uW,"f")||null!==r&&void 0!==r&&r.length||Promise.reject(e),bW(this,nW,"f").call(this,e),bW(this,oW,"f").call(this,e),void this._emit("end")}if("error"===e){const e=n[0];bW(this,uW,"f")||null!==r&&void 0!==r&&r.length||Promise.reject(e),bW(this,nW,"f").call(this,e),bW(this,oW,"f").call(this,e),this._emit("end")}}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=bW(this,ZH,"m",hW).call(this);t&&this._emit("finalMessage",t);const n=bW(this,ZH,"m",dW).call(this);n&&this._emit("finalContent",n);const i=bW(this,ZH,"m",pW).call(this);i&&this._emit("finalFunctionCall",i);const r=bW(this,ZH,"m",fW).call(this);null!=r&&this._emit("finalFunctionCallResult",r),this._chatCompletions.some((e=>e.usage))&&this._emit("totalUsage",bW(this,ZH,"m",vW).call(this))}async _createChatCompletion(e,t,n){const i=null===n||void 0===n?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",(()=>this.controller.abort()))),bW(this,ZH,"m",gW).call(this,t);const r=await e.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(r)}async _runChatCompletion(e,t,n){for(const i of t.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){const i="function",{function_call:r="auto",stream:o,...s}=t,a="string"!==typeof r&&(null===r||void 0===r?void 0:r.name),{maxChatCompletions:c=_W}=n||{},l={};for(const p of t.functions)l[p.name||p.function.name]=p;const u=t.functions.map((e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description})));for(const p of t.messages)this._addMessage(p,!1);for(let p=0;p<c;++p){var d;const t=null===(d=(await this._createChatCompletion(e,{...s,function_call:r,functions:u,messages:[...this.messages]},n)).choices[0])||void 0===d?void 0:d.message;if(!t)throw new xV("missing message in ChatCompletion response");if(!t.function_call)return;const{name:o,arguments:c}=t.function_call,p=l[o];if(!p){const e="Invalid function_call: ".concat(JSON.stringify(o),". Available options are: ").concat(u.map((e=>JSON.stringify(e.name))).join(", "),". Please try again");this._addMessage({role:i,name:o,content:e});continue}if(a&&a!==o){const e="Invalid function_call: ".concat(JSON.stringify(o),". ").concat(JSON.stringify(a)," requested. Please try again");this._addMessage({role:i,name:o,content:e});continue}let f;try{f=JH(p)?await p.parse(c):c}catch(h){this._addMessage({role:i,name:o,content:h instanceof Error?h.message:String(h)});continue}const v=await p.function(f,this),m=bW(this,ZH,"m",yW).call(this,v);if(this._addMessage({role:i,name:o,content:m}),a)return}}async _runTools(e,t,n){var i;const r="tool",{tool_choice:o="auto",stream:s,...a}=t,c="string"!==typeof o&&(null===o||void 0===o||null===(i=o.function)||void 0===i?void 0:i.name),{maxChatCompletions:l=_W}=n||{},u={};for(const f of t.tools)"function"===f.type&&(u[f.function.name||f.function.function.name]=f.function);const d="tools"in t?t.tools.map((e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description}}:e)):void 0;for(const f of t.messages)this._addMessage(f,!1);for(let f=0;f<l;++f){var h;const t=null===(h=(await this._createChatCompletion(e,{...a,tool_choice:o,tools:d,messages:[...this.messages]},n)).choices[0])||void 0===h?void 0:h.message;if(!t)throw new xV("missing message in ChatCompletion response");if(!t.tool_calls)return;for(const e of t.tool_calls){if("function"!==e.type)continue;const t=e.id,{name:n,arguments:i}=e.function,o=u[n];if(!o){const e="Invalid tool_call: ".concat(JSON.stringify(n),". Available options are: ").concat(d.map((e=>JSON.stringify(e.function.name))).join(", "),". Please try again");this._addMessage({role:r,tool_call_id:t,content:e});continue}if(c&&c!==n){const e="Invalid tool_call: ".concat(JSON.stringify(n),". ").concat(JSON.stringify(c)," requested. Please try again");this._addMessage({role:r,tool_call_id:t,content:e});continue}let s;try{s=JH(o)?await o.parse(i):i}catch(p){const e=p instanceof Error?p.message:String(p);this._addMessage({role:r,tool_call_id:t,content:e});continue}const a=await o.function(s,this),l=bW(this,ZH,"m",yW).call(this,a);if(this._addMessage({role:r,tool_call_id:t,content:l}),c)return}}}}eW=new WeakMap,tW=new WeakMap,nW=new WeakMap,iW=new WeakMap,rW=new WeakMap,oW=new WeakMap,sW=new WeakMap,aW=new WeakMap,cW=new WeakMap,lW=new WeakMap,uW=new WeakMap,mW=new WeakMap,ZH=new WeakSet,dW=function(){var e;return null!==(e=bW(this,ZH,"m",hW).call(this).content)&&void 0!==e?e:null},hW=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];var t;if(YH(n))return{...n,content:null!==(t=n.content)&&void 0!==t?t:null}}throw new xV("stream ended without producing a ChatCompletionMessage with role=assistant")},pW=function(){for(let n=this.messages.length-1;n>=0;n--){var e;const i=this.messages[n];if(YH(i)&&null!==i&&void 0!==i&&i.function_call)return i.function_call;var t;if(YH(i)&&null!==i&&void 0!==i&&null!==(e=i.tool_calls)&&void 0!==e&&e.length)return null===(t=i.tool_calls.at(-1))||void 0===t?void 0:t.function}},fW=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if($H(t)&&null!=t.content)return t.content;if(QH(t)&&null!=t.content&&this.messages.some((e=>{var n;return"assistant"===e.role&&(null===(n=e.tool_calls)||void 0===n?void 0:n.some((e=>"function"===e.type&&e.id===t.tool_call_id)))})))return t.content}},vW=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},gW=function(e){if(null!=e.n&&e.n>1)throw new xV("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},yW=function(e){return"string"===typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class xW extends wW{static runFunctions(e,t,n){const i=new xW,r={...n,headers:{...null===n||void 0===n?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run((()=>i._runFunctions(e,t,r))),i}static runTools(e,t,n){const i=new xW,r={...n,headers:{...null===n||void 0===n?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run((()=>i._runTools(e,t,r))),i}_addMessage(e){super._addMessage(e),YH(e)&&e.content&&this._emit("content",e.content)}}var CW,EW,PW,TW,RW,MW,AW,IW=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},kW=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n};class OW extends wW{constructor(){super(...arguments),CW.add(this),EW.set(this,void 0)}get currentChatCompletionSnapshot(){return IW(this,EW,"f")}static fromReadableStream(e){const t=new OW;return t._run((()=>t._fromReadableStream(e))),t}static createChatCompletion(e,t,n){const i=new OW;return i._run((()=>i._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...null===n||void 0===n?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}}))),i}async _createChatCompletion(e,t,n){var i;const r=null===n||void 0===n?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort()))),IW(this,CW,"m",PW).call(this);const o=await e.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const s of o)IW(this,CW,"m",TW).call(this,s);if(null!==(i=o.controller.signal)&&void 0!==i&&i.aborted)throw new EV;return this._addChatCompletion(IW(this,CW,"m",RW).call(this))}async _fromReadableStream(e,t){var n;const i=null===t||void 0===t?void 0:t.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",(()=>this.controller.abort()))),IW(this,CW,"m",PW).call(this),this._connected();const r=NV.fromReadableStream(e,this.controller);let o;for await(const s of r)o&&o!==s.id&&this._addChatCompletion(IW(this,CW,"m",RW).call(this)),IW(this,CW,"m",TW).call(this,s),o=s.id;if(null!==(n=r.controller.signal)&&void 0!==n&&n.aborted)throw new EV;return this._addChatCompletion(IW(this,CW,"m",RW).call(this))}[(EW=new WeakMap,CW=new WeakSet,PW=function(){this.ended||kW(this,EW,void 0,"f")},TW=function(e){var t,n;if(this.ended)return;const i=IW(this,CW,"m",MW).call(this,e);this._emit("chunk",e,i);const r=null===(t=e.choices[0])||void 0===t||null===(t=t.delta)||void 0===t?void 0:t.content,o=null===(n=i.choices[0])||void 0===n?void 0:n.message;null!=r&&"assistant"===(null===o||void 0===o?void 0:o.role)&&null!==o&&void 0!==o&&o.content&&this._emit("content",r,o.content)},RW=function(){if(this.ended)throw new xV("stream has ended, this shouldn't happen");const e=IW(this,EW,"f");if(!e)throw new xV("request ended without sending any chunks");return kW(this,EW,void 0,"f"),function(e){const{id:t,choices:n,created:i,model:r,system_fingerprint:o,...s}=e;return{...s,id:t,choices:n.map((t=>{let{message:n,finish_reason:i,index:r,logprobs:o,...s}=t;if(!i)throw new xV("missing finish_reason for choice ".concat(r));const{content:a=null,function_call:c,tool_calls:l,...u}=n,d=n.role;if(!d)throw new xV("missing role for choice ".concat(r));if(c){const{arguments:e,name:t}=c;if(null==e)throw new xV("missing function_call.arguments for choice ".concat(r));if(!t)throw new xV("missing function_call.name for choice ".concat(r));return{...s,message:{content:a,function_call:{arguments:e,name:t},role:d},finish_reason:i,index:r,logprobs:o}}return l?{...s,index:r,finish_reason:i,logprobs:o,message:{...u,role:d,content:a,tool_calls:l.map(((t,n)=>{const{function:i,type:o,id:s,...a}=t,{arguments:c,name:l,...u}=i||{};if(null==s)throw new xV("missing choices[".concat(r,"].tool_calls[").concat(n,"].id\n").concat(DW(e)));if(null==o)throw new xV("missing choices[".concat(r,"].tool_calls[").concat(n,"].type\n").concat(DW(e)));if(null==l)throw new xV("missing choices[".concat(r,"].tool_calls[").concat(n,"].function.name\n").concat(DW(e)));if(null==c)throw new xV("missing choices[".concat(r,"].tool_calls[").concat(n,"].function.arguments\n").concat(DW(e)));return{...a,id:s,type:o,function:{...u,name:l,arguments:c}}}))}}:{...s,message:{...u,content:a,role:d},finish_reason:i,index:r,logprobs:o}})),created:i,model:r,object:"chat.completion",...o?{system_fingerprint:o}:{}}}(e)},MW=function(e){var t,n,i;let r=IW(this,EW,"f");const{choices:o,...s}=e;r?Object.assign(r,s):r=kW(this,EW,{...s,choices:[]},"f");for(const{delta:d,finish_reason:h,index:p,logprobs:f=null,...v}of e.choices){let e=r.choices[p];if(e||(e=r.choices[p]={finish_reason:h,index:p,message:{},logprobs:f,...v}),f)if(e.logprobs){const{content:n,...i}=f;var a;if(Object.assign(e.logprobs,i),n)null!==(a=(t=e.logprobs).content)&&void 0!==a||(t.content=[]),e.logprobs.content.push(...n)}else e.logprobs=Object.assign({},f);if(h&&(e.finish_reason=h),Object.assign(e,v),!d)continue;const{content:o,function_call:s,role:m,tool_calls:g,...y}=d;var c;if(Object.assign(e.message,y),o&&(e.message.content=(e.message.content||"")+o),m&&(e.message.role=m),s)if(e.message.function_call){if(s.name&&(e.message.function_call.name=s.name),s.arguments)null!==(c=(n=e.message.function_call).arguments)&&void 0!==c||(n.arguments=""),e.message.function_call.arguments+=s.arguments}else e.message.function_call=s;if(g){e.message.tool_calls||(e.message.tool_calls=[]);for(const{index:t,id:n,type:r,function:o,...s}of g){var l,u;const a=null!==(l=(i=e.message.tool_calls)[t])&&void 0!==l?l:i[t]={};Object.assign(a,s),n&&(a.id=n),r&&(a.type=r),o&&(null!==(u=a.function)&&void 0!==u||(a.function={arguments:""})),null!==o&&void 0!==o&&o.name&&(a.function.name=o.name),null!==o&&void 0!==o&&o.arguments&&(a.function.arguments+=o.arguments)}}}return r},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",(n=>{const i=t.shift();i?i(n):e.push(n)})),this.on("end",(()=>{n=!0;for(const e of t)e(void 0);t.length=0})),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise((e=>t.push(e))).then((e=>e?{value:e,done:!1}:{value:void 0,done:!0}));return{value:e.shift(),done:!1}}}}toReadableStream(){return new NV(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function DW(e){return JSON.stringify(e)}class LW extends OW{static fromReadableStream(e){const t=new LW;return t._run((()=>t._fromReadableStream(e))),t}static runFunctions(e,t,n){const i=new LW,r={...n,headers:{...null===n||void 0===n?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run((()=>i._runFunctions(e,t,r))),i}static runTools(e,t,n){const i=new LW,r={...n,headers:{...null===n||void 0===n?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run((()=>i._runTools(e,t,r))),i}}class NW extends PH{runFunctions(e,t){return e.stream?LW.runFunctions(this._client.chat.completions,e,t):xW.runFunctions(this._client.chat.completions,e,t)}runTools(e,t){return e.stream?LW.runTools(this._client.chat.completions,e,t):xW.runTools(this._client.chat.completions,e,t)}stream(e,t){return OW.createChatCompletion(this._client.chat.completions,e,t)}}class zW extends PH{constructor(){super(...arguments),this.completions=new NW(this._client)}}!function(e){e.Completions=NW}(zW||(zW={}));class FW extends PH{retrieve(e,t,n,i){return this._client.get("/threads/".concat(e,"/messages/").concat(t,"/files/").concat(n),{...i,headers:{"OpenAI-Beta":"assistants=v1",...null===i||void 0===i?void 0:i.headers}})}list(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;return sH(n)?this.list(e,t,{},n):this._client.getAPIList("/threads/".concat(e,"/messages/").concat(t,"/files"),UW,{query:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...null===i||void 0===i?void 0:i.headers}})}}class UW extends EH{}!function(e){e.MessageFilesPage=UW}(FW||(FW={}));class BW extends PH{constructor(){super(...arguments),this.files=new FW(this._client)}create(e,t,n){return this._client.post("/threads/".concat(e,"/messages"),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...null===n||void 0===n?void 0:n.headers}})}retrieve(e,t,n){return this._client.get("/threads/".concat(e,"/messages/").concat(t),{...n,headers:{"OpenAI-Beta":"assistants=v1",...null===n||void 0===n?void 0:n.headers}})}update(e,t,n,i){return this._client.post("/threads/".concat(e,"/messages/").concat(t),{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...null===i||void 0===i?void 0:i.headers}})}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return sH(t)?this.list(e,{},t):this._client.getAPIList("/threads/".concat(e,"/messages"),jW,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...null===n||void 0===n?void 0:n.headers}})}}class jW extends EH{}!function(e){e.ThreadMessagesPage=jW,e.Files=FW,e.MessageFilesPage=UW}(BW||(BW={}));class VW extends PH{retrieve(e,t,n,i){return this._client.get("/threads/".concat(e,"/runs/").concat(t,"/steps/").concat(n),{...i,headers:{"OpenAI-Beta":"assistants=v1",...null===i||void 0===i?void 0:i.headers}})}list(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;return sH(n)?this.list(e,t,{},n):this._client.getAPIList("/threads/".concat(e,"/runs/").concat(t,"/steps"),HW,{query:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...null===i||void 0===i?void 0:i.headers}})}}class HW extends EH{}!function(e){e.RunStepsPage=HW}(VW||(VW={}));class WW extends PH{constructor(){super(...arguments),this.steps=new VW(this._client)}create(e,t,n){return this._client.post("/threads/".concat(e,"/runs"),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...null===n||void 0===n?void 0:n.headers}})}retrieve(e,t,n){return this._client.get("/threads/".concat(e,"/runs/").concat(t),{...n,headers:{"OpenAI-Beta":"assistants=v1",...null===n||void 0===n?void 0:n.headers}})}update(e,t,n,i){return this._client.post("/threads/".concat(e,"/runs/").concat(t),{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...null===i||void 0===i?void 0:i.headers}})}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return sH(t)?this.list(e,{},t):this._client.getAPIList("/threads/".concat(e,"/runs"),GW,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...null===n||void 0===n?void 0:n.headers}})}cancel(e,t,n){return this._client.post("/threads/".concat(e,"/runs/").concat(t,"/cancel"),{...n,headers:{"OpenAI-Beta":"assistants=v1",...null===n||void 0===n?void 0:n.headers}})}submitToolOutputs(e,t,n,i){return this._client.post("/threads/".concat(e,"/runs/").concat(t,"/submit_tool_outputs"),{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...null===i||void 0===i?void 0:i.headers}})}}class GW extends EH{}!function(e){e.RunsPage=GW,e.Steps=VW,e.RunStepsPage=HW}(WW||(WW={}));class qW extends PH{constructor(){super(...arguments),this.runs=new WW(this._client),this.messages=new BW(this._client)}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return sH(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...null===t||void 0===t?void 0:t.headers}})}retrieve(e,t){return this._client.get("/threads/".concat(e),{...t,headers:{"OpenAI-Beta":"assistants=v1",...null===t||void 0===t?void 0:t.headers}})}update(e,t,n){return this._client.post("/threads/".concat(e),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...null===n||void 0===n?void 0:n.headers}})}del(e,t){return this._client.delete("/threads/".concat(e),{...t,headers:{"OpenAI-Beta":"assistants=v1",...null===t||void 0===t?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...null===t||void 0===t?void 0:t.headers}})}}!function(e){e.Runs=WW,e.RunsPage=GW,e.Messages=BW,e.ThreadMessagesPage=jW}(qW||(qW={}));class XW extends PH{constructor(){super(...arguments),this.chat=new zW(this._client),this.assistants=new XH(this._client),this.threads=new qW(this._client)}}!function(e){e.Chat=zW,e.Assistants=XH,e.AssistantsPage=KH,e.Threads=qW}(XW||(XW={}));class KW extends tH{constructor(){var e,t;let{baseURL:n=yH("OPENAI_BASE_URL"),apiKey:i=yH("OPENAI_API_KEY"),organization:r=(null!==(e=yH("OPENAI_ORG_ID"))&&void 0!==e?e:null),...o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0===i)throw new xV("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const s={apiKey:i,organization:r,...o,baseURL:n||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof navigator)throw new xV("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:s.baseURL,timeout:null!==(t=s.timeout)&&void 0!==t?t:6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new TH(this),this.chat=new MH(this),this.embeddings=new AH(this),this.files=new IH(this),this.images=new OH(this),this.audio=new zH(this),this.moderations=new FH(this),this.models=new UH(this),this.fineTuning=new WH(this),this.beta=new XW(this),this._options=s,this.apiKey=i,this.organization=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:"Bearer ".concat(this.apiKey)}}}AW=KW,KW.OpenAI=AW,KW.OpenAIError=xV,KW.APIError=CV,KW.APIConnectionError=PV,KW.APIConnectionTimeoutError=TV,KW.APIUserAbortError=EV,KW.NotFoundError=IV,KW.ConflictError=kV,KW.RateLimitError=DV,KW.BadRequestError=RV,KW.AuthenticationError=MV,KW.InternalServerError=LV,KW.PermissionDeniedError=AV,KW.UnprocessableEntityError=OV;const{OpenAIError:JW,APIError:YW,APIConnectionError:$W,APIConnectionTimeoutError:QW,APIUserAbortError:ZW,NotFoundError:eG,ConflictError:tG,RateLimitError:nG,BadRequestError:iG,AuthenticationError:rG,InternalServerError:oG,PermissionDeniedError:sG,UnprocessableEntityError:aG}=e;!function(e){e.toFile=HV,e.fileFromPath=vV,e.Page=CH,e.CursorPage=EH,e.Completions=TH,e.Chat=MH,e.Embeddings=AH,e.Files=IH,e.FileObjectsPage=kH,e.Images=OH,e.Audio=zH,e.Moderations=FH,e.Models=UH,e.ModelsPage=BH,e.FineTuning=WH,e.Beta=XW}(KW||(KW={}));const cG=new class{constructor(){this.openai=new KW({apiKey:"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",dangerouslyAllowBrowser:!0})}processText(e,t){const n="".concat(t,' "').concat(e,'"');return this.openai.chat.completions.create({model:"gpt-4",messages:[{role:"user",content:n}],temperature:.7,max_tokens:1500,top_p:1,frequency_penalty:0,presence_penalty:0}).then((e=>e.choices[0].message.content))}},lG=e=>{const t=new sV(["amy show me","set face to neutral"].join("|"),(t=>{if(console.log("Detected text: ".concat(t)),function(e){e.scheduleChange("54",100,900,0)}(e),t.toLowerCase().includes("set face to neutral"))return console.log("Setting face to neutral."),e.setFaceToNeutral(),void oV(e);cG.processText(t,'"Your task is to generate a JSON response that provides facial action units to create specific facial expressions. Include head and eye movements as part of the action units. For each AU, include an intensity, duration, and a brief explanation of its role in the expression. Here are examples based on various combinations of emotions and traits."\n\nExamples:\nExample 1: Happiness + Openness\n\n{\n  "combination": "Happiness + Openness",\n  "aus": [\n    {\n      "id": "12",\n      "intensity": 0.8,\n      "duration": 5,\n      "explanation": "Lip corners pulled up in a smile, signifying happiness."\n    },\n    {\n      "id": "6",\n      "intensity": 0.5,\n      "duration": 5,\n      "explanation": "Cheeks raised, enhancing the smile, reflecting joy."\n    },\n    {\n      "id": "25",\n      "intensity": 0.3,\n      "duration": 4,\n      "explanation": "Lips part slightly, suggesting openness to experience."\n    }\n  ]\n}\nExample 2: Concentration + Determination\n\n{\n  "combination": "Concentration + Determination",\n  "aus": [\n    {\n      "id": "4",\n      "intensity": 0.7,\n      "duration": 6,\n      "explanation": "Brows furrowed, indicating focus and concentration."\n    },\n    {\n      "id": "7",\n      "intensity": 0.6,\n      "duration": 5,\n      "explanation": "Lids tightened, showing determination."\n    },\n    {\n      "id": "53",\n      "intensity": 0.4,\n      "duration": 3,\n      "explanation": "Head up, a posture of attentiveness and resolve."\n    }\n  ]\n}\nExample 3: Surprise + Confusion\n\n{\n  "combination": "Surprise + Confusion",\n  "aus": [\n    {\n      "id": "1",\n      "intensity": 0.9,\n      "duration": 5,\n      "explanation": "Inner brows raised, a key indicator of surprise."\n    },\n    {\n      "id": "2",\n      "intensity": 0.9,\n      "duration": 5,\n      "explanation": "Outer brows also raised, amplifying the expression of surprise."\n    },\n    {\n      "id": "5",\n      "intensity": 1.0,\n      "duration": 5,\n      "explanation": "Upper eyelids raised, signifying alertness and sudden attention."\n    },\n    {\n      "id": "26",\n      "intensity": 0.4,\n      "duration": 3,\n      "explanation": "Jaw slightly dropped, common in expressions of surprise and mild confusion."\n    }\n  ]\n}\nGuidelines for JSON Construction:\nID Only for AUs: Each AU is identified by its id only, removing the need for names to streamline the data structure.\nIntensity and Duration: Specify how strongly each AU is activated (intensity) and for how long (duration).\nExplanation: Include a rationale (explanation) for each AU\'s role in the overall expression, providing insight into the chosen configuration.\nThis format aims to offer a detailed, structured approach to describing complex facial expressions through a combination of facial action units, including both the micro-expressions of the face and broader movements of the head and eyes.\n\n\n\n\n\n\n\n\n').then((t=>{console.log("GPT Response: ".concat(t));const n=JSON.parse(t);e.applyChangesFromJson(JSON.stringify(n.aus))})).catch((e=>console.error("Error in GPT reconciliation:",e))).finally((()=>oV(e)))}));console.log("Starting speech recognition..."),t.start()};var uG=n(8685);const dG=class{constructor(e){this.animationManager=e,this.queue=[],this.isSpeaking=!1,this.initSynthesizer()}initSynthesizer(){const e=uG.SpeechConfig.fromSubscription("df147661838b473f8561a5687c200a7c","eastus");e.speechSynthesisVoiceName="en-US-JennyNeural",this.synthesizer=new uG.SpeechSynthesizer(e),this.synthesizer.visemeReceived=(e,t)=>{this.scheduleVisemeApplication(t.visemeId,t.audioOffset)}}enqueueText(e){this.queue.push(e),this.isSpeaking||this.processQueue()}processQueue(){if(0===this.queue.length)return void(this.isSpeaking=!1);this.isSpeaking=!0;const e=this.queue.shift();this.synthesizeSpeech(e).then((()=>this.processQueue()))}synthesizeSpeech(e){return new Promise(((t,n)=>{this.synthesizer.speakTextAsync(e,(e=>{console.log("Speech synthesis completed."),t(e)}),(e=>{console.log("Error during speech synthesis, restarting"),n(e)}))}))}scheduleVisemeApplication(e,t){setTimeout((()=>{this.applyVisemeToCharacter(e)}),t/1e4)}applyVisemeToCharacter(e){const t=this.animationManager.facsLib;0===e?t.setNeutralViseme(0):(e-=1,t.setTargetViseme(e,70,0)),t.updateEngine()}stopSpeech(){this.synthesizer.close(),this.queue=[],this.isSpeaking=!1,this.initSynthesizer(),console.log("Speech synthesis stopped.")}interruptSpeech(e){this.synthesizer.close(),this.queue=[],this.isSpeaking=!1,this.initSynthesizer(),e&&this.enqueueText(e),console.log("Speech synthesis interrupted.")}};const hG=class{constructor(e){this.cameraControl=e,this.initMouseControls(),this.initKeyboardControls()}initMouseControls(){document.addEventListener("wheel",(e=>this.handleMouseWheel(e))),document.addEventListener("mousedown",(e=>this.handleMouseDown(e))),document.addEventListener("mousemove",(e=>this.handleMouseMove(e))),document.addEventListener("mouseup",(()=>this.handleMouseUp())),this.isDragging=!1,this.prevX=0,this.prevY=0}handleMouseWheel(e){const t=-.05*e.deltaY;this.cameraControl.zoom(t)}handleMouseDown(e){this.isDragging=!0,this.prevX=e.clientX,this.prevY=e.clientY,this.ctrlKey=e.ctrlKey}handleMouseMove(e){if(!this.isDragging)return;const t=e.clientX-this.prevX,n=e.clientY-this.prevY;this.prevX=e.clientX,this.prevY=e.clientY;let i=1;e.ctrlKey&&(i=5),e.shiftKey?this.cameraControl.rotate(t*i,n*i):this.cameraControl.pan(-.01*t,.01*n)}handleMouseUp(){this.isDragging=!1}initKeyboardControls(){document.addEventListener("keydown",(e=>this.handleKeyDown(e)))}handleKeyDown(e){switch(e.key){case"ArrowUp":this.cameraControl.dolly(-.5);break;case"ArrowDown":this.cameraControl.dolly(.5);break;case"ArrowLeft":this.cameraControl.rotate(-5,0);break;case"ArrowRight":this.cameraControl.rotate(5,0)}}};const pG=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.engine=e,this.target={x:t,y:n,z:0},this.distance=i,this.angleX=r,this.angleY=o,this.observers=[],this.updateCameraPosition()}addObserver(e){this.observers.push(e)}notifyObservers(){this.observers.forEach((e=>e.update()))}setTarget(e,t,n){this.target.x=e,this.target.y=t,this.target.z=n,this.updateCameraPosition()}zoom(e){this.distance+=e,this.updateCameraPosition()}pan(e,t){this.target.x+=e,this.target.y+=t,this.updateCameraPosition()}rotate(e,t){this.angleX+=e,this.angleY+=t,this.updateCameraPosition()}animateTo(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;const r=performance.now(),o={...this.target},s=this.distance,a=this.angleX,c=this.angleY,l=u=>{const d=u-r,h=Math.min(d/i,1);this.target.x=o.x+(e.x-o.x)*h,this.target.y=o.y+(e.y-o.y)*h,this.target.z=o.z+(e.z-o.z)*h,this.distance=s+(n-s)*h,this.angleX=a+(t.x-a)*h,this.angleY=c+(t.y-c)*h,this.updateCameraPosition(),h<1?requestAnimationFrame(l):console.log("Camera animation complete.")};requestAnimationFrame(l)}updateCameraPosition(){let e=this.angleX*(Math.PI/180),t=this.angleY*(Math.PI/180),n=this.target.x+this.distance*Math.sin(t)*Math.cos(e),i=this.target.y+this.distance*Math.sin(e),r=this.target.z+this.distance*Math.cos(t)*Math.cos(e);this.engine.setCameraPosition(n,i,r,this.angleX,this.angleY,0),this.notifyObservers()}},fG=(e,t)=>{const n=new pG(e,.27,1.59,-2.2,.07,0);n.animateTo({x:.27,y:1.59,z:-8.88},{x:.07,y:0},10,3e3);new hG(n)};const vG=function(){const{isLoaded:e,engine:n,facslib:i}=(0,t.useContext)(nV),r=Qj.reduce(((e,t)=>({...e,[t.id]:{intensity:0,name:t.name,notes:""}})),{}),[o,s]=(0,t.useState)(r),[a,c]=(0,t.useState)(null),[l,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)({isOpen:!1,showUnusedSliders:!1,cameraEnabled:!1});return(0,t.useEffect)((()=>{if(e&&i&&!a){console.log("Unity is loaded. Engine and facslib are now available for use.");const e=new rV(i,s);c(e),function(e){const t=()=>{!function(e){!function(e){e.scheduleChange("45",380,500,0),e.scheduleChange("45",0,500,500)}(e)}(e);const n=500*(1+4*Math.random())+1e3;setTimeout(t,n)};t()}(e),lG(e);new dG(e);const t=JSON.stringify([{id:"1",intensity:.5,duration:500,delay:0},{id:"2",intensity:.7,duration:500,delay:100},{id:"12",intensity:1,duration:1e3,delay:200}]);e.applyChangesFromJson(t),u(!0)}}),[e,i]),(0,ug.jsxs)("div",{className:"App",children:[(0,ug.jsx)(kg,{isLoading:!e||!l}),e&&l&&a&&(0,ug.jsxs)(ug.Fragment,{children:[(0,ug.jsx)("p",{children:"Unity has loaded, and setup is complete. You can now interact with the Unity content."}),(0,ug.jsx)(tV,{auStates:o,setAuStates:s,animationManager:a,drawerControls:d,setDrawerControls:e=>{h((t=>({...t,...e}))),e.cameraEnabled&&!d.cameraEnabled&&fG()}})]})]})};var mG,gG,yG=String.raw,SG=yG(mG||(mG=o(["\n  :root,\n  :host {\n    --chakra-vh: 100vh;\n  }\n\n  @supports (height: -webkit-fill-available) {\n    :root,\n    :host {\n      --chakra-vh: -webkit-fill-available;\n    }\n  }\n\n  @supports (height: -moz-fill-available) {\n    :root,\n    :host {\n      --chakra-vh: -moz-fill-available;\n    }\n  }\n\n  @supports (height: 100dvh) {\n    :root,\n    :host {\n      --chakra-vh: 100dvh;\n    }\n  }\n"]))),bG=()=>(0,ug.jsx)(sM,{styles:SG}),_G=e=>{let{scope:t=""}=e;return(0,ug.jsx)(sM,{styles:yG(gG||(gG=o(['\n      html {\n        line-height: 1.5;\n        -webkit-text-size-adjust: 100%;\n        font-family: system-ui, sans-serif;\n        -webkit-font-smoothing: antialiased;\n        text-rendering: optimizeLegibility;\n        -moz-osx-font-smoothing: grayscale;\n        touch-action: manipulation;\n      }\n\n      body {\n        position: relative;\n        min-height: 100%;\n        margin: 0;\n        font-feature-settings: "kern";\n      }\n\n      '," :where(*, *::before, *::after) {\n        border-width: 0;\n        border-style: solid;\n        box-sizing: border-box;\n        word-wrap: break-word;\n      }\n\n      main {\n        display: block;\n      }\n\n      "," hr {\n        border-top-width: 1px;\n        box-sizing: content-box;\n        height: 0;\n        overflow: visible;\n      }\n\n      "," :where(pre, code, kbd,samp) {\n        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;\n        font-size: 1em;\n      }\n\n      "," a {\n        background-color: transparent;\n        color: inherit;\n        text-decoration: inherit;\n      }\n\n      "," abbr[title] {\n        border-bottom: none;\n        text-decoration: underline;\n        -webkit-text-decoration: underline dotted;\n        text-decoration: underline dotted;\n      }\n\n      "," :where(b, strong) {\n        font-weight: bold;\n      }\n\n      "," small {\n        font-size: 80%;\n      }\n\n      "," :where(sub,sup) {\n        font-size: 75%;\n        line-height: 0;\n        position: relative;\n        vertical-align: baseline;\n      }\n\n      "," sub {\n        bottom: -0.25em;\n      }\n\n      "," sup {\n        top: -0.5em;\n      }\n\n      "," img {\n        border-style: none;\n      }\n\n      "," :where(button, input, optgroup, select, textarea) {\n        font-family: inherit;\n        font-size: 100%;\n        line-height: 1.15;\n        margin: 0;\n      }\n\n      "," :where(button, input) {\n        overflow: visible;\n      }\n\n      "," :where(button, select) {\n        text-transform: none;\n      }\n\n      ",' :where(\n          button::-moz-focus-inner,\n          [type="button"]::-moz-focus-inner,\n          [type="reset"]::-moz-focus-inner,\n          [type="submit"]::-moz-focus-inner\n        ) {\n        border-style: none;\n        padding: 0;\n      }\n\n      '," fieldset {\n        padding: 0.35em 0.75em 0.625em;\n      }\n\n      "," legend {\n        box-sizing: border-box;\n        color: inherit;\n        display: table;\n        max-width: 100%;\n        padding: 0;\n        white-space: normal;\n      }\n\n      "," progress {\n        vertical-align: baseline;\n      }\n\n      "," textarea {\n        overflow: auto;\n      }\n\n      ",' :where([type="checkbox"], [type="radio"]) {\n        box-sizing: border-box;\n        padding: 0;\n      }\n\n      ',' input[type="number"]::-webkit-inner-spin-button,\n      ',' input[type="number"]::-webkit-outer-spin-button {\n        -webkit-appearance: none !important;\n      }\n\n      ',' input[type="number"] {\n        -moz-appearance: textfield;\n      }\n\n      ',' input[type="search"] {\n        -webkit-appearance: textfield;\n        outline-offset: -2px;\n      }\n\n      ',' input[type="search"]::-webkit-search-decoration {\n        -webkit-appearance: none !important;\n      }\n\n      '," ::-webkit-file-upload-button {\n        -webkit-appearance: button;\n        font: inherit;\n      }\n\n      "," details {\n        display: block;\n      }\n\n      "," summary {\n        display: list-item;\n      }\n\n      template {\n        display: none;\n      }\n\n      [hidden] {\n        display: none !important;\n      }\n\n      "," :where(\n          blockquote,\n          dl,\n          dd,\n          h1,\n          h2,\n          h3,\n          h4,\n          h5,\n          h6,\n          hr,\n          figure,\n          p,\n          pre\n        ) {\n        margin: 0;\n      }\n\n      "," button {\n        background: transparent;\n        padding: 0;\n      }\n\n      "," fieldset {\n        margin: 0;\n        padding: 0;\n      }\n\n      "," :where(ol, ul) {\n        margin: 0;\n        padding: 0;\n      }\n\n      "," textarea {\n        resize: vertical;\n      }\n\n      ",' :where(button, [role="button"]) {\n        cursor: pointer;\n      }\n\n      '," button::-moz-focus-inner {\n        border: 0 !important;\n      }\n\n      "," table {\n        border-collapse: collapse;\n      }\n\n      "," :where(h1, h2, h3, h4, h5, h6) {\n        font-size: inherit;\n        font-weight: inherit;\n      }\n\n      "," :where(button, input, optgroup, select, textarea) {\n        padding: 0;\n        line-height: inherit;\n        color: inherit;\n      }\n\n      "," :where(img, svg, video, canvas, audio, iframe, embed, object) {\n        display: block;\n      }\n\n      "," :where(img, video) {\n        max-width: 100%;\n        height: auto;\n      }\n\n      [data-js-focus-visible]\n        :focus:not([data-focus-visible-added]):not(\n          [data-focus-visible-disabled]\n        ) {\n        outline: none;\n        box-shadow: none;\n      }\n\n      "," select::-ms-expand {\n        display: none;\n      }\n\n      ","\n    "])),t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,SG)})};function wG(e){const{cssVarsRoot:n,theme:i,children:r}=e,o=(0,t.useMemo)((()=>FP(i)),[i]);return(0,ug.jsxs)(kR,{theme:o,children:[(0,ug.jsx)(xG,{root:n}),r]})}function xG(e){let{root:t=":host, :root"}=e;const n=[t,"[data-theme]"].join(",");return(0,ug.jsx)(sM,{styles:e=>({[n]:e.__cssVars})})}var[CG,EG]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{strict:n=!0,errorMessage:i="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:r}=e,o=(0,t.createContext)(void 0);return o.displayName=r,[o.Provider,function e(){var r;const s=(0,t.useContext)(o);if(!s&&n){const t=new Error(i);throw t.name="ContextError",null==(r=Error.captureStackTrace)||r.call(Error,t,e),t}return s},o]}({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function PG(){const{colorMode:e}=nT();return(0,ug.jsx)(sM,{styles:t=>{const n=aT(rT(t,"styles.global"),{theme:t,colorMode:e});if(!n)return;return XP(n)(t)}})}var TG={light:"chakra-ui-light",dark:"chakra-ui-dark"};var RG="chakra-ui-color-mode";var MG,AG=(MG=RG,{ssr:!1,type:"localStorage",get(e){if(!(null==globalThis?void 0:globalThis.document))return e;let t;try{t=localStorage.getItem(MG)||e}catch(n){}return t||e},set(e){try{localStorage.setItem(MG,e)}catch(t){}}});function IG(e,t){const n=e.match(new RegExp("(^| )".concat(t,"=([^;]+)")));return null==n?void 0:n[2]}function kG(e,t){return{ssr:!!t,type:"cookie",get:n=>t?IG(t,e):(null==globalThis?void 0:globalThis.document)&&IG(document.cookie,e)||n,set(t){document.cookie="".concat(e,"=").concat(t,"; max-age=31536000; path=/")}}}kG(RG);var OG=()=>{};function DG(e,t){return"cookie"===e.type&&e.ssr?e.get(t):t}function LG(e){const{value:n,children:i,options:{useSystemColorMode:r,initialColorMode:o,disableTransitionOnChange:s}={},colorModeManager:a=AG}=e,c="dark"===o?"dark":"light",[l,u]=(0,t.useState)((()=>DG(a,c))),[d,h]=(0,t.useState)((()=>DG(a))),{getSystemTheme:p,setClassName:f,setDataset:v,addListener:m}=(0,t.useMemo)((()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{preventTransition:t=!0}=e,n={setDataset:e=>{const i=t?n.preventTransition():void 0;document.documentElement.dataset.theme=e,document.documentElement.style.colorScheme=e,null==i||i()},setClassName(e){document.body.classList.add(e?TG.dark:TG.light),document.body.classList.remove(e?TG.light:TG.dark)},query:()=>window.matchMedia("(prefers-color-scheme: dark)"),getSystemTheme(e){var t;return(null!=(t=n.query().matches)?t:"dark"===e)?"dark":"light"},addListener(e){const t=n.query(),i=t=>{e(t.matches?"dark":"light")};return"function"===typeof t.addListener?t.addListener(i):t.addEventListener("change",i),()=>{"function"===typeof t.removeListener?t.removeListener(i):t.removeEventListener("change",i)}},preventTransition(){const e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),requestAnimationFrame((()=>{requestAnimationFrame((()=>{document.head.removeChild(e)}))}))}}};return n}({preventTransition:s})),[s]),g="system"!==o||l?l:d,y=(0,t.useCallback)((e=>{const t="system"===e?p():e;u(t),f("dark"===t),v(t),a.set(t)}),[a,p,f,v]);LM((()=>{"system"===o&&h(p())}),[]),(0,t.useEffect)((()=>{const e=a.get();y(e||("system"!==o?c:"system"))}),[a,c,o,y]);const S=(0,t.useCallback)((()=>{y("dark"===g?"light":"dark")}),[g,y]);(0,t.useEffect)((()=>{if(r)return m(y)}),[r,m,y]);const b=(0,t.useMemo)((()=>({colorMode:null!=n?n:g,toggleColorMode:n?OG:S,setColorMode:n?OG:y,forced:void 0!==n})),[g,S,y,n]);return(0,ug.jsx)(tT.Provider,{value:b,children:i})}LG.displayName="ColorModeProvider";var NG=(0,t.createContext)({getDocument:()=>document,getWindow:()=>window});function zG(e){const{children:n,environment:i,disabled:r}=e,o=(0,t.useRef)(null),s=(0,t.useMemo)((()=>i||{getDocument:()=>{var e,t;return null!=(t=null==(e=o.current)?void 0:e.ownerDocument)?t:document},getWindow:()=>{var e,t;return null!=(t=null==(e=o.current)?void 0:e.ownerDocument.defaultView)?t:window}}),[i]),a=!r||!i;return(0,ug.jsxs)(NG.Provider,{value:s,children:[n,a&&(0,ug.jsx)("span",{id:"__chakra_env",hidden:!0,ref:o})]})}NG.displayName="EnvironmentContext",zG.displayName="EnvironmentProvider";var FG=e=>{const{children:t,colorModeManager:n,portalZIndex:i,resetScope:r,resetCSS:o=!0,theme:s={},environment:a,cssVarsRoot:c,disableEnvironment:l,disableGlobalStyle:u}=e,d=(0,ug.jsx)(zG,{environment:a,disabled:l,children:t});return(0,ug.jsx)(wG,{theme:s,cssVarsRoot:c,children:(0,ug.jsxs)(LG,{colorModeManager:n,options:s.config,children:[o?(0,ug.jsx)(_G,{scope:r}):(0,ug.jsx)(bG,{}),!u&&(0,ug.jsx)(PG,{}),i?(0,ug.jsx)(DM,{zIndex:i,children:d}):d]})})},UG={property:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},easing:{"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},duration:{"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"}},BG={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},jG={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},VG={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},HG={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},WG={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},GG={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},qG={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},XG={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},KG={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},JG={...KG,max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch",container:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px"}},YG={breakpoints:VG,zIndices:BG,radii:WG,blur:qG,colors:HG,...XG,sizes:JG,shadows:GG,space:KG,borders:jG,transition:UG},{defineMultiStyleConfig:$G,definePartsStyle:QG}=KP(["stepper","step","title","description","indicator","separator","icon","number"]),ZG=dP("stepper-indicator-size"),eq=dP("stepper-icon-size"),tq=dP("stepper-title-font-size"),nq=dP("stepper-description-font-size"),iq=dP("stepper-accent-color"),rq=QG((e=>{let{colorScheme:t}=e;return{stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[iq.variable]:"colors.".concat(t,".500"),_dark:{[iq.variable]:"colors.".concat(t,".200")}},title:{fontSize:tq.reference,fontWeight:"medium"},description:{fontSize:nq.reference,color:"chakra-subtle-text"},number:{fontSize:tq.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:eq.reference,height:eq.reference},indicator:{flexShrink:0,borderRadius:"full",width:ZG.reference,height:ZG.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:iq.reference},"&[data-status=complete]":{bg:iq.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:iq.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:"calc(100% - ".concat(ZG.reference," - 8px)"),top:"calc(".concat(ZG.reference," + 4px)"),insetStart:"calc(".concat(ZG.reference," / 2 - 1px)")}}}})),oq=$G({baseStyle:rq,sizes:{xs:QG({stepper:{[ZG.variable]:"sizes.4",[eq.variable]:"sizes.3",[tq.variable]:"fontSizes.xs",[nq.variable]:"fontSizes.xs"}}),sm:QG({stepper:{[ZG.variable]:"sizes.6",[eq.variable]:"sizes.4",[tq.variable]:"fontSizes.sm",[nq.variable]:"fontSizes.xs"}}),md:QG({stepper:{[ZG.variable]:"sizes.8",[eq.variable]:"sizes.5",[tq.variable]:"fontSizes.md",[nq.variable]:"fontSizes.sm"}}),lg:QG({stepper:{[ZG.variable]:"sizes.10",[eq.variable]:"sizes.6",[tq.variable]:"fontSizes.lg",[nq.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function sq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1;function i(t){const n=(["container","root"].includes(null!=t?t:"")?[e]:[e,t]).filter(Boolean).join("__"),i="chakra-".concat(n);return{className:i,selector:".".concat(i),toString:()=>t}}return{parts:function(){!function(){if(n)throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?");n=!0}();for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];for(const e of o)t[e]=i(e);return sq(e,t)},toPart:i,extend:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(const e of r)e in t||(t[e]=i(e));return sq(e,t)},selectors:function(){const e=Object.fromEntries(Object.entries(t).map((e=>{let[t,n]=e;return[t,n.selector]})));return e},classnames:function(){const e=Object.fromEntries(Object.entries(t).map((e=>{let[t,n]=e;return[t,n.className]})));return e},get keys(){return Object.keys(t)},__type:{}}}var aq=sq("accordion").parts("root","container","button","panel").extend("icon"),cq=sq("alert").parts("title","description","container").extend("icon","spinner"),lq=sq("avatar").parts("label","badge","container").extend("excessLabel","group"),uq=sq("breadcrumb").parts("link","item","container").extend("separator"),dq=(sq("button").parts(),sq("checkbox").parts("control","icon","container").extend("label")),hq=(sq("progress").parts("track","filledTrack").extend("label"),sq("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer")),pq=sq("editable").parts("preview","input","textarea"),fq=sq("form").parts("container","requiredIndicator","helperText"),vq=sq("formError").parts("text","icon"),mq=sq("input").parts("addon","field","element","group"),gq=sq("list").parts("container","item","icon"),yq=sq("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),Sq=sq("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),bq=sq("numberinput").parts("root","field","stepperGroup","stepper"),_q=(sq("pininput").parts("field"),sq("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton")),wq=sq("progress").parts("label","filledTrack","track"),xq=sq("radio").parts("container","control","label"),Cq=sq("select").parts("field","icon"),Eq=sq("slider").parts("container","track","thumb","filledTrack","mark"),Pq=sq("stat").parts("container","label","helpText","number","icon"),Tq=sq("switch").parts("container","track","thumb","label"),Rq=sq("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),Mq=sq("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),Aq=sq("tag").parts("container","label","closeButton"),Iq=sq("card").parts("container","header","body","footer");sq("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");function kq(e){const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(/\s+/g,t)}(e.toString());return t.includes("\\.")?e:function(e){return!Number.isInteger(parseFloat(e.toString()))}(e)?t.replace(".","\\."):e}function Oq(e,t){return"var(".concat(kq(e)).concat(t?", ".concat(t):"",")")}function Dq(e){return"--".concat(function(e){return[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",kq(e)].filter(Boolean).join("-")}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:""))}function Lq(e,t){const n=Dq(e,null==t?void 0:t.prefix);return{variable:n,reference:Oq(n,Nq(null==t?void 0:t.fallback))}}function Nq(e){return"string"===typeof e?e:null==e?void 0:e.reference}function zq(e){return Bg(e)&&e.reference?e.reference:String(e)}var Fq=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.map(zq).join(" ".concat(e," ")).replace(/calc/g,"")},Uq=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(Fq("+",...t),")")},Bq=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(Fq("-",...t),")")},jq=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(Fq("*",...t),")")},Vq=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(Fq("/",...t),")")},Hq=e=>{const t=zq(e);return null==t||Number.isNaN(parseFloat(t))?jq(t,-1):String(t).startsWith("-")?String(t).slice(1):"-".concat(t)},Wq=Object.assign((e=>({add:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Wq(Uq(e,...n))},subtract:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Wq(Bq(e,...n))},multiply:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Wq(jq(e,...n))},divide:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Wq(Vq(e,...n))},negate:()=>Wq(Hq(e)),toString:()=>e.toString()})),{add:Uq,subtract:Bq,multiply:jq,divide:Vq,negate:Hq}),{defineMultiStyleConfig:Gq,definePartsStyle:qq}=KP(Tq.keys),Xq=Lq("switch-track-width"),Kq=Lq("switch-track-height"),Jq=Lq("switch-track-diff"),Yq=Wq.subtract(Xq,Kq),$q=Lq("switch-thumb-x"),Qq=Lq("switch-bg"),Zq=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"0.5",width:[Xq.reference],height:[Kq.reference],transitionProperty:"common",transitionDuration:"fast",[Qq.variable]:"colors.gray.300",_dark:{[Qq.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[Qq.variable]:"colors.".concat(t,".500"),_dark:{[Qq.variable]:"colors.".concat(t,".200")}},bg:Qq.reference}},eX={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[Kq.reference],height:[Kq.reference],_checked:{transform:"translateX(".concat($q.reference,")")}},tX=Gq({baseStyle:qq((e=>({container:{[Jq.variable]:Yq,[$q.variable]:Jq.reference,_rtl:{[$q.variable]:Wq(Jq).negate().toString()}},track:Zq(e),thumb:eX}))),sizes:{sm:qq({container:{[Xq.variable]:"1.375rem",[Kq.variable]:"sizes.3"}}),md:qq({container:{[Xq.variable]:"1.875rem",[Kq.variable]:"sizes.4"}}),lg:qq({container:{[Xq.variable]:"2.875rem",[Kq.variable]:"sizes.6"}})},defaultProps:{size:"md",colorScheme:"blue"}});function nX(e,t){return n=>"dark"===n.colorMode?t:e}function iX(e){const{orientation:t,vertical:n,horizontal:i}=e;return t?"vertical"===t?n:i:{}}var{defineMultiStyleConfig:rX,definePartsStyle:oX}=KP(Rq.keys),sX=oX({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),aX={"&[data-is-numeric=true]":{textAlign:"end"}},cX=rX({baseStyle:sX,variants:{simple:oX((e=>{const{colorScheme:t}=e;return{th:{color:nX("gray.600","gray.400")(e),borderBottom:"1px",borderColor:nX("".concat(t,".100"),"".concat(t,".700"))(e),...aX},td:{borderBottom:"1px",borderColor:nX("".concat(t,".100"),"".concat(t,".700"))(e),...aX},caption:{color:nX("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}})),striped:oX((e=>{const{colorScheme:t}=e;return{th:{color:nX("gray.600","gray.400")(e),borderBottom:"1px",borderColor:nX("".concat(t,".100"),"".concat(t,".700"))(e),...aX},td:{borderBottom:"1px",borderColor:nX("".concat(t,".100"),"".concat(t,".700"))(e),...aX},caption:{color:nX("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:nX("".concat(t,".100"),"".concat(t,".700"))(e)},td:{background:nX("".concat(t,".100"),"".concat(t,".700"))(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}})),unstyled:{}},sizes:{sm:oX({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:oX({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:oX({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}});function lX(e,t,n){return Math.min(Math.max(e,n),t)}class uX extends Error{constructor(e){super('Failed to parse color: "'.concat(e,'"'))}}var dX=uX;function hX(e){if("string"!==typeof e)throw new dX(e);if("transparent"===e.trim().toLowerCase())return[0,0,0,0];let t=e.trim();t=bX.test(e)?function(e){const t=e.toLowerCase().trim(),n=fX[function(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return(t>>>0)%2341}(t)];if(!n)throw new dX(e);return"#".concat(n)}(e):e;const n=mX.exec(t);if(n){const e=Array.from(n).slice(1);return[...e.slice(0,3).map((e=>parseInt(vX(e,2),16))),parseInt(vX(e[3]||"f",2),16)/255]}const i=gX.exec(t);if(i){const e=Array.from(i).slice(1);return[...e.slice(0,3).map((e=>parseInt(e,16))),parseInt(e[3]||"ff",16)/255]}const r=yX.exec(t);if(r){const e=Array.from(r).slice(1);return[...e.slice(0,3).map((e=>parseInt(e,10))),parseFloat(e[3]||"1")]}const o=SX.exec(t);if(o){const[t,n,i,r]=Array.from(o).slice(1).map(parseFloat);if(lX(0,100,n)!==n)throw new dX(e);if(lX(0,100,i)!==i)throw new dX(e);return[...wX(t,n,i),Number.isNaN(r)?1:r]}throw new dX(e)}const pX=e=>parseInt(e.replace(/_/g,""),36),fX="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce(((e,t)=>{const n=pX(t.substring(0,3)),i=pX(t.substring(3)).toString(16);let r="";for(let o=0;o<6-i.length;o++)r+="0";return e[n]="".concat(r).concat(i),e}),{});const vX=(e,t)=>Array.from(Array(t)).map((()=>e)).join(""),mX=new RegExp("^#".concat(vX("([a-f0-9])",3),"([a-f0-9])?$"),"i"),gX=new RegExp("^#".concat(vX("([a-f0-9]{2})",3),"([a-f0-9]{2})?$"),"i"),yX=new RegExp("^rgba?\\(\\s*(\\d+)\\s*".concat(vX(",\\s*(\\d+)\\s*",2),"(?:,\\s*([\\d.]+))?\\s*\\)$"),"i"),SX=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,bX=/^[a-z]+$/i,_X=e=>Math.round(255*e),wX=(e,t,n)=>{let i=n/100;if(0===t)return[i,i,i].map(_X);const r=(e%360+360)%360/60,o=(1-Math.abs(2*i-1))*(t/100),s=o*(1-Math.abs(r%2-1));let a=0,c=0,l=0;r>=0&&r<1?(a=o,c=s):r>=1&&r<2?(a=s,c=o):r>=2&&r<3?(c=o,l=s):r>=3&&r<4?(c=s,l=o):r>=4&&r<5?(a=s,l=o):r>=5&&r<6&&(a=o,l=s);const u=i-o/2;return[a+u,c+u,l+u].map(_X)};function xX(e,t,n,i){return"rgba(".concat(lX(0,255,e).toFixed(),", ").concat(lX(0,255,t).toFixed(),", ").concat(lX(0,255,n).toFixed(),", ").concat(parseFloat(lX(0,1,i).toFixed(3)),")")}function CX(e,t){const[n,i,r,o]=hX(e);return xX(n,i,r,o-t)}var EX=(e,t,n)=>{const i=function(e,t,n,i,r){for(t=t.split?t.split("."):t,i=0;i<t.length;i++)e=e?e[t[i]]:r;return e===r?n:e}(e,"colors.".concat(t),t);try{return function(e){const[t,n,i,r]=hX(e);let o=e=>{const t=lX(0,255,e).toString(16);return 1===t.length?"0".concat(t):t};"#".concat(o(t)).concat(o(n)).concat(o(i)).concat(r<1?o(Math.round(255*r)):"")}(i),i}catch{return null!=n?n:"#000000"}},PX=e=>t=>{const n=(e=>{const[t,n,i]=hX(e);return(299*t+587*n+114*i)/1e3})(EX(t,e));return n<128?"dark":"light"},TX=(e,t)=>n=>CX(EX(n,e),1-t);function RX(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1rem",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgba(255, 255, 255, 0.15)";return{backgroundImage:"linear-gradient(\n    45deg,\n    ".concat(t," 25%,\n    transparent 25%,\n    transparent 50%,\n    ").concat(t," 50%,\n    ").concat(t," 75%,\n    transparent 75%,\n    transparent\n  )"),backgroundSize:"".concat(e," ").concat(e)}}function MX(e){const t="#".concat(Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0"));return e&&(n=e,0!==Object.keys(n).length)?e.string&&e.colors?function(e,t){let n=0;if(0===e.length)return t[0];for(let i=0;i<e.length;i+=1)n=e.charCodeAt(i)+((n<<5)-n),n|=0;return n=(n%t.length+t.length)%t.length,t[n]}(e.string,e.colors):e.string&&!e.colors?function(e){let t=0;if(0===e.length)return t.toString();for(let i=0;i<e.length;i+=1)t=e.charCodeAt(i)+((t<<5)-t),t|=0;let n="#";for(let i=0;i<3;i+=1){n+="00".concat((t>>8*i&255).toString(16)).substr(-2)}return n}(e.string):e.colors&&!e.string?function(e){return e[Math.floor(Math.random()*e.length)]}(e.colors):t:t;var n}var AX=dP("tabs-color"),IX=dP("tabs-bg"),kX=dP("tabs-border-color"),{defineMultiStyleConfig:OX,definePartsStyle:DX}=KP(Mq.keys),LX=e=>{const{orientation:t}=e;return{display:"vertical"===t?"flex":"block"}},NX=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},zX=e=>{const{align:t="start",orientation:n}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:"vertical"===n?"column":"row"}},FX={p:4},UX=DX((e=>({root:LX(e),tab:NX(e),tablist:zX(e),tabpanel:FX}))),BX={sm:DX({tab:{py:1,px:4,fontSize:"sm"}}),md:DX({tab:{fontSize:"md",py:2,px:4}}),lg:DX({tab:{fontSize:"lg",py:3,px:4}})},jX=DX((e=>{const{colorScheme:t,orientation:n}=e,i="vertical"===n,r=i?"borderStart":"borderBottom";return{tablist:{[r]:"2px solid",borderColor:"inherit"},tab:{[r]:"2px solid",borderColor:"transparent",[i?"marginStart":"marginBottom"]:"-2px",_selected:{[AX.variable]:"colors.".concat(t,".600"),_dark:{[AX.variable]:"colors.".concat(t,".300")},borderColor:"currentColor"},_active:{[IX.variable]:"colors.gray.200",_dark:{[IX.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:AX.reference,bg:IX.reference}}})),VX=DX((e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[kX.variable]:"transparent",_selected:{[AX.variable]:"colors.".concat(t,".600"),[kX.variable]:"colors.white",_dark:{[AX.variable]:"colors.".concat(t,".300"),[kX.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:kX.reference},color:AX.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}})),HX=DX((e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",[IX.variable]:"colors.gray.50",_dark:{[IX.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[IX.variable]:"colors.white",[AX.variable]:"colors.".concat(t,".600"),_dark:{[IX.variable]:"colors.gray.800",[AX.variable]:"colors.".concat(t,".300")},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:AX.reference,bg:IX.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}})),WX=DX((e=>{const{colorScheme:t,theme:n}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:EX(n,"".concat(t,".700")),bg:EX(n,"".concat(t,".100"))}}}})),GX=OX({baseStyle:UX,sizes:BX,variants:{line:jX,enclosed:VX,"enclosed-colored":HX,"soft-rounded":WX,"solid-rounded":DX((e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[AX.variable]:"colors.gray.600",_dark:{[AX.variable]:"inherit"},_selected:{[AX.variable]:"colors.white",[IX.variable]:"colors.".concat(t,".600"),_dark:{[AX.variable]:"colors.gray.800",[IX.variable]:"colors.".concat(t,".300")}},color:AX.reference,bg:IX.reference}}})),unstyled:DX({})},defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),qX=function(e,t){const n={};for(const i of t)if(Array.isArray(i)){const[t,r]=i;n[t]=dP("".concat(e,"-").concat(t),r)}else n[i]=dP("".concat(e,"-").concat(i));return n}("badge",["bg","color","shadow"]),XX=e=>{const{colorScheme:t,theme:n}=e,i=TX("".concat(t,".500"),.6)(n);return{[qX.bg.variable]:"colors.".concat(t,".500"),[qX.color.variable]:"colors.white",_dark:{[qX.bg.variable]:i,[qX.color.variable]:"colors.whiteAlpha.800"}}},KX=e=>{const{colorScheme:t,theme:n}=e,i=TX("".concat(t,".200"),.16)(n);return{[qX.bg.variable]:"colors.".concat(t,".100"),[qX.color.variable]:"colors.".concat(t,".800"),_dark:{[qX.bg.variable]:i,[qX.color.variable]:"colors.".concat(t,".200")}}},JX=e=>{const{colorScheme:t,theme:n}=e,i=TX("".concat(t,".200"),.8)(n);return{[qX.color.variable]:"colors.".concat(t,".500"),_dark:{[qX.color.variable]:i},[qX.shadow.variable]:"inset 0 0 0px 1px ".concat(qX.color.reference)}},YX={baseStyle:{px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:qX.bg.reference,color:qX.color.reference,boxShadow:qX.shadow.reference},variants:{solid:XX,subtle:KX,outline:JX},defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:$X,definePartsStyle:QX}=KP(Aq.keys),ZX=dP("tag-bg"),eK=dP("tag-color"),tK=dP("tag-shadow"),nK=dP("tag-min-height"),iK=dP("tag-min-width"),rK=dP("tag-font-size"),oK=dP("tag-padding-inline"),sK=QX({container:{fontWeight:"medium",lineHeight:1.2,outline:0,[eK.variable]:qX.color.reference,[ZX.variable]:qX.bg.reference,[tK.variable]:qX.shadow.reference,color:eK.reference,bg:ZX.reference,boxShadow:tK.reference,borderRadius:"md",minH:nK.reference,minW:iK.reference,fontSize:rK.reference,px:oK.reference,_focusVisible:{[tK.variable]:"shadows.outline"}},label:{lineHeight:1.2,overflow:"visible"},closeButton:{fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}}}),aK={sm:QX({container:{[nK.variable]:"sizes.5",[iK.variable]:"sizes.5",[rK.variable]:"fontSizes.xs",[oK.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:QX({container:{[nK.variable]:"sizes.6",[iK.variable]:"sizes.6",[rK.variable]:"fontSizes.sm",[oK.variable]:"space.2"}}),lg:QX({container:{[nK.variable]:"sizes.8",[iK.variable]:"sizes.8",[rK.variable]:"fontSizes.md",[oK.variable]:"space.3"}})},cK={subtle:QX((e=>{var t;return{container:null==(t=YX.variants)?void 0:t.subtle(e)}})),solid:QX((e=>{var t;return{container:null==(t=YX.variants)?void 0:t.solid(e)}})),outline:QX((e=>{var t;return{container:null==(t=YX.variants)?void 0:t.outline(e)}}))},lK=$X({variants:cK,baseStyle:sK,sizes:aK,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:uK,defineMultiStyleConfig:dK}=KP(mq.keys),hK=dP("input-height"),pK=dP("input-font-size"),fK=dP("input-padding"),vK=dP("input-border-radius"),mK=uK({addon:{height:hK.reference,fontSize:pK.reference,px:fK.reference,borderRadius:vK.reference},field:{width:"100%",height:hK.reference,fontSize:pK.reference,px:fK.reference,borderRadius:vK.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),gK={lg:{[pK.variable]:"fontSizes.lg",[fK.variable]:"space.4",[vK.variable]:"radii.md",[hK.variable]:"sizes.12"},md:{[pK.variable]:"fontSizes.md",[fK.variable]:"space.4",[vK.variable]:"radii.md",[hK.variable]:"sizes.10"},sm:{[pK.variable]:"fontSizes.sm",[fK.variable]:"space.3",[vK.variable]:"radii.sm",[hK.variable]:"sizes.8"},xs:{[pK.variable]:"fontSizes.xs",[fK.variable]:"space.2",[vK.variable]:"radii.sm",[hK.variable]:"sizes.6"}},yK={lg:uK({field:gK.lg,group:gK.lg}),md:uK({field:gK.md,group:gK.md}),sm:uK({field:gK.sm,group:gK.sm}),xs:uK({field:gK.xs,group:gK.xs})};function SK(e){const{focusBorderColor:t,errorBorderColor:n}=e;return{focusBorderColor:t||nX("blue.500","blue.300")(e),errorBorderColor:n||nX("red.500","red.300")(e)}}var bK,_K,wK,xK,CK,EK,PK,TK,RK,MK,AK,IK=uK((e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:i}=SK(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:nX("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:EX(t,i),boxShadow:"0 0 0 1px ".concat(EX(t,i))},_focusVisible:{zIndex:1,borderColor:EX(t,n),boxShadow:"0 0 0 1px ".concat(EX(t,n))}},addon:{border:"1px solid",borderColor:nX("inherit","whiteAlpha.50")(e),bg:nX("gray.100","whiteAlpha.300")(e)}}})),kK=uK((e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:i}=SK(e);return{field:{border:"2px solid",borderColor:"transparent",bg:nX("gray.100","whiteAlpha.50")(e),_hover:{bg:nX("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:EX(t,i)},_focusVisible:{bg:"transparent",borderColor:EX(t,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:nX("gray.100","whiteAlpha.50")(e)}}})),OK=uK((e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:i}=SK(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:EX(t,i),boxShadow:"0px 1px 0px 0px ".concat(EX(t,i))},_focusVisible:{borderColor:EX(t,n),boxShadow:"0px 1px 0px 0px ".concat(EX(t,n))}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}})),DK=dK({baseStyle:mK,sizes:yK,variants:{outline:IK,filled:kK,flushed:OK,unstyled:uK({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}})},defaultProps:{size:"md",variant:"outline"}}),LK={...null==(bK=DK.baseStyle)?void 0:bK.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},NK={outline:e=>{var t,n;return null!=(n=null==(t=DK.variants)?void 0:t.outline(e).field)?n:{}},flushed:e=>{var t,n;return null!=(n=null==(t=DK.variants)?void 0:t.flushed(e).field)?n:{}},filled:e=>{var t,n;return null!=(n=null==(t=DK.variants)?void 0:t.filled(e).field)?n:{}},unstyled:null!=(wK=null==(_K=DK.variants)?void 0:_K.unstyled.field)?wK:{}},zK={baseStyle:LK,sizes:{xs:null!=(CK=null==(xK=DK.sizes)?void 0:xK.xs.field)?CK:{},sm:null!=(PK=null==(EK=DK.sizes)?void 0:EK.sm.field)?PK:{},md:null!=(RK=null==(TK=DK.sizes)?void 0:TK.md.field)?RK:{},lg:null!=(AK=null==(MK=DK.sizes)?void 0:MK.lg.field)?AK:{}},variants:NK,defaultProps:{size:"md",variant:"outline"}},FK=Lq("tooltip-bg"),UK=Lq("tooltip-fg"),BK=Lq("popper-arrow-bg"),jK={baseStyle:{bg:FK.reference,color:UK.reference,[FK.variable]:"colors.gray.700",[UK.variable]:"colors.whiteAlpha.900",_dark:{[FK.variable]:"colors.gray.300",[UK.variable]:"colors.gray.900"},[BK.variable]:FK.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"}},{defineMultiStyleConfig:VK,definePartsStyle:HK}=KP(wq.keys),WK=e=>{const{colorScheme:t,theme:n,isIndeterminate:i,hasStripe:r}=e,o=nX(RX(),RX("1rem","rgba(0,0,0,0.1)"))(e),s=nX("".concat(t,".500"),"".concat(t,".200"))(e),a="linear-gradient(\n    to right,\n    transparent 0%,\n    ".concat(EX(n,s)," 50%,\n    transparent 100%\n  )");return{...!i&&r&&o,...i?{bgImage:a}:{bgColor:s}}},GK={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},qK=e=>({bg:nX("gray.100","whiteAlpha.300")(e)}),XK=e=>({transitionProperty:"common",transitionDuration:"slow",...WK(e)}),KK=HK((e=>({label:GK,filledTrack:XK(e),track:qK(e)}))),JK=VK({sizes:{xs:HK({track:{h:"1"}}),sm:HK({track:{h:"2"}}),md:HK({track:{h:"3"}}),lg:HK({track:{h:"4"}})},baseStyle:KK,defaultProps:{size:"md",colorScheme:"blue"}});function YK(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return(e=>"function"===typeof e)(e)?e(...n):e}var $K,QK,ZK,eJ,tJ,nJ,iJ,rJ,oJ,{definePartsStyle:sJ,defineMultiStyleConfig:aJ}=KP(dq.keys),cJ=dP("checkbox-size"),lJ=e=>{const{colorScheme:t}=e;return{w:cJ.reference,h:cJ.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:nX("".concat(t,".500"),"".concat(t,".200"))(e),borderColor:nX("".concat(t,".500"),"".concat(t,".200"))(e),color:nX("white","gray.900")(e),_hover:{bg:nX("".concat(t,".600"),"".concat(t,".300"))(e),borderColor:nX("".concat(t,".600"),"".concat(t,".300"))(e)},_disabled:{borderColor:nX("gray.200","transparent")(e),bg:nX("gray.200","whiteAlpha.300")(e),color:nX("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:nX("".concat(t,".500"),"".concat(t,".200"))(e),borderColor:nX("".concat(t,".500"),"".concat(t,".200"))(e),color:nX("white","gray.900")(e)},_disabled:{bg:nX("gray.100","whiteAlpha.100")(e),borderColor:nX("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:nX("red.500","red.300")(e)}}},uJ={_disabled:{cursor:"not-allowed"}},dJ={userSelect:"none",_disabled:{opacity:.4}},hJ={transitionProperty:"transform",transitionDuration:"normal"},pJ=aJ({baseStyle:sJ((e=>({icon:hJ,container:uJ,control:YK(lJ,e),label:dJ}))),sizes:{sm:sJ({control:{[cJ.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:sJ({control:{[cJ.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:sJ({control:{[cJ.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:fJ,definePartsStyle:vJ}=KP(xq.keys),mJ=e=>{var t;const n=null==(t=YK(pJ.baseStyle,e))?void 0:t.control;return{...n,borderRadius:"full",_checked:{...null==n?void 0:n._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},gJ=vJ((e=>{var t,n,i,r;return{label:null==(n=(t=pJ).baseStyle)?void 0:n.call(t,e).label,container:null==(r=(i=pJ).baseStyle)?void 0:r.call(i,e).container,control:mJ(e)}})),yJ=fJ({baseStyle:gJ,sizes:{md:vJ({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:vJ({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:vJ({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:SJ,definePartsStyle:bJ}=KP(Cq.keys),_J=dP("select-bg"),wJ={paddingInlineEnd:"8"},xJ=SJ({baseStyle:bJ({field:{...null==($K=DK.baseStyle)?void 0:$K.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:_J.reference,[_J.variable]:"colors.white",_dark:{[_J.variable]:"colors.gray.700"},"> option, > optgroup":{bg:_J.reference}},icon:{width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}}}),sizes:{lg:{...null==(QK=DK.sizes)?void 0:QK.lg,field:{...null==(ZK=DK.sizes)?void 0:ZK.lg.field,...wJ}},md:{...null==(eJ=DK.sizes)?void 0:eJ.md,field:{...null==(tJ=DK.sizes)?void 0:tJ.md.field,...wJ}},sm:{...null==(nJ=DK.sizes)?void 0:nJ.sm,field:{...null==(iJ=DK.sizes)?void 0:iJ.sm.field,...wJ}},xs:{...null==(rJ=DK.sizes)?void 0:rJ.xs,field:{...null==(oJ=DK.sizes)?void 0:oJ.xs.field,...wJ},icon:{insetEnd:"1"}}},variants:DK.variants,defaultProps:DK.defaultProps}),CJ=dP("skeleton-start-color"),EJ=dP("skeleton-end-color"),PJ={baseStyle:{[CJ.variable]:"colors.gray.100",[EJ.variable]:"colors.gray.400",_dark:{[CJ.variable]:"colors.gray.800",[EJ.variable]:"colors.gray.600"},background:CJ.reference,borderColor:EJ.reference,opacity:.7,borderRadius:"sm"}},TJ=dP("skip-link-bg"),RJ={baseStyle:{borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[TJ.variable]:"colors.white",_dark:{[TJ.variable]:"colors.gray.700"},bg:TJ.reference}}},{defineMultiStyleConfig:MJ,definePartsStyle:AJ}=KP(Eq.keys),IJ=dP("slider-thumb-size"),kJ=dP("slider-track-size"),OJ=dP("slider-bg"),DJ=e=>{const{orientation:t}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...iX({orientation:t,vertical:{h:"100%"},horizontal:{w:"100%"}})}},LJ=e=>({...iX({orientation:e.orientation,horizontal:{h:kJ.reference},vertical:{w:kJ.reference}}),overflow:"hidden",borderRadius:"sm",[OJ.variable]:"colors.gray.200",_dark:{[OJ.variable]:"colors.whiteAlpha.200"},_disabled:{[OJ.variable]:"colors.gray.300",_dark:{[OJ.variable]:"colors.whiteAlpha.300"}},bg:OJ.reference}),NJ=e=>{const{orientation:t}=e;return{...iX({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:IJ.reference,h:IJ.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},zJ=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",[OJ.variable]:"colors.".concat(t,".500"),_dark:{[OJ.variable]:"colors.".concat(t,".200")},bg:OJ.reference}},FJ=MJ({baseStyle:AJ((e=>({container:DJ(e),track:LJ(e),thumb:NJ(e),filledTrack:zJ(e)}))),sizes:{lg:AJ({container:{[IJ.variable]:"sizes.4",[kJ.variable]:"sizes.1"}}),md:AJ({container:{[IJ.variable]:"sizes.3.5",[kJ.variable]:"sizes.1"}}),sm:AJ({container:{[IJ.variable]:"sizes.2.5",[kJ.variable]:"sizes.0.5"}})},defaultProps:{size:"md",colorScheme:"blue"}}),UJ=Lq("spinner-size"),BJ={baseStyle:{width:[UJ.reference],height:[UJ.reference]},sizes:{xs:{[UJ.variable]:"sizes.3"},sm:{[UJ.variable]:"sizes.4"},md:{[UJ.variable]:"sizes.6"},lg:{[UJ.variable]:"sizes.8"},xl:{[UJ.variable]:"sizes.12"}},defaultProps:{size:"md"}},{defineMultiStyleConfig:jJ,definePartsStyle:VJ}=KP(Pq.keys),HJ=jJ({baseStyle:VJ({container:{},label:{fontWeight:"medium"},helpText:{opacity:.8,marginBottom:"2"},number:{verticalAlign:"baseline",fontWeight:"semibold"},icon:{marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"}}),sizes:{md:VJ({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},defaultProps:{size:"md"}}),WJ=dP("kbd-bg"),GJ={baseStyle:{[WJ.variable]:"colors.gray.100",_dark:{[WJ.variable]:"colors.whiteAlpha.100"},bg:WJ.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"}},qJ={baseStyle:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}}},{defineMultiStyleConfig:XJ,definePartsStyle:KJ}=KP(gq.keys),JJ=XJ({baseStyle:KJ({icon:{marginEnd:"2",display:"inline",verticalAlign:"text-bottom"}})}),{defineMultiStyleConfig:YJ,definePartsStyle:$J}=KP(yq.keys),QJ=dP("menu-bg"),ZJ=dP("menu-shadow"),eY=YJ({baseStyle:$J({button:{transitionProperty:"common",transitionDuration:"normal"},list:{[QJ.variable]:"#fff",[ZJ.variable]:"shadows.sm",_dark:{[QJ.variable]:"colors.gray.700",[ZJ.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:QJ.reference,boxShadow:ZJ.reference},item:{py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[QJ.variable]:"colors.gray.100",_dark:{[QJ.variable]:"colors.whiteAlpha.100"}},_active:{[QJ.variable]:"colors.gray.200",_dark:{[QJ.variable]:"colors.whiteAlpha.200"}},_expanded:{[QJ.variable]:"colors.gray.100",_dark:{[QJ.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:QJ.reference},groupTitle:{mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},icon:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},command:{opacity:.6},divider:{border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6}})}),{defineMultiStyleConfig:tY,definePartsStyle:nY}=KP(Sq.keys),iY=dP("modal-bg"),rY=dP("modal-shadow"),oY={bg:"blackAlpha.600",zIndex:"modal"},sY=e=>{const{isCentered:t,scrollBehavior:n}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:"inside"===n?"hidden":"auto",overscrollBehaviorY:"none"}},aY=e=>{const{isCentered:t,scrollBehavior:n}=e;return{borderRadius:"md",color:"inherit",my:t?"auto":"16",mx:t?"auto":void 0,zIndex:"modal",maxH:"inside"===n?"calc(100% - 7.5rem)":void 0,[iY.variable]:"colors.white",[rY.variable]:"shadows.lg",_dark:{[iY.variable]:"colors.gray.700",[rY.variable]:"shadows.dark-lg"},bg:iY.reference,boxShadow:rY.reference}},cY={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},lY={position:"absolute",top:"2",insetEnd:"3"},uY=e=>{const{scrollBehavior:t}=e;return{px:"6",py:"2",flex:"1",overflow:"inside"===t?"auto":void 0}},dY={px:"6",py:"4"};function hY(e){return nY("full"===e?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}var pY=tY({baseStyle:nY((e=>({overlay:oY,dialogContainer:YK(sY,e),dialog:YK(aY,e),header:cY,closeButton:lY,body:YK(uY,e),footer:dY}))),sizes:{xs:hY("xs"),sm:hY("sm"),md:hY("md"),lg:hY("lg"),xl:hY("xl"),"2xl":hY("2xl"),"3xl":hY("3xl"),"4xl":hY("4xl"),"5xl":hY("5xl"),"6xl":hY("6xl"),full:hY("full")},defaultProps:{size:"md"}}),{defineMultiStyleConfig:fY,definePartsStyle:vY}=KP(bq.keys),mY=Lq("number-input-stepper-width"),gY=Lq("number-input-input-padding"),yY=Wq(mY).add("0.5rem").toString(),SY=Lq("number-input-bg"),bY=Lq("number-input-color"),_Y=Lq("number-input-border-color"),wY={[mY.variable]:"sizes.6",[gY.variable]:yY},xY=e=>{var t,n;return null!=(n=null==(t=YK(DK.baseStyle,e))?void 0:t.field)?n:{}},CY={width:mY.reference},EY={borderStart:"1px solid",borderStartColor:_Y.reference,color:bY.reference,bg:SY.reference,[bY.variable]:"colors.chakra-body-text",[_Y.variable]:"colors.chakra-border-color",_dark:{[bY.variable]:"colors.whiteAlpha.800",[_Y.variable]:"colors.whiteAlpha.300"},_active:{[SY.variable]:"colors.gray.200",_dark:{[SY.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},PY=vY((e=>{var t;return{root:wY,field:null!=(t=YK(xY,e))?t:{},stepperGroup:CY,stepper:EY}}));function TY(e){var t,n,i;const r=null==(t=DK.sizes)?void 0:t[e],o={lg:"md",md:"md",sm:"sm",xs:"sm"},s=null!=(i=null==(n=r.field)?void 0:n.fontSize)?i:"md",a=XG.fontSizes[s];return vY({field:{...r.field,paddingInlineEnd:gY.reference,verticalAlign:"top"},stepper:{fontSize:Wq(a).multiply(.75).toString(),_first:{borderTopEndRadius:o[e]},_last:{borderBottomEndRadius:o[e],mt:"-1px",borderTopWidth:1}}})}var RY,MY,AY,IY=fY({baseStyle:PY,sizes:{xs:TY("xs"),sm:TY("sm"),md:TY("md"),lg:TY("lg")},variants:DK.variants,defaultProps:DK.defaultProps}),kY={...null==(RY=DK.baseStyle)?void 0:RY.field,textAlign:"center"},OY={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},DY={outline:e=>{var t,n,i;return null!=(i=null==(n=YK(null==(t=DK.variants)?void 0:t.outline,e))?void 0:n.field)?i:{}},flushed:e=>{var t,n,i;return null!=(i=null==(n=YK(null==(t=DK.variants)?void 0:t.flushed,e))?void 0:n.field)?i:{}},filled:e=>{var t,n,i;return null!=(i=null==(n=YK(null==(t=DK.variants)?void 0:t.filled,e))?void 0:n.field)?i:{}},unstyled:null!=(AY=null==(MY=DK.variants)?void 0:MY.unstyled.field)?AY:{}},LY={baseStyle:kY,sizes:OY,variants:DY,defaultProps:DK.defaultProps},{defineMultiStyleConfig:NY,definePartsStyle:zY}=KP(_q.keys),FY=Lq("popper-bg"),UY=Lq("popper-arrow-bg"),BY=Lq("popper-arrow-shadow-color"),jY=NY({baseStyle:zY({popper:{zIndex:10},content:{[FY.variable]:"colors.white",bg:FY.reference,[UY.variable]:FY.reference,[BY.variable]:"colors.gray.200",_dark:{[FY.variable]:"colors.gray.700",[BY.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},header:{px:3,py:2,borderBottomWidth:"1px"},body:{px:3,py:2},footer:{px:3,py:2,borderTopWidth:"1px"},closeButton:{position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2}})}),{definePartsStyle:VY,defineMultiStyleConfig:HY}=KP(hq.keys),WY=dP("drawer-bg"),GY=dP("drawer-box-shadow");function qY(e){return VY("full"===e?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}var XY={bg:"blackAlpha.600",zIndex:"modal"},KY={display:"flex",zIndex:"modal",justifyContent:"center"},JY=e=>{const{isFullHeight:t}=e;return{...t&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[WY.variable]:"colors.white",[GY.variable]:"shadows.lg",_dark:{[WY.variable]:"colors.gray.700",[GY.variable]:"shadows.dark-lg"},bg:WY.reference,boxShadow:GY.reference}},YY={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},$Y={position:"absolute",top:"2",insetEnd:"3"},QY={px:"6",py:"2",flex:"1",overflow:"auto"},ZY={px:"6",py:"4"},e$=HY({baseStyle:VY((e=>({overlay:XY,dialogContainer:KY,dialog:YK(JY,e),header:YY,closeButton:$Y,body:QY,footer:ZY}))),sizes:{xs:qY("xs"),sm:qY("md"),md:qY("lg"),lg:qY("2xl"),xl:qY("4xl"),full:qY("full")},defaultProps:{size:"xs"}}),{definePartsStyle:t$,defineMultiStyleConfig:n$}=KP(pq.keys),i$=n$({baseStyle:t$({preview:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},input:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},textarea:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}}})}),{definePartsStyle:r$,defineMultiStyleConfig:o$}=KP(fq.keys),s$=dP("form-control-color"),a$=o$({baseStyle:r$({container:{width:"100%",position:"relative"},requiredIndicator:{marginStart:"1",[s$.variable]:"colors.red.500",_dark:{[s$.variable]:"colors.red.300"},color:s$.reference},helperText:{mt:"2",[s$.variable]:"colors.gray.600",_dark:{[s$.variable]:"colors.whiteAlpha.600"},color:s$.reference,lineHeight:"normal",fontSize:"sm"}})}),{definePartsStyle:c$,defineMultiStyleConfig:l$}=KP(vq.keys),u$=dP("form-error-color"),d$=l$({baseStyle:c$({text:{[u$.variable]:"colors.red.500",_dark:{[u$.variable]:"colors.red.300"},color:u$.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},icon:{marginEnd:"0.5em",[u$.variable]:"colors.red.500",_dark:{[u$.variable]:"colors.red.300"},color:u$.reference}})}),h$={baseStyle:{fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}}},p$={baseStyle:{fontFamily:"heading",fontWeight:"bold"},sizes:{"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},defaultProps:{size:"xl"}},{defineMultiStyleConfig:f$,definePartsStyle:v$}=KP(uq.keys),m$=dP("breadcrumb-link-decor"),g$=f$({baseStyle:v$({link:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:m$.reference,[m$.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[m$.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}}})}),y$=e=>{const{colorScheme:t,theme:n}=e;if("gray"===t)return{color:nX("gray.800","whiteAlpha.900")(e),_hover:{bg:nX("gray.100","whiteAlpha.200")(e)},_active:{bg:nX("gray.200","whiteAlpha.300")(e)}};const i=TX("".concat(t,".200"),.12)(n),r=TX("".concat(t,".200"),.24)(n);return{color:nX("".concat(t,".600"),"".concat(t,".200"))(e),bg:"transparent",_hover:{bg:nX("".concat(t,".50"),i)(e)},_active:{bg:nX("".concat(t,".100"),r)(e)}}},S$={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},b$=e=>{var t;const{colorScheme:n}=e;if("gray"===n){const t=nX("gray.100","whiteAlpha.200")(e);return{bg:t,color:nX("gray.800","whiteAlpha.900")(e),_hover:{bg:nX("gray.200","whiteAlpha.300")(e),_disabled:{bg:t}},_active:{bg:nX("gray.300","whiteAlpha.400")(e)}}}const{bg:i="".concat(n,".500"),color:r="white",hoverBg:o="".concat(n,".600"),activeBg:s="".concat(n,".700")}=null!=(t=S$[n])?t:{},a=nX(i,"".concat(n,".200"))(e);return{bg:a,color:nX(r,"gray.800")(e),_hover:{bg:nX(o,"".concat(n,".300"))(e),_disabled:{bg:a}},_active:{bg:nX(s,"".concat(n,".400"))(e)}}},_$={baseStyle:{lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},variants:{ghost:y$,outline:e=>{const{colorScheme:t}=e,n=nX("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:"gray"===t?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...YK(y$,e)}},solid:b$,link:e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:nX("".concat(t,".500"),"".concat(t,".200"))(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:nX("".concat(t,".700"),"".concat(t,".500"))(e)}}},unstyled:{bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"}},sizes:{lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:w$,defineMultiStyleConfig:x$}=KP(Iq.keys),C$=dP("card-bg"),E$=dP("card-padding"),P$=dP("card-shadow"),T$=dP("card-radius"),R$=dP("card-border-width","0"),M$=dP("card-border-color"),A$=w$({container:{[C$.variable]:"colors.chakra-body-bg",backgroundColor:C$.reference,boxShadow:P$.reference,borderRadius:T$.reference,color:"chakra-body-text",borderWidth:R$.reference,borderColor:M$.reference},body:{padding:E$.reference,flex:"1 1 0%"},header:{padding:E$.reference},footer:{padding:E$.reference}}),I$={sm:w$({container:{[T$.variable]:"radii.base",[E$.variable]:"space.3"}}),md:w$({container:{[T$.variable]:"radii.md",[E$.variable]:"space.5"}}),lg:w$({container:{[T$.variable]:"radii.xl",[E$.variable]:"space.7"}})},k$=x$({baseStyle:A$,variants:{elevated:w$({container:{[P$.variable]:"shadows.base",_dark:{[C$.variable]:"colors.gray.700"}}}),outline:w$({container:{[R$.variable]:"1px",[M$.variable]:"colors.chakra-border-color"}}),filled:w$({container:{[C$.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[E$.variable]:0},header:{[E$.variable]:0},footer:{[E$.variable]:0}}},sizes:I$,defaultProps:{variant:"elevated",size:"md"}}),O$=Lq("close-button-size"),D$=Lq("close-button-bg"),L$={baseStyle:{w:[O$.reference],h:[O$.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[D$.variable]:"colors.blackAlpha.100",_dark:{[D$.variable]:"colors.whiteAlpha.100"}},_active:{[D$.variable]:"colors.blackAlpha.200",_dark:{[D$.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:D$.reference},sizes:{lg:{[O$.variable]:"sizes.10",fontSize:"md"},md:{[O$.variable]:"sizes.8",fontSize:"xs"},sm:{[O$.variable]:"sizes.6",fontSize:"2xs"}},defaultProps:{size:"md"}},{variants:N$,defaultProps:z$}=YX,F$={baseStyle:{fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:qX.bg.reference,color:qX.color.reference,boxShadow:qX.shadow.reference},variants:N$,defaultProps:z$},U$={baseStyle:{w:"100%",mx:"auto",maxW:"prose",px:"4"}},B$={baseStyle:{opacity:.6,borderColor:"inherit"},variants:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"}},defaultProps:{variant:"solid"}},{definePartsStyle:j$,defineMultiStyleConfig:V$}=KP(aq.keys),H$=V$({baseStyle:j$({container:{borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},button:{transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},panel:{pt:"2",px:"4",pb:"5"},icon:{fontSize:"1.25em"}})}),{definePartsStyle:W$,defineMultiStyleConfig:G$}=KP(cq.keys),q$=dP("alert-fg"),X$=dP("alert-bg");function K$(e){const{theme:t,colorScheme:n}=e,i=TX("".concat(n,".200"),.16)(t);return{light:"colors.".concat(n,".100"),dark:i}}var J$=G$({baseStyle:W$({container:{bg:X$.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:q$.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:q$.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}}),variants:{subtle:W$((e=>{const{colorScheme:t}=e,n=K$(e);return{container:{[q$.variable]:"colors.".concat(t,".600"),[X$.variable]:n.light,_dark:{[q$.variable]:"colors.".concat(t,".200"),[X$.variable]:n.dark}}}})),"left-accent":W$((e=>{const{colorScheme:t}=e,n=K$(e);return{container:{[q$.variable]:"colors.".concat(t,".600"),[X$.variable]:n.light,_dark:{[q$.variable]:"colors.".concat(t,".200"),[X$.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:q$.reference}}})),"top-accent":W$((e=>{const{colorScheme:t}=e,n=K$(e);return{container:{[q$.variable]:"colors.".concat(t,".600"),[X$.variable]:n.light,_dark:{[q$.variable]:"colors.".concat(t,".200"),[X$.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:q$.reference}}})),solid:W$((e=>{const{colorScheme:t}=e;return{container:{[q$.variable]:"colors.white",[X$.variable]:"colors.".concat(t,".600"),_dark:{[q$.variable]:"colors.gray.900",[X$.variable]:"colors.".concat(t,".200")},color:q$.reference}}}))},defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:Y$,defineMultiStyleConfig:$$}=KP(lq.keys),Q$=dP("avatar-border-color"),Z$=dP("avatar-bg"),eQ=dP("avatar-font-size"),tQ=dP("avatar-size"),nQ={borderRadius:"full",border:"0.2em solid",borderColor:Q$.reference,[Q$.variable]:"white",_dark:{[Q$.variable]:"colors.gray.800"}},iQ={bg:Z$.reference,fontSize:eQ.reference,width:tQ.reference,height:tQ.reference,lineHeight:"1",[Z$.variable]:"colors.gray.200",_dark:{[Z$.variable]:"colors.whiteAlpha.400"}},rQ=e=>{const{name:t,theme:n}=e,i=t?MX({string:t}):"colors.gray.400",r=(e=>t=>"dark"===PX(e)(t))(i)(n);let o="white";return r||(o="gray.800"),{bg:Z$.reference,fontSize:eQ.reference,color:o,borderColor:Q$.reference,verticalAlign:"top",width:tQ.reference,height:tQ.reference,"&:not([data-loaded])":{[Z$.variable]:i},[Q$.variable]:"colors.white",_dark:{[Q$.variable]:"colors.gray.800"}}},oQ={fontSize:eQ.reference,lineHeight:"1"};function sQ(e){const t="100%"!==e?JG[e]:void 0;return Y$({container:{[tQ.variable]:null!=t?t:e,[eQ.variable]:"calc(".concat(null!=t?t:e," / 2.5)")},excessLabel:{[tQ.variable]:null!=t?t:e,[eQ.variable]:"calc(".concat(null!=t?t:e," / 2.5)")}})}var aQ={Accordion:H$,Alert:J$,Avatar:$$({baseStyle:Y$((e=>({badge:YK(nQ,e),excessLabel:YK(iQ,e),container:YK(rQ,e),label:oQ}))),sizes:{"2xs":sQ(4),xs:sQ(6),sm:sQ(8),md:sQ(12),lg:sQ(16),xl:sQ(24),"2xl":sQ(32),full:sQ("100%")},defaultProps:{size:"md"}}),Badge:YX,Breadcrumb:g$,Button:_$,Checkbox:pJ,CloseButton:L$,Code:F$,Container:U$,Divider:B$,Drawer:e$,Editable:i$,Form:a$,FormError:d$,FormLabel:h$,Heading:p$,Input:DK,Kbd:GJ,Link:qJ,List:JJ,Menu:eY,Modal:pY,NumberInput:IY,PinInput:LY,Popover:jY,Progress:JK,Radio:yJ,Select:xJ,Skeleton:PJ,SkipLink:RJ,Slider:FJ,Spinner:BJ,Stat:HJ,Switch:tX,Table:cX,Tabs:GX,Tag:lK,Textarea:zK,Tooltip:jK,Card:k$,Stepper:oq},cQ={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},lQ={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},uQ={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},dQ={semanticTokens:cQ,direction:"ltr",...YG,components:aQ,styles:lQ,config:uQ},hQ={semanticTokens:cQ,direction:"ltr",components:{},...YG,styles:lQ,config:uQ},pQ=e=>function(t){let{children:n,theme:i=e,toastOptions:r,...o}=t;return(0,ug.jsxs)(FG,{theme:i,...o,children:[(0,ug.jsx)(WM,{value:null==r?void 0:r.defaultOptions,children:n}),(0,ug.jsx)(qM,{...r})]})},fQ=pQ(dQ);pQ(hQ);class vQ{constructor(e){this.gameInstance=e,this.unityBlendshapes=Yj,this.unityBoneshapes=$j,this.weights=new Array(this.unityBlendshapes.length).fill(0),this.smoothTimes=new Array(this.unityBlendshapes.length).fill(0),this.boneWeights=new Array(this.unityBoneshapes.length).fill(0),this.boneSmoothTimes=new Array(this.unityBoneshapes.length).fill(0),this.centerHeadPosition,this.cameraPosition=new Array(3).fill(0),this.viewportLookPoint=new Array(2).fill(0),this.FacsLib=null}load(e,t){this.gameInstance.SendMessage("SceneLoader","Load","".concat(e,";").concat(t))}setAU(e,t,n){this.gameInstance.SendMessage("FAC_controller","change","".concat(e,":").concat(t))}setTargets(e,t){this.unityBlendshapes.forEach(((n,i)=>{if(n.AUid){const r=this.FacsLib.ActionUnitsList.findIndex((e=>e.id===n.AUid));this.weights[i]=e[r],this.smoothTimes[i]=t[r]}else if(n.VisemeName){const r=this.FacsLib.ActionUnitsList.length,o=this.FacsLib.VisemesList.findIndex((e=>e.name===n.VisemeName));this.weights[i]=e[o+r],this.smoothTimes[i]=t[o+r]}}));let n=this.weights.map(((e,t)=>"".concat(e.toFixed(1),";").concat(this.smoothTimes[t].toFixed(1),";"))).join("");this.gameInstance.SendMessage("FACcontroler","SetAllTargetWeights",n),this.unityBoneshapes.forEach(((n,i)=>{if(n.AUid){const r=this.FacsLib.ActionUnitsList.findIndex((e=>e.id===n.AUid));this.boneWeights[i]=e[r],this.boneSmoothTimes[i]=t[r]}})),n=this.boneWeights.map(((e,t)=>"".concat(e.toFixed(1),";").concat(this.boneSmoothTimes[t].toFixed(1),";"))).join(""),this.gameInstance.SendMessage("FACcontroler","SetAllTargetBoneWeights",n)}setEyeTargetViewport(e,t,n){const i="".concat(e.toFixed(2),";").concat(t.toFixed(2),";").concat(n.toFixed(2),";");this.gameInstance.SendMessage("FACcontroler","SetEyeTargetViewport",i)}setEyeTarget(e,t,n,i,r,o,s,a){const c="".concat(e.toFixed(2),";").concat(t.toFixed(2),";").concat(n.toFixed(2),";").concat(i.toFixed(2),";").concat(r.toFixed(2),";").concat(o.toFixed(2),";").concat(s.toFixed(2),";").concat(a.toFixed(2),";");this.gameInstance.SendMessage("FACcontroler","SetEyeTarget",c)}getEyeTargetPosition(){this.gameInstance.SendMessage("FACcontroler","GetEyeTargetPosition","")}setCameraPosition(e,t,n,i,r,o){const s="".concat(e.toFixed(2),";").concat(t.toFixed(2),";").concat(n.toFixed(2),";").concat(i.toFixed(2),";").concat(r.toFixed(2),";").concat(o.toFixed(2),";");this.gameInstance.SendMessage("FACcontroler","SetCameraPosition",s)}}window.centerHeadPosition=(e,t,n)=>{engine.centerHeadPosition||(engine.centerHeadPosition=[e,t,n])};class mQ{constructor(e){this.defaultIntensity="C",this.engine=e,this.ActionUnitsList=Qj,this.EmotionsList=Zj,this.VisemesList=eV,this.nbActionUnits=this.ActionUnitsList.length,this.nbVisemes=this.VisemesList.length,this.currentWeightTargets=new Array(this.nbActionUnits+this.nbVisemes).fill(0),this.currentWeightSmooth=new Array(this.nbActionUnits+this.nbVisemes).fill(0),this.cameraPosition=new Array(3).fill(0)}load(e,t){this.engine.load(e,t)}setNeutral(e){this.currentWeightTargets.fill(0,0,this.nbActionUnits),this.currentWeightSmooth.fill(e,0,this.nbActionUnits)}setNeutralWithoutHeadTurn(e){this.setNeutral(e),this.currentWeightTargets.fill(0,0,50),this.currentWeightSmooth.fill(e,0,50),this.currentWeightTargets.fill(0,55,60),this.currentWeightSmooth.fill(e,55,60),this.currentWeightTargets.fill(0,63,this.nbActionUnits),this.currentWeightSmooth.fill(e,63,this.nbActionUnits)}setLookBottomLeft(e){this.currentWeightTargets[51]=20,this.currentWeightTargets[54]=40,this.currentWeightSmooth.fill(e,51,55)}setLookBottomRight(e){this.currentWeightTargets[52]=20,this.currentWeightTargets[54]=40,this.currentWeightSmooth.fill(e,52,55)}setLookUpLeft(e){this.currentWeightTargets[51]=10,this.currentWeightTargets[53]=10,this.currentWeightSmooth.fill(e,51,54)}setLookUpRight(e){this.currentWeightTargets[52]=90,this.currentWeightTargets[53]=90,this.currentWeightSmooth.fill(e,52,54)}setTargetEmotion(e,t,n){this.setNeutralWithoutHeadTurn(n);const i=this.EmotionsList.findIndex((t=>t.name===e)),r=this.EmotionsList[i].code;this.setTargetEmotionString(r,t,n)}setTargetEmotionString(e,t,n){e.split("+").forEach((e=>this.setTargetEmotionSubstring(e,t,n)))}setTargetEmotionSubstring(e,t,n){const i="R"===e[0]||"L"===e[0]?e[0]:null;e=i?e.substring(1):e;const r=isNaN(parseInt(e.slice(-1)))?e.slice(-1):"1.0",o={A:.2,B:.4,C:.6,D:.8,E:1}[r]||1,s=isNaN(parseInt(r))?e.slice(0,-1):e;this.setTargetAU(s,100*o*t,i,n)}setTargetAU(e,t,n,i){const r=this.ActionUnitsList.findIndex((t=>t.id===e));-1!==r&&(this.currentWeightTargets[r]=t,this.currentWeightSmooth[r]=i)}getTargetAU(e){const t=this.ActionUnitsList.findIndex((t=>t.id===e));return this.currentWeightTargets[t]}setNeutralViseme(e){this.currentWeightTargets.fill(0,this.nbActionUnits,this.nbActionUnits+this.nbVisemes),this.currentWeightSmooth.fill(e,this.nbActionUnits,this.nbActionUnits+this.nbVisemes)}setTargetViseme(e,t,n){this.setNeutralViseme(n),this.currentWeightTargets[this.nbActionUnits+e]=t,this.currentWeightSmooth[this.nbActionUnits+e]=n}getTargetViseme(e){return this.currentWeightTargets[this.nbActionUnits+e]}setEyeTarget(e,t,n,i,r,o,s,a){this.engine.setEyeTarget(e,t,n,i,r,o,s,a)}setCameraPosition(e,t,n,i,r,o){this.engine.setCameraPosition(e,t,n,i,r,o)}updateEngine(){this.engine.setTargets(this.currentWeightTargets,this.currentWeightSmooth)}}window.engine,window.facslib,window.unityWebGLContentLoaded=!1;let gQ="https://evalibre.blob.core.windows.net/evalibre/001_FEMALE_CAU_2019_05_06/",yQ="scene_001_FEMALE_CAU";window.U3_sceneLoaded=()=>{unityWebGLContentLoaded||(window.unityWebGLContentLoaded=!0,setTimeout((()=>{console.log("Unity WebGL content loaded!!!");const e={engine:window.engine,facslib:window.facslib};document.dispatchEvent(new CustomEvent("unityLoaded",{detail:e}))}),100))},window.U3_startSceneLoaded=()=>{console.log("Unity WebGL content loaded"),window.unityWebGLContentLoaded||(console.log("Unity WebGL content loaded!!!"),facslib.load("scene_environment_simple",yQ))},function(e,t){const n=document.createElement("script");n.src=e,n.onload=()=>{console.log("Unity loader script loaded successfully."),"function"===typeof t&&t()},n.onerror=()=>console.error("Failed to load Unity loader script."),document.head.appendChild(n)}(gQ+"UnityLoader.js",(function(){window.gameInstance=UnityLoader.instantiate("gameContainer",gQ+"webgl.json"),window.engine=new vQ(window.gameInstance),window.facslib=new mQ(engine),window.engine.FacsLib=facslib}));const SQ=document.getElementById("root"),bQ=(0,r.H)(SQ);"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("".concat("/EVA-libre","/unityCacheServiceWorker.js")).then((e=>{console.log("ServiceWorker registration successful with scope: ",e.scope)}),(e=>{console.log("ServiceWorker registration failed: ",e)}))})),bQ.render((0,ug.jsx)(t.StrictMode,{children:(0,ug.jsx)(fQ,{children:(0,ug.jsx)(iV,{children:(0,ug.jsx)(vG,{})})})}))})()})();
//# sourceMappingURL=main.2f401d5d.js.map