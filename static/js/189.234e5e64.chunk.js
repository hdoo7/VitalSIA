"use strict";(self.webpackChunkEVA_libre=self.webpackChunkEVA_libre||[]).push([[189],{12189:(e,t,s)=>{s.r(t),s.d(t,{start:()=>y,stop:()=>w});var n=s(65043),o=s(93748),r=s(84391),i=s(53409),u=s(62872),a=s(42026),l=s(96308),c=s(38462),d=s(34003),h=s(69108),f=s(70579);let g=null;const p=e=>{let{animationManager:t}=e;const[s,r]=(0,n.useState)(0),[g,p]=(0,n.useState)(null),y=(0,n.useRef)(s),w=(0,o.d)(),m=(0,n.useMemo)((()=>[{question:"How are you feeling right now?",answers:["Happy","Sad","Anxious","Calm"]},{question:"Do you feel stressed?",answers:["Yes","No"]},{question:"Are you feeling overwhelmed at the moment?",answers:["Yes","No"]},{question:"Do you need any support or encouragement?",answers:["Yes","No"]},{question:"Would you like to talk about what\u2019s bothering you?",answers:["Yes","No"]}]),[]);(0,n.useEffect)((()=>{y.current=s}),[s]);const k=(e,t)=>{const s=e.toLowerCase();for(const n of t)if(s.includes(n.toLowerCase()))return n;return null},A=(0,n.useMemo)((()=>function*(){for(let e of m)yield e.question;yield"You have completed the session. Based on your responses, we will provide feedback shortly."}),[m]),b=(0,n.useMemo)((()=>function*(){for(let e of m){let t=yield;const s=k(t,e.answers);s?["Sad","Anxious","Overwhelmed"].includes(s)?yield"I'm sorry you're feeling this way. Remember that you're strong and things will get better.":"Yes"===s?yield"It's great that you're recognizing your feelings. Take a deep breath and know that you can handle this.":yield"I'm glad to hear you're feeling good. Keep up the positive mindset!":yield"I didn't quite catch that. Could you please repeat or clarify your response?"}}),[m]),[v,x]=(0,n.useState)({status:"idle",transcribedText:null,speakingText:null}),C=(0,n.useRef)(new a.A("webspeech")).current,S=(0,n.useRef)(l.A.getInstance(t)).current,E=(0,n.useRef)(new c.A(1e3,C,S)).current;(0,u.A)(t,g);const{startConversation:q,stopConversation:R}=(0,i.A)(C,S,E,A,b);return(0,n.useEffect)((()=>(S.findAndSetVoice("Google English ").then((()=>{q()})),()=>{R()})),[q,R,S]),(0,n.useEffect)((()=>{"thinking"===v.status?w({title:"Processing...",description:"Processing your response...",status:"info",duration:2e3}):"talking"===v.status&&w({title:"Response",description:v.speakingText,status:"success",duration:4e3})}),[v.status,w]),(0,f.jsxs)("div",{children:[(0,f.jsx)(h.A,{onEmotionStateChange:p}),"  ",(0,f.jsx)(d.A,{status:v.status}),(0,f.jsx)("div",{children:(0,f.jsx)("h2",{children:"Session in progress..."})})]})},y=(e,t,s)=>{s&&s.current?(g||(g=(0,r.createRoot)(s.current)),g.render((0,f.jsx)(p,{animationManager:e}))):console.error("Invalid container reference")},w=()=>{console.log("Stopping Emotion Quiz..."),g&&(g.unmount(),g=null)}}}]);
//# sourceMappingURL=189.234e5e64.chunk.js.map